<div class="page-content" [class.ml0]="authenticationService.isSuperAdmin()">
	<div *ngIf="isScheduledCampaignLaunched" id="scheduleCompleted" class="alert alert-info alert-dismissable fade in">
		<a (click)="refService.hideDiv('scheduleCompleted')" class="close" aria-label="close">x</a>
		<strong>Editing This Scheduled Campaign Is Not Allowed As Campaign Already Launched</strong>
	</div>
	<div class="page-bar"> 
		<ul class="page-breadcrumb">
			<li *ngIf="!authenticationService.isSuperAdmin()">
				<i class="fa fa-home"></i>
				<a [routerLink]="refService.homeRouter">Home</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li *ngIf="authenticationService.isSuperAdmin()"><i class="fa fa-home"></i><a [routerLink]="['/home/dashboard/admin-report']">Admin Report</a><i class="fa fa-angle-right"></i></li>
			<li>
				<a>Manage Campaigns</a>
			</li>
		</ul>
	</div>
	 <ngx-loading [show]="isloading || refService.loadingPreview" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
	<div style="position: relative; top:-10px;">
		<app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="tabbable tabbable-custom tabbable-noborder">
				<div class="tab-content" >
					<div class="page-bar m10">
						<ul class="mix-filter col-xs-6 col-sm-12 col-md-6 p0 m0">
							<!-- <li class="hidden-xs" style="background: white; color: #616161;cursor: default;font-size: 14px;">Campaign Type:</li> -->
							<li class="filter" (click)="filterCampaigns('NONE',0)" [class.campaign-type-selected]="0 == selectedCampaignTypeIndex">All</li>
							<li class="filter" (click)="filterCampaigns('REGULAR',1)" [class.campaign-type-selected]="1 == selectedCampaignTypeIndex" *ngIf="campaignAccess.emailCampaign">Email</li>
							<li class="filter" (click)="filterCampaigns('VIDEO',2)" [class.campaign-type-selected]="2 == selectedCampaignTypeIndex" *ngIf="campaignAccess.videoCampaign">Video</li>
							<li class="filter" (click)="filterCampaigns('SOCIAL',3)" [class.campaign-type-selected]="3 == selectedCampaignTypeIndex" *ngIf="campaignAccess.socialCampaign">Social</li>
							<li class="filter" (click)="filterCampaigns('EVENT',4)" [class.campaign-type-selected]="4 == selectedCampaignTypeIndex" *ngIf="campaignAccess.eventCampaign">Event</li>
							<li class="filter" (click)="filterCampaigns('SMS',5)" [class.campaign-type-selected]="5 == selectedCampaignTypeIndex" *ngIf="campaignAccess.smsCampaign">SMS</li>
							<li class="filter" (click)="filterCampaigns('LANDINGPAGE',6)" [class.campaign-type-selected]="6 == selectedCampaignTypeIndex" *ngIf="campaignAccess.landingPageCampaign ||campaignAccess.partnerLandingPage || authenticationService.module.hasPartnerLandingPageAccess ">Page</li>
							<li class="filter" style="display: none;">Own Template</li>
						</ul>
						<div class="page-toolbar col-xs-6 col-sm-12 col-md-6">
							<div class="btn-group pull-right">
								<ng-container class='m10'>
									<span class="btn btn-xs" data-toggle="tooltip" data-placement="bottom" title="Calendar View" style="background-color:#e2e2e2"><i class="fa fa-calendar p10" [routerLink]="['/home/campaigns/calendar']"></i></span>
									<span class="btn btn-xs hidden-xs" data-toggle="tooltip" data-placement="bottom" title="List View" [class.disabled]="isListView" (click)="isListView = true" style="background-color:#e2e2e2"><i class="fa fa-th-list p10" aria-hidden="true"></i></span>
                         			<span class="btn btn-xs hidden-xs"  data-toggle="tooltip" data-placement="bottom" title="Grid View" [class.disabled]="!isListView" (click)="isListView = false" style="background-color:#e2e2e2"><i class="fa fa-th-large p10" aria-hidden="true"></i></span>
								</ng-container>
								<div class="inputs" align="right" style="float: right">
									<div style="float: left;">
										<select class="form-control" [(ngModel)]="selectedSortedOption" (ngModelChange)="getSortedResult($event)" style="position: relative;right: -3px;">
											<option *ngFor="let sortOption of sortByDropDown" [ngValue]="sortOption">{{sortOption.name}}</option>
										</select>
									</div>
									<div class="portlet-input input-inline input-small">
										<div class="input-icon right" style="position: relative;right: -11px;">
											<!-- <i class="icon-magnifier" (click)="searchCampaigns()" style="cursor: pointer;"></i>-->
											<input type="text" class="form-control" [(ngModel)]="searchKey" [ngModelOptions]="{standalone: true}" placeholder="Search" (keypress)="eventHandler($event.keyCode)">
                      <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="searchKey" (click)="searchKey=''"></button>
                      <button type="submit" class="search-box-item-click" (click)="searchCampaigns()"><i class="fa fa-search"></i></button>
                    </div>
									</div>
								</div>
							</div>
						</div>
					</div>

						<app-grid-loader *ngIf="httpRequestLoader.isLoading && !isListView"></app-grid-loader>
						<app-list-loader *ngIf="httpRequestLoader.isLoading && isListView"></app-list-loader>
					<section class='m10' *ngIf="totalRecords > 0 && !httpRequestLoader.isLoading && !httpRequestLoader.isServerError">
						<div class="">
							<table [class.bottomTableCss]="pagination.pagedItems.length<5" class='table tgrid table-hover table-sm hidden-xs' *ngIf="isListView">
								<thead>
									<tr>
                      <th colspan="2" style="width: 30%">Campaign</th>
                      <th class="center" style="width: 28%">Status</th>
                      <th class="center" style="width: 15%">Created On</th>
                      <th style="width: 25%;text-align:right">Actions</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor='let campaign of pagination.pagedItems; let i=index'>
										<td style="width: 10%;">
											<ng-container *ngIf="campaign.campaignType.indexOf('VIDEO') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/video-email.png" alt="Video Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('REGULAR') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/regular-email.png" alt="Regular Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('SOCIAL') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/social-campaign.png" alt="Social Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('EVENT') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/event-campaign.png" alt="Event Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('LANDINGPAGE') > -1">
													<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/landing-page.png" alt="Page Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('SMS') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/sms.png" alt="SMS Campaign">
											</ng-container>
											
                    					</td>
                     					<td>
											<h4 class="ellipsis campaign-title" title="{{campaign.campaignName}}">{{campaign.campaignName | slice:0:36}}
													<span *ngIf="campaign.campaignName?.length>36">...</span>
											</h4>
											<h5 [title]="campaign.createdBy">By <b>{{campaign.createdBy | slice:0:35 }}<span *ngIf="campaign.createdBy?.length>35">...</span></b></h5>
											<h5 [title]="campaign.companyName">From <b>{{campaign.companyName | slice:0:20 }}<span *ngIf="campaign.companyName?.length>20">...</span></b></h5>
											<h5 *ngIf="campaign.nurtureCampaign" [title]="campaign.vendorOrganizationName">Originated By <b>{{campaign.vendorOrganizationName | slice:0:20 }}<span *ngIf="campaign.vendorOrganizationName?.length>20">...</span></b></h5>
										    <h5 class="view-banner" *ngIf="campaign.launched && campaign.channelCampaign">Through Campaign</h5>
										    <h5 class="view-banner" *ngIf="campaign.launched && !campaign.channelCampaign && !campaign.nurtureCampaign">To Campaign</h5>
										    <h5 class="view-banner" *ngIf="campaign.launched && !campaign.showCancelButton && campaign.campaignType.indexOf('EVENT') > -1" style="background-color: red;">Cancelled</h5>
										    <h5 class="view-banner" *ngIf="!campaign.launched && (campaign.scheduleType==='SAVE' || campaign.scheduleType==='NOW')" style="background-color: #f76c1a !important">Draft</h5>
										    <h5 class="view-banner" *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled</h5>
										</td>
										<td class="center">
											<span align="right">
												<b *ngIf="campaign.launched">Launched On</b>
                        <ng-container *ngIf="!campaign.launched && campaign.scheduleType!=='SCHEDULE' && campaign.scheduleType!=='SAVE' && campaign.scheduleType!=='NOW'">
                          <b *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled For</b>
                          <b *ngIf="!campaign.launched && campaign.scheduleType==='NOW'">Saved On</b>
                          </ng-container>
                          <ng-container *ngIf="!campaign.launched && campaign.scheduleType">
                          <b *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled For</b>
                          <b *ngIf="!campaign.launched && (campaign.scheduleType==='SAVE' || campaign.scheduleType==='NOW')">Saved On</b>
                          </ng-container>
											</span>
											<span align="right" title="Upload Date">
												<!-- <b *ngIf="campaign.launched || !campaign.launched && campaign.launchedOn?.length > 0">{{campaign.launchedOn}}</b> -->
												<b *ngIf="campaign.scheduleType=='NOW' || campaign.scheduleType=='SCHEDULE'">
                        <app-timestamp *ngIf="!refService.isSafariBrowser()" [isOnlyDate]="false" [dateAndTime]="campaign.displayTime"> </app-timestamp>
                        <span *ngIf="refService.isSafariBrowser()">{{campaign.displayTime}}</span>
												</b>
												<b *ngIf="campaign.scheduleType=='SAVE'">
												<app-timestamp *ngIf="!refService.isSafariBrowser()" [isOnlyDate]="false" [dateAndTime]="campaign.displayTime"> </app-timestamp>
                        <span *ngIf="refService.isSafariBrowser()">{{campaign.displayTime}}</span>
                      </b>
											</span>
										</td>
										<td class="center">
										<app-timestamp [isOnlyDate]="true" [dateAndTime]="campaign.createdDate"> </app-timestamp>
										</td>
										<td class="center">
											<div class="actions-block override-actions">
												<!-- <ng-container *ngIf="!campaign.launched">
													<a *ngIf="hasAllAccess || (campaign.launched==false&&hasCampaignRole && loggedInUserId==campaign.userId)

												|| (!campaign.launched&&isOnlyPartner)  || authenticationService.module.isVendor" (click)="editCampaign(campaign)"
													 data-toggle="tooltip" data-placement="top" title="Edit Campaign">
														<i class="fa fa-pencil-square-o"></i>
													</a>
												</ng-container> -->
												<ng-container *ngIf="campaign.launched">
												<a *ngIf="(hasAllAccess || (hasStatsRole || hasCampaignRole ) ||
														 (loggedInUserId==campaign.userId) || authenticationService.module.isVendor) && campaign.channelCampaign && campaign.redistributedCount>0"
                         								 (click)="goToRedistributedCampaigns(campaign)" data-toggle="tooltip" data-placement="top" title="Show Redistributed Campaigns">
														<span class="circled-number"><b>{{campaign.redistributedCount}}</b></span>
												</a>

												<a *ngIf="(hasAllAccess || (hasStatsRole || hasCampaignRole ) ||
														 (loggedInUserId==campaign.userId) || authenticationService.module.isVendor) && campaign.channelCampaign && campaign.redistributedCount==0"
                         								  data-toggle="tooltip" data-placement="top" title="No Redistributed Campaigns">
														<span class="circled-number disabled"><b>{{campaign.redistributedCount}}</b></span>
												</a>


													<a *ngIf="  hasAllAccess || (hasStatsRole || hasCampaignRole) || (loggedInUserId==campaign.userId) || authenticationService.module.isVendor || isOnlyPartner"
													 data-rel="fancybox-button" (click)="campaginRouter(campaign)" data-toggle="tooltip" data-placement="top" title="{{actionsDescription.campaign_report}}">
														<i class="fa fa-line-chart"></i>
													</a>
													<!-- <a *ngIf="( hasAllAccess || (hasStatsRole || hasCampaignRole) || isOnlyPartner || authenticationService.module.isVendor) && !campaign.nurtureCampaign"
													 data-rel="fancybox-button" data-toggle="tooltip" data-placement="top" title="Copy campaign" (click)="openSaveAsModal(campaign)">
														<i class="fa fa-files-o"></i>
													</a> -->
													 <!-- <a *ngIf=" (hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor) && campaign.channelCampaign"
						                       		 (click)="goToPreviewPartners(campaign)"
						                       		 data-toggle="tooltip" data-placement="top" title="{{actionsDescription.campaign_preview_partner}}" data-rel="fancybox-button">
						                         		<i class="fa fa-handshake-o" id="partner-icon"></i>
						                       		</a> -->
												</ng-container>
												<!-- <a (click)="showCampaignPreview(campaign)" data-toggle="tooltip" data-placement="top" title="Preview">
													<i class="fa fa-eye mr5"></i>
                      						  </a> -->
						                        <!-- <a *ngIf=" hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor"
						                       		 (click)="confirmDeleteCampaign(campaign.campaignId, i, campaign.campaignName)" data-toggle="tooltip" data-placement="top" title="{{actionsDescription.campaign_delete}}" data-rel="fancybox-button">
						                         <i class="fa fa-trash-o"></i>
						                       </a> -->



						                       <ng-container class="pull-right">
						                       <div class="btn-group pull-right">
													<span class="glyphicon glyphicon-cog dropdown-toggle gearDropdownMenu" data-toggle="dropdown" (click)="checkLastElement(i)"></span><span
														class="caret dropdown-toggle caretDropdownMenu" data-toggle="dropdown"></span>

												<!-- <div class="btn-group pull-right"
													style="color: #008fd5;">
													<span class="dropdown-toggle" data-toggle="dropdown"
														style="color: #008fd5; box-shadow: none; margin-top: 8px; float: right;">
														<i class="fa fa-cog"
														style="font-size: 20px; margin-right: 5px"></i><i
														class="fa fa-angle-down"
														style="font-size: 14px; float: right"></i>
													</span> -->
													<ul class="dropdown-menu pull-right" [ngClass]="{'mobile-css': isLastElement}">
														<li   *ngIf="!campaign.launched">
														<ng-container *ngIf="!campaign.launched">
												  	<a *ngIf="hasAllAccess || (campaign.launched==false&&hasCampaignRole && loggedInUserId==campaign.userId)
											      	|| (!campaign.launched&&isOnlyPartner)  || authenticationService.module.isVendor" (click)="editCampaign(campaign)">
														<i class="fa fa-pencil-square-o" style="width: 30px;"></i>
														Edit
													</a>
											  	</ng-container>
														</li>
														<ng-container *ngIf="campaign.launched">
														<li    *ngIf="campaign.launched">
														<a *ngIf="( hasAllAccess || (hasStatsRole || hasCampaignRole) || isOnlyPartner || authenticationService.module.isVendor) && !campaign.nurtureCampaign"
													 data-rel="fancybox-button" (click)="openSaveAsModal(campaign)">
														<i class="fa fa-files-o" style="width: 30px;"></i>
														Copy Campaign
													</a>
													<a *ngIf="( hasAllAccess || (hasStatsRole || hasCampaignRole) || isOnlyPartner || authenticationService.module.isVendor) && campaign.publicEventAlias?.length==6 && campaign.campaignType.indexOf('EVENT') > -1"
													 data-rel="fancybox-button" (click)="openEventUrlModal(campaign)" title="Copy Public Event Url">
														<i class="fa fa-files-o" style="width: 30px;"></i>
														Copy Url
													</a>
														</li>
														<li   *ngIf=" (hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor) && campaign.channelCampaign">
														<a *ngIf=" (hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor) && campaign.channelCampaign"
						                                (click)="goToPreviewPartners(campaign)" data-rel="fancybox-button">
						                                <i class="fa fa-handshake-o" style="width: 30px;" id="partner-icon"></i>
						                                Preview & Delete Partner(s)
						                              </a>
														</li>
														</ng-container>
													<li  ><a (click)="showCampaignPreview(campaign)">
															<i class="fa fa-eye mr5" style="width: 30px;"></i> Preview Campaign
													</a></li>
													<section *ngIf="!campaign.showCancelButton">
														<li *ngIf="!campaign.showCancelButton && hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor">
														<a *ngIf=" hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor"
														(click)="confirmDeleteCampaign(campaign.campaignId, i, campaign.campaignName)"
														data-rel="fancybox-button"> <i class="fa fa-trash-o" style="width: 30px;"> </i>Delete
													</a>
													</li>
													</section>
													<section *ngIf="campaign.showCancelButton">
													<li *ngIf="campaign.showCancelButton && hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor">
                          <a *ngIf=" hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor"
                              data-toggle="modal" data-target="#cancelEventModal" title="Cancel Campaign" data-rel="fancybox-button" (click)="getCancelEventDetails(campaign.campaignId)">
                              <i class="fa fa-ban" style="width: 30px;"></i> Cancel Event
                            </a>
                            </li>
                          </section>
                          <section *ngIf="campaign.launched && campaign.campaignType === 'EVENT' && campaign.showCancelButton">
                          <li *ngIf="(authenticationService.isVendor() || authenticationService.isVendorPartner() || authenticationService.isOrgAdmin() || authenticationService.isOrgAdminPartner()) && !campaign.nurtureCampaign">
                            <a title="Update Event" data-rel="fancybox-button" (click)="updateEvent(campaign)">
                              <i class="fa fa-pencil" style="width: 30px;"></i> Update event
                            </a>
                          </li>
                          </section>
													</ul>
												<!-- </div> -->
												</div>
												</ng-container>
											</div>
										</td>
									</tr>
								</tbody>
							</table>

							<table class='table tgrid table-sm visible-xs' *ngIf="isListView">
								<thead>
									<tr>
										<th colspan="1">Campaign</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor='let campaign of pagination.pagedItems; let i=index'>
										<td class="hidden-xs" style="width: 10%;">
											<ng-container *ngIf="campaign.campaignType.indexOf('VIDEO') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/video-email.png" alt="Video Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('REGULAR') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/regular-email.png" alt="Regular Campaign">
											</ng-container>
											<ng-container *ngIf="campaign.campaignType.indexOf('SOCIAL') > -1">
												<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/social-campaign.png" alt="Social Campaign">
                      					</ng-container>
                      						<ng-container *ngIf="campaign.campaignType.indexOf('LANDINGPAGE') > -1">
													<img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/landing-page.png" alt="Page Campaign">
												</ng-container>
					                      <ng-container *ngIf="campaign.campaignType.indexOf('EVENT') > -1">
					                          <img class="imageClass" [ngClass]="{'active': campaign.launched, 'inactive': !campaign.launched}" src="assets/images/event-campaign.png" alt="Event Campaign">
					                      </ng-container>
										</td>
										<td>
											<h4 class="campaign-title" title="{{campaign.campaignName}}">{{campaign.campaignName | slice:0:25}}
													<span *ngIf="campaign.campaignName?.length>25">...</span>
											</h4>
											<h5 [title]="campaign.createdBy">By <b>{{campaign.createdBy | slice:0:20}}<span *ngIf="campaign.createdBy?.length>20">...</span></b></h5>
											<h5 [title]="campaign.companyName">From <b>{{campaign.companyName | slice:0:20}}<span *ngIf="campaign.companyName?.length>20">...</span></b></h5>
											<h5>
												<span *ngIf="campaign.launched">Launched On </span>
                        <ng-container *ngIf="!campaign.launched && campaign.scheduleType!=='SCHEDULE' && campaign.scheduleType!=='SAVE'">
                          <b *ngIf="!campaign.launched && campaign.launchedOn?.length > 0">Scheduled For</b>
                          <b *ngIf="!campaign.launched && campaign.launchedOn?.length==0">Saved On</b>
                          </ng-container>
                          <ng-container *ngIf="!campaign.launched && campaign.scheduleType">
                          <b *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled For</b>
                          <b *ngIf="!campaign.launched && campaign.scheduleType==='SAVE'">Saved On</b>
                          </ng-container>
												<span *ngIf="campaign.scheduleType=='NOW' || campaign.scheduleType=='SCHEDULE'">{{campaign.launchedOn}}</span>
												<span *ngIf="campaign.scheduleType=='SAVE'">{{campaign.startTime}}</span>
											</h5>
										</td>
										<td>
                      <div class="pull-right">
                      <div class="dropdown">
                        <i class="fa fa-ellipsis-v dropdown-toggle" data-toggle="dropdown"></i>
                        <ul class="dropdown-menu pull-right">
                          <ng-container *ngIf="!campaign.launched">
                              <li>
                                <a *ngIf="hasAllAccess || (campaign.launched==false&&hasCampaignRole && loggedInUserId==campaign.userId)
                                  || (!campaign.launched&&isOnlyPartner)  || authenticationService.module.isVendor" (click)="editCampaign(campaign)"
                                  data-toggle="tooltip" data-placement="top" title="Edit Campaign">
                                  <i class="fa fa-pencil-square-o"></i> Edit Campaign
                                </a>
                              </li>
                          </ng-container>
                          <ng-container *ngIf="campaign.launched">
                            <li>
                              <a *ngIf="hasAllAccess || (hasStatsRole || hasCampaignRole) || (loggedInUserId==campaign.userId) || authenticationService.module.isVendor || isOnlyPartner"
                                data-rel="fancybox-button" (click)="campaginRouter(campaign)" title="Campaign Based Reports">
                                <i class="fa fa-line-chart"></i> Campaign Analytics
                              </a>
                            </li>
                            <li>
                              <a *ngIf="( hasAllAccess || (hasStatsRole || hasCampaignRole) || isOnlyPartner || authenticationService.module.isVendor) && !campaign.nurtureCampaign"
                                data-rel="fancybox-button" title="Copy campaign" (click)="openSaveAsModal(campaign)">
                                <i class="fa fa-files-o"></i> Copy campaign
                              </a>
                              
                              <a *ngIf="( hasAllAccess || (hasStatsRole || hasCampaignRole) || isOnlyPartner || authenticationService.module.isVendor) && campaign.publicEventAlias?.length==6 && campaign.campaignType.indexOf('EVENT') > -1"
													 data-rel="fancybox-button" (click)="openEventUrlModal(campaign)" title="Copy Public Event Url">
								<i class="fa fa-files-o" style="width: 30px;"></i>Copy Url
								</a>
                            </li>
                          </ng-container>
                          <li>
                            <a *ngIf=" hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor"
                              (click)="confirmDeleteCampaign(campaign.campaignId, i, campaign.campaignName)" title="Delete Campaign" data-rel="fancybox-button">
                              <i class="fa fa-trash-o"></i> Delete Campaign
                            </a>
                          </li>
                        </ul>
                      </div>
                      </div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</section>
					<div *ngIf="totalRecords <= 0 && isListView" class="alert alert-info">
						<strong>No campaigns found</strong>
					</div>
					<div class="tab-pane active" *ngIf="!isListView">
						<div class="margin-top-10">
							<div class="row mix-grid p10">
								<app-error-pages *ngIf="httpRequestLoader.isServerError"></app-error-pages>
								<ng-container *ngIf="totalRecords > 0 && !httpRequestLoader.isLoading && !httpRequestLoader.isServerError">
									<div *ngFor="let campaign of pagination.pagedItems; let i= index" class="col-xs-12 col-sm-4 col-lg-3">
										<div class="grid-box" style="height:222px">
											<img src="https://cdn2.iconfinder.com/data/icons/facebook-ads-1/204/1-48.png">
											<h4 class="ellipsis" title="{{campaign.campaignName}}">{{campaign.campaignName | slice:0:22}}
												<span *ngIf="campaign.campaignName?.length>22">...</span>
												<br><br>

											<span class="view-banner" *ngIf="campaign.launched && campaign.channelCampaign" style="position: relative;top: -3px;">Through Campaign</span>
										    <span class="view-banner" *ngIf="campaign.launched && !campaign.channelCampaign && !campaign.nurtureCampaign" style="position: relative;top: -3px;">To Campaign</span>
										    <span class="view-banner" *ngIf="!campaign.launched && (campaign.scheduleType==='SAVE' || campaign.scheduleType==='NOW')" style="position: relative;top: -3px; background-color: #f76c1a !important">Draft</span>
											<span class="view-banner" *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'" style="position: relative;top: -3px;">Scheduled</span>
											</h4>
											<h6 [title]="campaign.createdBy">By <b>{{campaign.createdBy | slice:0:15}}<span *ngIf="campaign.createdBy?.length>15">...</span></b></h6>
											<h6 [title]="campaign.companyName">From <b>{{campaign.companyName | slice:0:15}}<span *ngIf="campaign.companyName?.length>15">...</span></b></h6>
											<h6 *ngIf="campaign.nurtureCampaign" [title]="campaign.vendorOrganizationName">Originated By <b>{{campaign.vendorOrganizationName | slice:0:20 }}<span *ngIf="campaign.vendorOrganizationName?.length>20">...</span></b></h6>
											<h6>
											<span>
												<span *ngIf="campaign.launched">Launched On</span>
											  <ng-container *ngIf="!campaign.launched && campaign.scheduleType!=='SCHEDULE' && campaign.scheduleType!=='SAVE' && campaign.scheduleType!=='NOW'">
						                          <b *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled For</b>
						                          <b *ngIf="!campaign.launched && campaign.scheduleType==='NOW'">Saved On</b>
						                          </ng-container>
						                          <ng-container *ngIf="!campaign.launched && campaign.scheduleType">
						                          <b *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled For</b>
						                          <b *ngIf="!campaign.launched && (campaign.scheduleType==='SAVE' || campaign.scheduleType==='NOW')">Saved On</b>
					                          </ng-container>
										</span>
										<span title="Upload date"><b>
											<span *ngIf="!refService.isSafariBrowser()">{{campaign.displayTime |date:'mediumDate'}},{{campaign.displayTime |date:'shortTime'}}</span>
					                        <span *ngIf="refService.isSafariBrowser()">{{campaign.displayTime}}</span>
					                      </b>
										</span>
											</h6>
											<div class="bookmark-ribbon">
												<span style="margin: 0px -7px; font-size: 17px; color: white;">
													<i *ngIf="campaign.campaignType.indexOf('VIDEO') > -1" class="fa fa-video-camera" aria-hidden="true"></i>
													<i *ngIf="campaign.campaignType.indexOf('REGULAR') > -1" class="fa fa-envelope" aria-hidden="true"></i>
                         							 <i *ngIf="campaign.campaignType.indexOf('SOCIAL') > -1" class="fa fa-globe" aria-hidden="true"></i>
                         							 <i *ngIf="campaign.campaignType.indexOf('EVENT') > -1" class="fa fa-calendar" aria-hidden="true"></i>
                         							  <i *ngIf="campaign.campaignType.indexOf('LANDINGPAGE') > -1" class="fa fa-wpforms" aria-hidden="true"></i>
												</span>
											</div>
											<div class="ribbon" [class.active]="!campaign.launched && campaign.launchedOn?.length==0">
												<span *ngIf="campaign.launched">Launched</span>
												<div  class="cancel-ribbon" *ngIf="campaign.launched && !campaign.showCancelButton && campaign.campaignType.indexOf('EVENT') > -1">Cancelled</div>
                        <ng-container *ngIf="!campaign.launched && campaign.scheduleType!=='SCHEDULE' && campaign.scheduleType!=='SAVE' && campaign.scheduleType!=='NOW'">
                          <span *ngIf="!campaign.launched && campaign.launchedOn?.length > 0">Scheduled</span>
                          <span *ngIf="!campaign.launched && campaign.launchedOn?.length==0">Saved</span>
                          </ng-container>
                          <ng-container *ngIf="!campaign.launched && campaign.scheduleType">
                          <span *ngIf="!campaign.launched && campaign.scheduleType==='SCHEDULE'">Scheduled</span>
                          <span *ngIf="!campaign.launched && (campaign.scheduleType==='SAVE' || campaign.scheduleType==='NOW')">Saved</span>
                          </ng-container>
											</div>
											<div class="bar" >
												<ng-container *ngIf="!campaign.launched">
													<a *ngIf="hasAllAccess || (campaign.launched==false && hasCampaignRole && loggedInUserId==campaign.userId)
														|| (!campaign.launched&&isOnlyPartner) || authenticationService.module.isVendor" (click)="editCampaign(campaign)" data-toggle="tooltip" data-placement="top" title="Edit Campaign">
														<i class="fa fa-pencil-square-o"></i>
													</a>
												</ng-container>
												<ng-container *ngIf="campaign.launched">
												<ng-container *ngIf="campaign.formsCount>0" >
													<a (click)="goToFormAnalytics(campaign.campaignId)"
													 data-rel="fancybox-button"  data-toggle="tooltip" data-placement="top" title="Form Analytics">
														<i class="fa fa-wpforms"></i>
													</a>
													<span class="badge" id="notification-list">{{campaign.formsCount}}</span>
												</ng-container>
												<a *ngIf="(hasAllAccess || (hasStatsRole || hasCampaignRole ) ||
														 (loggedInUserId==campaign.userId) || authenticationService.module.isVendor) && campaign.redistributedCount>0"
                         								 (click)="goToRedistributedCampaigns(campaign)" data-toggle="tooltip" data-placement="right" title="Show Redistributed Campaigns">
														<b style="color: white">{{campaign.redistributedCount}}</b>
													</a>

													<a *ngIf="  hasAllAccess || (hasStatsRole || hasCampaignRole ) || (loggedInUserId==campaign.userId) || authenticationService.module.isVendor || isOnlyPartner"
                         								 (click)="campaginRouter(campaign)" data-toggle="tooltip" data-placement="right" title="{{actionsDescription.campaign_report}}">
														<i class="fa fa-line-chart"></i>
													</a>
													<a *ngIf="( hasAllAccess || (hasStatsRole || hasCampaignRole) || isOnlyPartner || authenticationService.module.isVendor) && !campaign.nurtureCampaign"
													 data-rel="fancybox-button"  data-toggle="tooltip" data-placement="top" title="Copy campaign" (click)="openSaveAsModal(campaign)">
														<i class="fa fa-files-o"></i>
													</a>
													 <a *ngIf=" (hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor) && campaign.channelCampaign"
						                       		 (click)="goToPreviewPartners(campaign)"
						                       		 data-toggle="tooltip" data-placement="top" title="{{actionsDescription.campaign_preview_partner}}" data-rel="fancybox-button">
						                         		<i class="fa fa-handshake-o"></i>
						                       		</a>
													<!-- <a *ngIf="isOnlyPartner" data-rel="fancybox-button" (click)="openSaveAsModal(campaign.campaignId, campaign.campaignName)" title="Save As">
														<i class="fa fa-files-o"></i>
													</a> -->
                        </ng-container>
                         <span *ngIf="!campaign.showCancelButton">
                          <a (click)="showCampaignPreview(campaign)" data-toggle="tooltip" data-placement="top" title="Preview">
														<i class="fa fa-eye mr5"></i>
												  </a>
													<a *ngIf="!campaign.showCancelButton && hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor"
														(click)="confirmDeleteCampaign(campaign.campaignId, i, campaign.campaignName)" data-toggle="tooltip" data-placement="top" title="Delete Campaign">
														<i class="fa fa-trash-o"></i>
													</a>
													</span>

					            	 <span *ngIf="campaign.showCancelButton">
                          <a *ngIf="hasAllAccess ||  (hasCampaignRole && loggedInUserId==campaign.userId) || isOnlyPartner || authenticationService.module.isVendor"
                               data-toggle="tooltip" data-placement="top"  title="Cancel Event" data-rel="fancybox-button" (click)="getCancelEventDetails(campaign.campaignId)">
                              <i class="fa fa-ban"></i>
                            </a></span>
                            <span *ngIf="campaign.launched && campaign.campaignType === 'EVENT' && campaign.showCancelButton">
                          <a  *ngIf="(authenticationService.isVendor() || authenticationService.isVendorPartner() || authenticationService.isOrgAdmin() || authenticationService.isOrgAdminPartner()) && !campaign.nurtureCampaign"
                          data-toggle="tooltip" data-placement="top"  title="Update event" data-rel="fancybox-button" (click)="updateEvent(campaign)">
                              <i class="fa fa-pencil"></i>
                            </a></span>
											</div>
										</div>
									</div>
								</ng-container>
							</div>
						</div>
						<!-- End of 24 -->
						<div *ngIf="totalRecords <= 0 && !isListView" class="alert alert-info">
							<strong>No campaigns found</strong>
						</div>
					</div>
					<div [hidden]="totalRecords <= 0 || httpRequestLoader.isLoading || httpRequestLoader.isServerError" style="background:white">
						<div *ngIf="pagination.pagedItems.length !== 0" class="pg8">
							<app-pagination [pagination]="pagination" [type]="'campaign'" [isDropdown]="true" (notifyParent)="setPage($event)" ></app-pagination>
							<select class="form-control" style="float: right; width: auto;" [(ngModel)]="itemsSize" (ngModelChange)="getNumberOfItemsPerPage($event)">
								<!-- <option *ngFor="let itemPerPage of numberOfItemsPerPage" [ngValue]="itemPerPage">{{itemPerPage.name}}</option> -->
                <option [ngValue]="numberOfItemsPerPage[0]"> {{numberOfItemsPerPage[0].name}}</option>
                <option *ngIf="pagination.totalRecords>12" [ngValue]="numberOfItemsPerPage[1]"> {{numberOfItemsPerPage[1].name}}</option>
                <option *ngIf="pagination.totalRecords>24" [ngValue]="numberOfItemsPerPage[2]"> {{numberOfItemsPerPage[2].name}}</option>
                <option *ngIf="pagination.totalRecords>12" [ngValue]="numberOfItemsPerPage[3]"> {{numberOfItemsPerPage[3].name}}</option>
              </select>
						</div>
          </div>
				</div>
				<!-- End Of tab Content -->

			</div>
		</div>
	</div>
	<!-- <div *ngIf="totalRecords <= 0"  class="alert alert-info"><strong>No Campaigns Found</strong></div> -->
  <app-scroll-top></app-scroll-top>
</div>

<!-- Save As Modal -->
<div class="modal right fade" id="saveAsModal" tabindex="-1" role="dialog" aria-labelledby="saveAsModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-copy" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title f-w-600" id="saveAsModalLabel">Copy Campaign</h4>
				<button type="button" class="close-circle" data-dismiss="modal" style=" position: relative;top: -24px;">
					<i class="fa fa-times"></i>
				</button>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label for="campaignName">Campaign Name</label>
					<input class="form-control" type="text" id="campaignName" [(ngModel)]="saveAsCampaignName">
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" (click)="saveAsCampaign()">Save changes</button>
			</div>
		</div>
	</div>
</div>


<div id="campaignFilterModal" class="modal right fade" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-copy">
		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close-circle" data-dismiss="modal" aria-hidden="true">
					<i class="fa fa-times"></i>
				</button>
				<h4 class="modal-title">Filter</h4>
			</div>
			<div class="modal-body" style="padding: 28px;">
				<div class="row">
					<div class="col-sm-12">
						<input class="form-control" type="text">
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn green">Submit</button>
				<button type="button" class="btn green" data-dismiss="modal">Cancel</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade right" id="cancelEventModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close-circle" data-dismiss="modal" (click)="closeCancelEventodal()">
          <i class="fa fa-times"></i>
        </a>
        <h4 class="modal-title" id="myModalLabel">Canceling the event</h4>
      </div>
      <div class="modal-body">
        <section>
				<div class="col-xs-12 col-sm-12">
					<form class="form-horizontal">
						<div class="form-group">
							<label for="eventTitle"  class="col-sm-3 labal-css color-css">Event Title	</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" id="eventTitle" [attr.disabled]="true"
									placeholder="Event Title" [(ngModel)]="eventCampaign.campaign"
									[ngModelOptions]="{standalone: true}">
							</div>
						</div>
						<div class="form-group">
							<label for="hostedBy" class="col-sm-3 labal-css color-css">Hosted
								By <span class=text-danger>*</span>
							</label>
							<div class="col-sm-9">
								<input type="text"
									[attr.disabled]="true"
									class="form-control pull-left" placeholder="Hosted By"
									[(ngModel)]="eventCampaign.fromName"
									[ngModelOptions]="{standalone: true}">
							</div>
						</div>
						<div class="form-group">
							<label for="eventDateTime" class="col-sm-3 labal-css color-css">Event
								Date/Time <span class="text-danger" style="margin-left: -3px;">*</span>
							</label>
							<div class="col-sm-9 p0">
								<div class="col-sm-6">
									<input
										[attr.disabled]="true"
										type="text" id="startDatePicker"
										class="form-control flatpickr" placeholder="Start"
										[(ngModel)]="eventCampaign.campaignEventTimes[0].startTimeString"
										[ngModelOptions]="{standalone: true}">
								</div>
								<div class="col-sm-6">
									<input type="text" id="enDatePicker"
										[attr.disabled]="true"
										[disabled]="true"
										class="form-control flatpickr" placeholder="End"
										[(ngModel)]="eventCampaign.campaignEventTimes[0].endTimeString"
										[ngModelOptions]="{standalone: true}">
								</div>
                  <div class="col-sm-12">
                    <input type="checkbox" id="allDay" class="form-check-input mt10"
                        [attr.disabled]="true"
                        [checked]="eventCampaign.campaignEventTimes[0].allDay">
                        <label class="form-check-label" for="allDay" style="float:none"> All Day</label>
                  </div>
							</div>
						</div>

						<div class="form-group">
							<label for="hostedBy" class="col-sm-3 labal-css color-css">Online
								Meeting</label>
							<div class="col-sm-9">
								<switch [disabled]="true"
									[status]="eventCampaign.onlineMeeting"
									[onText]="callActionSwitch.onTextValue"
									[offText]="callActionSwitch.offTextValue"
									[onColor]="callActionSwitch.onGreenColorSwitch"
									[offColor]="callActionSwitch.offDefaultColor"
									[size]="callActionSwitch.size">
								</switch>
							</div>
						</div>
						<section *ngIf="!eventCampaign.onlineMeeting">
							<div class="form-group">
								<label for="hostedBy" class="col-sm-3 labal-css color-css">Location
									Name <span class="text-danger" style="position: absolute;">*</span>
								</label>
								<div class="col-sm-9">
									<input type="text"
										[attr.disabled]="true"
										class="form-control" id="eventDateTime"
										placeholder="Corporate headquarters, local restaurant, etc."
										[(ngModel)]="eventCampaign.campaignLocation.location"
										[ngModelOptions]="{standalone: true}">
								</div>
							</div>
							<div class="form-group">
								<label for="hostedBy" class="col-sm-3 labal-css color-css">Address</label>
								<div class="col-sm-9">
									<input type="text"
										[attr.disabled]="true"
										class="form-control" id="address1"
										placeholder="Street Address"
										maxlength="25"
										[(ngModel)]="eventCampaign.campaignLocation.street"
										[ngModelOptions]="{standalone: true}">
								</div>
								<div class="col-sm-offset-3 col-sm-9 pt10">
									<input type="text"
										[attr.disabled]="true"
										class="form-control" id="address2"
										placeholder="Address2"
										maxlength="25"
										[(ngModel)]="eventCampaign.campaignLocation.address2"
										[ngModelOptions]="{standalone: true}">
								</div>

								<div class="col-sm-offset-3 col-sm-9 pt10">
									<div class="col-sm-6" style="padding-left: 0px">
										<input type="text"
											[attr.disabled]="true"
											class="form-control" id="city" placeholder="City"
											[(ngModel)]="eventCampaign.campaignLocation.city"
											[ngModelOptions]="{standalone: true}">
									</div>
									<div class="col-sm-6" style="padding-right: 0px">
										<input type="text"
											[attr.disabled]="true"
											class="form-control" id="state" placeholder="State"
											[(ngModel)]="eventCampaign.campaignLocation.state"
											[ngModelOptions]="{standalone: true}">
									</div>
								</div>
								<div class="col-sm-offset-3 col-sm-9 pt10">
                  <div class="col-sm-6" style="padding-left: 0px">
                    <input type="text" 	class="form-control"  [attr.disabled]="true" [(ngModel)]="eventCampaign.campaignLocation.country" [ngModelOptions]="{standalone: true}">
									</div>
									<div class="col-sm-6" style="padding-right: 0px">
										<input type="text"
											[attr.disabled]="true"
											class="form-control" id="zip" placeholder="Zip" maxlength="10"
											[(ngModel)]="eventCampaign.campaignLocation.zip"
											[ngModelOptions]="{standalone: true}">
									</div>
								</div>
							</div>
						</section>
					</form>
				</div>
				<div class="form-group">
          <label class="col-sm-3 labal-css color-css">Email subject<font
            style="color: red"> <b>*</b>
          </font>
          </label>
          <div class="col-sm-9">
            <input type="text" id="subjectLine" placeholder="Cancel Event Subject Line"
              class="form-control" (input)="validateCancelEventButton()" [(ngModel)]="cancelEventSubjectLine"
              name="subjectLine"
              maxlength="200" />
          </div>
						</div>
        <div class="form-group">
          <label class="col-sm-3 labal-css color-css" style="padding-top: 25px;">Cancel Message<font
            style="color: red"> <b>*</b>
          </font>
          </label>
          <div class="col-sm-9" style="padding-top: 10px;">
            <textarea [(ngModel)]="cancelEventMessage" [ngModelOptions]="{standalone: true}" (input)="validateCancelEventButton()" placeholder="Add a comment..."></textarea>
          </div>
        </div>
        </section>
    </div>
    <div class="pull-right" style="margin: 0px 29px 0px 0px;">
        <div class="right-css">
        <button type="button" class="btn btn-default" data-dismiss="modal" (click)="closeCancelEventodal()">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="!cancelEventButton" (click)="cancelEvent()">Cancel Event</button>
        </div>
      </div>
  </div>
</div>
</div>
 <!-- ----------------------Copy Link Modal------------------- -->
  <div class="modal right " id="public-event-url-modal" data-backdrop="static">
    <div class="modal-dialog modal-lg" style="width: 75%;right:0">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close-circle" data-dismiss="modal">
            <i class="fa fa-times"></i>
          </button>
          <h4 class="modal-title text-center">DIRECT LINK FOR YOUR CAMPAIGN</h4>
        </div>
        <div class="modal-body">
          <app-response-message [customResponse]="copiedLinkCustomResponse" *ngIf="copiedLinkCustomResponse.isVisible">
          </app-response-message>
          <input type="text" class="form-control" readonly="readonly" value="{{authenticationService.APP_URL}}rsvp/{{publicEventAlias}}?type=YES" #publicEventCampaignUrlInput>
        </div>
        <div class="modal-footer">
          <a class="btn btn-primary" (click)="copyUrl(publicEventCampaignUrlInput)">Copy Link</a>
          <a data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
        </div>
      </div>
    </div>
  </div>
<app-preview-campaign *ngIf="previewCampaign" [previewCampaignId]="previewCampaign" [previewCampaignType]="campaignType" (closeNotifyParent)="closePreviewCampaign($event)"></app-preview-campaign>
