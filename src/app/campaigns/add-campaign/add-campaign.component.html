<div class="page-content" [class.ml0]="authenticationService?.isSuperAdmin()">
    <ngx-loading [show]="ngxLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="fa fa-home" aria-hidden="true"></i>
                <a [routerLink]="referenceService.homeRouter" translate>Home</a>
                <i class="fa fa-angle-right" aria-hidden="true"></i>
            </li>
            <li>
                <a [routerLink]="['../campaigns/select']" translate>Select Campaign</a>
                <i class="fa fa-angle-right" aria-hidden="true"></i>
            </li>
            <li>
                <a translate>Create Campaign</a>
            </li>
        </ul>
        <div id="folder-margin-xamp">
            <button class="btn btn-primary  btn-bt-aln" id="right" (click)="openCreateFolderPopup()"   translate>Create a Folder</button>
        </div>
    </div>
    <div id="campaign-details-and-launch-tabs">
        <!---Page bar-->
        <div class="page-bar p10">
            <div>
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="portlet light row steps-view">
                    <div class="col-block width" [attr.class]="campaignDetailsTabClass"   style="width: 50%;" (click)="showCampaignDetailsTab()">
                        <div  class="cenetered-block colorbox-1">
                            <img  alt="No Image Found" class="newicons" src="assets/images/campaignnew-icon/campaignDetails.svg">
                            <h5  class="hidden-xs text-clr" translate="" ng-reflect-translate="">Campaign Details & Templates</h5>
                        </div>
                    </div>
                    <div  class="col-block" [attr.class]="launchTabClass"  style="width: 50%;" (click)="showLaunchTab()">
                        <div  class="cenetered-block colorbox-2">
                            <img  alt="No Image Found" class="newicons" src="assets/images/campaignnew-icon/Partner.svg">
                            <h5 class="hidden-xs text-clr">
                                Select Partners & Launch
                            </h5>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!---Tab-1--->
        <div id="campaign-details">
            <!---Campaign Details---->
            <div class="portlet light shadow">
                <div class="portlet-body clearfix">
                    <div class="col-xs-12">
                    <form class="form-horizontal form-bordered form-label-stripped">
                        <fieldset class="scheduler-border">
                            <legend class="scheduler-border">Campaign details</legend>
                            <div>
                                <div class="col-xs-6">
                                    <div class="form-body">
                                        <!---Campaign Name-->
                                        <div class="form-group" [attr.class]="campaignNameDivClass">
                                            <label class="control-label col-sm-4 mName" translate>Campaign name
                                                <br><small class="mNameSave" translate>(Save as)</small>
                                                <span class="required">*</span>
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" autocomplete="off" id="campaignName" placeholder="Campaign Name" class="form-control" [(ngModel)]="campaign.campaignName" name="campaignName" (input)="validateCampaignName(campaign.campaignName);validateForm();validateField('campaignName');"/>
                                                <span class="pull-left required" *ngIf="!isValidCampaignName &&campaign.campaignName?.length>0">Already Exists</span>
                                            </div>
                                        </div>

                                        <!--Folder-->    
                                        <div class="form-group">
                                            <label class="control-label col-sm-4" translate>Folder
                                                <span class="required"><strong>*</strong></span>
                                            </label>
                                            <div class="col-sm-8">
                                                <select class="form-control" name="campaign.categoryId" [(ngModel)]="campaign.categoryId" style="width: 100%">
                                                    <option *ngFor="let category of categoryNames"
                                                        [ngValue]="category.id">
                                                        {{category.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>

                                        <!--Through Partner / To Partner / To Recipients-->
                                        <div class="form-group" *ngIf="!authenticationService?.module?.isMarketingCompany">
                                            <!--Through Partner Label-->
                                            <label class="control-label col-sm-4 cursor-pointer" data-toggle="tooltip" 
                                            data-placement="top" title="{{throughPartnerToolTipMessage}}">
                                                <span [className]="campaign?.channelCampaign ? 'custom-font-weight':''">Through {{authenticationService?.partnerModule?.customName}}</span>
                                            </label>
                                            <div class="col-sm-8 col-xs-6">
                                                <div class="email-options-checkbox-group email-options-notify">
                                                    <div>
                                                        <switch  [status]="campaign.channelCampaign" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.onTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onGreenColorSwitch" [size]="callActionSwitch.size"
                                                            (statusChange)="setChannelCampaign($event)">
                                                        </switch>
                                                    </div>
                                                    <!--To Partner Label-->
                                                    <div class="col-sm-11 col-xs-12 to-partner-padding">
                                                        <label class="cursor-pointer"  data-toggle="tooltip" data-placement="top" title="{{toPartnerToolTipMessage}}">
                                                            <span [className]="!campaign?.channelCampaign ? 'custom-font-weight':''">To {{authenticationService?.partnerModule?.customName}}</span>
                                                        </label>
                                                        <!--Help Access-->
                                                        <span class="info-color-xampc">
                                                            <i class="fa fa-question-circle toggle-info-xampc-change" data-html="true"
                                                                data-toggle="tooltip" data-placement="bottom" title="{{throughPartnerAndToPartnerHelpToolTip}}"
                                                                aria-hidden="true"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div> 
                                        </div>

                                        <!--White Labeled XNFR-255-->
                                        <div class="form-group" *ngIf="(campaignType=='page' && campaignAccess?.shareWhiteLabeledContent) || (campaign?.channelCampaign && campaignAccess?.shareWhiteLabeledContent && (campaignType=='email' || campaignType=='video'))">
                                        <label class="control-label col-sm-4" translate>White Labeled</label>
                                        <div class="col-sm-8">
                                            <switch class="pull-left" [status]="campaign?.whiteLabeled" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                (statusChange)="setWhiteLabeled($event)">
                                            </switch>
                                            <span class="info-color-xampc">
                                                <i class="fa fa-question-circle toggle-info-xampc" data-toggle="tooltip"
                                                    data-placement="top" aria-hidden="true"
                                                    title="Share As White Labeled Content"></i>
                                            </span>
                                        </div>
                                        </div>

                                        <!--View In Browser && GDPR Enabled--> 
                                        <ng-container *ngIf="campaignType=='email' && !campaign?.channelCampaign && campaignAccess?.salesEnablement">
                                            <!--View In Browser-->
                                            <div class="form-group">
                                                <label class="control-label col-sm-4" translate>View In Browser</label>
                                                <div class="col-sm-8">
                                                    <switch class="pull-left" [status]="campaign?.viewInBrowserTag" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                        (statusChange)="setViewInBrowser($event)">
                                                    </switch>
                                                    <span class="info-color-xampc">
                                                        <i class="fa fa-question-circle toggle-info-xampc" data-toggle="tooltip"
                                                            data-placement="top" aria-hidden="true"
                                                            title="Show / Hide View In Browser Tag"></i>
                                                    </span>
                                                </div>
                                            </div>

                                            <!--GDPR Enabled-->
                                            <div class="form-group" *ngIf="isGdprEnabled">
                                                <label class="control-label col-sm-4" translate>Unsubscribe Link</label>
                                                <div class="col-sm-8">
                                                    <switch class="pull-left" [status]="campaign?.unsubscribeLink" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                        (statusChange)="setUnsubscribeLink($event)">
                                                    </switch>
                                                    <span class="info-color-xampc">
                                                        <i class="fa fa-question-circle toggle-info-xampc" data-toggle="tooltip"
                                                            data-placement="top" aria-hidden="true"
                                                            title="Show / Hide Unsubscribe Link"
                                                            style="font-size: 20px;float: left;margin: -14px 0 0 15px;"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </ng-container>

                                        <!--One Click Launch-->
                                        <div class="form-group" *ngIf="campaign?.channelCampaign && campaignAccess?.oneClickLaunch && campaignType!='page'">
                                            <label class="control-label col-sm-4" translate>One-Click Launch</label>
                                            <div class="col-sm-8">
                                                <switch class="pull-left" [status]="campaign?.oneClickLaunch" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                    (statusChange)="setOneClickLaunch($event)">
                                                </switch>
                                                <span class="info-color-xampc">
                                                    <i class="fa fa-question-circle toggle-info-xampc" data-toggle="tooltip"
                                                        data-placement="top" aria-hidden="true"
                                                        title="{{oneClickLaunchToolTip}}"></i>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Co Branding Logo-->
                                        <div class="form-group" *ngIf="campaign?.channelCampaign">
                                            <label class="control-label col-sm-4" translate>Co-Branding Logo</label>
                                            <div class="col-sm-8">
                                                <switch class="pull-left" [status]="campaign.enableCoBrandingLogo" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                    (statusChange)="setCoBrandingLogo($event)">
                                                </switch>
                                                <span class="info-color-xampc">
                                                    <i class="fa fa-question-circle toggle-info-xampc" data-toggle="tooltip"
                                                        data-placement="top" aria-hidden="true"
                                                        title="Enable logo of your {{authenticationService?.partnerModule?.customName}} to be displayed in redistributed campaigns"
                                                        ></i>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Notify Partners-->
                                        <div class="form-group" *ngIf="!authenticationService?.module?.isMarketingCompany && campaign?.channelCampaign">
                                            <label class="control-label col-sm-4" translate>Notify {{authenticationService?.partnerModule?.customName}} ?</label>
                                            <div class="col-sm-8">
                                                <switch class="pull-left" [status]="campaign.emailNotification" [onText]="callActionSwitch.yesTextValue" [offText]="callActionSwitch.noTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                    (statusChange)="setPartnerEmailNotification($event)">
                                                </switch>
                                                <span class="info-color-xampc">
                                                    <i class="fa fa-question-circle toggle-info-xampc" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Send email notifications to your {{authenticationService?.partnerModule?.customName}} about your campaign"></i>
                                                </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-xs-6">
                                    <div class="form-body">
                                        <!---From Name-->
                                        <div class="form-group" [attr.class]="fromNameDivClass">
                                            <label class="control-label col-sm-4" translate>From Name
                                                <span class="required"> <strong>*</strong></span>
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" id="fromName" placeholder="From Name" class="form-control" [(ngModel)]="campaign.fromName" name="fromName" (input)="validateForm();validateField('fromName');" maxlength="200" autocomplete="off" />
                                            </div>
                                        </div>

                                        <!--Subject Line-->
                                        <div class="form-group" [attr.class]="subjectLineDivClass">
                                            <label class="control-label col-sm-4" translate>Subject Line
                                                <span class="required"> <strong>*</strong> </span>
                                            </label>
                                            <div class="col-sm-8 col-xs-12">
                                                <div class="input-group merge-tag-input-border">
                                                    <input type="text" id="subjectLineId" placeholder="{merge tag} + Subject line" class="form-control" [(ngModel)]="campaign.subjectLine" name="subjectLine" maxlength="1000" (input)="validateForm();validateField('subjectLine');" autocomplete="off" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default button-color" type="button" 
                                                        data-toggle="tooltip" data-placement="right"
                                                        title="Insert Merge Tags" (click)="openMergeTagsPopup('campaignSubjectLine',0)">
                                                            <i class="fa fa-plus-circle npcfs plus-color" aria-hidden="true"></i>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <!--From Email-->
                                        <div class="form-group" [attr.class]="fromEmaiDivClass">
                                            <label class="control-label col-sm-4" translate>From Email
                                                <span class="required">
                                                    <strong>*</strong>
                                                </span>
                                            </label>
                                            <div class="col-sm-8">
                                                <select class="form-control" name="campaign.email" [(ngModel)]="campaign.email" style="width: 100%" (change)="setFromName()">
                                                    <option *ngFor="let teamMember of teamMemberEmailIds"
                                                        [ngValue]="teamMember.emailId">
                                                        {{teamMember.emailId}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>

                                        <!--Pre Header-->
                                        <div class="form-group" [attr.class]="preHeaderDivClass">
                                            <label class="control-label col-sm-4" translate>Pre Header
                                                <span class="required"><strong>*</strong></span>
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" id="preHeader" placeholder="Preheader" class="form-control" [(ngModel)]="campaign.preHeader" name="preHeader" (input)="validateForm();validateField('preHeader');" maxlength="200" autocomplete="off" />
                                            </div>
                                        </div>

                                        <!--Notify Me When-->
                                        <div class="form-group" *ngIf="campaign?.emailNotification &&!campaign?.oneClickLaunch">
                                        <label class="control-label col-sm-4" translate>Notify Me When</label>
                                        <div class="col-sm-8">
                                            <div class="email-options-checkbox-group email-options-notify">
                                                <div class="email-options-checkbox clearfix">
                                                    <div>
                                                        <switch [status]="campaign.emailOpened" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                            (statusChange)="setEmailOpened($event)">
                                                        </switch>
                                                    </div>
                                                    <div class="col-sm-11 col-xs-12 to-partner-padding">
                                                        <label translate>Email is opened</label>
                                                    </div>
                                                </div>

                                                <div class="email-options-checkbox clearfix mt10">
                                                    <div>
                                                        <switch [status]="campaign.linkOpened" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                            (statusChange)="setLinkOpened($event)">
                                                        </switch>
                                                    </div>
                                                    <div class="col-sm-11 col-xs-12 to-partner-padding">
                                                        <label translate>Link is opened</label>
                                                    </div>
                                                </div>

                                                <div class="email-options-checkbox clearfix mt10" *ngIf="campaignType=='video'">
                                                    <div>
                                                        <switch [status]="campaign.videoPlayed" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                            (statusChange)="setVideoPlayed($event)">
                                                        </switch>
                                                    </div>
                                                    <div class="col-sm-11 col-xs-12 to-partner-padding">
                                                        <label translate>Video is played</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>

                                        <!--Configure Pipelines-->
                                        <div class="form-group" *ngIf="showConfigurePipelines && ((campaign?.channelCampaign && campaignAccess?.enableLeads && campaignType!='page') || (campaignAccess?.enableLeads && campaignType!='page' && showMarketingAutomationOption))">
                                            <label class="control-label col-sm-4" translate>Configure Pipelines</label>
                                            <div class="col-sm-8">
                                                <switch class="pull-left" [status]="campaign.configurePipelines" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                        (statusChange)="configurePipelines()">
                                                </switch>
                                                <span class="info-color-xampc">
                                                    <i class="fa fa-question-circle toggle-info-xampc" data-toggle="tooltip"
                                                        data-placement="top" aria-hidden="true"
                                                        title="Configure Pipelines for this Campaign"></i>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Lead Pipeline-->
                                        <div class="form-group" [attr.class]="leadPipelineClass" style="margin-bottom: 20px"
                                        *ngIf="campaign?.configurePipelines">
                                            <label class="control-label col-sm-4">Lead Pipeline<span class="required"><b>*</b></span></label>
                                            <div class="col-sm-8">
                                                <select class="form-control" [(ngModel)]="campaign.leadPipelineId" [ngModelOptions]="{standalone: true}"
                                                    placeholder="leadPipelineId" id="leadPipelineId" (change)="validateForm();">
                                                    <option [value]="0">Select Pipeline</option>
                                                    <option *ngFor="let pipeline of leadPipelines" [value]="pipeline.id">{{pipeline.name}}</option>
                                                </select>
                                            </div>
                                            
                                        </div>

                                        <!--Deal Pipeline-->  
                                        <div class="form-group" [attr.class]="dealPipelineClass" style="margin-bottom: 20px"
                                        *ngIf="campaign.configurePipelines">
                                            <label class="control-label col-sm-4">Deal Pipeline<span class="required"><b>*</b></span></label>
                                            <div class="col-sm-8">
                                                <select class="form-control" [(ngModel)]="campaign.dealPipelineId" [ngModelOptions]="{standalone: true}"
                                                    placeholder="dealPipelineId" id="dealPipelineId" (change)="validateForm();">
                                                    <option [value]="0">Select Pipeline</option>
                                                    <option *ngFor="let pipeline of dealPipelines" [value]="pipeline.id">{{pipeline.name}}</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- End Date -->
                                        <div class="form-group" [attr.class]="endDateDivClass" [hidden]="!campaign?.channelCampaign || campaignType == 'page'">
                                            <label class="control-label col-sm-4" translate>End Date</label>
                                            <div class="col-sm-8 flex">
                                                <div class="input-group">
                                                    <input type="text" id="campaignEndDatePicker" placeholder="YYYY-MM-DD" class="form-control flatpickr"
                                                        [(ngModel)]="campaign.endDate" name="endDate" [value]="campaign.endDate" />
                                                    <span class="input-group-btn flex" data-toggle="tooltip" data-placement="top" title="Clear">
                                                        <button class="btn btn-default margin-0px" type="button">
                                                            <i class="fa fa-refresh npcfs" aria-hidden="true" (click)="clearEndDate()"></i>
                                                        </button>
                                                    </span>
                                                </div>
                                                <div>
                                                    <span class="input-group-btn info-color-xampc" data-toggle="tooltip" data-placement="top"
                                                        title="A setting that specifies how long you want your campaign to run. When the campaign's end date arrives, your partners will be unable to redistribute it further. Each campaign's default setting is to have no end date, allowing partners to redistribute indefinitely.">
                                                        <i class="fa fa-question-circle toggle-info-xampc" aria-hidden="true"></i>
                                                    </span>
                                                </div>
                                                                                                                                                                                                
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </form>

                    </div>
                </div>
            </div>

            <!---Email Templates---->
            <div class="portlet light shadow">
                <div class="portlet-body clearfix">
                    <div class="col-xs-12">
                    <form class="form-horizontal form-bordered form-label-stripped">
                        <fieldset class="scheduler-border">
                            <legend class="scheduler-border">Select An Email Template</legend>
                            <app-landing-page-loader *ngIf="emailTemplatesOrLandingPagesLoader"></app-landing-page-loader>
                            <div class="col-xs-12 portlet light border-none" *ngIf="!emailTemplatesOrLandingPagesLoader">
                                <!--Filter Icon-->
                                <button type="submit"  class="float-right fontsize-16px" [ngClass]="isShowFilterDiv ? 'inactive':''" [disabled]="isShowFilterDiv" (click)="isShowFilterDiv = !isShowFilterDiv;findEmailTemplatesOrPagesFolder()">
                                    <i class="fa fa-filter cesf-xamp requried" data-toggle="tooltip" data-placement="bottom" title="Apply Filter"
                                    *ngIf="selectedFolderIds?.length>0" aria-hidden="true"></i>
                                    <i class="fa fa-filter cesf-xamp" data-toggle="tooltip" data-placement="bottom" title="Apply Filter"
                                    *ngIf="selectedFolderIds?.length==0" aria-hidden="true"></i>
                                </button>
                                <!--Search Key Icon-->
                                <div class="input-icon right pull-right pr-epx">
                                    <input type="text" [(ngModel)]="emailTemplatesSortOption.searchKey" [ngModelOptions]="{standalone: true}" class="form-control" placeholder="Search here" (keypress)="findEmailTemplatesOnEnterKeyPress($event.keyCode)">
                                    <button class="glyphicon glyphicon-remove search-box-item-clear search-button-padding" *ngIf="emailTemplatesSortOption.searchKey" (click)="emailTemplatesSortOption.searchKey='';searchEmailTemplates()"></button>
                                    <button type="submit" class="search-box-item-click email-search" (click)="searchEmailTemplates()" style="right: 9px !important;">
                                        <i class="fa fa-search cesf-xamp" aria-hidden="true"></i></button>
                                </div>
                                <!--Sort DropDown-->
                                <div class="input-icon right pull-right pr-epx">
                                    <select class="form-control" [(ngModel)]="emailTemplatesSortOption.selectedCampaignEmailTemplateDropDownOption" (ngModelChange)="sortEmailTemplates($event)" id="select-dropdown" [ngModelOptions]="{standalone: true}">
                                    <option   *ngFor="let option of emailTemplatesSortOption.eventCampaignRecipientsDropDownOptions" [ngValue]="option">{{option.name}}</option>
                                    </select>
                                </div>
                                <!--Filter Option-->
                                <div *ngIf="!filterCategoryLoader && isShowFilterDiv">
                                    <h4  translate>Apply Filter</h4>
                                    <ejs-multiselect [(ngModel)]='selectedFolderIds' [ngModelOptions]="{standalone: true}"
                                    [allowFiltering]='true' [ignoreAccent]='true' id='multiselectelement'
                                    [dataSource]='emailTemplateFolders' [fields]='folderFields'
                                    [placeholder]='folderFilterPlaceHolder'>
                                    </ejs-multiselect>
                                    <div class="float-right">
                                        <button class="btn btn-danger" (click)="clearFilter()">Clear</button>
                                        <button class="btn btn-info" (click)="applyFilter()">Apply</button>
                                    </div>
                                </div>
                                <!--List Of Email Templates-->
                                <div class="portlet-body">
                                    <div class="row">
                                        <form role="form" class="form-horizontal form-bordered form-label-stripped" aria-label="">
                                            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12 flex-row" *ngFor="let emailTemplate of emailTemplatesPagination?.pagedItems ;let i =index" >                         
                                                <div  class="row">
                                                    <div class="col-lg-12  col-md-12 col-sm-12 col-xs-12"> 
                                                        <div class="grid-box imgage-paddings"  [ngClass]="emailTemplate?.id === selectedEmailTemplateRow ? 'template-selected-border' :'' " (click)="selectEmailTemplate(emailTemplate)">
                                                            <span class="select-check-box" [class.hide]="emailTemplate?.draft">
                                                                <label>
                                                                    <input  type="radio" class="radio-custimization" [checked]="emailTemplate?.id === selectedEmailTemplateRow">
                                                                </label>
                                                            </span>
                                                            <img class="img-grid-track" onerror="this.src='assets/images/no-preview.jpg';" [src]="emailTemplate?.subject" alt="No Preview Found" />
                                                                <span class="icon-alignments"> 
                                                                    <a data-toggle="tooltip" data-placement="bottom" title="Preview" (click)="$event.stopPropagation();previewEmailTemplate(emailTemplate)" data-original-title="Preview">
                                                                    <i class="fa fa-external-link-square preview-edit-color tooltip-cls" aria-hidden="true"></i> </a> 
                                                                </span>
                                                                <div  class="bar hover-bar">
                                                                    <a  data-placement="top"  class="border-none-dark">
                                                                    <div class="row">
                                                                        <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12 emailtemp-content">
                                                                            <div class="content-hover-align fontsize-cls">
                                                                                <span class="item__name cardDetails-mar" data-toggle="tooltip" data-placement="bottom" [title]="emailTemplate?.name">
                                                                                    <strong>{{emailTemplate?.name |slice:0:20}}</strong>
                                                                                    <strong *ngIf="emailTemplate?.name?.length>20">..</strong>
                                                                                </span>
                                                                                <br>
                                                                                <span class="item__name" data-toggle="tooltip" data-placement="bottom" title="Created On" style="float:left; margin: 3px;">
                                                                                    <span>
                                                                                    <app-display-date-and-time [dateAndTimeUTCString]="emailTemplate?.createdDate"></app-display-date-and-time>
                                                                                    </span>
                                                                                </span>
                                                                                <p class="cardDetails-mar" data-toggle="tooltip" data-placement="bottom" title="{{emailTemplate?.createdBy}}">
                                                                                    <strong translate>Created By:</strong>
                                                                                    <span>{{emailTemplate?.createdBy|slice:0:25}}
                                                                                        <span *ngIf="emailTemplate?.createdBy?.length>25">..</span>
                                                                                    </span>
                                                                                </p>
                                                                                <span *ngIf="emailTemplate?.category?.length>0" class="campaign-email-template-category cardDetails-mar" data-toggle="tooltip" data-placement="bottom" title="{{emailTemplate?.category}}">
                                                                                    <strong translate>Folder:</strong>
                                                                                    <span >{{emailTemplate?.category|slice:0:25}}</span>
                                                                                    <span *ngIf="emailTemplate?.category?.length>25">..</span>
                                                                                </span> 
                                                                            </div> 
                                                                            <span class="label-color-custmization" (click)="$event.stopPropagation();editTemplate(emailTemplate)" >Edit</span>
                                                                        </div>       
                                                                    </div>
                                                                    </a>
                                                                </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="emailTemplatesPagination?.totalRecords==0 && !emailTemplatesOrLandingPagesLoader" class="alert alert-info">
                                                <strong>No Data Found.</strong>
                                            </div>
                                        </form>      
                                    </div>
                                </div>       
                            </div>
                            <!--Pagination-->
                            <div *ngIf="emailTemplatesPagination?.pagedItems?.length !== 0" class="" [hidden]="emailTemplatesOrLandingPagesLoader">
                                <app-pagination [pagination]="emailTemplatesPagination" (notifyParent)="paginateEmailTempaltes($event)" (notifyParentDropDown)="findEmailTemplates($event)">
                                </app-pagination>
                            </div>
                        </fieldset>
                    </form>
                    </div>
                </div>
            </div>
        </div>

        <!---Tab-2--->
        <div id="launch-tab">
            <!---Select Campaign Recipients---->
            <div class="portlet light shadow">
                <div class="portlet-body clearfix">
                    <div class="col-xs-12">
                    <form class="form-horizontal form-bordered form-label-stripped">
                        <fieldset class="scheduler-border">
                            <legend class="scheduler-border">{{contactsOrPartnersSelectionText}}</legend>
                            <app-list-loader *ngIf="campaignRecipientsLoader"></app-list-loader>
                            <div class="col-xs-12 portlet light border-none" *ngIf="!campaignRecipientsLoader">
                                <!--Search Key Icon-->
                                <div class="input-icon right pull-right pr-epx">
                                    <input type="text" [(ngModel)]="recipientsSortOption.searchKey" [ngModelOptions]="{standalone: true}" class="form-control" placeholder="Search here" (keypress)="findCampaignRecipientsOnEnterKeyPress($event.keyCode)">
                                    <button class="glyphicon glyphicon-remove search-box-item-clear search-button-padding" *ngIf="recipientsSortOption.searchKey" (click)="recipientsSortOption.searchKey='';searchCampaignRecipients()"></button>
                                    <button type="submit" class="search-box-item-click email-search search-icon-rp" (click)="searchCampaignRecipients()">
                                        <i class="fa fa-search cesf-xamp" aria-hidden="true"></i></button>
                                </div>
                                <!--Sort DropDown-->
                                <div class="input-icon right pull-right pr-epx">
                                    <select class="form-control cc mTopSort" [(ngModel)]="recipientsSortOption.selectedCampaignRecipientsDropDownOption"
                                    (ngModelChange)="sortRecipientsList($event)"  [ngModelOptions]="{standalone: true}">                                                    
                                    <option  *ngFor="let option of recipientsSortOption.campaignRecipientsDropDownOptions"
                                        [ngValue]="option">{{option.name}}</option>
                                </select> 
                                </div>
                                <!--List Of Contacts/Partners-->
                                <div class="portlet-body">
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table class="table tgrid table-hover table-sm" id="campaignRecipientsTable" role="grid" aria-describedby="" *ngIf="campaignRecipientsPagination?.totalRecords > 0">
                                                <thead>
                                                    <tr>
                                                        <th scope="row" class="text-center">
                                                            <input class="pointer" type="checkbox" name="all" [(ngModel)]="isHeaderCheckBoxChecked" (change)="checkAll($event)" id="checkAllExistingContacts" />
                                                        </th>
                                                        <th class="hidden-xs" *ngIf="showRecipientsSearchResultExpandButton" scope="col"></th>
                                                        <th class="hidden-xs" scope="row" colspan="2" style="width: 35%">
                                                            <span class="ui-column-resizer" (mousedown)="referenceService?.onMouseDown($event,'campaignRecipientsTable',2)"></span>
                                                            <span class="gridHeader" translate>List Name</span>
                                                        </th>
                                                        <th class="visible-xs" scope="row" colspan="1" style="width: 35%" translate>
                                                            List Info
                                                        </th>
                                                        <th scope="row" class="text-center" *ngIf="showContactType" translate>Type
                                                        </th>
                                                        <th scope="row" class="text-center" translate>Created On</th>
                                                        <th scope="row" class="text-center" translate>Count</th>
                                                        <th scope="row" class="text-center" translate>Preview </th>
                                                    </tr>
                                                </thead>
                                                <tbody class="pointer">   
                                                    <ng-container *ngFor="let contacts of campaignRecipientsPagination?.pagedItems;let i = index">
                                                        <tr role="row" id="campaignContactListTable_{{contacts.id}}" (click)="highlightContactRow(contacts,$event,contacts.count,contacts.emailValidationInd)" 
                                                            [class.contact-list-selected]="(selectedContactListIds.indexOf(contacts.id)>-1 && contacts.count>0)" >
                                                            <td class="text-center pointer">
                                                                <div class="form-group">
                                                                    <input type="checkbox" class="chk pointer" lang="{{contacts.name}}" id="{{contacts.id}}" [checked]="selectedContactListIds.indexOf(contacts.id)>-1" 
                                                                    name="campaignContact[]" value="{{contacts.id}}" (click)="highlightRow(contacts,$event)"
                                                                     [disabled]="(contacts.name==properties.activeMasterPartnerList  || contacts.name==properties.inActiveMasterPartnerList) && contacts.count==0">
                                                                </div>
                                                            </td>
                                                            <td class="cw" *ngIf="showRecipientsSearchResultExpandButton">
                                                                <div class="actions-block left-float">
                                                                  <a (click)="$event.stopPropagation();viewMatchedContacts(contacts)" data-toggle="tooltip" data-placement="bottom" title="Matched Results">
                                                                    <i class="fa" [ngClass]="{'fa-angle-right': !contacts.expand, 'fa-angle-down': contacts.expand}"
                                                                      aria-hidden="true" style=" padding-top: 0px;"></i>
                                                                  </a>
                                                                </div>
                                                            </td>
                                                            <td style="width: 10%;text-align: left;" class="hidden-xs">
                                                                <img  *ngIf="contacts?.socialNetwork=='ZOHO'" src="{{properties?.zohoImage}}" alt="Zoho" class="img-class-list">
                                                                <img *ngIf="contacts?.socialNetwork=='GOOGLE'" src="{{properties?.googleImage}}" alt="Google" class="img-class-list">
                                                                <img *ngIf="contacts?.socialNetwork=='SALESFORCE'" src="{{properties?.salesforceImage}}" alt="Salesforce" class="img-class-list"> 
                                                                <img *ngIf="contacts?.socialNetwork=='MANUAL'" src="{{properties?.manualImage}}" alt="Manual" class="img-class-list list-icons-sm">
                                                                <img *ngIf="contacts?.socialNetwork=='HUBSPOT'" src="{{properties?.hubspotImage}}" alt="Hubspot" class="img-class-list">
                                                                <img *ngIf="contacts?.socialNetwork=='MARKETO'" src="{{properties?.marketoImage}}" alt="Marketo" class="img-class-list">
                                                                <img *ngIf="contacts?.socialNetwork=='MICROSOFT'" src="{{properties?.microsoftImage}}" alt="Microsoft" class="img-class-list">
                                                                <img *ngIf="contacts?.socialNetwork=='PIPEDRIVE'" src="{{properties?.pipedriveImage}}" alt="Pipedrive" class="img-class-list">
        
                                                              </td>
                                                              <td style="text-align: left;">
                                                                <h4 class="moreipsis mt5 mb5 f-w-600" data-toggle="tooltip" data-placement="bottom" title="{{contacts?.name}}">
                                                                    <span><strong>{{contacts?.name}}</strong></span>
                                                                </h4>
                                                                <h6 class="moreipsis" data-toggle="tooltip" data-placement="bottom" title="{{contacts?.createdName}}">
                                                                    <span translate> Created By <strong>{{contacts?.creatorName}}</strong></span>
                                                                </h6>
                                                                <ng-container *ngIf="!contacts?.partnerList">
                                                                    <div style="display: inline-flex;">
                                                                        <h6 class="view-banner" translate>
                                                                            <span *ngIf="contacts?.publicList" data-toggle="tooltip" data-placement="top"
                                                                            data-toggle="tooltip" data-placement="bottom"   title="{{actionsDescription?.contact_list_public}}" translate>Public
                                                                            </span>
                                                                            <span *ngIf="!contacts?.publicList" data-toggle="tooltip" data-placement="top"
                                                                            data-toggle="tooltip" data-placement="bottom"  title="{{actionsDescription?.contact_list_private}}" translate>Private
                                                                            </span>
                                                                        </h6> 
                                                                        <h6 *ngIf="contacts?.formList" class="view-banner view-banner-green" translate>
                                                                            <span data-toggle="tooltip" data-placement="top"
                                                                            data-toggle="tooltip" data-placement="bottom"   title="This list is associated with a form." translate>Form Contact List
                                                                            </span>
                                                                        </h6>                                                                           
                                                                    </div>                                                                        
                                                                </ng-container>
                                                            </td>
                                                            <td class="text-center" *ngIf="showContactType">
                                                                <div>
                                                                    <span  (mouseover)='showContactsAlert(contacts.count)' data-toggle="tooltip" data-placement="bottom" [attr.title]="emptyContactsMessage">
                                                                        <ng-container *ngIf="contacts?.listType=='Partners'">
                                                                            {{authenticationService?.partnerModule?.customName}}
                                                                        </ng-container>    
                                                                        <ng-container *ngIf="contacts?.listType!='Partners'">
                                                                            {{contacts?.listType}}
                                                                        </ng-container>                                                                                                                                       
                                                                    </span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center sorting_1">
                                                                <app-display-date-and-time [dateAndTimeUTCString]="contacts?.createdTimeInString"></app-display-date-and-time>
                                                            </td>
                                                            <td class="text-center">
                                                                {{contacts?.count}}
                                                            </td>
                                                            <td class="text-center">
                                                                <a (click)="$event.stopPropagation();previewUsers(contacts)">
                                                                    <i class="fa fa-eye" aria-hidden="true"style="color: #008fd5;padding-top: 3px; font-size: 20px;" data-toggle="tooltip" data-replacement="bottom" title="Preview" data-original-title="Preview"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <tr role="row" *ngIf="contacts?.expand">
                                                            <td colspan="12">
                                                              <app-userlist-users [searchKey]="campaignRecipientsPagination.searchKey" [userListId]="contacts.id"></app-userlist-users>
                                                            </td>
                                                        </tr>
                                                    </ng-container>                                                     
                                                </tbody>
                                                </table>
                                        </div>  
                                    </div>   
                                 </div>    
                            </div>
                            <!--Pagination-->
                            <div *ngIf="campaignRecipientsPagination?.pagedItems?.length !== 0" class="" [hidden]="campaignRecipientsLoader">
                                <app-pagination [pagination]="campaignRecipientsPagination" (notifyParent)="paginateCampaignRecipients($event)" (notifyParentDropDown)="findCampaignRecipients($event)">
                                </app-pagination>
                            </div>
                        </fieldset>
                    </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

       <!---Edit Template---->
       <div id="edit-campaign-template" style="display: none;">
        <div class="portlet light shadow">
            <div *ngIf="!isEditTemplateLoader" class="caption-subject font-red-sunglo f-w-600 text-left zeropx">
                {{beeContainerInput?.emailTemplateName}}
                <div>
                <a class="close-circle pull-right" (click)="hideEditTemplateDiv()"
                 [ngStyle]="{'margin-top':isShowEditTemplatePopup && campaignType=='page'? '10px':''}">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </a>
                <app-preview-popup #previewPopUpComponent *ngIf="isShowEditTemplatePopup && campaignType=='page'"></app-preview-popup>
                <app-merge-tags *ngIf="isShowEditTemplatePopup"  [input]="editTemplateMergeTagsInput"></app-merge-tags>
                <button  class="new-tab-button" *ngIf="isShowEditTemplatePopup && campaignType=='page'">
                    Open Links In New Tab <input type="checkbox" [(ngModel)]="beeContainerInput.openLinksInNewTab">
                  </button>
                </div>
            </div>
          <div class="portlet-body clearfix">
              <div *ngIf="isShowEditTemplateMessageDiv"  [className]="templateMessageClass">
                    <strong>{{templateUpdateMessage}}</strong>
              </div>
              <app-modal-popup-loader *ngIf="isEditTemplateLoader"></app-modal-popup-loader>
              <app-bee-template-util *ngIf="!isEditTemplateLoader && isShowEditTemplatePopup"  [beeContainerInput]="beeContainerInput" (notifyParentComponent)="updateTemplate($event)"></app-bee-template-util>
        </div>
        </div>
    </div>



</div>

<app-add-folder-modal-popup #addFolderModalPopupComponent (notifyChild)="showSuccessMessage($event)"></app-add-folder-modal-popup>
<app-merge-tags *ngIf="mergeTagsInput?.hideButton" [input]="mergeTagsInput" (notifyComponent)="clearHiddenClick()" (passValueAndNotifyComponent)="appendValueToSubjectLine($event)"></app-merge-tags>
<app-send-test-email *ngIf="isSendTestEmailOptionClicked || isPreviewEmailTemplateButtonClicked"
 [id]="selectedEmailTemplateIdForPreview"
  [isPreviewEmailTemplate]="isPreviewEmailTemplateButtonClicked" 
  [templateName]="selectedEmailTemplateNameForPreview"
  (sendTestEmailComponentEventEmitter)="sendTestEmailModalPopupEventReceiver()"></app-send-test-email>
  <ng-container *ngIf="showUsersPreview">
    <app-preview-user-list [userListName]="selectedListName" [userListId]="selectedListId" (notifyParentComponent)="resetValues()"></app-preview-user-list>
 </ng-container>

