<!--Partner Companies-->
<div class="col-xs-12 col-sm-12 col-lg-12 col-md-12 row-fluid p0">
<app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>
<div class="dataTables_wrapper form-inline no-footer pt10" *ngIf="!httpRequestLoader.isLoading">
    <div class="note-vid pull-left">
        Select One {{authenticationService?.partnerModule?.customName}} Company
    </div>
    <!---Search & Sort-->
    <div class="inputs pull-right">
        <div class="input-icon right" id="icon-right">
            <input type="text" id="search-text" class="form-control" [(ngModel)]="pagination.searchKey"
              [ngModelOptions]="{standalone: true}" placeholder="Search..."
              (keypress)="eventHandler($event.keyCode)" autocomplete="off">
            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="pagination.searchKey"
              (click)="pagination.searchKey='';searchPartnerCompanies()"></button>
            <button type="submit" class="search-box-item-click" (click)="searchPartnerCompanies()">
              <i class="fa fa-search" aria-hidden="true"></i></button>
        </div>
    </div>
    <!--List-->
    <div class="col-xs-12 col-sm-12 col-lg-12 row-fluid p0">
        <div class="table-responsive">
            <table class="table tgrid table-hover table-sm" id="one-click-partner-company-table" role="grid" aria-describedby="" *ngIf="pagination.totalRecords > 0">
                <thead>
                    <tr>
                       <th scope="col"></th>
                       <th scope="col">Company Logo</th>
                       <th scope="col" class="text-center">Company Name</th>
                       <th scope="col">Created Time</th>
                       <th scope="col" class="text-center">Share Leads</th>
                    </tr>
                 </thead>
                 <tbody>
                    <ng-container *ngFor="let partner of pagination.pagedItems ;let i =index">
                        <tr [class.xamp-tr-selected]="selectedPartnershipId==partner.partnershipId">
                            <td class="cw">
                                <input class="form-control" value="{{partner.partnershipId}}" id="one-launch-campaign-radio-{{partner.partnershipId}}" type="radio" name="one-launch-campaign-partner-company" (click)="expandShareLeadsDiv(partner)">
                            </td>
                            <td style="width: 10%;" title="{{partner?.companyName}}">
                                <div class="thumbnail-wrapper">
                                   <img alt="No image found" onerror="this.src='assets/images/company-profile-logo.png';" [src]="authenticationService.MEDIA_URL+partner.companyLogo">
                                </div>
                            </td>
                            <td class="text-center">
                                <span title="{{partner?.companyName}}">{{partner?.companyName | slice:0:50}}</span>
                                <span *ngIf="partner?.companyName.length>50">...</span>
                                <h5>
                                    <strong>
                                        Company Name By Vendor : 
                                        <span title="{{partner?.companyNameAddedByVendor}}">{{partner?.companyNameAddedByVendor | slice:0:50}}</span>
                                        <span *ngIf="partner?.companyNameAddedByVendor.length>50">...</span>
                                    </strong>
                                </h5>
                            </td>
                            <td>
                                <app-display-date-and-time	[dateAndTimeUTCString]="partner?.createdTimeInString"> </app-display-date-and-time>
                            </td>
                            <td class="text-center">
                                <div [ngClass]="{'actions-block float-none': selectedPartnershipId!=partner.partnershipId, 'actions-block-selected': selectedPartnershipId==partner.partnershipId}">
                                    <a  (click)="viewShareLeads(partner)" title="Select Share Leads">
                                        <i class="fa" [ngClass]="{'fa-plus': !partner.expand, 'fa-minus': partner.expand}" aria-hidden="true"></i>
                                     </a>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="partner?.expand">
                            <td colspan="5" class="bgc-lg">
                               <div class="table-responsive x-hidden">
                                  <div class="portlet-input input-inline float-right mb10p" id="search-div">
                                     <div class="input-icon right" id="icon">
                                        <input type="text" id="sort-text" class="form-control" [(ngModel)]="shareLeadsPagination.searchKey" [ngModelOptions]="{standalone: true}" placeholder="search..." (keypress)="shareLeadsEventHandler($event.keyCode)">
                                        <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="shareLeadsPagination?.searchKey" (click)="shareLeadsPagination.searchKey='';searchShareLeadsList();"></button>
                                        <button type="submit" class="search-box-item-click" (click)="searchShareLeadsList()">
                                            <i class="fa fa-search" aria-hidden="true"></i>
                                        </button>
                                     </div>
                                  </div>
                                  <ng-container *ngIf="!shareLeadsLoader.isLoading && shareLeadsErrorMessage.isVisible">
                                     <div class="custom-response-padding text-center">
                                        <app-response-message [customResponse]="shareLeadsErrorMessage"></app-response-message>
                                  </div>
                                  </ng-container>
                                  <div *ngIf="shareLeadsErrorMessage.responseType!='ERROR'">
                                    <app-auto-response-loader *ngIf="shareLeadsLoader.isLoading"></app-auto-response-loader>
                                    <ng-container *ngIf="!shareLeadsLoader.isLoading">
                                        <table  class="table tgrid table-condensed child-table-xamp bgc-lg" aria-describedby="" id="one-click-share-leads-{{partner?.partnershipId}}">
                                            <thead>
                                                <tr>
                                                <th *ngIf="selectedPartnershipId==partner.partnershipId" scope="row" class="text-center" [hidden]="shareLeadsPagination.totalRecords==0">
                                                    <input type="checkbox"  [(ngModel)]="isHeaderCheckBoxChecked" id="one-click-share-leads-header-checkbox-id"
                                                    (change)="selectOrUnselectAllRowsOfTheCurrentPage($event,partner.partnershipId)">
                                                </th>
                                                <th *ngIf="selectedPartnershipId!=partner.partnershipId" scope="row" class="text-center" [hidden]="shareLeadsPagination.totalRecords==0">
                                                    <input type="checkbox" title="Please select the company" disabled>
                                                </th>
                                                <th scope="row" colspan="2">List Name</th>
                                                <th class="text-center" translate>Total Leads</th>
                                                <th class="text-center" translate>Created Time</th>
                                                <th class="text-center" translate>Preview</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let shareLead of shareLeadsPagination.pagedItems;let i = index;" id="one-click-share-leads-tr-{{shareLead.id}}" [class.xamp-tr-selected]="selectedShareLeadsListIds.indexOf(shareLead.id)>-1 && selectedPartnershipId==partner.partnershipId" (click)="highlightSelectedShareLeadsListRowOnRowClick(shareLead.id,partner.partnershipId,$event)" >
                                                    <td class="text-center">
                                                        <input type="checkbox" id="{{shareLead.id}}" [title]="selectedPartnershipId!=partner.partnershipId ? 'Please select company':''" [disabled]="selectedPartnershipId!=partner.partnershipId"  [checked]="selectedShareLeadsListIds.indexOf(shareLead.id)>-1 && selectedPartnershipId==partner.partnershipId" name="oneClickShareLeadsCheckBox[]"   value="{{shareLead.id}}" (click)="highlightSelectedShareLeadsListRowOnCheckBoxClick(shareLead.id,partner.partnershipId,$event)">
                                                    </td>

                                                    <td style="width: 10%;" class="hidden-xs">
                                                        <img *ngIf="shareLead.socialNetwork=='ZOHO' && shareLead.synchronisedList" src="{{properties?.zohoImage}}"
                                                        alt="zoho" style="height: 70px;">
                                                        <img *ngIf="shareLead.socialNetwork=='GOOGLE' && shareLead.synchronisedList" src="{{properties?.googleImage}}"
                                                        alt="google" style="height: 70px;">
                                                        <img *ngIf="shareLead.socialNetwork=='SALESFORCE' && shareLead.synchronisedList"
                                                        src="{{properties?.salesforceImage}}" alt="salesforce" style="height: 70px;"> <img
                                                        *ngIf="shareLead.socialNetwork=='MANUAL' || !shareLead.synchronisedList" src="{{properties?.manualImage}}"
                                                        alt="manual" style="height: 70px;">
                                                        <img *ngIf="shareLead.socialNetwork=='HUBSPOT' && shareLead.synchronisedList" src="{{properties?.hubspotImage}}"
                                                        alt="manual" style="height: 70px;">
                                                        <img *ngIf="shareLead.socialNetwork=='MARKETO' && shareLead.synchronisedList" src="{{properties?.marketoImage}}"
                                                        alt="manual" style="height: 70px;">
                                                        <img
                                                        *ngIf="(!shareLead.marketoMasterList && !shareLead.emailValidationInd) || (shareLead.marketoMasterList && (!shareLead.marketoSyncComplete || !shareLead.emailValidationInd))"
                                                        src="assets/images/Spinner.gif"
                                                        style="width: 55px; margin-top: -88px; margin-left: 17px;" alt="">
                                                    </td>

                                                    <td>
                                                        <h4 class="moreipsis" title="{{shareLead.name}}">
                                                        <span> {{shareLead.name}}</span>
                                                        </h4>
                                                        <h5 class='m0 ellipsis' title="{{shareLead.uploadedBy}}" translate>
                                                        By <span class='f-w-400'>{{shareLead.uploadedBy| slice:0:50}} 
                                                                <span *ngIf="shareLead.uploadedBy?.length>50">...</span>
                                                            </span>
                                                        </h5>
                                                        <h5 class="mb0 ellipsis" title="{{shareLead.companyName}}">
                                                            <strong>{{shareLead.companyName | slice:0:50}}</strong> 
                                                            <span *ngIf="shareLead.companyName?.length>50">...</span>
                                                        </h5>
                                                    </td>
                                                    <td class="text-center">
                                                        {{shareLead?.noOfContacts}}
                                                    </td>
                                                    <td class="text-center">
                                                        <app-display-date-and-time [dateAndTimeUTCString]="shareLead?.createdDate"></app-display-date-and-time>
                                                    </td>
                                                    <td class="text-center">
                                                        <div class="actions-block float-none">
                                                            <a title="Preview" (click)="previewLeads(shareLead)">
                                                                <i class="fa fa-eye" aria-hidden="true"></i>
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                        </table>
                                    </ng-container>
                                    <!---Pagination-->
                                    <div [hidden]="shareLeadsLoader.isLoading || shareLeadsPagination.totalRecords==0" class="pg8">
                                        <app-pagination [pagination]="shareLeadsPagination" (notifyParent)="navigateToShareLeadsListNextPage($event)" (notifyParentDropDown)="findShareLeads($event)">
                                        </app-pagination>
                                    </div>
                                    <div *ngIf="shareLeadsPagination.totalRecords==0 && !shareLeadsLoader.isLoading" class="alert alert-info text-center">
                                        <strong>No Data Found</strong>
                                    </div>
                                  </div>
                               </div>
                            </td>
                        </tr>
                    </ng-container>
                 </tbody>
            </table>
            <!--Pagination-->
            <div *ngIf="pagination.totalRecords > 0 && !httpRequestLoader.isLoading" class="pg8">
                <app-pagination [pagination]="pagination" (notifyParent)="navigateToNextPage($event)" (notifyParentDropDown)="findPartnerCompanies($event)">
                </app-pagination>
            </div>
            <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info text-center">
                <strong>No Data Found</strong>
            </div>
        </div>
    </div>
</div>
</div>

<ng-container *ngIf="showLeadsPreview">
    <app-preview-user-list [userListName]="selectedListName" [userListId]="selectedListId" (notifyParentComponent)="resetValues()"></app-preview-user-list>
</ng-container>