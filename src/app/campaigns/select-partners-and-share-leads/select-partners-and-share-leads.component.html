<!--Partner Companies-->
<div class="col-xs-12 col-sm-12 col-lg-12 col-md-12 row-fluid p0">
   <app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>
   <div class="dataTables_wrapper form-inline no-footer pt10" *ngIf="!httpRequestLoader.isLoading">
      <div class="note-vid pull-left" *ngIf="!hideHeaderText">
         Select One {{authenticationService?.partnerModule?.customName}} Company
      </div>
      <!---Search & Sort-->
      <div class="inputs pull-right">
         <div class="input-icon right" id="icon-right">
            <input type="text" id="search-text" class="form-control" [(ngModel)]="pagination.searchKey"
               [ngModelOptions]="{standalone: true}" placeholder="Search..." (keypress)="eventHandler($event.keyCode)"
               autocomplete="off">
            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="pagination.searchKey"
               (click)="pagination.searchKey='';searchPartnerCompanies()"></button>
            <button type="submit" class="search-box-item-click" (click)="searchPartnerCompanies()">
               <i class="fa fa-search" aria-hidden="true"></i></button>
         </div>
      </div>
      <!--List-->
      <div class="col-xs-12 col-sm-12 col-lg-12 row-fluid p0 mt5">
         <div class="table-responsive">
            <table class="table tgrid table-hover table-sm" id="one-click-partner-company-table" role="grid"
               aria-describedby="" *ngIf="pagination.totalRecords > 0">
               <thead>
                  <tr>
                     <th scope="col"></th>
                     <th scope="col">Company Logo</th>
                     <th scope="col" class="text-center">Company Name</th>
                     <th scope="col">Created Time</th>
                     <th scope="col" class="text-center">Share Leads</th>
                  </tr>
               </thead>
               <tbody>
                  <ng-container *ngFor="let partner of pagination.pagedItems ;let i =index">
                     <tr [class.xamp-tr-selected]="selectedPartnershipId==partner?.partnershipId">
                        <td class="cw">
                           <input *ngIf="selectedPartnershipId!=partner?.partnershipId" class="form-control remove_checkbox_shadow pointer radioButton_shadow"
                              value="{{partner?.partnershipId}}" id="one-launch-campaign-radio-{{partner?.partnershipId}}"
                              type="radio" name="one-launch-campaign-partner-company"
                              [checked]="selectedPartnershipId==partner?.partnershipId"
                              [disabled]="selectedPartnershipId==partner?.partnershipId"
                              (click)="selectPartnerCompanyAndExpandShareLeadsList(partner)">
                         <i *ngIf="selectedPartnershipId==partner?.partnershipId" class="fa fa-check-circle-o success"></i>
                        </td>
                        <td class="wtpc" title="{{partner?.companyName}}">
                           <div class="thumbnail-wrapper">
                              <img alt="No image found" onerror="this.src='assets/images/company-profile-logo.png';"
                                 [src]="authenticationService.MEDIA_URL+partner?.companyLogo">
                           </div>
                        </td>
                        <td class="text-center">
                           <span title="{{partner?.companyName}}">{{partner?.companyName | slice:0:50}}</span>
                           <span *ngIf="partner?.companyName.length>50">...</span>
                           <h5>
                              <strong>
                                 Company Name By Vendor :
                                 <span title="{{partner?.companyNameAddedByVendor}}">{{partner?.companyNameAddedByVendor
                                    | slice:0:50}}</span>
                                 <span *ngIf="partner?.companyNameAddedByVendor.length>50">...</span>
                              </strong>
                           </h5>
                        </td>
                        <td>
                           <app-display-date-and-time [dateAndTimeUTCString]="partner?.createdTimeInString"></app-display-date-and-time>
                        </td>
                        <td class="text-center">
                           <div
                              [ngClass]="{'actions-block float-none': selectedPartnershipId!=partner.partnershipId, 'actions-block-selected': selectedPartnershipId==partner.partnershipId}">
                              <a (click)="viewShareLeads(partner)" title="Select Share Leads" class="custom-icon">
                                 <i class="fa IconCustomization"[ngClass]="{'fa-plus': !partner?.expand, 'fa-minus': partner?.expand}" aria-hidden="true"></i>
                                 <div class="clickicons"></div>
                              </a>
                           </div>
                        </td>
                     </tr>
                     <tr *ngIf="partner?.expand">
                        <td colspan="5" class="bgc-lg">
                           <div class="alert alert-success text-center"
                              *ngIf="selectedShareLeadsListIds?.length>0 && selectedPartnershipId==partner.partnershipId">
                              <strong>Selected Rows : {{selectedShareLeadsListIds?.length}}</strong>
                           </div>
                           <div class="table-responsive x-hidden" [ngClass]="{'hide-scrollbar': isTableLoaded}">
                              <div class="portlet-input input-inline float-right mb10p" id="search-div"
                                 *ngIf="shareLeadsErrorMessage.responseType!='ERROR'">
                                 <div class="input-icon right" id="icon">
                                    <input type="text" autocomplete="off" id="sort-text" class="form-control"
                                       [(ngModel)]="shareLeadsPagination.searchKey"
                                       [ngModelOptions]="{standalone: true}" placeholder="search..."
                                       (keypress)="shareLeadsEventHandler($event.keyCode)">
                                    <button class="glyphicon glyphicon-remove search-box-item-clear"
                                       *ngIf="shareLeadsPagination?.searchKey"
                                       (click)="shareLeadsPagination.searchKey='';searchShareLeadsList();"></button>
                                    <button type="submit" class="search-box-item-click"
                                       (click)="searchShareLeadsList()">
                                       <i class="fa fa-search" aria-hidden="true"></i>
                                    </button>
                                 </div>
                              </div>
                              <ng-container *ngIf="!shareLeadsLoader.isLoading && shareLeadsErrorMessage.isVisible">
                                 <div class="custom-response-padding text-center">
                                    <app-response-message
                                       [customResponse]="shareLeadsErrorMessage"></app-response-message>
                                 </div>
                              </ng-container>

                              <div *ngIf="shareLeadsErrorMessage.responseType!='ERROR'">
                                 <app-auto-response-loader
                                    *ngIf="shareLeadsLoader.isLoading"></app-auto-response-loader>
                                 <ng-container *ngIf="!shareLeadsLoader.isLoading">
                                    <table class="table tgrid table-condensed child-table-xamp bgc-lg"
                                       aria-describedby="" id="one-click-share-leads-{{partner?.partnershipId}}">
                                       <thead>
                                          <tr>
                                             <th *ngIf="selectedPartnershipId==partner.partnershipId" scope="row" class="text-center pointer"
                                                [hidden]="shareLeadsPagination.totalRecords==0">
                                                <input class="pointer checkBox_shadow" type="checkbox"[(ngModel)]="isHeaderCheckBoxChecked"
                                                   id="one-click-share-leads-header-checkbox-id" (change)="selectOrUnselectAllRowsOfTheCurrentPage($event,partner.partnershipId)">
                                             </th>
                                             <th *ngIf="selectedPartnershipId!=partner.partnershipId" scope="row" class="text-center pointer"
                                                [hidden]="shareLeadsPagination.totalRecords==0">
                                                <input class="checkBox_shadow" type="checkbox" title="Please select the company" disabled>
                                             </th>
                                             <th scope="row" [attr.colspan]="colspanValue">List Name</th>
                                             <th class="text-center" translate>Total Leads</th>
                                             <th class="text-center" translate>Created Time</th>
                                             <th class="text-center" translate>Preview</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <ng-container
                                             *ngFor="let shareLead of shareLeadsPagination.pagedItems;let i = index;">
                                             <tr class="pointer" id="one-click-share-leads-tr-{{shareLead.id}}"
                                                [class.xamp-tr-selected]="selectedShareLeadsListIds.indexOf(shareLead.id)>-1 && selectedPartnershipId==partner.partnershipId"
                                                (click)="highlightSelectedShareListOnRowClick(shareLead.id,partner.partnershipId,$event)">
                                                <td class="text-center pointer">
                                                   <input class="pointer checkBox_shadow" type="checkbox"
                                                      id="{{shareLead.id}}"
                                                      [title]="selectedPartnershipId!=partner.partnershipId ? 'Please select company':''"
                                                      [disabled]="selectedPartnershipId!=partner.partnershipId"
                                                      [checked]="selectedShareLeadsListIds.indexOf(shareLead.id)>-1 && selectedPartnershipId==partner.partnershipId"
                                                      name="oneClickShareLeadsCheckBox[]" value="{{shareLead.id}}"
                                                      (click)="$event.stopPropagation();highlightShareListRowOnCheckBoxClick(shareLead.id,partner.partnershipId,$event)">
                                                </td>
                                                <td class="cw" *ngIf="showExpandButton">
                                                   <div
                                                      [className]="selectedShareLeadsListIds.indexOf(shareLead.id)>-1 ? 'actions-block-selected':'actions-block left-float'">
                                                      <a (click)="$event.stopPropagation();viewMatchedContacts(shareLead)"
                                                         title="Matched Results">
                                                         <i class="fa"
                                                            [ngClass]="{'fa-angle-right': !shareLead.expand, 'fa-angle-down': shareLead.expand}"
                                                            aria-hidden="true"></i>
                                                      </a>
                                                   </div>
                                                </td>
                                                <td style="width: 10%;" class="hidden-xs">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='ZOHO' && shareLead.synchronisedList"
                                                      src="{{properties?.zohoImage}}" alt="zoho" class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='GOOGLE' && shareLead.synchronisedList"
                                                      src="{{properties?.googleImage}}" alt="google"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='SALESFORCE' && shareLead.synchronisedList"
                                                      src="{{properties?.salesforceImage}}" alt="salesforce"
                                                      style="height: 70px;"> <img
                                                      *ngIf="shareLead.socialNetwork=='MANUAL' || !shareLead.synchronisedList"
                                                      src="{{properties?.manualImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='HUBSPOT' && shareLead.synchronisedList"
                                                      src="{{properties?.hubspotImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='PIPEDRIVE' && shareLead.synchronisedList"
                                                      src="{{properties?.pipedriveImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='CONNECTWISE' && shareLead.synchronisedList"
                                                      src="{{properties?.connectwiseImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='MARKETO' && shareLead.synchronisedList"
                                                      src="{{properties?.marketoImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='HALOPSA' && shareLead.synchronisedList"
                                                      src="{{properties?.halopsaImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                   <img
                                                      *ngIf="(!shareLead.marketoMasterList && !shareLead.emailValidationInd) || (shareLead.marketoMasterList && (!shareLead.marketoSyncComplete || !shareLead.emailValidationInd))"
                                                      src="assets/images/Spinner.gif"
                                                      style="width: 55px; margin-top: -88px; margin-left: 17px;" alt="">
                                                   <img
                                                      *ngIf="shareLead.socialNetwork=='MICROSOFT' && shareLead.synchronisedList"
                                                      src="{{properties?.microsoftImage}}" alt="manual"
                                                      class="list-icons-sm">
                                                </td>
                                                <td>
                                                   <h4 class="m0 ellipsis ListFontCu">
                                                      <span data-toggle="tooltip" data-placement="top" title="{{shareLead?.name}}" class="ListFontCu">
                                                         <strong>List Name:</strong> {{shareLead?.name}}
                                                      </span>
                                                   </h4>
                                                   <h5 class='mb0 ellipsis'>
                                                      <span class='f-w-400' data-toggle="tooltip" data-placement="top"  title="{{shareLead?.uploadedBy}}">
                                                         <b>By: </b> {{shareLead?.uploadedBy}}
                                                      </span>
                                                   </h5>
                                                   <h5 class="mb0 ellipsis" title="{{shareLead?.companyName}}">
                                                      <span class='f-w-400' data-toggle="tooltip" data-placement="top"  title="{{shareLead?.companyName}}">
                                                         <strong>Company Name: </strong> {{shareLead?.companyName | slice:0:50 }}
                                                      </span>
                                                      <span *ngIf="shareLead?.companyName?.length>50">...</span>
                                                   </h5>
                                                   <span class="green-banner ellipsis mt5"
                                                      *ngIf="shareLead?.assignedToPartner">Assigned</span>
                                                </td>
                                                <td class="text-center">
                                                   {{shareLead?.noOfContacts}}
                                                </td>
                                                <td class="text-center">
                                                   <app-display-date-and-time
                                                      [dateAndTimeUTCString]="shareLead?.createdDate"></app-display-date-and-time>
                                                </td>
                                                <td class="text-center">
                                                   <div
                                                      [className]="selectedShareLeadsListIds.indexOf(shareLead.id)>-1 ? 'actions-block-selected':'actions-block float-none'">
                                                      <a title="Preview" class="custom-icon"
                                                         (click)="$event.stopPropagation();previewLeads(shareLead)">
                                                         <i class="fa fa-eye IconCustomization" aria-hidden="true"></i>
                                                         <div class="clickicons"></div>
                                                      </a>
                                                   </div>
                                                </td>
                                             </tr>
                                             <tr *ngIf="shareLead?.expand">
                                                <td colspan="8">
                                                   <app-userlist-users [searchKey]="shareLeadsPagination.searchKey"
                                                      [userListId]="shareLead.id">
                                                   </app-userlist-users>
                                                </td>
                                             </tr>
                                          </ng-container>
                                       </tbody>
                                    </table>
                                 </ng-container>
                                 <!---Pagination-->
                                 <div [hidden]="shareLeadsLoader.isLoading || shareLeadsPagination.totalRecords==0"
                                    class="pg8">
                                    <app-pagination [pagination]="shareLeadsPagination"
                                       (notifyParent)="navigateToShareLeadsListNextPage($event)"
                                       (notifyParentDropDown)="findShareLeads($event)"
                                       [customDropDown]="hideHeaderText">
                                    </app-pagination>
                                 </div>
                                 <div *ngIf="shareLeadsPagination.totalRecords==0 && !shareLeadsLoader.isLoading"
                                    class="alert alert-info text-center">
                                    <strong>No Data Found</strong>
                                 </div>
                              </div>

                           </div>
                        </td>
                     </tr>
                  </ng-container>
               </tbody>
            </table>
            <!--Pagination-->
            <div *ngIf="pagination.totalRecords > 0 && !httpRequestLoader.isLoading" class="pg8">
               <app-pagination [pagination]="pagination" (notifyParent)="navigateToNextPage($event)"
                  (notifyParentDropDown)="findPartnerCompanies($event)" [customDropDown]="hideHeaderText">
               </app-pagination>
            </div>
            <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading"
               class="alert alert-info text-center">
               <strong>No Data Found</strong>
            </div>
         </div>
      </div>
   </div>
</div>
<ng-container *ngIf="showLeadsPreview">
   <app-preview-user-list [userListName]="selectedListName" [userListId]="selectedListId"
      (notifyParentComponent)="resetValues()"></app-preview-user-list>
</ng-container>