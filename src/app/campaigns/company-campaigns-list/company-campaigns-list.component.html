<div class="page-content">
  <ngx-loading [show]="ngxLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
  <div class="page-bar mb-height_auto" style="height: 48px;">
    <ul class="page-breadcrumb">
      <li><i class="fa fa-home" aria-hidden="true"></i> <a [routerLink]="referenceService.homeRouter" translate>Home</a>
        <i class="fa fa-angle-right" aria-hidden="true"></i>
      </li>
      <li><a [routerLink]="companyRouter" translate>Manage Companies</a>
        <i class="fa fa-angle-right" aria-hidden="true"></i>
      </li>
      <li>
        <a (click)="closeCampaignsList()" translate>Company Journey</a><i class="fa fa-angle-right"
          aria-hidden="true"></i>
      </li>
      <li>
        <a translate>Campaigns</a>
      </li>
    </ul>
  </div>

  <div class="row">
    <div class="col-md-12 col-lg-12">
      <div class="portlet light mheight">
        <div class="row" style="margin-left: -9px;">
          <app-box-loader [countLoader]=3 *ngIf="countsLoader"></app-box-loader>
          <div *ngIf="!countsLoader" class="col-md-12 col-lg-12 mleft" style="padding-left: 24px;padding-right: 30px;">
            <div class="row">
              <div id="vendor-details-tile" class="col-sm-4 col-xs-8 col-lg-4 col-md-4 mBottom mWidth vendor_list"
                style="padding-left: 19px;border-radius: 5px !important;">
                <div class="row">
                  <div class="flex margin-flex card-template">
                    <span class='img-templates'>
                      <img class="h-50px" src="assets/admin/pages/media/works/company.png" alt="">
                    </span>
                    <span class="margin-left" style="margin-left: 20px;">
                      <h6 class='m0 user-email' *ngIf="selectedCompany?.name?.length>0">
                        <p class="user-company" data-toggle="tooltip" data-placement="bottom"
                          title="{{selectedCompany?.name}}">
                          <span>{{selectedCompany?.name |slice:0:50}}</span>
                          <span *ngIf="selectedCompany?.name?.length>50">..</span>
                        </p>
                      </h6>
                      <br>
                      <h5 *ngIf="selectedCompany?.fullName?.length>0" class='ellipsis user-name' data-toggle="tooltip"
                        data-placement="bottom" title="{{selectedCompany?.fullName}}">
                        {{selectedCompany?.fullName | slice:0:25}}
                        <span *ngIf="selectedCompany?.fullName?.length>20">..</span>
                      </h5>
                      <a style="display: table;" data-toggle="tooltip" data-placement="bottom"
                        title="{{selectedCompany?.emailId}}">
                        {{selectedCompany?.emailId | slice:0:50}}<span
                          *ngIf="selectedCompany?.emailId?.length>50">...</span></a>
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-sm-4 col-xs-8 col-lg-4 col-md-4 pr0 mtop mWidth tiles_hover_effect">
                <a class="dashboard-stat dashboard-stat-lighter green-soft min-h default-cursor">
                  <div class="visual">
                    <i aria-hidden="true" class=""></i>
                  </div>
                  <div class="details">

                    <div data-toggle="tooltip" data-placement="bottom" title="{{totalCampaignsCount}}" class="number">
                      {{totalCampaignsCount}}</div>
                    <div class="desc">Total Campaigns</div>
                  </div>
                  <span class="morePadding">
                    <a translate="" ng-reflect-translate="" class="more hidden">Detailed view
                      <i aria-hidden="true" class="m-icon-swapright m-icon-white"></i></a>
                  </span>
                </a>
              </div>
              <div class="col-sm-4 col-xs-8 col-lg-4 col-md-4 pr0 mWidth tiles_hover_effect">
                <a class="dashboard-stat dashboard-stat-lighter purple-soft min-h default-cursor">
                  <div class="visual">
                    <i aria-hidden="true" class=""></i>
                  </div>
                  <div class="details">
                    <div data-toggle="tooltip" data-placement="bottom" title="{{activeCampaignsCount}}" class="number">
                      {{activeCampaignsCount}}</div>
                    <div class="desc">Active Campaigns</div>
                  </div>
                  <span class="morePadding">
                    <a translate="" ng-reflect-translate="" class="more hidden">Detailed view
                      <i aria-hidden="true" class="m-icon-swapright m-icon-white"></i></a>
                  </span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row" style="padding-top: 10px;">
    <div class="portlet box">
      <div class="clearfix">
        <div class="col-xs-12">
          <div class="portlet light">
            <div class="portlet-title pt0" style="border-bottom: none;padding-top: 6px;">
              <div class="caption" translate style="padding-left: 3px !important;padding-top: 12px !important;">
                <i class="fa fa-list" style="font-size: 19px;" aria-hidden="true"></i>
                Campaigns
              </div>
              <div class="inputs w100 display" style="float: right;display: flex!important;">
                <ul class="mix-filter col-xs-12 col-sm-12 col-md-4 p0 m0 campaign-filter-option"
                  style="margin-right: -6px !important;">
                  <li class="filter padding p4 p3" (click)="filterCampaigns('NONE',0)"
                    [class.campaign-type-selected]="0 == selectedCampaignTypeIndex" translate>All</li>
                  <li class="filter p4 p3 " (click)="filterCampaigns('REGULAR',1)"
                    [class.campaign-type-selected]="1 == selectedCampaignTypeIndex" translate>Email</li>
                  <li class="filter p4 p3" (click)="filterCampaigns('VIDEO',2)"
                    [class.campaign-type-selected]="2 == selectedCampaignTypeIndex" translate>Video</li>
                  <li class="filter p4 p3" (click)="filterCampaigns('SURVEY',3)"
                    [class.campaign-type-selected]="3 == selectedCampaignTypeIndex" translate>Survey</li>
                </ul>
                <div class="mMargin" style="float: left; margin: 1px 10px!important;">
                  <select class="form-control" [(ngModel)]="sortOption.userListLevelCampaignAnalyticsSortOption"
                    (ngModelChange)="sortBy($event)" style="padding-left: 5px;height: 34px;">
                    <option *ngFor="let option of sortOption.userListLevelCampaignAnalyticsSortDropDownOptions"
                      [ngValue]="option" translate>
                      {{option.name}}</option>
                  </select>
                </div>
                <div class="portlet-input input-inline">
                  <div class="input-icon right p-top">
                    <input style="height: 35px !important;" type="text" id="sort-text" class="form-control"
                      [(ngModel)]="sortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="Search"
                      (keypress)="eventHandler($event.keyCode)">
                    <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey"
                      (click)="sortOption.searchKey='';searchCampaigns();"></button>
                    <button type="submit" class="search-box-item-click align" style="height: 33px;"
                      (click)="searchCampaigns()"><i class="fa fa-search" aria-hidden="true"></i></button>
                  </div>
                </div>
              </div>
            </div>

            <div class="portlet-body table-responsive" style="overflow: hidden;padding-top: 0px !important;">
              <app-list-loader *ngIf="ngxLoading"></app-list-loader>
              <div class="clearfix" *ngIf="!ngxLoading">
                <div class="col-xs-12" style="padding: 0px 0;">
                  <div class="table-responsive">
                    <table class='table tgrid' aria-describedby="user-campaigns-list-table">
                      <thead>
                        <tr>
                          <th scope="row" translate>Campaign</th>
                          <th scope="row" translate>Launched On</th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container *ngFor="let campaignAnalytics of pagination.pagedItems;let i=index">
                          <tr>
                            <td>
                              <img *ngIf="campaignAnalytics?.campaignType=='REGULAR'"
                                class="imageClass active image-padding image_effect"
                                src="assets/images/regular-email.svg" alt="Regular Campaign Logo Not Found">
                              <img *ngIf="campaignAnalytics?.campaignType=='VIDEO'"
                                class="imageClass active image-padding image_effect" src="assets/images/video-email.svg"
                                alt="Video Campaign Logo Not Found">
                              <img *ngIf="campaignAnalytics?.campaignType=='SURVEY'"
                                class="imageClass active image-padding image_effect" src="assets/images/survey.svg"
                                alt="Survey Campaign Logo Not Found">
                              <a class="campaign-name-padding" data-toggle="tooltip" data-placement="bottom"
                                title="{{campaignAnalytics?.campaignName}}"
                                (click)="goToCampaignAnalytics(campaignAnalytics?.campaignId,campaignAnalytics?.campaignTitle)">
                                {{campaignAnalytics?.campaignName | slice:0:30}}
                                <span *ngIf="campaignAnalytics?.campaignName?.length>30">...</span>
                              </a>
                            </td>
                            <td>
                              <app-timestamp [campaignView]="true"
                                [dateAndTime]="campaignAnalytics?.launchedDisplayTime"></app-timestamp>
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                    <div *ngIf="pagination.totalRecords==0 && !ngxLoading" class="alert alert-info">
                      <strong>No Data Found.</strong>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="pagination.pagedItems.length !== 0" [hidden]="ngxLoading">
                <app-pagination [pagination]="pagination" (notifyParent)="setPage($event)"
                  (notifyParentDropDown)="listCampaignAnalytics($event)" [hidden]="ngxLoading">
                </app-pagination>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>