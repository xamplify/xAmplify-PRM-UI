<style> a.disabled {  pointer-events: none;cursor: not-allowed; opacity: .7;}</style>
<div class="page-content">
	<div class="page-bar">
		<ul class="page-breadcrumb">
			<li>
				<i class="fa fa-home"></i>
				<a [routerLink]="referenceService.homeRouter">Home</a>
				<i class="fa fa-angle-right"></i>
      </li>
      <li>
				<a [routerLink]="['/home/campaigns/select']">Select Campaign</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li>Event Based Campaign</li>
		</ul>
	</div>
	<div class="page-bar portlet light border-radius-0 shadow">
		<div class="portlet-title">
			<h4 class="pull-left m10 f-w-600 text-primary">Event Details</h4>
    </div>
    <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
		<div class="portlet-body clearfix">
			<section>
			<div class="col-xs-12 col-sm-6">
     			<form class="form-horizontal">
					<div class="form-group">
						<label for="eventTitle" class="col-sm-3 control-label">Event Title <span class=text-danger>*</span></label>
						<div class="col-sm-9">
						<input type="text" class="form-control" id="eventTitle" placeholder="Event Title" [(ngModel)]="eventCampaign.campaign" [ngModelOptions]="{standalone: true}"
						[ngClass]="{'has-error': eventError.eventTitleError}" (input)="eventTitleError()" (blur)="eventTitleError()" [attr.disabled]="isPreviewEvent? '' : null">
						<div class="text-danger" *ngIf="eventError.eventTitleError">Event Title is required</div>
					</div>
					</div>
					<div class="form-group">
						<label for="hostedBy" class="col-sm-3 control-label">Hosted By <span class=text-danger>*</span></label>
						<div class="col-sm-9">
						<input type="text" [attr.disabled]="isPreviewEvent? '' : null" class="form-control pull-left" style="width: 50%" placeholder="Hosted By" [(ngModel)]="eventCampaign.fromName" [ngModelOptions]="{standalone: true}"
							[ngClass]="{'has-error': eventError.eventHostByError}" (input)="eventHostByError()"  (blur)="eventHostByError()">
						<select [attr.disabled]="isPreviewEvent? '' : null" class="form-control" style="width: 50%" [(ngModel)]="eventCampaign.email" [ngModelOptions]="{standalone: true}" (change)="setFromName()">
							<option *ngFor="let teamMember of teamMemberEmailIds" [ngValue]="teamMember.emailId">
								{{teamMember.emailId}}
							</option>
						</select>
						<div class="text-danger" *ngIf="eventError.eventHostByError">Hosted By is required</div>
						</div>
					</div>
					<div class="form-group">
						<label for="hostedBy" class="col-sm-3 control-label">Partner Campaign</label>
						<div class="col-sm-9">
							<switch [status]="eventCampaign.channelCampaign" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue"
								[onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.offDefaultColor" [size]="callActionSwitch.size" [disabled]="isPreviewEvent"
								(statusChange)="eventCampaign.channelCampaign = !eventCampaign.channelCampaign">
							</switch>
						</div>
					</div>
					<div class="form-group">
						<label for="eventDateTime" class="col-sm-3 control-label">Event Date/Time <span class=text-danger>*</span></label>
						<div class="col-sm-9 p0">
							<div class="col-sm-6"><input [attr.disabled]="isPreviewEvent? '' : null" type="text" id="startDatePicker" class="form-control flatpickr" placeholder="Start Time"
								[(ngModel)]="eventCampaign.campaignEventTimes[0].startTimeString" [ngModelOptions]="{standalone: true}" (input)="eventStartTimeError()" (blur)="eventStartTimeError()"
								[ngClass]="{'has-error': eventError.eventStartTimeError && !eventCampaign.campaignEventTimes[0].startTimeString}"></div>
							<div class="col-sm-6">
								<input type="text" id="enDatePicker" [attr.disabled]="isPreviewEvent? '' : null" [disabled]="eventCampaign.campaignEventTimes[0].allDay" class="form-control flatpickr" placeholder="End Time"
								[(ngModel)]="eventCampaign.campaignEventTimes[0].endTimeString" [ngModelOptions]="{standalone: true}">
							</div>
							<div class="col-sm-6 text-danger" *ngIf="eventError.eventStartTimeError &&!eventCampaign.campaignEventTimes[0].startTimeString">Please enter a valid start Date / Time</div>
						<div class="clearfix">
							<div class="col-sm-6">
								<label>
									<input type="checkbox" [attr.disabled]="isPreviewEvent? '' : null" [checked]="eventCampaign.campaignEventTimes[0].allDay" (change)="eventCampaign.campaignEventTimes[0].allDay = !eventCampaign.campaignEventTimes[0].allDay"> All Day
								</label>
							</div>
							<div class="col-sm-6">TIMEZONE</div>
						</div>
						<div class="clearfix">
							<div class="col-sm-6">
								<label style="float: left;">Country</label>
								<br>
                <select [attr.disabled]="isPreviewEvent? '' : null" class="form-control" style="width: 100%;cursor: pointer;" 	[ngClass]="{'has-error': eventError.eventCountryAndTimeZone && !eventCampaign.campaignEventTimes[0].countryId}"
                [(ngModel)]="eventCampaign.campaignEventTimes[0].countryId" [ngModelOptions]="{standalone: true}" (change)="onChangeCountryCampaignEventTime($event.target.value)" (input)="eventCountryError()" (blur)="eventCountryError()">
									<option *ngFor="let country of countries" [value]="country.id">{{country.name}}</option>
                </select>
              	<div class="text-danger" *ngIf="eventError.eventCountryAndTimeZone && !eventCampaign.campaignEventTimes[0].countryId">Please select the country and timezone</div>
							</div>
							<div class="col-sm-6">
								<label style="float: left;">TimeZone </label>
								<br>
								<select [attr.disabled]="isPreviewEvent? '' : null" class="form-control" style="width: 100%" [(ngModel)]="eventCampaign.campaignEventTimes[0].timeZone" [ngModelOptions]="{standalone: true}" id="timezoneIdCampaignEventTime">
									<ng-container *ngIf="timezonesCampaignEventTime?.length==1">
										<option *ngFor="let timeZone of timezonesCampaignEventTime" [value]="timeZone.timezoneId" [selected]="eventCampaign.campaignEventTimes[0].countryId == timeZone.countryId">
											{{timeZone.cityName}}
										</option>
									</ng-container>
									<ng-container *ngIf="timezonesCampaignEventTime?.length>1">
										<option *ngFor="let timeZone of timezonesCampaignEventTime" [value]="timeZone.timezoneId">
											{{timeZone.cityName}}
										</option>
									</ng-container>
								</select>
							</div>
						</div>
						</div>
					</div>
					<div class="form-group">
						<label for="hostedBy" class="col-sm-3 control-label">Online Meeting</label>
						<div class="col-sm-9">
							<switch [disabled]="isPreviewEvent" [status]="eventCampaign.onlineMeeting" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue"
								[onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.offDefaultColor" [size]="callActionSwitch.size"
								(statusChange)="eventCampaign.onlineMeeting = !eventCampaign.onlineMeeting">
							</switch>
						</div>
					</div>
					<section *ngIf="!eventCampaign.onlineMeeting">
						<div class="form-group">
							<label for="hostedBy" class="col-sm-3 control-label">Location Name <span class="text-danger" style="position: absolute;">*</span></label>
              <div class="col-sm-9"><input type="text" [attr.disabled]="isPreviewEvent? '' : null" class="form-control" id="eventDateTime" (blur)="eventLocationError()" (input)="eventLocationError()"
                 placeholder="My house, bar, etc" [ngClass]="{'has-error': eventError.eventLocationError}" [(ngModel)]="eventCampaign.campaignLocation.location" [ngModelOptions]="{standalone: true}">
                 <div class="text-danger" *ngIf="eventError.eventLocationError">Location is required</div>
                </div>
						</div>
						<div class="form-group">
							<label for="hostedBy" class="col-sm-3 control-label">Address</label>
							<div class="col-sm-9"><input type="text" [attr.disabled]="isPreviewEvent? '' : null" class="form-control" id="eventDateTime" placeholder="Street Address" [(ngModel)]="eventCampaign.campaignLocation.street" [ngModelOptions]="{standalone: true}"></div>
							<div class="col-sm-offset-3 col-sm-9 pt10">
								<div class="col-sm-4 p0"><input type="text" [attr.disabled]="isPreviewEvent? '' : null" class="form-control" id="city" placeholder="City" [(ngModel)]="eventCampaign.campaignLocation.city" [ngModelOptions]="{standalone: true}"></div>
								<div class="col-sm-4 p0"><input type="text" [attr.disabled]="isPreviewEvent? '' : null" class="form-control" id="state" placeholder="State" [(ngModel)]="eventCampaign.campaignLocation.state" [ngModelOptions]="{standalone: true}"></div>
								<div class="col-sm-4 p0"><input type="text" [attr.disabled]="isPreviewEvent? '' : null" class="form-control" id="zip" placeholder="Zip" [(ngModel)]="eventCampaign.campaignLocation.zip" [ngModelOptions]="{standalone: true}"></div>
							</div>
						</div>
					</section>
					<div class="form-group">
						<label for="hostedBy" class="col-sm-3 control-label">Event Image</label>
						<div class="col-sm-9">
							<label class="upload-media-wrapper" *ngIf="! eventCampaign.campaignEventMedias[0].filePath">
								<i class="fa fa-camera" aria-hidden="true"></i>
								<b>Add Event Image</b>
								<input type="file" [attr.disabled]="isPreviewEvent? '' : null" (change)="fileChange($event)" #input name="media[]" accept="image/gif,image/jpeg,image/jpg,image/png"
								 class="file-input js-tooltip" data-original-title="Add photo">
							</label>
							<div [attr.disabled]="isPreviewEvent? '' : null" class="uploaded-media-wrapper" *ngIf="eventCampaign.campaignEventMedias[0].filePath">
								<img src="{{eventCampaign.campaignEventMedias[0].filePath}}">
								<i [class.disabled]="isPreviewEvent? '' : null" class="fa fa-times-circle" (click)="resetcampaignEventMedia()"></i>
							</div>
						</div>
					</div>

					<div class="form-group">
						<label for="hostedBy" class="col-sm-3 control-label">Event Description <span class=text-danger>*</span></label>
						<div class="col-sm-9" [attr.disabled]="isPreviewEvent? '' : null">
              <ckeditor [attr.disabled]="isPreviewEvent? '' : null" [(ngModel)]="eventCampaign.message"  (blur)="eventDescriptionError()" (input)="eventDescriptionError()" [ngModelOptions]="{standalone: true}" #myckeditor [config]="ckeConfig" debounce="500"></ckeditor>
              <div  class="text-danger" *ngIf="eventError.eventDescription"> Event message is required</div>
						</div>
					</div>
					<div class="portlet light">
						<div class="portlet-title">
							<h4 class="pull-left f-w-600 text-primary">Event settings</h4>
						</div>
						<div class="portlet-body clearfix" [attr.disabled]="isPreviewEvent">
							<div><label> <input type="checkbox" [attr.disabled]="isPreviewEvent? '' : null" [checked]="eventCampaign.rsvpReceived" (change)="eventCampaign.rsvpReceived = !eventCampaign.rsvpReceived"> Notify me when guests RSVP </label></div>
							<div><label> <input type="checkbox" [attr.disabled]="isPreviewEvent? '' : null" [checked]="eventCampaign.emailOpened" (change)="eventCampaign.emailOpened = !eventCampaign.emailOpened"> Notify me when email is opened </label></div>
							<div><label> <input type="checkbox" [attr.disabled]="isPreviewEvent? '' : null" [checked]="eventCampaign.inviteOthers" (change)="eventCampaign.inviteOthers = !eventCampaign.inviteOthers"> Invite others </label></div>
						</div>
					</div>
				</form>
			</div>
			<div class="col-xs-12 col-sm-6">
				<div class="portlet light">
					<div class="portlet-title">
						<h4 class="pull-left f-w-600 text-primary">Pick an email template</h4>
					</div>
					<div class="portlet-body clearfix">
						<div class="table-responsive">
							<table class="table table-striped table-condensed table-bordered">
							<tr>
								<th>Select</th>
								<th>Email Template</th>
								<th>Preview</th>
							</tr>
							<ng-container *ngFor="let emailTemplate of emailTemplates">
							<tr>
								<td class="text-center"><input type="radio" [attr.disabled]="isPreviewEvent? '' : null" value="emailTemplate.id" [checked]="eventCampaign.emailTemplate.id === emailTemplate.id" (change)="eventCampaign.emailTemplate = emailTemplate"></td>
								<td>{{emailTemplate.name}}</td>
								<td class="text-center"><a><i class="fa fa-eye" aria-hidden="true" (click)="previewEventCampaignEmailTemplate(emailTemplate.id);"></i></a> </td>
							</tr>
							</ng-container>
							</table>
						</div>
					</div>
				</div>
				<div class="portlet light">
					<div class="portlet-title">
						<h4 class="pull-left f-w-600 text-primary">Select Invite Recipients<span style="color:red">*</span></h4>
					</div>
					<div class="portlet-body clearfix">
          <div class="alert-danger alert-error" *ngIf="eventCampaign.userListIds?.length === 0 && contactListsPagination.pagedItems">* Please select the contact list</div>
					<section *ngIf="contactListsPagination.pagedItems?.length === 0">
						<div class='alert alert-info' role='alert'>
							<h4 class='m0'>You have not added any contact lists yet. Please add at least one list to your account</h4>
						</div>
						<a class='btn btn-info' style="color: #fff;" [routerLink]="['/home/contacts/add']">Add Contacts</a>
					</section>
					<section class="clearfix">
						<div class="form-group m0 pull-right">
							<h5 class="control-label font-purple-intense pr10 pull-left">Partner Lists</h5>
							<switch [status]="isPartnerUserList" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue"
								[onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.bsize"
								(statusChange)="toggleContactLists()">
							</switch>
						</div>
					</section>
					<section *ngIf="contactListsPagination.pagedItems?.length !== 0">
						<div class="table-responsive">
							<table class="table table-condensed table-hover table-bordered table-striped" id='contact-list-table'>
								<thead>
									<tr>
										<th>Select</th>
										<th>List Name</th>
										<th>No.of Partners</th>
										<th>Preview</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let contactList of contactListsPagination.pagedItems; let i=index;">
										<td class='text-center m0'>
											<input [attr.disabled]="isPreviewEvent? '' : null" type='checkbox' id='{{contactList.id}}' [checked]="userListIds.indexOf(contactList.id)>-1" (click)="highlightRow(contactList.id)">
										</td>
										<td>
											<h5 class='m0 f-w-600'>
                        <span *ngIf="contactList.name?.length<=20">{{contactList.name}}</span>
                        <span *ngIf="contactList.name?.length>20">{{contactList.name | slice:0:20}}...</span>
                      </h5>
											<h6 class="pull-left mb0 mt5" title="{{contactList.uploadedBy}}">By:
                        <span *ngIf="contactList.uploadedBy?.length<=20">{{contactList.uploadedBy}}</span>
                        <span *ngIf="contactList.uploadedBy?.length>20">{{contactList.uploadedBy | slice:0:20}}...</span>
                      </h6>
											<h6 class="pull-right mb0 mt5">On: {{contactList.createdDate}}</h6>
										</td>
										<td> <h6 class='m0 text-center f-w-600'>{{contactList.noOfContacts}}</h6> </td>
										<td class='text-center m0'>
											<a>	<i class="fa fa-eye" aria-hidden="true" (click)="loadContactsOnPreview(contactList, contactsPagination);"></i></a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<app-pagination [pagination]="contactListsPagination" [type]="'contactlists'" (notifyParent)="setPage($event)"
						 (notifyParentDropDown)="paginationDropDown($event)"></app-pagination>
					</section>
					</div>
				</div>
				<div class="portlet light">
					<div class="portlet-title">
						<h4 class="pull-left f-w-600 text-primary">Listing privacy</h4>
					</div>
					<div class="portlet-body clearfix">
						<div>
							<label class="bold">
								<input [attr.disabled]="isPreviewEvent? '' : null" type="radio" value="eventCampaign.publicEventCampaign" [checked]="eventCampaign.publicEventCampaign" (change)="eventCampaign.publicEventCampaign = !eventCampaign.publicEventCampaign">Public page
							</label>
							<p class="ml10">Turn invitees into your biggest promoters by letting them share your event on Facebook, Twitter, Linkedin and or any social media platform</p>
						</div>
						<div>
							<label class="bold">
								<input [attr.disabled]="isPreviewEvent? '' : null" type="radio" value="!eventCampaign.publicEventCampaign" [checked]="!eventCampaign.publicEventCampaign" (change)="eventCampaign.publicEventCampaign = !eventCampaign.publicEventCampaign">Private page
							</label>
							<p class="ml10">Make your event invitation-only(guests must receive an xAmplify invitation to attend/view)</p>
						</div>
					</div>
				</div>
			</div>
			</section>
			<div class="col-xs-12 p0 mb10">
				<a class="btn btn-warning btn-block" [attr.disabled]="isPreviewEvent? '' : null" (click)="addReplyRows()">
					<i class="fa fa-plus-square p0" style="margin: 0 5px;"></i>{{properties.ADD_AUTO_RESPONSE_EMAIL}}
				</a>
			</div>
			<fieldset *ngIf="eventCampaign.campaignReplies?.length>0" class="col-xs-12">
        	<legend>{{properties.ADD_AUTO_RESPONSE_EMAIL}}</legend>
      <div *ngFor="let reply of eventCampaign.campaignReplies;let i=index">
				<div class="portlet light dashboard-stat2" id="{{reply.divId}}">
					<div class="portlet-title custom-change-css">
						<div class="col-xs-7">
							<h4 class="text-left"><b>Add an Auto-response to your e-mail-{{i+1}}</b></h4>
            			</div>
						<div class="col-xs-5 pull-right">
							<label class="switch-choose">Choose Template</label>
							<switch class="switch-choose" [disabled]="isPreviewEvent" [status]="reply.defaultTemplate" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue"
								[onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
								(statusChange)="selectReplyEmailBody($event,i,reply)">
							</switch>
							<button [disabled]="isPreviewEvent" type="button" class="btn btn-danger button-blue" (click)="remove(reply.divId,'replies')"><span class="glyphicon glyphicon-trash"></span></button>
							<button [disabled]="isPreviewEvent" type="button" class="btn btn-primary button-blue"  (click)="addReplyRows()"><span class="glyphicon glyphicon-plus"></span></button>
						</div>
					</div>
					<div class="row">
						<form class="role add-reply" id="form-{{reply.divId}}">
              <div class="col-xs-12 p0">
					<div class="col-xs-4" style="padding:0">
						<div class="col-xs-12" style="margin-bottom: 6px;">
							<label style="cursor: default;" for="reason">Reason</label>
							<select class="form-control" name="actionId" [(ngModel)]="reply.actionId" [attr.disabled]="isPreviewEvent? '' : null">
								<option [value]="0" [selected]="reply.actionId ==0">Email is not opened</option>
								<option [value]="13" [selected]="reply.actionId==13">Email is opened</option>
								<option [value]="16" [selected]="reply.actionId ==16">Send immediately after email is opened</option>
								<option [value]="24" [selected]="reply.actionId ==24">If partner has not shared event</option>
								<option [value]="25" [selected]="reply.actionId ==25">Send email if RSVP Yes</option>
								<option [value]="26" [selected]="reply.actionId ==26">Send email If RSVP NO</option>
								<option [value]="27" [selected]="reply.actionId ==27">Send email If RSVP MAY BE</option>
								<option [value]="28" [selected]="reply.actionId ==28">Send thanks email after event</option>
							</select>
						</div>
						<div *ngIf="reply.actionId == 0 || reply.actionId == 13 || reply.actionId == 24">
							<div class="col-xs-12">
								<label style="cursor: default;" for="days" *ngIf="reply.actionId==22 || reply.actionId==23 " id="reply-days-{{reply.divId}}">Reply In X Days
									<b style="color: red">*</b>
									<font><b>(Minimum 1 Day)</b></font>
								</label>
								<label style="cursor: default;" for="days" *ngIf="reply.actionId!=22 && reply.actionId!=23" id="reply-days-{{reply.divId}}">Reply In X Days
									<b style="color: red">*</b>
								</label>
								<input [attr.disabled]="isPreviewEvent? '' : null" type="number" class="form-control" name="days" placeholder="Days" [(ngModel)]="reply.replyInDays" min="0" oninput="validity.valid||(value='');">
							</div>
							<div class="col-xs-12 time-col " *ngIf="reply.actionId!=22 && reply.actionId!=23 ">
								<div class="col-xs-2" style="cursor: default;"><span for="time" id="send-time-{{reply.divId}}" class="time-picker-css">At<b style="color: red">*</b></span></div>
								<div class="col-xs-10" style="height: 66px;"><timepicker [attr.disabled]="isPreviewEvent" [(ngModel)]="reply.replyTime" name="time" [hourStep]="1" [minuteStep]="1"></timepicker></div>
							</div>
						</div>
						<div class="col-xs-12">
							<label style="cursor: default;" for="time" id="reply-subject-{{reply.divId}}">Subject<b style="color: red">*</b></label>
							<input [attr.disabled]="isPreviewEvent? '' : null" type="text" class="form-control" name="subject" [(ngModel)]="reply.subject" placeholder="Subject" maxlength="50">
						</div>
					</div>
							<div class="col-xs-8">
								<div id="ck-editor-{{i}}" *ngIf="!reply.defaultTemplate">
									<div  style="margin-left: 1px;">
										<label style="cursor: default;" for="days" id="reply-message-{{reply.divId}}">Message <b style="color: red">*</b>
										</label>
									</div>
									<div [class.disabled]="isPreviewEvent? '' : null">
										<ckeditor [attr.disabled]="isPreviewEvent? '' : null" [(ngModel)]="reply.body" name="body"></ckeditor>
									</div>
								</div>
								<div id="reply-email-template-{{i}}" *ngIf="reply.defaultTemplate">
									<div class="form-group" style="margin-left: 1px;">
										<label for="days" id="email-template-{{reply.divId}}">Select Email Template<b style="color: red">*</b></label>
									</div>
									<app-loader [model]="campaignEmailTemplate.httpRequestLoader.isHorizontalCss" *ngIf="campaignEmailTemplate.httpRequestLoader.isLoading"></app-loader>
									<app-error-pages *ngIf="campaignEmailTemplate.httpRequestLoader.isServerError"></app-error-pages>
									<ng-container *ngIf="!campaignEmailTemplate.httpRequestLoader.isLoading && !campaignEmailTemplate.httpRequestLoader.isServerError">
										<table class="table tgrid">
											<thead>
												<tr>
													<th>Select</th>
													<th>Name</th>
													<th>Uploaded By</th>
													<th>Preview</th>
												</tr>
											</thead>
											<tbody>
												<ng-container *ngIf="!isAdd && reply.emailTemplatesPagination.totalRecords>0 && reply.emailTemplatesPagination.pageIndex==1 && reply.selectedEmailTemplateIdForEdit>0 && reply.showSelectedEmailTemplate ">
													<tr (click)="setReplyEmailTemplate(reply.emailTemplate.id,reply,i)" [class.active]="reply.emailTemplate.id==reply.selectedEmailTemplateId">
														<td>
															<input [attr.disabled]="isPreviewEvent? '' : null" type="radio" name="reply-email-template" [value]="reply.emailTemplate.id" id="reply-{{i}}-{{reply.emailTemplate.id}}"
																(click)="setReplyEmailTemplate(reply.emailTemplate.id,reply,i)" [checked]="reply.emailTemplate.id == reply.selectedEmailTemplateId">
														</td>
														<td *ngIf="reply.emailTemplate.name?.length>25" title="{{reply.emailTemplate.name}}">{{reply.emailTemplate.name|slice:0:25}}....</td>
														<td *ngIf="reply.emailTemplate.name?.length<=25" title="{{reply.emailTemplate.name}}">{{reply.emailTemplate.name}}</td>
														<td *ngIf="reply.emailTemplate.createdBy?.length>25" title="{{reply.emailTemplate.createdBy}}">{{reply.emailTemplate.createdBy|slice:0:25}}....</td>
														<td *ngIf="reply.emailTemplate.createdBy?.length<=25" title="{{reply.emailTemplate.createdBy}}">{{reply.emailTemplate.createdBy}}</td>
														<td><a class="text-warning"><i class="fa fa-eye" style="padding-top: 3px; font-size: 20px;" title="" data-original-title="Preview"></i></a></td>
													</tr>
												</ng-container>
												<ng-container *ngFor="let emailTemplate of reply.emailTemplatesPagination.pagedItems ;let e =index">
													<tr (click)="setReplyEmailTemplate(emailTemplate.id,reply,i,emailTemplate.draft)" [class.active]="emailTemplate.id==reply.selectedEmailTemplateId"
														*ngIf="reply.selectedEmailTemplateIdForEdit!=emailTemplate.id">
														<td>
															<input [attr.disabled]="isPreviewEvent? '' : null" *ngIf="!emailTemplate.draft" type="radio" name="reply-email-template" [value]="emailTemplate.id" id="reply-{{i}}-{{emailTemplate.id}}"
															 (click)="setReplyEmailTemplate(emailTemplate.id,reply,i,emailTemplate.draft)" [checked]="emailTemplate.id == reply.selectedEmailTemplateId">
														<input [class.disabled]="isPreviewEvent" *ngIf="emailTemplate.draft" title="draft template cannot be selected" disabled="disabled" type="radio" name="reply-email-template">
														</td>
														<td *ngIf="emailTemplate.name?.length>25" title="{{emailTemplate.name}}">{{emailTemplate.name|slice:0:25}}....</td>
														<td *ngIf="emailTemplate.name?.length<=25" title="{{emailTemplate.name}}">{{emailTemplate.name}}</td>
														<td *ngIf="emailTemplate.createdBy?.length>25" title="{{emailTemplate.createdBy}}">{{emailTemplate.createdBy|slice:0:25}}....</td>
														<td *ngIf="emailTemplate.createdBy?.length<=25" title="{{emailTemplate.createdBy}}">{{emailTemplate.createdBy}}</td>
														<td>
															<a *ngIf="!emailTemplate.draft" class="text-warning" (click)="getEmailTemplatePreview(emailTemplate);$event.stopPropagation()">
																<i class="fa fa-eye" style="padding-top: 3px; font-size: 20px;" title="" data-original-title="Preview"></i>
															</a>
														</td>
													</tr>
												</ng-container>
											</tbody>
										</table>
										<div *ngIf="reply.emailTemplatesPagination.totalRecords==0" class="alert alert-info">
											<strong>No email templates found</strong>
										</div>
									</ng-container>
								</div>
              </div>
              </div>
						</form>
					</div>
				</div>
      </div>
      </fieldset>
			<div class="portlet light dashboard-stat2 col-xs-12">
				<div class="col-xs-4" ><button [disabled]="isPreviewEvent"  class='btn btn-block btn-primary' (click)="createEventCampaign(eventCampaign, 'NOW')">Now</button></div>
				<div class="col-xs-4"><button [disabled]="isPreviewEvent"  class='btn btn-block btn-primary' (click)="selectedLaunchOption = 'SCHEDULE'">Schedule</button></div>
				<div class="col-xs-4"><button [disabled]="isPreviewEvent"  class='btn btn-block btn-primary' (click)="createEventCampaign(eventCampaign, 'SAVE')">Save</button></div>

				<div class="col-md-12" style="margin-left: -17px;margin-top: 12px;" [hidden]="selectedLaunchOption!='SCHEDULE'">
					<div class="col-md-4">
						<label style="float: left;">Date</label>
						<br>
						<input [attr.disabled]="isPreviewEvent? '' : null"  type="text" id="launchTimeInString" class="form-control flatpickr" placeholder="Launch Time"
								[(ngModel)]="eventCampaign.launchTimeInString" [ngModelOptions]="{standalone: true}">
					</div>
					<div class="col-md-4">
						<label style="float: left;">Country</label>
						<br>
						<select [attr.disabled]="isPreviewEvent? '' : null" class="form-control" style="width: 100%" [(ngModel)]="eventCampaign.countryId" [ngModelOptions]="{standalone: true}" (change)="onChangeCountry($event.target.value)" id="countryName">
							<option *ngFor="let country of countries" [value]="country.id">{{country.name}}</option>
						</select>
					</div>
					<div class="col-md-4">
						<label style="float: left;">TimeZone </label>
						<br>
						<select [attr.disabled]="isPreviewEvent? '' : null" class="form-control" style="width: 100%" [(ngModel)]="eventCampaign.timeZone" [ngModelOptions]="{standalone: true}" id="timezoneId">
							<ng-container *ngIf="timezones?.length==1">
								<option *ngFor="let timeZone of timezones" [value]="timeZone.timezoneId" [selected]="eventCampaign.countryId == timeZone.countryId">
									{{timeZone.cityName}}
								</option>
							</ng-container>
							<ng-container *ngIf="timezones?.length>1">
								<option *ngFor="let timeZone of timezones" [value]="timeZone.timezoneId">
									{{timeZone.cityName}}
								</option>
							</ng-container>
						</select>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<div class="modal fade-scale" id="contactsModal" tabindex="-1" role="dialog" aria-labelledby="contactsModalLabel" data-keyboard="false" data-backdrop="static">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<a class="close-circle" data-dismiss="modal" (click)="closeModal()">
					<i class="fa fa-times"></i>
				</a>
				<h4 id="contactsModalLabel" class="modal-title caption-subject font-red-sunglo">{{previewContactList.name}}</h4>
			</div>
			<div class="modal-body">
				<div class="table-responsive">
					<table class="table table-bordered table-striped table-hover">
						<thead>
							<tr>
								<th>Email Address</th>
								<th>First Name</th>
								<th>Last Name</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let contact of contactsPagination.pagedItems">
                <td title="{{contact.emailId}}">
                  <span *ngIf="contact.emailId?.length>25">{{contact.emailId | slice:0:25}}..</span>
                  <span *ngIf="contact.emailId?.length<=25">{{contact.emailId}}</span>
                </td>
								<td title="{{contact.firstName}}">
                    <span *ngIf="contact.firstName?.length>20">{{contact.firstName | slice:0:20}}..</span>
                    <span *ngIf="contact.firstName?.length<=20">{{contact.firstName}}</span>
                </td>
								<td title="{{contact.lastName}}">
                    <span *ngIf="contact.lastName?.length>20">{{contact.lastName | slice:0:20}}..</span>
                    <span *ngIf="contact.lastName?.length<=20">{{contact.lastName}}</span>
                </td>
							</tr>
						</tbody>
					</table>
					<app-pagination *ngIf="contactsPagination.pagedItems?.length > 0" [pagination]="contactsPagination" [type]="'updatestatuscontacts'"
					 (notifyParent)="setPage($event)" (notifyParentDropDown)="paginationDropDown($event)"></app-pagination>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- --------------------Email Template -->
<div class="modal" id="show_email_template_preivew">
	<div class="modal-dialog modal-lg" style="width: 75%;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close-circle" data-dismiss="modal">
					<i class="fa fa-times"></i>
				</button>
				<h4 class="modal-title" id="email-template-title" style="text-align: center;"></h4>
			</div>
			<div class="modal-body">
				<div id="htmlContent"></div>
			</div>
			<div class="modal-footer">
				<a href="javascript:void(0)" data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
			</div>
		</div>
	</div>
</div>
