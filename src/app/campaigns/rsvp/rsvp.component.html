<div class="expired-event-class" *ngIf="eventExpiredError">This
	event has concluded.
 </div>
 <div class="expired-event-class" *ngIf="isCancelledEvent">{{errorLogMessage}}</div>
 <div class="form-submit-success" *ngIf="hideForm">
	<img src="assets/images/event-success.png" id="custom-width">
	<h1>Thank you!</h1>
	<p>Your submission has been received.</p>
 </div>
 <div class="container-fluid" [hidden]="processor.isProcessing || eventExpiredError || hideForm"
	style="margin-top: 2em">
	<ngx-loading [show]="rsvpSavingProcessing"
	[config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
	<div class="alert alert-success alert-dismissible fade in alertDanger"
	   style="margin: 0px -5px 10px 16px;" role="alert"
	   *ngIf="responseMessage">
	   <a type="button" class="close" data-dismiss="alert" aria-label="Close"
		  (click)="responseMessage = null"> <span aria-hidden="true">Ã—</span>
	   </a> Thank you for the RSVP
	</div>
	<div class="col-xs-12 col-sm-7 p0" [hidden]="!eventcampaign">
	   <div class="col-xs-12 p0 hidden-xs">
		  <fieldset class="fieldrsvp">
			 <div #dataContainer></div>
		  </fieldset>
	   </div>
	</div>
	<div [hidden]="!eventcampaign">
	   <div class="col-xs-12 col-sm-5 p0">
		  <div class=" col-xs-12 col-sm-12 p0">
			 <div class="portlet light" *ngIf="selectedUtmType != 'public'">
				<div class="portlet-title title-css-no-border"
				   style="padding: 9px !important;">
				   <div *ngIf="isRsvp; then rsvp_exist else rsvp_new"></div>
				   <ng-template #rsvp_exist>
					  <h4 class="pull-left" style="color: #fff">
						 You Have RSVPed <b>{{eventcampaign.campaignEventRsvps[0].eventCampaignRsvp}}</b>
					  </h4>
					  <button class="btn btn-secondary pull-right"
					  [disabled]="isCancelledEvent" (click)="isRsvp = !isRsvp">Change</button>
				   </ng-template>
				   <ng-template #rsvp_new>
					  <h4 class="pull-left" style="color: #fff">Submit your details</h4>
					  <div class="pull-right" [class.disabled]="isCancelledEvent">
						 <button class="btn btn-secondary" [disabled]="isCancelledEvent"
						 [class.selectedType]="campaignRsvp.eventCampaignRsvp ==='YES'"
						 (click)="setCampaignRsvpType('YES')">Yes</button>
						 <button class="btn btn-secondary" [disabled]="isCancelledEvent"
						 [class.selectedType]="campaignRsvp.eventCampaignRsvp ==='NO'"
						 (click)="setCampaignRsvpType('NO')">No</button>
						 <button class="btn btn-secondary" [disabled]="isCancelledEvent"
						 [class.selectedType]="campaignRsvp.eventCampaignRsvp ==='MAYBE'"
						 (click)="setCampaignRsvpType('MAYBE')">Maybe</button>
					  </div>
				   </ng-template>
				</div>
			 </div>
		  </div>
		  <div class="col-xs-12 col-sm-12 col-lg-12 hidden-lg p0">
			 <div class="panel-group">
				<div class="panel panel-default" style="border-radius: 0px;">
				   <div class="panel-heading" style="background-color: #d9edf7;" data-toggle="collapse"
					  href="#collapse2">
					  <h4 class="panel-title f-w-500" *ngIf="eventcampaign?.campaign" title="{{eventcampaign.campaign}}">
						 {{eventcampaign.campaign | slice:0:50}} <span *ngIf="eventcampaign?.campaign?.length>50">...</span> <i class="fa fa-caret-down pull-right"></i>
					  </h4>
				   </div>
				   <div id="collapse2" class="panel-collapse collapse" [hidden]="!eventcampaign">
					  <div class="form-group">
						 <div #dataContainerDup></div>
						 <div class="col-xs-12 col-sm-7 p0" [hidden]="!eventcampaign">
							<div class="col-xs-12 p0 hidden-xs" >
							</div>
						 </div>
					  </div>
				   </div>
				</div>
			 </div>
		  </div>
		  <div class="col-xs-12 col-sm-12 p0">
			 <div class="portlet light" style="border: none;">
				<div class="portlet-body">
				   <div>
					  <div style="font-size: 15px;">							
					  </div>
					  <div class="col-xs-12 col-sm-12 p0"
						 *ngIf="authenticationService.formAlias">
						 <app-form-preview #formPreviewComponent (captchaValue)="setEnableCaptcha($event)"></app-form-preview>
					  </div>
				   </div>
				</div>
			 </div>
		  </div>
		  <div class="col-sm-12 col-md-12 small"
			 style="">
			 <textarea [(ngModel)]="campaignRsvp.message"
			 (input)="characterSize()" [ngModelOptions]="{standalone: true}"
			 maxlength="140" placeholder="Add a comment..."></textarea>
			 <label class="text-area-css">{{characterleft}} characters
			 left</label>
			 <div style="margin-bottom: 60px;">
				<ng-container *ngIf="campaignRsvp?.eventCampaignRsvp=='YES' && isDataLoaded">
				   <ng-container  *ngIf="eventcampaign?.inviteOthers">
					  <button style="min-width: 35px !important;"
					  class="btn btn-primary default-btn-css"
					  [disabled]="totalGuests==0"
					  (click)="totalGuests = totalGuests-1">-</button>
					  <button class="btn btn-defult default-btn-css totalguests">{{totalGuests}}</button>
					  <button style="margin-left: -4px;"
					  class="btn btn-primary default-btn-css"
					  [disabled]="totalGuests==11"
					  (click)="totalGuests = totalGuests+1">+</button>
					  <span class="bold" style="color: #fff">Total guests (in
					  addition to you)</span> 
				   </ng-container>
				</ng-container>
				<div class="footer col-xs-12 ol-sm-12 col-md-12 "
				   style="padding-right: 17px;">								
				   <button style="margin-bottom: 10px;"
				   [class.save-button-align-class]="!eventcampaign?.inviteOthers"
				   (click)="campaignRsvp.eventCampaignRsvp = 'YES'" type="button"
				   class="btn btn-primary" [disabled]="rsvpSavingProcessing || (form.showCaptcha && !isCaptchaValid)"
				   (click)="saveEventCampaignRsvp()">Submit</button>
				</div>
			 </div>
		  </div>
		  <div class="col-xs-12 col-sm-12 p0" *ngIf="selectedUtmType !='public' && eventcampaign?.campaignEventRsvps?.length>0">
			 <div class="portlet light">
				<div class="portlet-title">
				   <h4 style="color: #fff; padding-left: 8px;">RSVP history</h4>
				</div>
				<div class="portlet-body">
				   <table class="table table-condensed table-hover">
					  <thead>
						 <tr>
							<th>Date</th>
							<th>RSVP</th>
							<th>Message</th>
							<th>Guests</th>
						 </tr>
					  </thead>
					  <tbody>
						 <tr *ngFor="let rsvp of eventcampaign.campaignEventRsvps">
							<td>{{rsvp.rsvpTime | date}} {{rsvp.rsvpTime |
							   date:'shortTime'}}
							</td>
							<td>{{rsvp.eventCampaignRsvp}}</td>
							<td><span title="{{rsvp.message}}" *ngIf="rsvp?.message">{{rsvp.message
							   | slice:0:18}}</span> <span *ngIf="rsvp?.message?.length>18">...</span>
							   <span *ngIf="!rsvp?.message">-</span>
							</td>
							<td><span
							   *ngIf="rsvp.eventCampaignRsvp === 'YES'">
							   {{rsvp.additionalCount}} </span> <span
								  *ngIf="rsvp.eventCampaignRsvp != 'YES'"> NA </span>
							</td>
						 </tr>
					  </tbody>
				   </table>
				</div>
			 </div>
		  </div>
	   </div>
	</div>
 </div>