<div class="page-content" [style.background-color]="referenceService.pageContnetBgColor">
    <ngx-loading [show]="ngxloading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
    <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
    <app-grid-loader *ngIf="httpRequestLoader.isLoading && !isListView"></app-grid-loader>
    <app-list-loader *ngIf="httpRequestLoader.isLoading && isListView"></app-list-loader>
    <div [hidden]="httpRequestLoader.isLoading">
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <i class="fa fa-home"></i>
                    <a [routerLink]="referenceService.homeRouter">Home</a>
                    <i class="fa fa-angle-right"></i>
                </li>
                <li>
                    <a [routerLink]="['/home/campaigns/partner/all']"> Campaigns shared by Vendors</a>
                </li>
                <li>
                    <i class="fa fa-angle-right"></i>
                    <a> Redistribute Campaign</a>
                </li>
            </ul>
            <div id="folder-margin-xamp">
                <button class="add-button-xamplify" id="right" (click)="openCreateFolderPopup()">Create a Folder</button>
            </div>
        </div>
        <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>

        <div [hidden]="isEditPartnerTemplate">
        <div class="portlet light shadow">
            <div class="portlet-title">
                <h4 class="caption-subject font-red-sunglo f-w-600 pull-left">Redistribute a Campaign</h4>
                <a class="close-circle pull-right" data-dismiss="modal" (click)="goToCampaigns()">
                    <i class="fa fa-times"></i>
                </a>
            </div>
            <div class="portlet-body clearfix">
                <div class="alert alert-danger" id="contact-list-error" style="display: none;">
                    <strong>Please select a contact list.</strong>
                </div>
                <div class="alert alert-danger error-div" *ngIf="invalidScheduleTime" id="invalidScheduleTimeDiv">
                    <strong>{{invalidScheduleTimeError}}</strong>
                </div>

                <form role="form" [formGroup]="campaignLaunchForm" (ngSubmit)="launchCampaign();">
                    <div class="col-xs-12 col-sm-6">
                        <fieldset>
                            <legend>Campaign details</legend>
                            <form>
                                <div class="form-group" [attr.class]="campaignNameDivClass">
                                    <label for="exampleInputEmail1">Campaign name (save as)</label>
                                    <font style="color: red">
                                        <b> * </b>
                                    </font>
                                    <span *ngIf="!isValidCampaignName &&campaign.campaignName?.length>0" style="color: red">Already Exists</span>
                                    <input type="text" id="campaignName" placeholder="Campaign Name" class="form-control" [(ngModel)]="campaign.campaignName" name="campaignName" (input)="validateCampaignName(campaign.campaignName);validateForm();validateField('campaignName');" maxlength="200"
                                    />
                                </div>

                                <div class="form-group" [attr.class]="fromEmaiDivClass">
                                    <label class="control-label">Folder
                                        <font style="color: red"><b>*</b>
                                        </font>
                                    </label>
                                        <select class="form-control" name="campaign.categoryId" [(ngModel)]="campaign.categoryId" style="width: 100%" (change)="setCategoryTitle($event)">
                                            <option *ngFor="let category of categoryNames"
                                                [ngValue]="category.id">
                                                 {{category.name | slice:0:60}}
                                                 <span *ngIf="category.name?.length>60">...</span>
                                            </option>
                                        </select>
                                </div>

                                <div class="form-group" [attr.class]="subjectLineDivClass">
                                    <label for="exampleInputPassword1">Subject line</label>
                                    <font style="color: red">
                                        <b> * </b>
                                    </font>
                                    <input type="text" id="subjectLine" placeholder="Subject Line" class="form-control" [(ngModel)]="campaign.subjectLine" name="subjectLine" (input)="validateForm();validateField('subjectLine');" maxlength="200" />
                                </div>
                                <div class="form-group col-xs-6 p0" [attr.class]="fromNameDivClass">
                                    <label for="exampleInputPassword1">From name</label>
                                    <font style="color: red">
                                        <b> * </b>
                                    </font>
                                    <input type="text" id="fromName" placeholder="From Name" class="form-control" [(ngModel)]="campaign.fromName" name="fromName" (input)="validateForm();validateField('fromName');" maxlength="200" />
                                </div>
                                <div class="form-group col-xs-6 pr0" [attr.class]="fromEmaiDivClass">
                                    <label for="exampleInputPassword1">From email</label>
                                    <font style="color: red">
                                        <b> * </b>
                                    </font>
                                    <select class="form-control" name="campaign.email" [(ngModel)]="campaign.email" (change)="setFromName()"><!-- *ngIf="isOrgAdminAndPartner || isVendorAndPartner"-->
                    <option *ngFor="let teamMember of teamMemberEmailIds" [ngValue]="teamMember.emailId" >
						          {{teamMember.emailId}}
					        </option>
                  </select>
                                    <!---<select class="form-control" name="campaign.email" [(ngModel)]="campaign.email" (change)="setFromName()" *ngIf="isOnlyPartner">
                    <option  [ngValue]="campaign.email" >
						        {{campaign.email}}
					          </option>
                  </select>--->
                                </div>
                                <div class="form-group" [attr.class]="preHeaderDivClass">
                                    <label for="exampleInputPassword1">Pre header</label>
                                    <font style="color: red">
                                        <b> * </b>
                                    </font>
                                    <input type="text" id="preHeader" placeholder="Preheader" class="form-control" [(ngModel)]="campaign.preHeader" name="preHeader" (input)="validateForm();validateField('preHeader');" maxlength="200" />
                                </div>
                                <!--    <div class="form-group">
                  <label class="control-label col-sm-3 p0">Data Sharing</label>
                  <div class="col-sm-9" style="margin-bottom: 10px;">
                    <div class="email-options-checkbox-group email-options-notify">
                      <div class="email-options-checkbox clearfix">
                        <div class="col-sm-4">
                          <switch [status]="campaign.dataShare" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch"
                            [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size" (statusChange)="shareAnalytics($event)">
                          </switch>
                        </div>
                        <div class="col-sm-8">
                          <label style="margin: 5px 0;">
                            <span style="cursor: pointer;color: #54a7e9;">
                              <i class="fa fa-question-circle" style="font-size: 18px;float: left;"  data-toggle="tooltip" data-placement="bottom" title="{{properties.ENALEORDISABLE_VENDOR_MESSAGE}}"></i>
                            </span>
                          </label>
                        </div>
                      </div>
                      <section *ngIf="campaign.dataShare" style="margin: 6px 15px;">
                        <label class="col-xs-12 radio-inline" style="cursor:pointer" (click)="checkInteractiveData('false')">
                          <input name="options" type="radio" [checked]="!campaign.detailedAnalyticsShared" style="cursor:pointer">
                          <strong>Active participants</strong>
                          <span style="cursor: pointer;color: #54a7e9;" data-toggle="tooltip" data-placement="bottom" title="{{properties.ACTIVE_PARTICIPANTS}}">
                          <i class="fa fa-question-circle" style="font-size: 18px;"></i>
                         </span>
                        </label>
                        <label class="col-xs-12 radio-inline" style="cursor:pointer;margin-left: 0;" (click)="checkInteractiveData('true')">
                          <input name="options" type="radio" [checked]="campaign.detailedAnalyticsShared" style="cursor:pointer">
                          <strong>All participants</strong>
                          <span style="cursor: pointer;color: #54a7e9;" data-toggle="tooltip" data-placement="bottom" title="{{properties.ALL_PARTICIPANTS}}">
                            <i class="fa fa-question-circle" style="font-size: 18px;"></i>
                          </span>
                        </label>
                      </section>
                    </div>
                  </div>
                </div> -->
                                <div class="form-group">
                                    <label class="control-label col-sm-3 p0">Notify Me When</label>
                                    <div class="col-sm-9">
                                        <div class="email-options-checkbox-group email-options-notify">
                                            <div class="email-options-checkbox clearfix">
                                                <div class="col-sm-4 ui-switch-custom-div">
                                                    <switch [status]="campaign.emailOpened" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                        (statusChange)="setEmailOpened($event)">
                                                    </switch>
                                                </div>
                                                <div class="col-sm-8" style="margin-bottom: 10px;">
                                                    <label style="margin: 5px 0;">Email is opened</label>
                                                </div>
                                            </div>

                                            <div class="email-options-checkbox clearfix">
                                                <div class="col-sm-4 ui-switch-custom-div">
                                                    <switch [status]="campaign.linkOpened" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                        (statusChange)="setLinkOpened($event)">
                                                    </switch>
                                                </div>
                                                <div class="col-sm-8" style="margin-bottom: 10px;">
                                                    <label style="margin: 5px 0;">Link is opened</label>
                                                </div>
                                            </div>

                                            <div class="email-options-checkbox clearfix" *ngIf="campaignType=='VIDEO'">
                                                <div class="col-sm-4 ui-switch-custom-div">
                                                    <switch [status]="campaign.videoPlayed" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size"
                                                        (statusChange)="setVideoPlayed($event)">
                                                    </switch>
                                                </div>
                                                <div class="col-sm-8">
                                                    <label style="margin: 5px 0;">Video is played</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </fieldset>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                        <fieldset *ngIf="campaignType=='VIDEO'">
                            <legend>Selected video</legend>
                            <app-video-thumbnail [videoFile]="campaign.campaignVideoFile" (notifyParent)="previewVideo($event)"></app-video-thumbnail>
                        </fieldset>
                        <!-- ----------Email Template -->
                        <fieldset *ngIf="campaignType!='LANDINGPAGE'">
                            <legend>
                                Selected email template
                            </legend>
                            <div class="row m0"  style="cursor: pointer;">
                                <div class="col-xs-3">
                                    <img src="{{campaign.emailTemplate.subject}}" height="100">
                                </div>
                                <div class="col-xs-8">
                                    <a>
                                        <h4 class="ellipsis mt5 mb5" style="color: #777676;font-weight: 500 !important;" title="{{campaign.emailTemplate.name}}">{{campaign.emailTemplate.name | slice:0:25}}
                                            <span *ngIf="campaign.emailTemplate.name?.length>25">...</span>
                                        </h4>
                                        <h5 style="color: #656565;" class="m0" *ngIf="campaign.emailTemplate?.type?.toLocaleString() ==='PARTNER'" title="{{campaign.emailTemplate.vendorName}}">
                                            Shared By {{campaign.emailTemplate.vendorName | slice:0:15}}
                                            <span *ngIf="campaign.emailTemplate.vendorName?.length>15">...</span>
                                        </h5>
                                        <h5 style="color: #656565;" class="m0" *ngIf="campaign.emailTemplate?.type?.toLocaleString()!=='PARTNER'" title="{{campaign.emailTemplate.createdBy}}">
                                            Created By {{campaign.emailTemplate.createdBy | slice:0:15}}
                                            <span *ngIf="campaign.emailTemplate.createdBy?.length>15">...</span>
                                        </h5>
                                    </a>
                                    <br>
                                    <a class="pull-right btn btn-primary btn-sm" (click)="previewEmailTemplate(campaign.emailTemplate)">  <i class="fa fa-eye"></i> Preview </a>
                                    <a *ngIf="campaign?.emailTemplate?.editPartnerTemplate"  class="pull-right btn btn-primary btn-sm" style="margin-right: 6px" (click)="editPartnerTemplate()"> <i class="fa fa-edit"></i> Edit </a>
                                </div>
                            </div>
                        </fieldset>

                        <!-- ----------Landing Page---------- -->
                        <fieldset *ngIf="campaignType=='LANDINGPAGE'">
                            <legend>Selected page</legend>
                            <div class="row m0" (click)="previewCampaignLandingPage(campaign)" style="cursor: pointer;">
                                <div class="col-xs-3">
                                    <img src="assets/images/Landing-Pages/{{campaign.landingPage.imageName}}" height="100">
                                </div>
                                <div class="col-xs-9">
                                    <a>
                                        <h4 class="ellipsis mt5 mb5" style="color: #777676;font-weight: 500 !important;" title="{{campaign.landingPage.name}}">{{campaign.landingPage.name | slice:0:25}}
                                            <span *ngIf="campaign.landingPage.name?.length>25">...</span>
                                        </h4>
                                        <h5 style="color: #656565;" class="m0" title="{{campaign.landingPage.createdUser}}">
                                            Shared By {{campaign.landingPage.createdUser | slice:0:15}}
                                            <span *ngIf="campaign.landingPage.createdUser?.length>15">...</span>
                                        </h5>
                                    </a>
                                </div>
                            </div>
                        </fieldset>

                        <div class="table-responsive">
                            <fieldset [style.border-color]="contactListBorderColor">
                                <legend>Selected contact list</legend>
                                <div class="row m0">
                                    <div class="col-xs-4 p0">
                                        <i class="fa fa-users" [ngClass]="{'disabled': selectedUserlistIds.length < 1}"></i>
                                    </div>
                                    <div class="col-xs-8 p0" style="margin-top: 16px;">
                                        <h4 class="pull-left" *ngIf="selectedUserlistIds.length==0">No contact list is selected</h4>
                                        <h4 class="pull-left" *ngIf="selectedUserlistIds.length==1">{{selectedUserlistIds.length}} contact list is selected</h4>
                                        <h4 class="pull-left" *ngIf="selectedUserlistIds.length>1">{{selectedUserlistIds.length}} contact lists are selected</h4>
                                        <a class="pull-right btn btn-primary btn-sm" style="margin-top: 6px" (click)="showContacts()">{{previewText}}</a>
                                        <br>
                                        <span *ngIf="selectedUserlistIds.length>0" style="color: cornflowerblue;font-weight: 600;float: left;margin-bottom: 10px;">This email will be sent to {{validUsersCount}}({{allUsersCount}}) users.</span>
                                    </div>
                                </div>
                                <div id="campaign-contact-list" style="display: none;">
                                    <div>
                                        <div class="row pb10" id="user_list_table_view">
                                            <app-loader [model]="campaignContact.httpRequestLoader.isHorizontalCss" *ngIf="campaignContact.httpRequestLoader.isLoading"></app-loader>
                                            <app-error-pages *ngIf="campaignContact.httpRequestLoader.isServerError"></app-error-pages>
                                            <ng-container *ngIf="!campaignContact.httpRequestLoader.isLoading && !campaignContact.httpRequestLoader.isServerError">
                                                <div id="user_list_tb_wrapper" class="dataTables_wrapper form-inline no-footer">
                                                    <div class="inputs" align="right" style="float:right;padding: 5px 5px 12px 0px;">
                                                        <div class="portlet-input input-inline input-large" style="position: relative;top: -6px;right: -5px;">
                                                            <div class="input-icon right">
                                                                <input type="text" [(ngModel)]="contactSearchInput" [ngModelOptions]="{standalone: true}" class="form-control" placeholder="Search for a list" (keypress)="contactSearchInputKey($event.keyCode)">
                                                                <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="contactSearchInput" (click)="contactSearchInput='';searchContactList()"></button>
                                                                <button type="submit" class="search-box-item-click" (click)="searchContactList()"><i class="fa fa-search"></i></button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row-fluid">
                                                        <table class="table table-filter" *ngIf="contactListPagination.totalRecords==0">
                                                            <tr>
                                                                <td colspan="5">
                                                                    <div class="alert alert-info">
                                                                        <strong>No Contacts found</strong>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <table  class="table table-bordered no-more-tables dataTable no-footer" id="user_list_tb" role="grid" aria-describedby="user_list_tb_info" *ngIf="contactListPagination.totalRecords > 0">
                                                            <thead>
                                                                <tr>
                                                                    <td align="center">
                                                                        <input type="checkbox" name="all" [(ngModel)]="isHeaderCheckBoxChecked" (change)="checkAll($event)" id="checkAllExistingContacts" [ngModelOptions]="{standalone: true}" />
                                                                    </td>
                                                                    <th class="text-center">
                                                                   		<span class="ui-column-resizer"	(mousedown)="referenceService.onMouseDown($event,'user_list_tb',1)"> </span>
																		<span class="gridHeader">List Name</span>
                                                                    </th>
                                                                    <th class="text-center"> Type </th>
                                                                    <th class="text-center"> Date Uploaded </th>
                                                                    <th class="text-center"> Preview </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr role="row" *ngFor="let contacts of contactListPagination.pagedItems;let i = index" id="campaignContactListTable_{{contacts.id}}" (click)="highlightContactRow(contacts.id,$event,contacts.noOfContacts,contacts.emailValidationInd)" (mouseover)='showContactsAlert(contacts.noOfContacts)'
                                                                    [attr.title]="emptyContactsMessage" [class.contact-list-selected]="(selectedUserlistIds.indexOf(contacts.id)>-1 && contacts.noOfContacts>0)">
                                                                    <td class="text-center">
                                                                        <div class="form-group" *ngIf="contacts.noOfContacts>0 && contacts.emailValidationInd">
                                                                            <input type="checkbox" class="chk" lang="{{contacts.name}}" id="{{contacts.id}}" [checked]="selectedUserlistIds.indexOf(contacts.id)>-1" name="campaignContact[]" value="{{contacts.id}}" (click)="highlightRow(contacts.id,$event)">
                                                                        </div>

                                                                        <div class="form-group" *ngIf="contacts.noOfContacts==0 || !contacts.emailValidationInd">
                                                                            <input type="checkbox" disabled="disabled" title="Contacts are in progress">
                                                                        </div>
                                                                    </td>

                                                                    <td class="text-center moreipsis" title="{{contacts.name}}">
                                                                        <span> {{contacts.name}}</span>
                                                                    </td>
																	<td class="text-center moreipsis"><span
																		*ngIf="contacts.publicList">Public</span> <span
																		*ngIf="!contacts.publicList">Private</span></td>

																	<!--  <td class="text-center moreipsis" title="{{contacts.publicList}}">
                                                                        <span> {{contacts.publicList}}</span>
                                                                    </td> -->


                                                                    <td class="text-center sorting_1">
                                                                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="contacts.createdDate"> </app-timestamp>
                                                                    </td>


                                                                    <td class="text-center">
                                                                        <a (click)="$event.stopPropagation();loadUsers(contactListPagination.pagedItems[i].id,contactsUsersPagination,contacts.name)">
                                                                            <i class="fa fa-eye" style="padding-top: 3px; font-size: 20px;" title="" data-original-title="Preview"></i>
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <div *ngIf="contactListPagination.totalRecords > 0 && !httpRequestLoader.isLoading && !httpRequestLoader.isServerError" style="background:white">
                                                <div *ngIf="contactListPagination.pagedItems.length !== 0">
                                                    <app-pagination [pagination]="contactListPagination" [type]="'contacts'" (notifyParent)="setContactPage($event)" (notifyParentDropDown)="loadContactList($event)" style="position: relative;top: -10px"></app-pagination>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div class="col-xs-12" id="campaign-options-div">
                        <div>
                            <div class="row">
                                <div class="col-xs-6"></div>
                                <div class="col-xs-6 text-right pb10" style="margin-top: 10px;">
                                    <h5 class="control-label font-purple-intense pr10" style="display: inline-block;">Enable work flow</h5>
                                    <switch [status]="enableWorkFlow" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue" [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch" [size]="callActionSwitch.size" (statusChange)="enableWorkFlow = !enableWorkFlow">
                                    </switch>
                                </div>
                                <div [hidden]="!enableWorkFlow">
                                    <div class="col-xs-6">
                                        <a *ngIf="emailTemplateHrefLinks?.length==0" class="dashboard-stat yellow-gold blur" style="background-color: #f76c1a;" title="No Urls found">
                                            <i class="fa fa-ban p0" style="margin: 0 5px;"></i>{{properties.ADD_AUTO_RESPONSE_WEBSITE}}
                                        </a>
                                        <a *ngIf="emailTemplateHrefLinks?.length>0" class="dashboard-stat yellow-gold" style="background-color: #f76c1a;" (click)="addClickRows()">
                                            <i class="fa fa-plus-square p0" style="margin: 0 5px;"></i>{{properties.ADD_AUTO_RESPONSE_WEBSITE}}
                                        </a>
                                    </div>
                                    <div class="col-xs-6">
                                        <a class="dashboard-stat yellow-gold" style="background-color: #f4555c;" (click)="addReplyRows()">
                                            <i class="fa fa-plus-square p0" style="margin: 0 5px;"></i>{{properties.ADD_AUTO_RESPONSE_EMAIL}}
                                        </a>
                                    </div>
                                    <!-- -------------------------------------Add Reply----------------------------- -->
                                    <div class="col-xs-12" id="reply-onclick-div" style="position: relative; bottom: -7px;">
                                        <div class="alert alert-danger" *ngIf="dataError && contactListBorderColor!=='red'">
                                            <strong>Please complete the * required fields</strong>
                                        </div>
                                        <!-- Content Should Come here ------------ -->
                                        <fieldset *ngIf="replies?.length>0">
                                            <legend style="padding: 15px 10px;">{{properties.ADD_AUTO_RESPONSE_EMAIL}}</legend>
                                            <div *ngFor="let reply of replies;let i=index">
                                                <div class="portlet light dashboard-stat2" id="{{reply.divId}}">
                                                    <div class="portlet-title custom-change-css" [ngClass]="{'colorBlue':isEven(i+1), 'colorRed':!isEven(i+1)}">
                                                        <div class="col-xs-7 ">
                                                            <h4 class="text-left" style="color:#fff">
                                                                Add an Auto-response to your e-mail-{{i+1}}
                                                            </h4>
                                                        </div>
                                                        <div class="col-xs-5" style="text-align:right">
                                                            <!--  <label class="switch-choose" style="color:#fff">Choose Template</label> -->
                                                            <!--  <switch class="switch-choose" [status]="reply.defaultTemplate" [onText]="callActionSwitch.onTextValue" [offText]="callActionSwitch.offTextValue"
                                                                    [onColor]="callActionSwitch.onGreenColorSwitch" [offColor]="callActionSwitch.onDefaultColorSwitch"
                                                                    [size]="callActionSwitch.size" (statusChange)="selectReplyEmailBody($event,i,reply)">
                                                                </switch> -->
                                                            <button type="button" class="btn btn-danger button-blue" (click)="remove(reply.divId,'replies')">
                                                                <span class="glyphicon glyphicon-trash"></span>
                                                            </button>
                                                            <button type="button" class="btn btn-primary button-blue" (click)="addReplyRows()">
                                                                <span class="glyphicon glyphicon-plus"></span>
                                                             </button>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <form class="role add-reply" id="form-{{reply.divId}}">
                                                            <div class="col-xs-12" style="padding:0">
                                                                <div class="col-xs-12" style="padding:0">
                                                                    <div class="col-xs-4">
                                                                        <label for="reason" style="cursor:default">Reason</label>
                                                                        <select class="form-control" name="actionId" [(ngModel)]="reply.actionId" style="cursor:pointer">
                                                                            <option [value]="0" [selected]="reply.actionId ==0">Email is not opened</option>
                                                                            <option [value]="13" [selected]="reply.actionId==13">Email is opened</option>
                                                                            <option [value]="16" [selected]="reply.actionId ==16">Send immediately after email
                                                                                is opened</option>
                                                                            <ng-container *ngIf="campaignType=='VIDEO' ">
                                                                                <option [value]="1" [selected]="reply.actionId==1"> Video is played</option>
                                                                                <option [value]="17" [selected]="reply.actionId==17"> Send immediately after video
                                                                                is played</option>
                                                                                <option [value]="18" [selected]="reply.actionId==18">Video is not played</option>
                                                                            </ng-container>
                                                                    </select>
                                                                    </div>
                                                                    <div *ngIf="reply.actionId!=16 && reply.actionId!=17 && reply.actionId!=18">
                                                                        <div class="col-xs-2">
                                                                            <label style="cursor:default" for="days" *ngIf="reply.actionId==22 || reply.actionId==23 " id="reply-days-{{reply.divId}}">Reply
                                                                                In X Days
                                                                                <b style="color: red">*</b>
                                                                                <font>
                                                                                <b>(Minimum 1 Day)</b>
                                                                                </font>
                                                                            </label>
                                                                            <label style="cursor:default" for="days" *ngIf="reply.actionId!=22 && reply.actionId!=23" id="reply-days-{{reply.divId}}">Reply
                                                                                In X Days
                                                                                <b style="color: red">*</b>
                                                                            </label>
                                                                            <input type="number" class="form-control" name="days" placeholder="Days" [(ngModel)]="reply.replyInDays" min="0" oninput="validity.valid||(value='');">
                                                                        </div>
                                                                        <div class="col-xs-3 time-col p0" *ngIf="reply.actionId!=22 && reply.actionId!=23 ">
                                                                            <div class="col-xs-2" style="position: relative;top: 28px; cursor: default;">
                                                                                <label for="time" id="send-time-{{reply.divId}}">At<b style="color: red">*</b>
                                                                                 </label>
                                                                            </div>
                                                                            <div>
                                                                                <timepicker [(ngModel)]="reply.replyTime" name="time" [hourStep]="1" [minuteStep]="1"></timepicker>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xs-3" style="margin-left: -16px;">
                                                                        <label for="time" style="cursor:default" id="reply-subject-{{reply.divId}}">Subject
                                                                            <b style="color: red">*</b>
                                                                        </label>
                                                                        <input type="text" class="form-control" name="subject" [(ngModel)]="reply.subject" placeholder="Subject" maxlength="200">
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-12">
                                                                    <div id="ck-editor-{{i}}" *ngIf="!reply.defaultTemplate">
                                                                        <div>
                                                                            <label style="cursor:default" for="days" id="reply-message-{{reply.divId}}">Message
                                                                                <b style="color: red">*</b>
                                                                            </label>
                                                                        </div>
                                                                        <div>
                                                                            <ckeditor [(ngModel)]="reply.body" name="body"></ckeditor>
                                                                        </div>
                                                                    </div>
                                                                    <ul class="content__list" *ngIf="reply.defaultTemplate">
                                                                        <fieldset>
                                                                            <li class="list__item" [class.list__item--selected]="reply.emailTemplate.id==reply.selectedEmailTemplateId" id="rcaretw">
                                                                                <div class="flex-row">
                                                                                    <div class="item__select-box-wrapper">
                                                                                        <span class="select-box"> 
                                                                                            <label> 
                                                                                            <input type="checkbox"
		                                                                                         [value]="reply.emailTemplate.id" id="reply-{{i}}-{{reply.emailTemplate.id}}" checked="checked">
		                                                                                    </label>
		                                                                                </span>
                                                                                        <span class="ng-scope">
                                                                                             <a   class="item__preview item__preview--image img-container custom" target="_BLANK">
                                                                                             <img class="thumb ng-scope" style="width:98px !important" src="{{reply.emailTemplate.subject}}">
                                                                                            </a> 
                                                                                            <a href="javascript:;"> </a>
                                                                                        </span>
                                                                                    </div>
                                                                                    <div class="item__content" style="text-align: left;">
                                                                                        <div class="flex-row">
                                                                                            <span class="item__name" [title]="reply.emailTemplate.name"><b>{{reply.emailTemplate.name |slice:0:20}}</b><b *ngIf="reply.emailTemplate?.name?.length>20">...</b>
		                                                                                    </span>
                                                                                            <span style="float:left" title="{{reply.emailTemplate.createdBy}}">
                                          	                                                    <span>{{reply.emailTemplate.createdBy|slice:0:20}}<span *ngIf="reply.emailTemplate.createdBy?.length>20">...</span></span>
                                                                                            </span>

                                                                                            <div class="item__actions">
                                                                                                <span> <a style="float:left; right: -6px;"  class="fm external-link" target="_BLANK"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Preview"  (click)="$event.stopPropagation();previewEmailTemplate(reply.emailTemplate)">
                                                                                                    <i class="fa fa-external-link-square"  aria-hidden="true" style="padding-top: 1px !important;; font-size: 20px; color: #5a5a5a"></i>
                                                                                                </a>
		                                                                                        </span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="clearfix"></div>
                                                                                </div>
                                                                            </li>
                                                                            <legend>Selected email template</legend>
                                                                        </fieldset>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                        <!-- ------------ADD ON CLICK------------------------ -->
                                        <fieldset *ngIf="urls?.length>0">
                                            <legend style="padding: 15px 10px;">{{properties.ADD_AUTO_RESPONSE_WEBSITE}}</legend>
                                            <div *ngFor="let url of urls;let i=index">
                                                <div class="portlet light dashboard-stat2" id="{{url.divId}}">
                                                    <div class="portlet-title custom-change-css" [ngClass]="{'colorBlue':isEven(i+1), 'colorRed':!isEven(i+1)}">
                                                        <div class="col-xs-7">
                                                            <h4 class="text-left" style="color:#fff">
                                                                Add an Auto-response to a website visit - {{i+1}}
                                                            </h4>
                                                        </div>
                                                        <div class="col-xs-5" style="text-align:right">
                                                            <button type="button" class="btn btn-danger button-blue" (click)="remove(url.divId,'url')">
                                                            <span class="glyphicon glyphicon-trash"></span>
                                                            </button>
                                                            <button type="button" class="btn btn-primary button-blue" (click)="addClickRows()">
                                                            <span class="glyphicon glyphicon-plus"></span>
                                                        </button>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <form class="role" id="form-{{url.divId}}" class="add-click">
                                                            <div class="col-xs-12" style="padding:0">
                                                                <div class="col-xs-12" style="padding:0">
                                                                    <div class="col-xs-4">
                                                                        <label for="reason" style="cursor:default">When To Send Email</label>
                                                                        <select style="cursor:pointer" class="form-control" id="url-schedule-type" name="scheduleEmail" [(ngModel)]="url.actionId" (change)="setUrlScheduleType($event,url)">
                                                                        <option [value]="19" [selected]="url.actionId ==19">Send if not clicked</option>
                                                                        <option [value]="20" [selected]="url.actionId ==20">Send immediately after clicked</option>
                                                                        <option [value]="21" [selected]="url.actionId ==21">Schedule</option>
                                                                        </select>
                                                                    </div>

                                                                    <div *ngIf="url.actionId==21">
                                                                        <div class="col-xs-3">
                                                                            <label style="cursor:default" for="days" id="click-days-{{url.divId}}">Wait X Days
                                                                                After Click
                                                                                <b style="color: red">*</b>
                                                                            </label>
                                                                            <input type="number" class="form-control" name="days" [(ngModel)]="url.replyInDays" placeholder="Days" min="0" oninput="validity.valid||(value='');">
                                                                        </div>
                                                                        <div class="col-xs-3 time-col p0">
                                                                            <div class="col-xs-3" style="position: relative;top: 28px; cursor: default;">
                                                                                <label for="time" id="send-time-{{url.divId}}">At <b style="color: red">*</b></label>
                                                                            </div>
                                                                            <div class="col-xs-9 p0" style="height: 66px;">
                                                                                <timepicker [(ngModel)]="url.replyTime" name="time" [hourStep]="1" [minuteStep]="1"></timepicker>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xs-4">
                                                                        <label style="cursor:default" for="time" id="click-subject-{{url.divId}}">Subject
                                                                        <b style="color: red">*</b>
                                                                        </label>
                                                                       <input type="text" class="form-control" name="subject" [(ngModel)]="url.subject" placeholder="Subject" maxlength="200">
                                                                    </div>

                                                                    <div class="col-xs-4">
                                                                        <label style="cursor:default" for="reason">Available URLs</label>
                                                                        <select style="cursor:pointer" class="form-control" name="url" [(ngModel)]="url.url" style="width: 100%">
                                                                        <option *ngFor="let hrefLink of emailTemplateHrefLinks;" [ngValue]="hrefLink" [selected]="hrefLink==url.url">
                                                                            {{hrefLink}}
                                                                        </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-12">
                                                                    <div id="ck-editor-{{i}}" *ngIf="!url.defaultTemplate">
                                                                        <label for="days" id="click-message-{{url.divId}}">Message
                                                                        <b style="color: red">*</b>
                                                                        </label>
                                                                        <div>
                                                                            <ckeditor [(ngModel)]="url.body" name="body"></ckeditor>
                                                                        </div>
                                                                    </div>
                                                                    <ul class="content__list" *ngIf="url.defaultTemplate">
                                                                        <fieldset>
                                                                            <li class="list__item" [class.list__item--selected]="url.emailTemplate.id==url.selectedEmailTemplateId" id="rcaretw">
                                                                                <div class="flex-row">
                                                                                    <div class="item__select-box-wrapper">
                                                                                        <span class="select-box"> <label> <input type="checkbox"
                                                                                    [value]="url.emailTemplate.id" id="reply-{{i}}-{{url.emailTemplate.id}}" checked="checked">
                                                                                    </label>
		                                                                                 </span>
                                                                                        <span class="ng-scope">
                                                                                            <a class="item__preview item__preview--image img-container custom"
                                                                                                target="_BLANK"> <img
                                                                                                class="thumb ng-scope" style="width:98px !important" src="{{url.emailTemplate.subject}}">
                                                                                            </a> <a href="javascript:;"> </a>
		                                                                                </span>
                                                                                    </div>
                                                                                    <div class="item__content" style="text-align: left;">
                                                                                        <div class="flex-row">
                                                                                            <span class="item__name" [title]="url.emailTemplate.name"><b>{{url.emailTemplate.name |slice:0:20}}</b><b *ngIf="url.emailTemplate?.name?.length>20">...</b>
		                                                                                    </span>
                                                                                            <span style="float:left" title="{{url.emailTemplate.createdBy}}">
                                          	                                                    <span>{{url.emailTemplate.createdBy|slice:0:20}}<span *ngIf="url.emailTemplate.createdBy?.length>20">...</span></span>
                                                                                            </span>

                                                                                            <div class="item__actions">
                                                                                                <span> <a style="float:left; right: -6px;"  class="fm external-link" target="_BLANK"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Preview"  (click)="$event.stopPropagation();previewEmailTemplate(url.emailTemplate)">
                                                                                                    <i class="fa fa-external-link-square"  aria-hidden="true" style="padding-top: 1px !important;; font-size: 20px; color: #5a5a5a"></i>
                                                                                                </a>
		                                                                                        </span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="clearfix"></div>
                                                                                </div>
                                                                            </li>
                                                                            <legend>Selected email template</legend>
                                                                        </fieldset>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                        <!-- Add on Click end -->
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- </fieldset> -->
                    </div>
                    <div class="col-xs-12" style="margin-top: 8px;">
                        <fieldset>
                            <legend>Launch Option</legend>
                            <div>
                                <div class="btn-group btn-group-justified">
                                    <ng-container *ngFor="let launchOption of campaignLaunchOptions">
                                        <label class="btn btn-primary" style="border: 1px solid #fff;">
                      <input type="radio" class="text-center" name="scheduleCampaign" [value]="launchOption" formControlName="scheduleCampaign"
                        ngDefaultControl style=" margin-right:1.5em; " /> {{launchOption}}
                    </label>
                                    </ng-container>
                                </div>
                                <div class="col-md-12" style="margin-left: -17px;margin-top: 12px;" [hidden]="buttonName!='Schedule'">
                                    <div class="col-md-4">
                                        <label style="float: left;">Date</label>
                                        <br>
                                        <input type="text" class="form-control flatpickr square-box" placeholder="Select" formControlName="launchTime" />
                                        <font style="color: red" *ngIf="campaignLaunchForm.hasError('invalidSchedule')">Date Required</font>
                                    </div>
                                    <div class="col-md-4">
                                        <label style="float: left;">Country</label>
                                        <br>
                                        <select class="form-control" style="width: 100%" formControlName="countryId" (change)="onSelect($event.target.value)" id="countryName">
                      <option *ngFor="let country of countries" [value]="country.id">{{country.name}}</option>
                    </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label style="float: left;">TimeZone </label>
                                        <br>
                                        <select class="form-control" style="width: 100%" formControlName="timeZoneId" id="timezoneId">
                      <ng-container *ngIf="timezones?.length==1">
                        <option *ngFor="let timeZone of timezones" [value]="timeZone.timezoneId" [selected]="campaign.countryId==timeZone.countryId">
                          {{timeZone.cityName}}
                        </option>
                      </ng-container>
                      <ng-container *ngIf="timezones?.length>1">
                        <option *ngFor="let timeZone of timezones" [value]="timeZone.timezoneId">
                          {{timeZone.cityName}}
                        </option>
                      </ng-container>
                    </select>
                                    </div>
                                </div>
                            </div>

                            <div class="portlet-title border-none">
                                <div class="col-xs-12 center-block pt20 text-center">
                                    <button type="button" class="btn green" [disabled]="!isCampaignDetailsFormValid" (click)="campaignService.addEmailId(campaign,selectedEmailTemplateId,selectedLandingPageId,true)" style="width:10em">Send Test Email</button>
                                    <button type="submit" class="btn green" [disabled]="!campaignLaunchForm.valid || !isCampaignDetailsFormValid" style="width:10em">{{buttonName}}</button>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </form>
            </div>
        </div>
    </div>
        <div [hidden]="!isEditPartnerTemplate">
            <ngx-loading [show]="partnerTemplateLoader" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
            <div class="portlet light shadow">
                <div class="portlet-title">
                    <h4 class="caption-subject font-red-sunglo f-w-600 pull-left">Edit Template</h4>
                    <a class="close-circle pull-right" data-dismiss="modal" (click)="isEditPartnerTemplate=false">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
                <div class="portlet-body clearfix" *ngIf="isEditPartnerTemplate">
                    <app-create-bee-template [partnerEmailTemplate]="campaign.emailTemplate"></app-create-bee-template>
                </div></div>
            </div>
    </div>
    <app-scroll-top></app-scroll-top>
</div>



<app-preview-video *ngIf="videoFile" [videoFile]="videoFile" (notifyParent)="closePreviewVideoModal($event)"></app-preview-video>
<!--email template preview-->
<div class="modal right" id="email_template_preivew">
    <div class="modal-dialog modal-lg modal-template" style="right:0">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close-circle" data-dismiss="modal" aria-hidden="true">
          <i class="fa fa-times"></i>
        </button>
                <h4 class="modal-title" id="email-template-title"></h4>
            </div>
            <div class="modal-body">
                <div id="email-template-content"></div>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
            </div>
        </div>
    </div>
</div>

<!--contact list preview-->
<div class="modal right fade" id="contactlist-preivew">
    <div class="modal-dialog modal-lg modal-css" style="right:0">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close-circle" data-dismiss="modal" aria-hidden="true">
          <i class="fa fa-times"></i>
        </button>
                <h4 class="modal-title" id="contactlist-title">select contact list</h4>
            </div>
            <div class="modal-body">
                <div id="contactlist-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>User list</th>
                                <th>Uploaded by</th>
                                <th>Created date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let userList of userLists">
                                <th scope="row">
                                    <input type="checkbox" [disabled]="!userList.emailValidationInd" id='{{userList.id}}' (click)="highlightRow(userList.id)">
                                </th>
                                <td>{{userList.name}}</td>
                                <td>{{userList.uploadedBy}}
                                    <br>{{userList.companyName}}</td>
                                <td>{{userList.createdDate | date: 'longDate'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
            </div>
        </div>
    </div>
</div>
<!-- ----------------------------------Contact Lists--------------------------------- -->
<div class="modal right fade" id="usersModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
    <div class="modal-dialog modal-css" role="document" style="right:0">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" (click)="closeModelPopup()" class="close-circle" data-dismiss="modal" aria-label="Close">
          <i class="fa fa-times"></i>
        </button>
                <div>
                    <h4 class="modal-title" id="user-list-name" align="center" title="{{listName}}">
                        <b>{{listName |slice:0:20}}
              <span *ngIf="listName?.length>20">...</span>
            </b>
                    </h4>
                </div>
            </div>
            <div class="modal-body" id="users-modal-body">
            </div>
            <div class="modal-footer">
                <app-pagination class="pg8" style="float: left;" [pagination]="contactsUsersPagination" [type]="'editpartner'" [isDropdown]="true" (notifyParent)="setPage($event)"></app-pagination>
                <button type="button" (click)="closeModelPopup()" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<app-preview-landing-page #previewLandingPageComponent></app-preview-landing-page>
<app-add-folder-modal-popup #addFolderModalPopupComponent (notifyChild)="showSuccessMessage($event)"></app-add-folder-modal-popup>
