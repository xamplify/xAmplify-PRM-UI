<div class="page-content" [hidden]="isTimeLineView">
	<div class="page-bar square-box margin-bottom-10px">
		<ul class="page-breadcrumb">
			<li><i class="fa fa-home"></i> <a
				[routerLink]="['/home/dashboard']">Home</a> <i
				class="fa fa-angle-right"></i></li>
			<li><a [routerLink]="['/home/campaigns/managepublish']">Campaigns</a>
				<i class="fa fa-angle-right"></i></li>
			<li>{{campaign.campaignName}}</li>
		</ul>
	</div>
	<div class="page-bar" style="margin: 0 10px 10px 10px;">
		<div class="col-xs-12 p-5x">
			<h3 class="text-color-1" style="margin: 0.5em; font-weight: 400;">{{campaign.campaignName}}</h3>
		</div>
	</div>

	<div class="col-xs-12 col-sm-6 p-5x">
		<div class="p-5x">
			<div class="portlet light border-radius-0">
				<div class="portlet-title">
					<div class="caption">
						<span class="caption-subject font-red-sunglo bold">VIEWERSHIP
							MAP</span>
					</div>
				</div>
				<div class="portlet-body text-center">
					<div id="world-map" style="max-width: 100%; min-height: 400px;"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-12 col-sm-6 p-5x">
		<div class="col-xs-6 col-sm-3 p-5x">
			<div class="portlet light border-radius-0">
				<div class="portlet-body text-center">
					<h1 class="text-color-1">
						<b>{{emailSentCount}}</b>
					</h1>
					<h5>Emails Sent</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 col-sm-3 p-5x">
			<div class="portlet light border-radius-0">
				<div class="portlet-body text-center">
					<h1 class="text-color-2">
						<b>{{emailOpenCount}}</b>
					</h1>
					<h5>Emails Opened</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 col-sm-3 p-5x">
			<div class="portlet light border-radius-0">
				<div class="portlet-body text-center">
					<h1 class="text-color-3">
						<b>{{emailClickedCount}}</b>
					</h1>
					<h5>Clicked URL</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 col-sm-3 p-5x">
			<div class="portlet light border-radius-0">
				<div class="portlet-body text-center">
					<h1 class="text-color-4">
						<b>0</b>
					</h1>
					<h5>Users watched</h5>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-12 col-sm-6 p-5x">
		<div class="col-xs-12 p-5x">
			<div class="portlet light border-radius-0">
				<div class="portlet-title">
					<div class="caption">
						<span class="caption-subject font-red-sunglo bold">TOTAL
							VIEWS FOR THIS CAMPAIGN</span>
					</div>
				</div>
				<div class="portlet-body flex" style="padding: 1em 0;">
					<div class="col-xs-4 text-center">
						<section class="percentage-circle">
							<svg width="120" height="120" viewBox="0 0 120 120"
								style="transform: rotate(-90deg)">
						    <circle cx="60" cy="60" r="54" fill="none" stroke="#e6e6e6"
									stroke-width="12" />
						    <circle cx="60" cy="60" r="54" fill="none" stroke="#00B3B3"
									stroke-width="12" stroke-dasharray="339.292006588"
									stroke-dashoffset="339.292006588" />
						</svg>
							<h2 class="percentage-value">0%</h2>
							<h6 class="percentage-text">views</h6>
						</section>
						<h5 style="text-align: center; color: #00a6e8; margin-top: 3.5em;">Lifetime</h5>
					</div>
					<div class="col-xs-4 text-center">
						<section class="percentage-circle">
							<svg width="120" height="120" viewBox="0 0 120 120"
								style="transform: rotate(-90deg)">
						    <circle cx="60" cy="60" r="54" fill="none" stroke="#e6e6e6"
									stroke-width="12" />
						    <circle cx="60" cy="60" r="54" fill="none" stroke="#00B3B3"
									stroke-width="12" stroke-dasharray="339.292006588"
									stroke-dashoffset="339.292006588" />
						</svg>
							<h2 class="percentage-value">0%</h2>
							<h6 class="percentage-text">views</h6>
						</section>
						<h5 style="text-align: center; color: #00a6e8; margin-top: 3.5em;">This
							Month</h5>
					</div>
					<div class="col-xs-4 text-center">
						<section class="percentage-circle">
							<svg width="120" height="120" viewBox="0 0 120 120"
								style="transform: rotate(-90deg)">
						    <circle cx="60" cy="60" r="54" fill="none" stroke="#e6e6e6"
									stroke-width="12" />
						    <circle cx="60" cy="60" r="54" fill="none" stroke="#00B3B3"
									stroke-width="12" stroke-dasharray="339.292006588"
									stroke-dashoffset="339.292006588" />
						</svg>
							<h2 class="percentage-value">0%</h2>
							<h6 class="percentage-text">views</h6>
						</section>
						<h5 style="text-align: center; color: #00a6e8; margin-top: 3.5em;">Today</h5>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-sm-12 p-5x">
			<div class="col-xs-12 p-5x">
				<div class="portlet light border-radius-0">
					<div class="portlet-title">
						<div class="caption">
							<span class="caption-subject font-red-sunglo bold">TOTAL
								VIEWS FOR THIS CAMPAIGN</span>
						</div>
					</div>
					<div class="portlet-body">
						<div class="table-responsive">
							<table class="table table-hover">
								<thead>
									<tr>
										<th>campaign</th>
										<th>email address</th>
										<th>latest view</th>
										<th>views count</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let item of campaignviews"
										(click)="getHeatMap(item)">
										<td>{{item.campaignName}}</td>
										<td>{{item.userEmail}}</td>
										<td>{{item.latestView}}</td>
										<td>{{item.viewsCount}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="timeline-view" class="page-content" [hidden]="!isTimeLineView">
	<div class="page-bar">
		<a (click)="isTimeLineView = !isTimeLineView" class="pull-right"
			style="margin: 1em;"> <span class="glyphicon glyphicon-remove"
			aria-hidden="true"></span>
		</a>
		<div class="frst-container" data-animation-name="slideInUp">
			<div
				class="frst-timeline frst-timeline-block frst-timeline-style-1 frst-alternate frst-date-opposite">
				<div class="frst-timeline-block frst-even-item"
					data-animation="slideInUp">
					<div class="frst-timeline-img abc">
						<div class="frst-labels frst-start-label">
							<span><img
								src="https://cdn0.iconfinder.com/data/icons/user-collection-4/512/user-128.png"
								alt="{{selectedRow.userEmail}}"></span>
						</div>
					</div>

					<div class="frst-timeline-content box">
						<div class="frst-timeline-content-inner" style="background: none;">
							<span class="frst-date">
								<h6>{{selectedRow.userEmail}}</h6>
							</span> <span class="frst-date"></span>
							<div class="row">
								<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 p-5x">
									<a class="dashboard-stat dashboard-stat-v2 blue" href="#">
										<div class="visual">
											<i class="fa fa-comments"></i>
										</div>
										<div class="details">
											<div class="number">
												<span data-counter="counterup" data-value="1349">1349</span>
											</div>
											<div class="desc">Open</div>
										</div>
									</a>
								</div>
								<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 p-5x">
									<a class="dashboard-stat dashboard-stat-v2 red" href="#">
										<div class="visual">
											<i class="fa fa-bar-chart-o"></i>
										</div>
										<div class="details">
											<div class="number">
												<span data-counter="counterup" data-value="12,5">12,5</span>
											</div>
											<div class="desc">Clicked</div>
										</div>
									</a>
								</div>
								<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 p-5x">
									<a class="dashboard-stat dashboard-stat-v2 green" href="#">
										<div class="visual">
											<i class="fa fa-shopping-cart"></i>
										</div>
										<div class="details">
											<div class="number">
												<span data-counter="counterup" data-value="549">549</span>
											</div>
											<div class="desc">Extra</div>
										</div>
									</a>
								</div>
								<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 p-5x">
									<a class="dashboard-stat dashboard-stat-v2 purple" href="#">
										<div class="visual">
											<i class="fa fa-globe"></i>
										</div>
										<div class="details">
											<div class="number">
												+ <span data-counter="counterup" data-value="89">89</span>%
											</div>
											<div class="desc">Extra</div>
										</div>
									</a>
								</div>
							</div>
						</div>

					</div>

				</div>

				<div class="frst-timeline-block frst-even-item"
					data-animation="slideInUp">
					<div class="frst-timeline-img">
						<span><i class="fa fa-envelope" aria-hidden="true"></i></span>
					</div>

					<div class="frst-timeline-content">
						<div class="frst-timeline-content-inner">
							<h2>Campaign Launched at 1:30 PM</h2>
							<span class="frst-date">1:30 PM, Monday<br> 08
								October, 2017
							</span> <span class="frst-date"></span>
							<p>
								Email published out to <b>{{selectedRow.userEmail}}</b>
							</p>
						</div>

					</div>

				</div>

				<!-- <div class="frst-timeline-block frst-even-item" data-animation="slideInUp">
        <div class="frst-timeline-img"> <span><i class="fa fa-envelope-open" aria-hidden="true"></i></span> </div>
        
        <div class="frst-timeline-content">
          <div class="frst-timeline-content-inner">
            <h2>Campaign Email Opened at  1:37 PM </h2>
            <span class="frst-date">
            <h6>1:37 PM, Monday</h6>
            <h6>08 October, 2017</h6>
            </span>
            <p><b>Aravindu</b> Opened email at  1:37pm </p>
            <span>
            <p class="flag-us"> &nbsp;Fremont,CA</p>
            </span> <span>
            <p>COMCAST Networks </p>
            </span> </div>
        </div>
      </div> -->

				<div class="frst-timeline-block frst-even-item"
					data-animation="slideInUp">
					<div class="frst-timeline-img">
						<span> <i class="fa fa-link" aria-hidden="true"></i></span>
					</div>
					<div class="frst-timeline-content">
						<div class="frst-timeline-content-inner">
							<h2>Clicked on the video link at 1:38 PM</h2>

							<div class="heatmap">
								<svg [ngStyle]="{'width': 100+'%', 'height':35}"
									*ngIf="heatMapData !== undefined">
						  	<rect *ngFor="let log of heatMapData.logs;"
										[ngStyle]="{'width': (log.stopDuration - log.startDuration)/heatMapData.videoLength*100+'%', 'x': log.startDuration/heatMapData.videoLength*100+'%', 'y': 0, 'height': 35}"
										[ngClass]="{'play-rect': log.actionId === 1, 'skip-rect': log.actionId === 8}">
						  		<title data-toggle="tooltip" data-placement="top"
										title="Tooltip on top">{{log.startDurationHHMMSS}} - {{log.stopDurationHHMMSS}}</title>	
					  		</rect>
						</svg>

								<!-- data-toggle="tooltip" title="paused at 00:30" -->
							</div>

							<div class="heatmap-timeline flex">
								<div *ngFor="let number of numbers; let i = index">
									<div *ngIf="i%25 == 0">{{number}}</div>
								</div>
							</div>

							<div class="row flex">
								<div class="col-xs-4 flex">
									<span class="small-box play-box"></span>
									<h6>play</h6>
								</div>

								<div class="col-xs-4 flex">
									<span class="small-box pause-box"></span>
									<h6>pause</h6>
								</div>

								<div class="col-xs-4 flex">
									<span class="small-box skip-box"></span>
									<h6>skip</h6>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>
</div>