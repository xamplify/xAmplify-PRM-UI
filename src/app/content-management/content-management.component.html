<style>
.selectedtype {
	background: #00a6e8;
}
</style>
<div class="page-content"
	[class.ml0]="authenticationService.isSuperAdmin()">
	<div>
		<div class="page-bar">
			<ul class="page-breadcrumb">
				<li *ngIf="!authenticationService.isSuperAdmin()"><i
					class="fa fa-home"></i> <a
					[routerLink]="referenceService.homeRouter">Home</a><i
					class="fa fa-angle-right"></i></li>
				<li *ngIf="authenticationService.isSuperAdmin()"><i
					class="fa fa-home"></i><a
					[routerLink]="['/home/dashboard/admin-report']">Admin Report</a><i
					class="fa fa-angle-right"></i></li>
				<li><a>Content Management</a></li>
			</ul>
		</div>
	</div>
	<div>
		<div class="row">
			<div class="col-xs-12" style="position: relative; top: -9px;">
				<app-response-message [customResponse]="customResponse"
					*ngIf="customResponse.isVisible"></app-response-message>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-12" *ngIf="!isPreviewed ">
				<div class="tabbable tabbable-custom tabbable-noborder"
					style="background: white">
					<div class="tab-content" style="min-height: 715px;">
						<div class="tab-pane active m10">
							<div class="page-toolbar">
								<div *ngIf="!httpRequestLoader.isLoading"
									class="btn-group pull-right col-xs-12 col-sm-12 col-md-12"
									style="padding: 0"
									[ngClass]="{'margin-css':!authenticationService.isOrgAdminPartner() || !authenticationService.isVendorPartner()}">
									<div class="inputs" align="right">
										<span style="display: none"> <input type="file"
											id="uploadFile" name="file" title="Upload a file"
											(change)="upload($event)" multiple="multiple" />
										</span>


										<div class="col-xs-12 col-sm-6 col-md-3 p0">
											<button class="btn btn-primary pull-left" style="display:none"
												(click)="imageClick()">
												Upload a file<i class="fa fa-upload" aria-hidden="true"
													style="font-size: 12px; margin-left: 5px;"></i>
											</button>
											<button type="button" class="btn btn-danger" style="float:left"
												*ngIf="selectedFileIds?.length>1" (click)="delete()">Delete</button>
										</div>
										<div class='col-xs-6 col-sm-3 col-md-3'
											style="position: relative; left: 77px; z-index: 99;">
                      <span class="btn btn-xs hidden-xs" data-toggle="tooltip" data-placement="bottom" title="List View" [class.disabled]="isListView" (click)="isListView = true" style="background-color:#e2e2e2"><i class="fa fa-th-list p10" aria-hidden="true"></i></span>
                      <span class="btn btn-xs hidden-xs"  data-toggle="tooltip" data-placement="bottom" title="Grid View" [class.disabled]="!isListView" (click)="isListView = false" style="background-color:#e2e2e2"><i class="fa fa-th-large p10" aria-hidden="true"></i></span>
                    </div>
										<div class="row col-xs-6 col-sm-3 col-md-6 pull-right"
											style="padding-right: 0; margin-bottom: -30px;">
											<div class="col-md-6"
												[ngClass]="{'search-css': !referenceService.isMobileScreenSize(), 'mobile-css':referenceService.isMobileScreenSize() }">
												<select class="form-control" style="margin-right: -25px;"
													[(ngModel)]="sortOption"
													(ngModelChange)="sortByOption($event)">
													<ng-container *ngFor="let sort of sortOptions; let i = index">
													   <option [ngValue]="sort">{{sort.name}}</option>
													</ng-container>
												</select>
											</div>

											<div class="col-md-6" style="cursor: pointer">
												<input class="form-control" type="text" name="search"
													placeholder="Search for a file" [(ngModel)]="searchTitle"  (keypress)="eventHandler($event.keyCode)">
												<button class="glyphicon glyphicon-remove search-box-item-clear" style="right:59px !important;" *ngIf="searchTitle" (click)="searchTitle=''"></button>
											 	<button type="submit" class="search-input-button"	(click)="searchFile()">	<i class="fa fa-search"></i></button>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="progress" *ngIf="loader">
								<div class="progress-bar" role="progressbar" style="width: 99%;"
									aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">99%</div>
							</div>
							<app-grid-loader *ngIf="httpRequestLoader.isLoading && !pagination.isListView"></app-grid-loader>
							<app-list-loader *ngIf="httpRequestLoader.isLoading && pagination.isListView"></app-list-loader>
							<div class="margin-top-10 row" *ngIf="!httpRequestLoader.isLoading">
								<section [hidden]="!isListView">
									<div class="table-responsive list-content-table">
                    <!-- *ngIf="pagedItems && !httpRequestLoader.isLoading" -->
										<table class="table tgrid">
											<!-- *ngIf="pagedItems.length !== 0" -->
											<thead>
												<tr>
													<th class="text-center"></th>
													<th style="text-align: left">Name</th>
													<th class="text-center">Date</th>
													<th class="text-center">Size</th>
													<th class="text-center">Type</th>
													<th class="text-center"
														*ngIf="!authenticationService.isSuperAdmin()"><span
														[hidden]="authenticationService.isOnlyPartner()">Actions</span></th>
												</tr>
											</thead>
											<tbody>
												<!-- 	<tr *ngFor="let file of pagedItems | orderBy: key : reverse | filter:filter | paginate: { itemsPerPage: 12, currentPage: p };let i =index"> -->
												<tr *ngFor="let file of pagedItems; let i =index">
													<td><input
														(click)="getSelectedListViewFiles(file,file.id, $event)"
														class="" type="checkbox"
														[checked]="selectedFileIds.indexOf(file.id)>-1"
														value="{{file.fileName}}" id="list_{{file.id}}"> <!-- <input type="checkbox"> -->
													</td>
													<td>
														<div class="clearfix">
															<div class='thumbnail-wrapper'>
																<img id="content_image_{{i}}"
																	(error)="changeImage(i, file.filePath)"
																	src="{{file.filePath}}">
															</div>
															<div class="title-div">
																<a data-toggle="tooltip" [title]="file.fileName">
																	<h4 class='mt5 mb5 f-w-500'>
																		{{file.fileName | slice: 0: 25}} <span
																			*ngIf="file.fileName?.length>25">...</span>
																	</h4>
																</a>
															</div>
														</div>
													</td>
													<td class="text-center"><app-timestamp	[isOnlyDate]="true" [dateAndTime]="file.lastModifiedDate"></app-timestamp></td>
													<td class="text-center"><span>{{file.filesizeInKb}}</span></td>
													<td class="text-center"><span>{{file.type}}</span></td>
													<td>
														<div class="actions-block override-actions">
															<!-- (click)="preview(file)" -->
															<!-- <a data-toggle="tooltip" data-placement="top"	[title]="actionsDescription.preview_item"
																href="{{file.filePath}}" target="_blank"> <i class="fa fa-eye"></i>
                              </a> -->
                              <a class="fm external-link" target="_BLANK" data-toggle="tooltip" data-placement="top" style="width: 29px;"
                              [title]="actionsDescription.preview_item" href="{{file.filePath}}" target="_blank">
                                <i class="fa fa-external-link-square"  aria-hidden="true" style="font-size: 16px; color: #5a5a5a"></i>
                              </a>
                              <a data-toggle="tooltip" data-placement="top"	[title]="actionsDescription.delete_item"
																(click)="delete(file)"> <i class="fa fa-trash"></i>
															</a>
														</div>
													</td>
												</tr>
											</tbody>
                    </table>
                    <div *ngIf="pagedItems.length == 0" style="width: 100%;" class="col-md-9 alert alert-info alert-dismissable">
                        <a class="close" data-dismiss="alert" aria-label="close"></a><p>No results found</p>
                   </div>
										<ul *ngIf="pager.pages && pager.pages.length"
											class="pagination">
											<li [ngClass]="{disabled:pager.currentPage === 1}"><a
												(click)="setPage(1)">First</a></li>
											<li [ngClass]="{disabled:pager.currentPage === 1}"><a
												(click)="setPage(pager.currentPage - 1)">Previous</a></li>
											<li *ngFor="let page of pager.pages"
												[ngClass]="{active:pager.currentPage === page}"><a
												(click)="setPage(page)">{{page}}</a></li>
											<li
												[ngClass]="{disabled:pager.currentPage === pager.totalPages}">
												<a (click)="setPage(pager.currentPage + 1)">Next</a>
											</li>
											<li
												[ngClass]="{disabled:pager.currentPage === pager.totalPages}">
												<a (click)="setPage(pager.totalPages)">Last</a>
											</li>
										</ul>
										<!-- <pagination-controls (pageChange)="p = $event"></pagination-controls> -->
									</div>
								</section>

								<!-- -List View -->
								<section [hidden]="isListView">
									<ul class="content__list"
                    *ngFor="let file of pagedItems; let i =index;">
										<li class="list__item"
											[ngClass]="{'list__item--selected':selectedFileIds.indexOf(file.id)>-1}">
											<div class="flex-row">
												<div class="item__select-box-wrapper">
													<span class="select-box"> <label> <input
															(click)="getSelectedFiles(file,file.id, $event)" class=""
															type="checkbox"
															[checked]="selectedFileIds.indexOf(file.id)>-1"
															value="{{file.fileName}}" id="grid_{{file.id}}">
													</label>
													</span> <span class="ng-scope"> <a
														class="item__preview item__preview--image img-container custom"
                            target="_BLANK">
                            	<!-- onerror="this.src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI5cHgiIGhlaWdodD0iMjhweCIgdmlld0JveD0iMCAwIDI5IDI4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjIgKDEyMDQzKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5pbWFnZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJpY29ucyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHNrZXRjaDp0eXBlPSJNU0FydGJvYXJkR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MDEuMDAwMDAwLCAtNDguMDAwMDAwKSIgc3Ryb2tlPSIjNTA1NjU5Ij4KICAgICAgICAgICAgPGcgaWQ9ImltYWdlIiBza2V0Y2g6dHlwZT0iTVNMYXllckdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MDMuMDAwMDAwLCA0OS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjAzMjQ0OTE2MDgsNy44NjY4Mzk4OCBMMTguNTQ0NzU4MiwzLjc0NTU3NTk4IEwyMi44MTg2NjE1LDIxLjU5NjczMTEgTDQuMzA2MzUyNDYsMjUuNzE3OTk1IEwwLjAzMjQ0OTE2MDgsNy44NjY4Mzk4OCBMMC4wMzI0NDkxNjA4LDcuODY2ODM5ODggWiIgaWQ9IlJlY3RhbmdsZS02OSIgc3Ryb2tlLXdpZHRoPSIyIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8ZyBpZD0iaW1hZ2UtbW9kdWxlLWNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzc3Nzc4LCAwLjAwMDAwMCkiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJzdmdzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS02OS0rLVBhdGgtOTEtKy1PdmFsLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS02OSIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSIjRkZGRkZGIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTkuOTYyOTYzIiBoZWlnaHQ9IjE5LjI1Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC43OTkxNDUyOTksMTUuNDEyMDg3OSBMNy4xOTIzMDc2OSwxMC43ODg0NjE1IEwxMS4xODgwMzQyLDEzLjEwMDI3NDcgTDIwLjc3Nzc3NzgsNi4xNjQ4MzUxNiIgaWQ9IlBhdGgtOTEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxlbGxpcHNlIGlkPSJPdmFsLTEiIGN4PSI3LjU5MTg4MDM0IiBjeT0iNS43Nzk1MzI5NyIgcng9IjIuNzk3MDA4NTUiIHJ5PSIyLjY5NzExNTM4Ij48L2VsbGlwc2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=='" -->

                            <img ng-src="https://d15k2d11r6t6rl.cloudfront.net/public/_thumbs/Integrators/6639d69f-523f-44ca-b809-a00daa26b367/bee-12092/BC-xAmplify-changes1.jpg_thumb.png?hash=1537857431976"
                            id="content_image_grid_{{i}}"
                            (error)="changeImage(i, file.filePath)"
                            class="thumb ng-scope" src="{{file.filePath}}">
													</a> <a href="javascript:;"> </a>
													</span>
												</div>
												<div class="item__content">
													<div class="flex-row">
														<div class="item__last-modified">
															<span><app-timestamp [isOnlyDate]="true"
																	[dateAndTime]="file.lastModifiedDate">
																</app-timestamp></span>
														</div>
														<span class="item__name" data-toggle="tooltip"
															[title]="file.fileName"> <strong>{{file.fileName
																| slice: 0: 16}} <span *ngIf="file.fileName?.length>16">...</span>
														</strong>
														</span>
														<div class="item__size">
															<span>{{file.filesizeInKb}}</span>
														</div>
														<div class="item__type">
															<span>{{file.type}}</span>
														</div>
														<div class="item__actions">
															<span> <a class="fm external-link" target="_BLANK"
																data-toggle="tooltip" data-placement="top"
																[title]="actionsDescription.preview_item"
																href="{{file.filePath}}" target="_blank"> <!-- (click)="preview(file)"  -->
																	<i class="fa fa-external-link-square"
																	aria-hidden="true"
																	style="font-size: 20px; color: #5a5a5a"></i>
															</a> <a class="fm delete" data-toggle="tooltip"
																data-placement="top"
																[title]="actionsDescription.delete_item"
																(click)="delete(file)"> <i class="fa fa-trash-o"
																	aria-hidden="true"
																	style="font-size: 20px; color: #5a5a5a"></i>
															</a>
															</span>
														</div>
													</div>
												</div>
												<div class="clearfix"></div>
											</div>
										</li>
									</ul>

                  <div class="col-xs-12" style="padding-top: 15px">
                      <div *ngIf="pagedItems.length == 0" style="position: relative; top: 16px; width: 100%;" class="col-md-9 alert alert-info alert-dismissable">
                        <a class="close" data-dismiss="alert" aria-label="close"></a>
                        <p>No results found</p>
                      </div>
										<ul *ngIf="pager.pages && pager.pages.length"
											class="pagination">
											<li [ngClass]="{disabled:pager.currentPage === 1}"><a
												(click)="setPage(1)">First</a></li>
											<li [ngClass]="{disabled:pager.currentPage === 1}"><a
												(click)="setPage(pager.currentPage - 1)">Previous</a></li>
											<li *ngFor="let page of pager.pages"
												[ngClass]="{active:pager.currentPage === page}"><a
												(click)="setPage(page)">{{page}}</a></li>
											<li
												[ngClass]="{disabled:pager.currentPage === pager.totalPages}">
												<a (click)="setPage(pager.currentPage + 1)">Next</a>
											</li>
											<li
												[ngClass]="{disabled:pager.currentPage === pager.totalPages}">
												<a (click)="setPage(pager.totalPages)">Last</a>
											</li>
										</ul>
									</div>
									<!-- <pagination-controls (pageChange)="p = $event"></pagination-controls> -->
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="portlet light shadow" *ngIf="isPreviewed">
			<div class="portlet-title">
				<span>{{previewFile.fileName}}</span> <a
					class="close-circle pull-right" (click)="hidePreview()"> <i
					class="fa fa-times"></i>
				</a>
			</div>
			<div class="portlet-body clearfix">
				<img src="{{previewFile.filePath}}"
					style="max-width: 100%; max-height: 100%">
			</div>
		</div>
	</div>
	<div class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog"
		aria-labelledby="mySmallModalLabel" aria-hidden="true"
		id="replace-modal">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Modal Header</h4>
				</div>
				<div class="modal-body">
					<h4>Are you sure you want to overwrite {{existingFileName}}
						file?</h4>
					<br>
					<p>A previously uploaded file with the same name will be
						overwritten. This action cannot be done.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<app-scroll-top></app-scroll-top>
</div>
