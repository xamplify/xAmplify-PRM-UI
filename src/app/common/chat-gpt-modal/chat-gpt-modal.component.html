<!--CHATGPT ICON-->
<!-- <div *ngIf="isChatGptIconDisplayed && showIcon &&authenticationService?.module?.chatGptIntegrationEnabled && !isShowingRouteLoadIndicator && !showLoaderForAuthGuard" class="chatgpt-card override" id="chatIconImage" data-toggle="modal" data-target="#xAmplifyChatGPTModal" (click)="resetValues()">
  <a class="javascript:void(0)"><img src="assets/images/homeOliverLogo-1.svg" class="icon-s-w"></a>
</div> -->
<div
  *ngIf="isChatGptIconDisplayed && showIcon && authenticationService?.isOliverActive && !isShowingRouteLoadIndicator && !showLoaderForAuthGuard"
  [ngClass]="!isMinimizeOliver ? 'chatgpt-card override' : 'minimize'" id="chatIconImage" (click)="resetValues()"
  data-toggle="modal" data-target="#xAmplifyChatGPTModal">

  <!-- Close icon (minimize) -->
  <a><i *ngIf="!isMinimizeOliver" class="fa fa-close customIcon" aria-hidden="true" (click)="onMinimizeClick($event)">
    </i></a>

  <div class="oliver-wrapper">
    <div (mouseenter)="expandIfMinimized()">
      <object data="assets/images/homeOliverLogo-1.svg" type="image/svg+xml" [ngStyle]="{
          'width': !isMinimizeOliver ? '150px' : '60px',
          'height': !isMinimizeOliver ? '150px' : '60px',
          'transition': '0.3s ease-in-out'
        }" class="icon-s-w">
      </object>
    </div>
  </div>
</div>

<!--ICON END -->
<link *ngIf="isWelcomePageUrl" rel="stylesheet"
  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<link *ngIf="isWelcomePageUrl" rel='stylesheet' href='/assets/js/indexjscss/oliver-AI.css' type='text/css'>
<script *ngIf="isWelcomePageUrl" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!--ChatGPT Modal-->
<div
  *ngIf="isChatGptIconDisplayed && authenticationService?.isOliverActive && !isShowingRouteLoadIndicator && !showLoaderForAuthGuard"
  class="modal fade right modal-z-index" id="xAmplifyChatGPTModal" role="dialog" data-backdrop="static"
  data-keyboard="false" aria-labelledby="xAmplifyChatGPTModalLabel">
  <div class="modal-dialog w85-per" role="document">
    <div *ngIf="referenceService?.docxLoader" class="ppt-mask">
      <div class="ppt-badge">
        <span class="msag">Generating&nbsp;DOCX</span>
        <span class="ring"></span>
      </div>
    </div>
    <div [ngClass]="showView || showTemplate  || selectTemplate || openAssetPage || showPage || showPptDesignPicker ? 'modal-content': 'modal-content oliver-content'">
      <!-- <div class="modal-header">
            <button type="button" class="close-circle" data-dismiss="modal" aria-label="Close">
              <i class="fa fa-times"></i></button>
            <h4 class="modal-title text-center">xAmplify AI</h4>
          </div> -->
      <app-update-status *ngIf="openShareOption" [fromAi]="true" [OliverData]="socialContent"
        (notifyClose)="closeSocialShare($event)"></app-update-status>
      <app-create-template *ngIf="showTemplate" [isFromOliverPopUp]="true" (notifyEmit)="closeDesignTemplate($event)">
      </app-create-template>
      <app-add-landing-page *ngIf="showPage" [isFromOliver]="true" (notifyEmit)="closeDesignTemplate($event)"></app-add-landing-page>
      <app-choose-emailtemplate *ngIf="selectTemplate" [selectedTemplateList]="selectedTemplateList" [fromOliverPopup] = "true"
          (notifyData)="closeSelectionTemplate($event)" [pageView]="chatGptIntegrationSettingsDto.designPage"></app-choose-emailtemplate>
          <app-ppt-design-picker *ngIf="showPptDesignPicker" [pptData]="pptData" [fromOliverPopup]="true"
            (notifyData)="emitSelectedTemplate($event)"></app-ppt-design-picker>
      <ngx-loading [show]="templateLoader" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
      <div *ngIf="!openShareOption && !showTemplate && !selectTemplate && !showPage && !showPptDesignPicker" [ngClass]="showView || openAssetPage ? 'modal-body': 'modal-body oliver-header'"
        [ngStyle]="{ 'max-height': showView || openAssetPage ? 'calc(100vh - 77px)' : '' }">
        <app-dam-list-and-grid-view *ngIf="showView" [FromOliverPopUp]="showView"
          [oliverIntegrationType]="chatGptIntegrationSettingsDto?.oliverIntegrationType" [selectedItemFromOliver]="selectedAssets"
          [selectedFoldersForOliver]="selectedFolders" [isPartnerViewFromOliver]="isPartnerLoggedIn"
          (notifyasset)="getSelectedAssets($event)" (notifyFolders)="handleFolders($event)"></app-dam-list-and-grid-view>
          <app-add-dam *ngIf="openAssetPage" [isFromOliverPopup]="true" [assetData]="emittdata" (notifyEmit)="closeDesignTemplate($event)"></app-add-dam>
        <app-response-message [customResponse]="customResponse" *ngIf="customResponse?.isVisible"
          [showCloseIcon]="false"></app-response-message>
        <div classs="row">
          <button *ngIf="!showView && !openAssetPage" type="button" class="close-circle" data-dismiss="modal" aria-label="Close"
            style="position: absolute;  top: 12px;right: 12px; width: 27px;height: 27px;" (click)="showOliverIcon()">
            <i class="fa fa-times m0" aria-hidden="true"></i></button>
          <!-- <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 card_pr15">
                <div class="card1 pr0 pl0">
                  <div class="chat_btn">
                    <textarea class="form-control border_0" [(ngModel)]="inputText" [ngModelOptions]="{standalone: true}" rows="18" (input)="validateInputText()" placeholder="Enter the text here"></textarea>
                    <div class="copy_text">
                      <div class="gap-12">
                        <button class="copy_btns" type="button">
                          <div class="sample-text">
                            <svg focusable="false" aria-hidden="true" viewBox="0 0 30 30" class="svg-w-h">
                              <path d="M3.98489 7.49906C4.74195 6.96993 5.88318 7.0714 6.56292 7.63276L5.78331 6.49958C5.15592 5.6048 5.38062 4.63673 6.27621 4.00853C7.17179 3.38274 9.70956 5.06519 9.70956 5.06519C9.07653 4.16155 9.19492 3.01629 10.0986 2.38246C11.0022 1.75103 12.2489 1.96929 12.882 2.87455L21.2741 14.7298L20.2045 25.0991L11.2784 21.8438L3.4928 10.3002C2.85413 9.39091 3.07481 8.13693 3.98489 7.49906Z"
                                fill="#EF9645"></path>
                              <path d="M2.24043 14.0944C2.24043 14.0944 1.32874 12.7655 2.65843 11.8546C3.98651 10.9437 4.8974 12.2718 4.8974 12.2718L9.12647 18.4394C9.27225 18.1962 9.43171 17.9562 9.6097 17.7194L3.74006 9.16058C3.74006 9.16058 2.82917 7.8325 4.15805 6.92161C5.48613 6.01072 6.39702 7.3388 6.39702 7.3388L11.9179 15.3902C12.1233 15.2227 12.3335 15.0544 12.5502 14.8893L6.14977 5.55407C6.14977 5.55407 5.23888 4.22599 6.56776 3.3151C7.89584 2.40421 8.80673 3.73229 8.80673 3.73229L15.2071 13.0659C15.4423 12.9217 15.6751 12.7969 15.9086 12.6648L9.92622 3.94089C9.92622 3.94089 9.01533 2.61281 10.3434 1.70192C11.6715 0.791027 12.5824 2.11911 12.5824 2.11911L18.9079 11.344L19.8695 12.747C15.8845 15.4804 15.5051 20.6228 17.7819 23.9434C18.237 24.6079 18.9014 24.1528 18.9014 24.1528C16.1688 20.167 17.0031 15.6882 20.989 12.9556L19.8139 7.07464C19.8139 7.07464 19.375 5.52508 20.9237 5.08534C22.4733 4.6464 22.913 6.19596 22.913 6.19596L24.2701 10.2261C24.8081 11.824 25.3807 13.4162 26.1386 14.9223C28.2785 19.1747 27.0004 24.4597 22.9654 27.2278C18.564 30.2455 12.5469 29.1236 9.52836 24.723L2.24043 14.0944Z"
                                fill="#FFDC5D"></path>
                              <path  d="M9.73464 25.9383C6.51311 25.9383 3.25774 22.683 3.25774 19.4614C3.25774 19.0161 2.93156 18.6561 2.48618 18.6561C2.04081 18.6561 1.64697 19.0161 1.64697 19.4614C1.64697 24.2938 4.90234 27.5491 9.73464 27.5491C10.18 27.5491 10.54 27.1553 10.54 26.7099C10.54 26.2645 10.18 25.9383 9.73464 25.9383Z"
                                fill="#5DADEC"></path>
                              <path  d="M5.70764 27.5153C3.29148 27.5153 1.68072 25.9045 1.68072 23.4884C1.68072 23.043 1.32071 22.683 0.875331 22.683C0.429953 22.683 0.0699463 23.043 0.0699463 23.4884C0.0699463 26.7099 2.4861 29.1261 5.70764 29.1261C6.15302 29.1261 6.51302 28.766 6.51302 28.3207C6.51302 27.8753 6.15302 27.5153 5.70764 27.5153ZM19.3992 1.74298C18.9546 1.74298 18.5938 2.10379 18.5938 2.54836C18.5938 2.99294 18.9546 3.35375 19.3992 3.35375C22.6207 3.35375 25.8423 6.24427 25.8423 9.79682C25.8423 10.2414 26.2031 10.6022 26.6476 10.6022C27.0922 10.6022 27.453 10.2414 27.453 9.79682C27.453 5.35593 24.2315 1.74298 19.3992 1.74298Z"
                                fill="#5DADEC"></path>
                              <path d="M23.4261 0.166046C22.9815 0.166046 22.6207 0.493032 22.6207 0.937605C22.6207 1.38218 22.9815 1.77682 23.4261 1.77682C25.8423 1.77682 27.4192 3.5688 27.4192 5.76991C27.4192 6.21448 27.813 6.5753 28.2584 6.5753C28.7038 6.5753 29.03 6.21448 29.03 5.76991C29.03 2.67965 26.6477 0.166046 23.4261 0.166046Z"
                                fill="#5DADEC"></path>
                            </svg>
                            <div>Try Sample Text</div>
                          </div>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="sticky_btn">
                    <div class="para-phrase">
                      <button class="para_btn btn btn-primary" type="button" (click)="!isTextLoading && isValidInputText && generateChatGPTText()" [disabled]="isTextLoading || !isValidInputText">Generate</button>
                    </div>
                  </div>
                </div>
              </div>
               <div class="right_arrow"><i class="fa fa-long-arrow-right hidden-xs" aria-hidden="true"></i></div>
              <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 card_pl15">
                <div class="mt10" *ngIf="isTextLoading">
                  <app-modal-popup-loader [height]="435"></app-modal-popup-loader>
                </div>
                <div class="card1 pr0 pl0" *ngIf="!isTextLoading">
                  <div class="chat_btn">
                    <textarea class="form-control border_0" id="chatGptGeneratedTextArea"  [(ngModel)]="chatGptGeneratedText" [ngModelOptions]="{standalone: true}" rows="18" readonly #chatGptGeneratedTextInput></textarea>
                  </div>
                  <div class="sticky_btn" *ngIf="isCopyButtonDisplayed">
                    <div class="para-phrase">
                      <span class="success" id="copied-chat-gpt-text-message" style="display: none;">
                        <strong>Text copied successfully<i class="fa fa-check" aria-hidden="true"></i></strong>
                      </span>
                      <button class="para_btn btn btn-primary" type="button" (click)="copyChatGPTText(chatGptGeneratedTextInput)">Copy</button>
                    </div>
                  </div>
                </div>
              </div> -->
          <div *ngIf="!showView && !openAssetPage" class="d-flex oliver_flex">
            <div class="side_bar" [ngClass]="{ 'collapsed': !isSidebarVisible }">
              <div class="sidebar-header">
                <img src="assets/images/olivere-sidebar-img.svg" alt="Logo">
                <h5 class="oliver-heading-color">Your AI-powered creative and optimization Agents, built to accelerate
                  your marketing, messaging, and content creation workflows.</h5>
              </div>
                <!-- Scrollable-->
            <div class="sidebar-scroll">
              <ul class="nav nav-pills nav-stacked oliver_tab" role="tablist">
                <li [ngClass]="{'active': activeTab === 'globalchat'}">
                  <a href="#globalchat" role="tab" data-toggle="tab" (click)="setActiveTab('globalchat')">
                    <i class="fa fa-file-text"></i> Ask Oliver
                  </a>
                </li>
                <!-- <li *ngIf="!isWelcomePageUrl && authenticationService.oliverInsightsEnabled && showOliverInsights" [ngClass]="{'active': activeTab === 'askpdf'}">
                              <a href="#askpdf" role="tab" data-toggle="tab" (click)="setActiveTab('askpdf')">
                                <i class="fa fa-file-text"></i> Oliver Insights
                              </a>
                            </li>
                            <li *ngIf="authenticationService.brainstormWithOliverEnabled && showBrainstormWithOliver" [ngClass]="{'active': activeTab === 'new-chat'}">
                              <a href="#New-Chat" role="tab" data-toggle="tab" (click)="setActiveTab('new-chat')">
                                <i class="fa fa-lightbulb-o"></i>Brainstorm with Oliver
                              </a>
                            </li>
                            <li *ngIf="authenticationService.oliverSparkWriterEnabled && showOliverSparkWriter" [ngClass]="{'active': activeTab === 'writing'}">
                              <a href="#writing" role="tab" data-toggle="tab" (click)="setActiveTab('writing')">
                                <i class="fa fa-pencil"></i> Oliver Spark Writer
                              </a>
                            </li>
                            <li *ngIf="authenticationService.oliverParaphraserEnabled && showOliverParaphraser"
                              [ngClass]="{'active': activeTab === 'paraphraser'}">
                              <a href="#paraphraser" role="tab" data-toggle="tab" (click)="setActiveTab('paraphraser')">
                                <i class="fa fa-align-left"></i> Oliver Paraphraser
                              </a>
                            </li> -->
            
                <!-- Ask Oliver Agent with Submenu -->
                <li *ngIf="((authenticationService.oliverInsightsEnabled && showOliverInsights) || (authenticationService.brainstormWithOliverEnabled && showBrainstormWithOliver) || (authenticationService.oliverSparkWriterEnabled && showOliverSparkWriter)
                  || (authenticationService.oliverParaphraserEnabled && showOliverParaphraser) || (authenticationService.oliverContactAgentEnabled && showOliverParaphraser) || 
                      (authenticationService.oliverContactAgentEnabled && showOliverContactAgent) || (authenticationService.oliverPartnerAgentEnabled && showOliverPartnerAgent) || (authenticationService.oliverCampaignAgentEnabled && showOliverCampaignAgent))" [ngClass]="{'open': isAgentSubmenuOpen }" class="submenu-parent">
                  <a href="javascript:void(0);" class="submenu-toggle" (click)="toggleAgentSubmenu()">
                    <i class="fa fa-user"></i>Oliver Agents
                  </a>
                  <ul class="nav submenu" *ngIf="isAgentSubmenuOpen">
                    <li *ngIf="!isWelcomePageUrl && authenticationService.oliverInsightsEnabled && showOliverInsights && (authenticationService?.module?.damAccess || authenticationService?.module?.damAccessAsPartner)"
                      [ngClass]="{'active': activeTab === 'askpdf'}">
                      <a href="#askpdf" role="tab" data-toggle="tab" (click)="setActiveTab('askpdf')">
                        <i class="fa fa-bar-chart"></i> Oliver Insights
                      </a>
                    </li>
                    <li *ngIf="authenticationService.brainstormWithOliverEnabled && showBrainstormWithOliver"
                      [ngClass]="{'active': activeTab === 'new-chat'}">
                      <a href="#new-chat" role="tab" data-toggle="tab" (click)="setActiveTab('new-chat')">
                        <i class="fa fa-lightbulb-o"></i> BrainStorm Agent
                      </a>
                    </li>
                    <li *ngIf="authenticationService.oliverSparkWriterEnabled && showOliverSparkWriter"
                      [ngClass]="{'active': activeTab === 'writing'}">
                      <a href="#writing" role="tab" data-toggle="tab" (click)="setActiveTab('writing')">
                        <i class="fa fa-pencil"></i> Spark Writer Agent
                      </a>
                    </li>
                    <li *ngIf="authenticationService.oliverParaphraserEnabled && showOliverParaphraser"
                      [ngClass]="{'active': activeTab === 'paraphraser'}">
                      <a href="#paraphraser" role="tab" data-toggle="tab" (click)="setActiveTab('paraphraser')">
                        <i class="fa fa-align-left"></i> Paraphraser Agent
                      </a>
                    </li>
                    <li *ngIf="authenticationService?.module?.isContact && authenticationService?.oliverContactAgentEnabled && showOliverContactAgent"
                      [ngClass]="{'active': activeTab === 'contactagent'}">
                      <a href="#contactagent" role="tab" data-toggle="tab" (click)="setActiveTab('contactagent')">
                        <i class="fa fa-vcard-o"></i> Contact Agent
                      </a>
                    </li>
                    <li *ngIf="authenticationService?.module?.isPartner && authenticationService.oliverPartnerAgentEnabled && showOliverPartnerAgent" [ngClass]="{'active': activeTab === 'partneragent'}">
                      <a href="#partneragent" role="tab" data-toggle="tab" (click)="setActiveTab('partneragent')">
                        <i class="fa fa-handshake-o"></i> Partner Agent
                      </a>
                    </li>
                    <li *ngIf="authenticationService.oliverCampaignAgentEnabled && showOliverCampaignAgent" [ngClass]="{'active': activeTab === 'campaignagent'}">
                      <a href="#campaignagent" role="tab" data-toggle="tab" (click)="setActiveTab('campaignagent')">
                        <i class="fa fa-bullhorn"></i> Campaign Agent
                      </a>
                    </li>
                  </ul>
                </li>
            
                <li class="history-divider"></li>
                <li [ngClass]="{'active': activeTab === 'history'}" style="margin-bottom: 10px;">
                  <a class="oliver-history-btn" href="#history" role="tab" data-toggle="tab" (click)="setActiveTab('history')">
                    <!-- Left icon and text -->
                    <span style="display: flex; align-items: center;">
                      <i class="fa fa-history" style="margin-right: 8px;"></i>
                      History
                    </span>
            
                    <!-- Right sparkle SVG -->
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24" fill="#2f80ed">
                      <path
                        d="M9.5 2.5a.75.75 0 0 1 1.38 0l1.04 2.41c.19.45.57.82 1.03 1.01l2.41 1.04a.75.75 0 0 1 0 1.38l-2.41 1.04a2.25 2.25 0 0 0-1.03 1.01l-1.04 2.41a.75.75 0 0 1-1.38 0l-1.04-2.41a2.25 2.25 0 0 0-1.01-1.01l-2.41-1.04a.75.75 0 0 1 0-1.38l2.41-1.04a2.25 2.25 0 0 0 1.01-1.01L9.5 2.5Zm9 7a.75.75 0 0 1 .69.48l.53 1.34c.12.3.36.55.65.67l1.34.53a.75.75 0 0 1 0 1.38l-1.34.53a1.25 1.25 0 0 0-.65.67l-.53 1.34a.75.75 0 0 1-1.38 0l-.53-1.34a1.25 1.25 0 0 0-.67-.67l-1.34-.53a.75.75 0 0 1 0-1.38l1.34-.53c.3-.12.55-.36.67-.67l.53-1.34a.75.75 0 0 1 .69-.48Z" />
                    </svg>
                  </a>
                </li>
            
                <li
                  *ngIf="authenticationService?.module?.adminOrSuperVisor && (authenticationService.vanityURLEnabled ? authenticationService.module.loggedInThroughOwnVanityUrl : true)"
                  [ngClass]="{'active': activeTab === 'settings'}">
                  <a href="#settings" role="tab" data-toggle="tab" (click)="setActiveTab('settings')">
                    <i class="fa fa-gear"></i> Settings
                  </a>
                </li>
            
                <!-- <li [ngClass]="{'active': activeTab === 'history'}">
                              <a href="#history" role="tab" data-toggle="tab" (click)="setActiveTab('history')">
                                <i class="fa fa-history"></i> Chat History
                              </a>
                            </li> -->
              </ul>
            </div>
            </div>
            <!-- Sidebar Toggle Button -->
            <button class="toggle-button" (click)="toggleSidebar()">
              <span *ngIf="!isSidebarVisible">&#9776;</span>
              <span *ngIf="isSidebarVisible">&#9776;</span>
            </button>
            <div
              [ngClass]="(isCopyButtonDisplayed || showOpenHistory ) && (activeTab === 'new-chat' || activeTab === 'writing' || activeTab === 'askpdf' || activeTab == 'globalchat' || activeTab == 'contactagent' || activeTab == 'partneragent' || activeTab == 'campaignagent') ? 'd-flex align-templateui' : 
              ((activeTab === 'history' || activeTab === 'settings' || activeTab === 'paraphraser')  ?  'd-flex align-start'  : (  

              (isSidebarVisible && (showPromptBoxBelow && !showPromptBoxAbove || showGlobalPromptBoxAbove) && activeTab == 'globalchat') 
              ? 'd-flex align-for-prompts-global' :
              (oliverPromptSuggestionDTOs?.length > 0 && !isSidebarVisible && (showPromptBoxBelow && !showPromptBoxAbove || showGlobalPromptBoxAbove) && activeTab == 'globalchat') 
              ? 'd-flex align-center align_tab_view'             
               : 
               (oliverPromptSuggestionDTOs?.length > 0 && showPromptBoxBelow && !showPromptBoxAbove || showInsightPromptBoxAbove) ? 'd-flex align-for-prompts' : 'd-flex align-center align_tab_view'))">
              <div [ngClass]="isSidebarVisible ? 'tab-content oliver_content' : 'tab-content oliver_content oliver-tabcontent'"
                [ngStyle]="showOpenHistory && activeTab != 'paraphraser' ? { 'margin-top': '0px' } : { 'margin-top': '15px' }">
                
                <!-- Global Chat -->
                <div role="tabpanel" [ngClass]="{'tab-pane fade in active': activeTab === 'globalchat', 'tab-pane fade': activeTab !== 'globalchat'}"
                 class="tab-pane fade">
                  <ng-container *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'globalchat'">
                    <div class="main-container newChatlabel">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <div [ngClass]="{
                        'fixed_oliver_input': !isSidebarVisible && showOpenHistory,
                        'templateui col-lg-9':  showOpenHistory && activeTab === 'globalchat',
                        'container-ui': (!showOpenHistory || activeTab !== 'globalchat')
                      }">
                    <div *ngIf="!showOpenHistory" class="d-flex content-align">
                      <span class="oliver_heading">Ask Oliver</span>
                      <div class="oliver-container">
                        <img src="assets/images/olivere-dog.svg" alt="Oliver" class="oliver-image">
                      </div>
                    </div>

                    <p *ngIf="!showOpenHistory" class="oliver-text-color">Generates key angles, ideas, and messaging directions for your
                      solution and audience. Specializes in creative
                      brainstorming, strategic messaging, and fast ideation to craft focused content concepts and core themes tailored
                      to
                      your goals.</p>
                    <div *ngIf="showPromptBoxAbove && !showPromptBoxBelow || showGlobalPromptBoxBelow">
                      <ng-container *ngTemplateOutlet="displayPrompts"></ng-container>
                      <div class="suggestion-direction-global-chat-down"></div>
                    </div>
                  
                    <!-- <div class="oliver_input mt10">
                      <input type="text" (keypress)="searchDataOnKeyPress($event.keyCode)" [(ngModel)]="inputText"
                        [ngModelOptions]="{standalone: true}" (input)="validateInputText()" placeholder="Ask Me!">
                      <div class="btn-wrapper">
                        <button *ngIf="oliverPromptSuggestionDTOs?.length > 0" class="image-only-button"
                          style="padding-right: 6px; height: 25px;" (click)="showOpenHistory ? openPrompts() : openPromptsDown()">
                          <img data-toggle="tooltip" data-placement="top" title="Prompt Suggestions"
                            src="assets/images/oliver-promps-icon.svg" alt="Suggested Prompts">
                        </button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">Submit</button>
                      </div>
                    </div> -->

                    <div class="oliver_input mt10" [ngClass]="inputText?.length > 74 ? 'multi-line' : 'single-line'">
                      <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" id="askMeTextarea"
                        (input)="autoResizeTextArea($event); validateInputText()" (keypress)="searchDataOnKeyPress($event)">
                                        </textarea>
                      <div class="btn-wrapper">
                        <button class="image-only-button" title="Prompt Suggestions"
                          (click)="showOpenHistory ? openPrompts() : openPromptsDown()">
                          <img data-toggle="tooltip" data-placement="top" title="Prompt Suggestions"
                            src="assets/images/oliver-promps-icon.svg" alt="Suggested Prompts" />
                        </button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">Submit</button>
                      </div>
                    </div>
                  
                    <div *ngIf="showPromptBoxBelow && !showPromptBoxAbove || showGlobalPromptBoxAbove">
                      <div class="suggestion-direction-global-chat"></div>
                      <ng-container *ngTemplateOutlet="displayPrompts"></ng-container>
                    </div>
                  
                    <!--  -->
                    <!-- <div class="action-buttons mt10">
                                        <button class="action-btn">Analyze Asset</button>
                                        <button class="action-btn">Summarize in detail</button>
                                        <button class="action-btn">Summarize with Key
                                          Quotes</button>
                                      </div> -->
                    <!--  -->
                  </div>
                </div>
                <!-- Start New Chat -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'new-chat', 'tab-pane fade': activeTab !== 'new-chat'}"
                  id="New-Chat">
                  <ng-container *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'new-chat'">
                    <div class="main-container newChatlabel">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <div [ngClass]="{
                                      'templateui col-lg-9': showOpenHistory && activeTab === 'new-chat',
                                      'container-ui': !(showOpenHistory && activeTab === 'new-chat'),
                                      'fixed_oliver_input': !isSidebarVisible && showOpenHistory
                                    }">
                    <!-- Heading -->
                    <div *ngIf="!showOpenHistory" class="d-flex content-align">
                      <span class="oliver_heading">Brainstorm with Oliver</span>
                      <!-- Oliver Image Positioned Correctly -->
                      <div class="oliver-container">
                        <img src="assets/images/olivere-dog.svg" alt="Oliver" class="oliver-image">
                      </div>
                    </div>
                    <p *ngIf="!showOpenHistory" class="oliver-text-color">Unlock fresh ideas, angles, and campaign
                      directions with guided ideation.</p>
                    <!-- Input Section -->
                    <div class="oliver_input mt10" [ngClass]="inputText?.length > 74 ? 'multi-line' : 'single-line'">
                      <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" id="askMeTextarea1"
                        (input)="autoResizeTextArea($event); validateInputText()" (keypress)="searchDataOnKeyPress($event)">
                      </textarea>
                      <div class="btn-wrapper">
                        <button *ngIf="hasAcess" class="btn-plus">+</button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">Submit</button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Writing Tab -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'writing', 'tab-pane fade': activeTab !== 'writing'}"
                  id="writing">
                  <!-- Heading -->
                  <ng-container *ngIf="(isCopyButtonDisplayed || showOpenHistory) && activeTab === 'writing'">
                    <div class="main-container">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <div [ngClass]="{
                                      'templateui col-lg-9' : (isCopyButtonDisplayed || showOpenHistory) && activeTab === 'writing',
                                      'fixed_oliver_input' : !isSidebarVisible && showOpenHistory
                                    }">
                    <div *ngIf="!showOpenHistory" class="d-flex content-align">
                      <span class="oliver_heading">Oliver Spark Writer</span>
                      <!-- Oliver Image Positioned Correctly -->
                      <div class="oliver-container">
                        <img src="assets/images/olivere-dog.svg" alt="Oliver" class="oliver-image">
                      </div>
                    </div>
                    <p *ngIf="!showOpenHistory" class="oliver-text-color">Turn ideas into ready-to-go drafts for emails,
                      posts, and more.</p>
                    <!-- Input Section -->
                    <div class="writing-card mt10">
                      <div class="form-group">
                        <input type="text" class="form-control input-lg oliver-input" [(ngModel)]="inputText"
                          [ngModelOptions]="{standalone: true}" (input)="validateInputText()" placeholder="Ask Me!">
                      </div>
                      <div class="oliver_text">Text Length</div>
                      <div class="input-group d-flex">
                        <select class="form-control oliver-focus" [(ngModel)]="selectedValueForWork" (ngModelChange)="sortBy($event)"
                          id="select-dropdown">
                          <option *ngFor="let option of sortOption.wordOptionsForOliver" [value]="option.value">
                            {{ option.name }}
                          </option>
                        </select>
                        <button class="btn btn-submit ml10" type="button" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">Submit</button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Ask PDF Tab -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'askpdf', 'tab-pane fade': activeTab !== 'askpdf'}"
                  id="askpdf">
                  <ng-container *ngIf="showOpenHistory && activeTab === 'askpdf'">
                    <div class="main-container newChatlabel">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <!-- <div *ngIf="isCopyButtonDisplayed && activeTab === 'askpdf'" *ngFor="let msg of messages">
                      <ng-template [ngTemplateOutlet]="messageTemplate" [ngTemplateOutletContext]="{ data: msg }"></ng-template>
                    </div>                 -->
                  <span *ngIf="!showOpenHistory" class="oliver_heading">Oliver Insights</span>
                  <p *ngIf="!showOpenHistory" class="oliver-text-color">Summarize, compare, and extract key insights
                    from any content or data.</p>
                  <div [ngClass]="{
                                      'templateui col-lg-9 override-margin' : showOpenHistory && activeTab === 'askpdf',
                                      'container-ui' : !(showOpenHistory && activeTab === 'askpdf'),
                                      'fixed_oliver_input' : !isSidebarVisible && showOpenHistory
                                    }">
                    <div *ngIf="!showOpenHistory" class="custom-card mt10">
                      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pl0">
                        <div [ngClass]="assetLoader || isfileProcessed  ? 'upload-box custom-align-center' : 'upload-box'"
                          (click)="!isfileProcessed &&!assetLoader && openAssetsPage()"
                          [ngStyle]="{ 'display': assetLoader ? 'flex' : '' }">
                          <label *ngIf="!assetLoader && !isfileProcessed">
                            <!-- <i class="glyphicon glyphicon-upload"></i> -->
                            <img src="assets/images/oliverUploadIcon.svg" width="40px" alt="pdficon">
                            Add Digital Assets
                          </label>
                          <div *ngIf="assetLoader" class="fileloader"></div>
                          <h4 class="custom-text-align" *ngIf="assetLoader">Analyzing your assets</h4>
                          <div *ngIf="isfileProcessed && !assetLoader" class="file-info">
                            <div class="flex">
                              <img *ngIf="selectedAssets?.length > 0" class="file-icon mr5" src="../../../assets/images/asset-uploads/Documents.svg"
                                alt="Upload">
                              <img *ngIf="!(selectedAssets?.length > 0)" class="file-icon mr10" src="assets/images/fileIconOliver.svg"
                                alt="Upload">
                              <div class="file-details">
                                <div *ngIf="selectedAssets?.length > 0" class="file-name"> {{ selectedAssets?.length }}
                                  file(s) processed successfully</div>
                                <div *ngIf="!(selectedAssets?.length > 0)" class="file-name"> {{ selectedFolders?.length
                                  }} folder(s) processed successfully</div>
                                <div class="file-status">Processing complete</div>
                              </div>
                            </div>
                            <div class="success-icon">
                              <i class="fa fa-check"></i>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="isfileProcessed && !assetLoader" class="oliver_input custom_oliver_input mt10"
                          [ngClass]="inputText?.length > 74 ? 'multi-line' : 'single-line'">
                          <!-- <textarea (keypress)="onKeyPressForAsekOliver($event.keyCode)" [(ngModel)]="inputText" (input)="autoResizeTextArea(textarea3);validateInputText(textarea3)"
                            placeholder="Ask Me!" rows="1" #textarea3></textarea> -->
                            <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" id="askMeTextarea2"
                              (input)="autoResizeTextArea($event); validateInputText()" (keypress)="onKeyPressForAsekOliver($event)">
                                                </textarea>
                          <div class="btn-wrapper">
                            <button *ngIf="oliverPromptSuggestionDTOs?.length > 0" class="image-only-button" style="padding-right: 6px; height: 25px;" (click)="!assetLoader && openPromptsDown()">
                              <img data-toggle="tooltip" data-placement="bottom" title="Prompt Suggestions" src="assets/images/oliver-promps-icon.svg" alt="Suggested Prompts">
                            </button>
                            <button (click)="!assetLoader && uploadFilesFromPreview()" class="btn-plus">+</button>
                          </div>
                        </div>
                        <div *ngIf="isfileProcessed && !assetLoader" class="action-buttons mt5">
                          <button class="action-btn" (click)="setInputText('Generate summaries')">Generate
                            summaries</button>
                          <button class="action-btn" (click)="setInputText('Compare documents')">Compare
                            documents</button>
                          <button class="action-btn" (click)="setInputText('Give an overview of documents')">Give an
                            overview of
                            documents</button>
                        </div>
                      </div>
                      <div class="submit-section" [ngStyle]="{'margin-bottom': isfileProcessed && !assetLoader ? '35px' : ''}">
                        <img src="assets/images/olivere-dog.svg" width="80px" alt="Robot">
                        <button (click)="!isTextLoading && isValidInputText && AskAiTogetData()" class="btn btn-submit">Submit</button>
                      </div>
                    </div>
                    
                    <div *ngIf="showPromptBoxBelow && !showPromptBoxAbove || showInsightPromptBoxAbove">
                      <ng-container *ngTemplateOutlet="displayPrompts"></ng-container>
                    </div>

                    <div *ngIf="showPromptBoxAbove && !showPromptBoxBelow || showInsightPromptBoxBelow">
                      <ng-container  *ngTemplateOutlet="displayPrompts"></ng-container>
                      <div class="suggestion-direction"></div>
                    </div>

                    <div *ngIf="showOpenHistory" class="oliver_input mt10" [ngClass]="inputText?.length > 74 ? 'multi-line' : 'single-line'">
                      <!-- <textarea (keypress)="onKeyPressForAsekOliver($event.keyCode)" [(ngModel)]="inputText"
                        (input)="autoResizeTextArea(textarea4);validateInputText(textarea4)" placeholder="Ask Me!" rows="1"
                        #textarea4></textarea> -->
                        <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" id="askMeTextarea3"
                          [ngModelOptions]="{standalone: true}" (ngModelChange)="validateInputText()"
                          (input)="autoResizeTextArea($event); validateInputText()" (keypress)="onKeyPressForAsekOliver($event)">
                                                                    </textarea>
                      <div class="btn-wrapper">
                    
                        <button *ngIf="oliverPromptSuggestionDTOs?.length > 0" class="image-only-button"
                          style="padding-right: 6px; height: 25px;" (click)="!assetLoader && openPrompts()">
                          <img data-toggle="tooltip" data-placement="bottom" title="Prompt Suggestions"
                            src="assets/images/oliver-promps-icon.svg" alt="Suggested Prompts">
                        </button>
                    
                        <button [disabled]="isTextLoading" (click)="!assetLoader && reUploadFiles()" class="btn-plus">+</button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">Submit</button>
                      </div>
                    </div>
                    <div *ngIf="showOpenHistory" class="action-buttons">
                      <button class="action-btn" (click)="setInputText('Generate summaries')">Generate
                        summaries</button>
                      <button class="action-btn" (click)="setInputText('Compare documents')">Compare documents</button>
                      <button class="action-btn" (click)="setInputText('Give an overview of documents')">Give an overview
                        of
                        documents</button>
                    </div>
                  </div>
                </div>
                <!-- Paraphraser Tab -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'paraphraser', 'tab-pane fade': activeTab !== 'paraphraser'}"
                  id="paraphraser">
                  <div class="header-text fs-22">Oliver Paraphraser</div>
                  <p class="oliver-text-color">Reword your content with clarity, variation, or different tones on
                    demand.</p>
                  <div class="phara-card">
                    <div class="content-area">
                      <div class="textarea-card clip-path1">
                        <textarea class="textarea h-350" [(ngModel)]="inputText" [ngModelOptions]="{standalone: true}"
                          (input)="validateInputText()" placeholder="Feed Me Your Thoughts"></textarea>
                      </div>
                      <div class="oliver-container-img hidden-xs">
                        <img src="assets/images/olivere-dog.svg" width="50px" alt="Oliver">
                      </div>
                      <div class="textarea-card clip-path2" [ngClass]="isTextLoading ? '' : 'scrollable' ">
                        <div *ngIf="isTextLoading" class="align-center">
                          <ng-container *ngTemplateOutlet="wifiLoader"></ng-container>
                        </div>
                        <div #markdownComponent class="padding-align">
                          <markdown [data]="chatGptGeneratedText"></markdown>
                        </div>
                        <textarea class="form-control border_0" id="chatGptGeneratedTextArea"
                          style="position: absolute; left: -9999px;" [(ngModel)]="chatGptGeneratedText"
                          [ngModelOptions]="{standalone: true}" rows="18" readonly
                          #chatGptGeneratedTextInput></textarea>
                      </div>
                    </div>
                    <div class="content-area">
                      <div class="generate-div w-50per mt10">
                        <button class="generate-btn" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">Generate</button>
                        <!-- <button *ngIf="isCopyButtonDisplayed" class="generate-btn ml10" (click)="copyChatGPTText(chatGptGeneratedTextInput)">Copy</button> -->
                        <!-- <button *ngIf="isCopyButtonDisplayed" class="generate-btn ml10" (click)="openEmailModalPopup(markdownComponent)">Send Email</button> -->
                        <!-- <button *ngIf="false" class="generate-btn ml10" (click)="copyChatGPTText(chatGptGeneratedTextInput)">Copy</button> -->
                      </div>
                      <div *ngIf="isCopyButtonDisplayed" class="w-50per mt10">
                        <div class="footer-icons phara-footer mt0">
                          <div class="footer-icon" title="{{!(isSpeakingText) ? 'Read aloud' : 'stop'}}"
                            [ngStyle]="{'background-color': isSpeakingText  ? '#e40707' : '#0d6efd'}">
                            <i [ngClass]="(isSpeakingText) ? 'fas fa-volume-mute' : 'fa fa-volume-up fs-12'"
                              aria-hidden="true" (click)="speakTextOn(i, markdownComponent)">
                            </i>
                          </div>
                          <!-- <div class="footer-icon" title="Copy to Clipboard" (click)="copyChatGPTText(chatGptGeneratedTextInput)"><i class="fa fa-clone fs-12"></i></div> -->
                          <div class="footer-icon"
                            [ngStyle]="{'background-color': isEmailCopied ? '#00FF13' : '#0d6efd'}">
                            <i data-toggle="tooltip" data-placement="top"
                              [title]="isEmailCopied ? 'Copied to Clipboard' : 'Copy to Clipboard'" class="fs-12"
                              [ngClass]="isEmailCopied ? 'fa fa-check' : 'fa fa-clone'"
                              (click)="!isEmailCopied && copyChatGPTText(chatGptGeneratedTextInput)" aria-hidden="true">
                            </i>
                          </div>
                          <!-- <div class="footer-icon" title=" Reload/Refresh"><i class="fa fa-refresh fs-12"></i></div> -->
                          <!-- <button class="share-btn" (click)="openEmailModalPopup(markdownComponent)">Send Email</button>
                          <button class="share-btn" (click)="openSocialShare(markdownComponent)">Social Share</button> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--History Content  -->
                <div role="tabpanel" class="tab-pane" [ngClass]="{'in active': activeTab === 'history'}" id="history">
                  <div class="oliver_history_content">
                    <div class="history-header text-center">
                      <svg xmlns="http://www.w3.org/2000/svg" height="27" viewBox="0 0 24 24" fill="#2f80ed"
                        style="vertical-align: middle;">
                        <path
                          d="M9.5 2.5a.75.75 0 0 1 1.38 0l1.04 2.41c.19.45.57.82 1.03 1.01l2.41 1.04a.75.75 0 0 1 0 1.38l-2.41 1.04a2.25 2.25 0 0 0-1.03 1.01l-1.04 2.41a.75.75 0 0 1-1.38 0l-1.04-2.41a2.25 2.25 0 0 0-1.01-1.01l-2.41-1.04a.75.75 0 0 1 0-1.38l2.41-1.04a2.25 2.25 0 0 0 1.01-1.01L9.5 2.5Zm9 7a.75.75 0 0 1 .69.48l.53 1.34c.12.3.36.55.65.67l1.34.53a.75.75 0 0 1 0 1.38l-1.34.53a1.25 1.25 0 0 0-.65.67l-.53 1.34a.75.75 0 0 1-1.38 0l-.53-1.34a1.25 1.25 0 0 0-.67-.67l-1.34-.53a.75.75 0 0 1 0-1.38l1.34-.53c.3-.12.55-.36.67-.67l.53-1.34a.75.75 0 0 1 .69-.48Z" />
                      </svg>
                      <span>History</span>
                    </div>
                    <!--  -->
                    <div class="history-header-row">
                      <!-- <h5 class="history-title mb0">Today</h5> -->
                      <div class="search-wrapper">
                        <input type="text" class="form-control input-sm search-input" [(ngModel)]="chatHistorySortOption.searchKey"
                          (keypress)="searchHistoryOnKeyPress($event.keyCode)" placeholder="Search">
                        <i class="fa fa-times search-icon right_30" (click)="clearSeachKey()"></i>
                        <i class="fa fa-search search-icon" (click)="searchChatHistory()"></i>
                      </div>
                    </div>
                    <!--  -->
                    <!-- History Sections -->
                    <div class="oliver-history-scroll">
                      <app-modal-popup-loader *ngIf="historyLoader"></app-modal-popup-loader>
                      <div *ngIf="!historyLoader" class="history-section">
                        <div *ngFor="let history of chatHistories;let i =index">
                          <div class="history-entry">
                            <div class="text-date" *ngIf="!history.showInputField" (click)="showHistory(history)">
                              <!-- <span class="entry-text" *ngIf="history.title">{{history.title}}</span> -->
                              <span class="entry-text pointer" *ngIf="history.title">
                                <i *ngIf="history.oliverChatHistoryType == BRAINSTORMAGENT"
                                  class="fa fa-lightbulb-o mr5"></i>
                                <i *ngIf="history.oliverChatHistoryType == INSIGHTAGENT"
                                  class="fa fa-bar-chart mr5"></i>
                                <i *ngIf="history.oliverChatHistoryType == GLOBALCHAT"
                                  class="fa fa-file-text mr5"></i>
                                <i *ngIf="history.oliverChatHistoryType == CONTACTAGENT"
                                  class="fa fa-vcard-o mr5"></i>
                                <i *ngIf="history.oliverChatHistoryType == PARTNERAGENT"
                                  class="fa fa-handshake-o mr5"></i>
                                <i *ngIf="history.oliverChatHistoryType == CAMPAIGNAGENT"
                                  class="fa fa-bullhorn mr5"></i>
                                <i *ngIf="history.oliverChatHistoryType == SPARKWRITERAGENT"
                                  class="fa fa-pencil mr5"></i>{{history.title | slice:0:90}}<span
                                  *ngIf="history?.title != undefined && history?.title?.length>90">..</span></span>
                              <!-- <span class="entry-date">May 07</span> -->
                              <app-timestamp class="entry-date" [isOnlyDate]="true"
                                [dateAndTime]="history.updatedTimeString"></app-timestamp>
                            </div>
                            <input *ngIf="history.showInputField" type="text" minlength="1" [(ngModel)]="history.title"
                              class="edit-input form-control input-sm" required>
                            <div class="actions" [ngClass]="history.showInputField ? 'top_15' : ''">
                              <i *ngIf="!history.showInputField" class="fa fa-pencil" (click)="openEdit(history,i)"></i>
                              <i *ngIf="!history.showInputField" class="fa fa-trash"
                                (click)="deleteHistory(history,i)"></i>
                              <i *ngIf="history.showInputField" class="fa fa-check"
                                (click)="updateTitle(history,i)"></i>
                              <i *ngIf="history.showInputField" class="fa fa-times" (click)="closeEdit(history,i)"></i>
                            </div>
                          </div>
                        </div>
                        <div
                          *ngIf="chatHistoryPagination.totalRecords > chatHistories.length && !(chatHistories == undefined && chatHistories.length == 0)">
                          <a (click)="setChatHistoryPage()" class="show_more"><strong translate class="pointer">Show more</strong></a>
                        </div>
                        <div *ngIf="!historyLoader && (chatHistories == undefined || chatHistories.length == 0)" class="alert alert-info">
                          <strong translate>No Data Found.</strong>
                        </div>
                        <!-- <div class="history-entry">
                      <span class="entry-text">How does ChatGPT work?</span>
                      <input class="edit-input form-control input-sm">
                      <div class="actions">
                        <i class="fa fa-pencil"></i>
                        <i class="fa fa-trash"></i>
                      </div>
                    </div> -->
                      </div>
                      <!-- <div class="history-section">
                    <h5>Last 7 Days</h5>
                    <div class="history-entry">
                      <span class="entry-text">Explain machine learning</span>
                      <input class="edit-input form-control input-sm">
                      <div class="actions">
                        <i class="fa fa-pencil"></i>
                        <i class="fa fa-trash"></i>
                      </div>
                    </div>
                  </div> -->

                      <!-- <div class="history-section">
                    <h5>Last 15 Days</h5>
                    <div class="history-entry">
                      <span class="entry-text">Benefits of using AI</span>
                      <input class="edit-input form-control input-sm">
                      <div class="actions">
                        <i class="fa fa-pencil"></i>
                        <i class="fa fa-trash"></i>
                      </div>
                    </div>
                  </div> -->
                    </div>
                  </div>
                </div>

              <!-- XNFR-982 -->
              <div role="tabpanel"
                [ngClass]="{'tab-pane fade in active': activeTab === 'settings', 'tab-pane fade': activeTab !== 'settings'}"
                id="settings">
                <div class="agent-content">
                  <!-- Top Heading + Search -->
                  <div class="top-section">
                    <div class="settings-heading-wrapper">
                      <img src="assets/images/ask-oliver-agent-icon.svg" alt="Settings Icon" class="agent-settings-icon">
                      <span class="main-heading">Oliver Settings</span>
                    </div>
                    <app-chat-gpt-integration-settings *ngIf="callChatGptIntegrationSettingsComponent"  [isFromOliverSettingsModalPopup]="isFromOliverSettingsModalPopup"
                      (updateOliverFlags)="onOliverFlagsUpdate($event)"></app-chat-gpt-integration-settings>
                  </div>



                <!-- <div role="tabpanel" *ngIf="activeTab == 'history'">
                  <div class="main-container newChatlabel">
                    <div *ngFor="let history of chatHistories">
                      <div (click)="showHistory(history)">
                        <span *ngIf="history.title">{{history.title}}</span>
                        <span>{{history.oliverChatHistoryType}}</span>
                        <span>{{history.updatedTimeString}}</span>
                        <p>-----------------</p>
                      </div>
                    </div>
                  </div>
                </div> -->
              </div>
            </div>

                <!-- XNFR-1012 -->
                <!-- Contact Agent Tab -->
                 <!-- Start New Chat -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'contactagent', 'tab-pane fade': activeTab !== 'contactagent'}"
                  id="contactagent">
                  <ng-container *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'contactagent'">
                    <div class="main-container newChatlabel">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <div [ngClass]="{
                                      'templateui col-lg-9': showOpenHistory && activeTab === 'contactagent',
                                      'container-ui': !(showOpenHistory && activeTab === 'contactagent'),
                                      'fixed_oliver_input': !isSidebarVisible && showOpenHistory
                                    }">
                    <!-- Heading -->
                    <div *ngIf="!showOpenHistory" class="d-flex content-align">
                      <span class="oliver_heading">Contact Agent</span>
                      <!-- Oliver Image Positioned Correctly -->
                      <div class="oliver-container">
                        <img src="assets/images/olivere-dog.svg" alt="Oliver" class="oliver-image">
                      </div>
                    </div>
                    <p *ngIf="!showOpenHistory" class="oliver-text-color">Effortlessly retrieve contact details using just a name or email address.
                       Instantly generate summaries and detailed reports.</p>
                    <!-- Input Section -->
                    <div class="oliver_input mt10" [ngClass]="(inputText?.length || 0) > 74 ? 'multi-line' : 'single-line'">
                    
                      <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" [ngModelOptions]="{standalone: true}" id="askMeTextarea4"
                        (input)="autoResizeTextArea($event); validateInputText()"
                        (keydown)="searchDataOnKeyPress($event)"></textarea>
                    
                      <div class="btn-wrapper">
                        <button *ngIf="hasAcess" class="btn-plus">+</button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">
                          Submit
                        </button>
                      </div>
                    </div>
                    <div *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'contactagent'" class="action-buttons">
                      <button class="action-btn" (click)="setInputText('Give me the details of the contact')">Give me the details of the
                        contact</button>
                      <button class="action-btn" (click)="setInputText('Generate an Executive Summary of the contact')">Generate an
                        Executive Summary of the...</button>
                      <button class="action-btn" (click)="setInputText('Generate a QBR of the contact')">Generate a QBR of the
                        contact</button>
                    </div>
                  </div>
                </div>
                <!-- Partner Agent Tab -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'partneragent', 'tab-pane fade': activeTab !== 'partneragent'}"
                  id="partneragent">
                  <ng-container *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'partneragent'">
                    <div class="main-container newChatlabel">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <div [ngClass]="{
                                      'templateui col-lg-9': showOpenHistory && activeTab === 'partneragent',
                                      'container-ui': !(showOpenHistory && activeTab === 'partneragent'),
                                      'fixed_oliver_input': !isSidebarVisible && showOpenHistory
                                    }">
                    <!-- Heading -->
                    <div *ngIf="!showOpenHistory" class="d-flex content-align">
                      <span class="oliver_heading">Partner Agent</span>
                      <!-- Oliver Image Positioned Correctly -->
                      <div class="oliver-container">
                        <img src="assets/images/olivere-dog.svg" alt="Oliver" class="oliver-image">
                      </div>
                    </div>
                    <p *ngIf="!showOpenHistory" class="oliver-text-color">Effortlessly retrieve partner details using just a name or email address.
                       Instantly generate summaries and detailed reports.</p>
                    <!-- Input Section -->
                    <div class="oliver_input mt10" [ngClass]="(inputText?.length || 0) > 74 ? 'multi-line' : 'single-line'">

                      <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" [ngModelOptions]="{standalone: true}" id="askMeTextarea5"
                        (input)="autoResizeTextArea($event); validateInputText()"
                        (keydown)="searchDataOnKeyPress($event)"></textarea>

                      <div class="btn-wrapper">
                        <button *ngIf="hasAcess" class="btn-plus">+</button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">
                          Submit
                        </button>
                      </div>
                    </div>
                    <div *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'partneragent'" class="action-buttons">
                      <button class="action-btn" (click)="setInputText('Give me the details of the partner')">Give me the details of the
                        partner</button>
                      <button class="action-btn" (click)="setInputText('Generate an Executive Summary')">Generate an
                        Executive Summary</button>
                      <button class="action-btn" (click)="setInputText('Generate a QBR of the partner')">Generate a QBR of the
                        partner</button>
                    </div>
                  </div>
                </div>
                  <!-- Campaign Agent Tab -->
                <div role="tabpanel"
                  [ngClass]="{'tab-pane fade in active': activeTab === 'campaignagent', 'tab-pane fade': activeTab !== 'campaignagent'}"
                  id="campaignagent">
                  <ng-container *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'campaignagent'">
                    <div class="main-container newChatlabel">
                      <ng-container *ngFor="let msg of messages; let i = index">
                        <ng-template [ngTemplateOutlet]="messageTemplate"
                          [ngTemplateOutletContext]="{ data: msg ,index: i}"></ng-template>
                      </ng-container>
                      <ng-container *ngIf="isTextLoading" [ngTemplateOutlet]="assistantLoader"></ng-container>
                    </div>
                  </ng-container>
                  <div [ngClass]="{
                                      'templateui col-lg-9': showOpenHistory && activeTab === 'campaignagent',
                                      'container-ui': !(showOpenHistory && activeTab === 'campaignagent'),
                                      'fixed_oliver_input': !isSidebarVisible && showOpenHistory
                                    }">
                    <!-- Heading -->
                    <div *ngIf="!showOpenHistory" class="d-flex content-align">
                      <span class="oliver_heading">Campaign Agent</span>
                      <!-- Oliver Image Positioned Correctly -->
                      <div class="oliver-container">
                        <img src="assets/images/olivere-dog.svg" alt="Oliver" class="oliver-image">
                      </div>
                    </div>
                    <p *ngIf="!showOpenHistory" class="oliver-text-color">Effortlessly retrieve campaign details using just a name or identifier.
                       Instantly generate summaries and detailed reports.</p>
                    <!-- Input Section -->
                    <div class="oliver_input mt10" [ngClass]="(inputText?.length || 0) > 74 ? 'multi-line' : 'single-line'">

                      <textarea rows="1" placeholder="Ask Me!" [(ngModel)]="inputText" [ngModelOptions]="{standalone: true}" id="askMeTextarea6"
                        (input)="autoResizeTextArea($event); validateInputText()"
                        (keydown)="searchDataOnKeyPress($event)"></textarea>

                      <div class="btn-wrapper">
                        <button *ngIf="hasAcess" class="btn-plus">+</button>
                        <button class="btn-submit" (click)="!isTextLoading && isValidInputText && AskAiTogetData()"
                          [disabled]="isTextLoading || !isValidInputText">
                          Submit
                        </button>
                      </div>
                    </div>
                    <div *ngIf="(isCopyButtonDisplayed || showOpenHistory)  && activeTab === 'campaignagent'" class="action-buttons">
                      <button class="action-btn" (click)="setInputText('Give me the details of the campaign')">Give me the details of the
                        campaign</button>
                      <button class="action-btn" (click)="setInputText('Generate an Executive Summary')">Generate an
                        Executive Summary</button>
                      <button class="action-btn" (click)="setInputText('Generate a QBR of the campaign')">Generate a QBR of the
                        campaign</button>
                    </div>
                  </div>
                </div>
            <!-- -add changes- -->
          </div>
          <!--  -->
        </div>
      </div>
    </div>
  </div>
      <!--Footer-->
      <div *ngIf="showView" class="modal-footer">
        <button class="btn btn-primary mr5"
          [disabled]="(!isReUpload && selectedAssets?.length === 0 && selectedFolders?.length === 0) || 
            (isReUpload && ((!uploadedFolders || uploadedFolders?.length === 0) 
            && (!uploadedAssets || uploadedAssets?.length === 0)))"
          (click)="submitSelectedAssetsToOliver()">Ask Oliver
        </button>
        <button class="btn btn-danger mr10" (click)="closeManageAssets()" data-dismiss="modal">Close</button>
      </div>
</div>
<app-add-email-modal-popup *ngIf="showEmailModalPopup" [actionType]="actionType" [subjectText]="subjectText"
  [emailBody]="emailBody" (notifyClose)="closeEmailModalPopup($event)"></app-add-email-modal-popup>
<ng-template #messageTemplate let-message="data" let-index="index">
  <div class="message user" *ngIf="message.role === 'user'">
  <div #markdownComponent1 class="summarize-card">
    <markdown [data]="message.content"></markdown>
  </div>
    <div class="avatar">
      <img src="assets/images/icon-user-default.png" alt="User" class="avatar">
    </div>
  </div>
  <div class="d-flex" *ngIf="message.role === 'assistant'">
    <div class="avatar1 col-lg-1 col-sm-1 mb_p0">
      <img src="assets/images/olivermsglogo.svg" alt="Assistant" class="avatar">
    </div>
    <div class="col-lg-11 col-sm-11">
      <div class="content-card">
        <div class="chat-container">
          <div #markdownComponent class="chat-history">
            <markdown  *ngIf="message?.isReport == 'false'" [data]="message.content"></markdown>
             <app-executive-summary-report [activeTab]="activeTab"  *ngIf="message?.isReport == 'true'" [reportData]="message.content">
             </app-executive-summary-report>
          </div>
        </div>
      </div>
      <div class="footer-icons mb10" *ngIf="message?.isReport == 'false'">
        <div class="footer-icon" title="{{!(isSpeakingText) ? 'Read aloud' : 'stop'}}"
          [ngStyle]="{'background-color': isSpeakingText  ? '#e40707' : '#0d6efd'}">
          <i [ngClass]="(isSpeakingText) ? 'fas fa-volume-mute' : 'fa fa-volume-up fs-12'" aria-hidden="true"
            (click)="speakTextOn(i, markdownComponent)">
          </i>
        </div>
        <!-- <div class="footer-icon" title="Copy to Clipboard"><i class="fa fa-clone fs-12"
            (click)="copyChatGPTText(message.content)"></i></div> -->
        <button class="footer-icon" #textMobile value="{{message.content}}" (click)="copyResponse(textMobile,index)">
          <i *ngIf="!isCopied(index)" class="fa fa-clone fs-12"></i>
          <i *ngIf="isCopied(index)" class="fa fa-check fs-12"></i></button>
        <!-- <div class="footer-icon" title="Reload/Refresh"><i class="fa fa-refresh fs-12"></i></div> -->
        <!-- <button *ngIf="!isPartnerLoggedIn && authenticationService?.module?.design && !authenticationService?.module?.isPrmCompany" class="share-btn" (click)="openSelectionTemplate(markdownComponent)">Design Template</button>
        <button *ngIf="authenticationService.module.damAccess" class="share-btn" (click)="createAsset(markdownComponent)">Design Pdf</button>
        <button *ngIf="authenticationService.module.hasLandingPageAccess &&  !authenticationService?.module?.isPrmCompany" class="share-btn" (click)="desginPage(markdownComponent)">Design Page</button> -->
        <!-- <button class="share-btn">Design Page</button> -->
        <div  class="dropdown-container">
          <button class="share-btn dropdown-toggle">Design</button>
          <div class="dropdown-menu">
            <button
              *ngIf="authenticationService?.module?.design && !authenticationService?.module?.isPrmCompany"
              class="share-btn" (click)="openSelectionTemplate(markdownComponent)">Design Template</button>
            <button *ngIf="authenticationService.module.damAccess" class="share-btn"
              (click)="createAsset(markdownComponent)">Design Pdf</button>
            <button *ngIf="authenticationService.module.hasLandingPageAccess &&  !authenticationService?.module?.isPrmCompany"
              class="share-btn" (click)="desginPage(markdownComponent)">Design Page</button>
              <button  class="share-btn" (click)="openPptDesignPicker(markdownComponent)" >Design PPT</button>
              <button  class="share-btn" (click)="downloadDocxFile(markdownComponent)" >Design DOCX</button>
          </div>
        </div>
        <button class="share-btn" (click)="openEmailModalPopup(markdownComponent)">Send Email</button>
        <button *ngIf="socialShareOption" class="share-btn" (click)="openSocialShare(markdownComponent)">Social Share</button>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #assistantLoader>
  <div class="d-flex aligin-center">
    <div class="avatar1 col-lg-1 col-sm-1">
      <img src="assets/images/olivermsglogo.svg" alt="Assistant" class="avatar">
    </div>
    <div class="col-lg-11 col-sm-11">
      <div class="status_message">{{statusMessage}}</div>
      <div class="assitLoader"></div>
    </div>
  </div>
</ng-template>
<ng-template #wifiLoader>
  <div id="wifi-loader" class="align-center para-loader">
    <svg viewBox="0 0 86 86" class="circle circle-outer">
      <circle r="40" cy="43" cx="43" class="back"></circle>
      <circle r="40" cy="43" cx="43" class="front"></circle>
    </svg>
    <svg viewBox="0 0 60 60" class="circle circle-middle">
      <circle r="27" cy="30" cx="30" class="back"></circle>
      <circle r="27" cy="30" cx="30" class="front"></circle>
    </svg>
    <svg viewBox="0 0 34 34" class="circle circle-inner">
      <circle r="14" cy="17" cx="17" class="back"></circle>
      <circle r="14" cy="17" cx="17" class="front"></circle>
    </svg>
    <div class="text" data-text="Searching"></div>
  </div>
</ng-template>




<!-- XNFR-986 -->
<ng-template #displayPrompts>
  <div class='suggestion-box-input-prompt' id="suggestionBox">
    <div class="d-flex justify-content-end mb10" *ngIf="activeTab !== 'askpdf'">
      <div class="search-wrapper">
        <input type="text" class="form-control input-sm search-input" placeholder="Search" [(ngModel)]="searchTerm"
          (input)="searchPrompts()" />
        <i class="fa fa-search search-icon"></i>
      </div>
    </div>
    <div  [ngClass]="activeTab == 'globalchat' ? 'suggestion-list suggestion-list-global-chat' : 'suggestion-list'">
      <div *ngFor="let prompt of oliverPromptSuggestionDTOs" (click)="setSuggestedInputText(prompt.promptMessage, prompt.id)">
        {{prompt.promptMessage}}
      </div>
    </div>
  </div>
</ng-template>