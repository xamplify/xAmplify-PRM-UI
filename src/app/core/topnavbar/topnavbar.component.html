
<ng-container *ngIf="!refService.loaderFromAdmin">
    <ngx-loading [show]="loadTopNavBar" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
<div class="page-header navbar navbar-fixed-top zero-padding">
    <ng2-slim-loading-bar [color]="'#00a6e8'" [height]="'2px'" style="position: fixed; top: 0px;
    margin: 0px; padding: 0px; z-index: 10000; width: 100%;">
    </ng2-slim-loading-bar>

    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner">
        <div *ngIf="refService?.newVersionDeployed" class="alert alert-info">
            <strong>New Update Is Available.Please refresh your browser to see new changes</strong>
        </div>
        <!-- BEGIN LOGO -->
        <div class="page-logo pttpx">
             <div [ngClass]="refService.isSidebarClosed ? 'company-logo-thumbnail-wrapper clhidden':'company-logo-thumbnail-wrapper'">
                <img  *ngIf= "!authenticationService.vanityURLEnabled || !authenticationService.v_showCompanyLogo" [src]="authenticationService.MEDIA_URL + refService.companyProfileImage" alt="" onerror="this.src='assets/images/xamplify-logo.png';"  />
                <img  *ngIf= "authenticationService.vanityURLEnabled && authenticationService.v_showCompanyLogo" [src]="authenticationService.v_companyLogoImagePath" alt=""  onerror="this.src='assets/images/xamplify-logo.png';" />
            </div>
            <div (click)="refService.changeSideBar()" class="side-bar" [class.side-bar-css]="refService.isSidebarClosed" *ngIf="authenticationService.user.hasCompany">
                <i class="fa fa-bars" style="font-size: 21px;" aria-hidden="true"></i>
            </div>
        </div>

        <!-- END LOGO -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <a class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
        </a>
        <!-- END PAGE ACTIONS -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top" [ngStyle] = "{'background-color': cskin.backgroundColor}">
            <!-- BEGIN HEADER SEARCH BOX -->
            <!-- SEARCH IS HIDDEN -->
            <form class="search-form search-form-expanded hidden" action="extra_search.html" method="GET">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search..." name="query">
                    <span class="input-group-btn">
					<a href="javascript:;" class="btn submit">
                        <i class="icon-magnifier" routerLink="./dashboard/extra_search" aria-hidden="true"></i></a>
					</span>
                </div>
            </form>

            <!-- END HEADER SEARCH BOX -->
            <!-- BEGIN TOP NAVIGATION MENU -->
            <div class="top-menu">
               
                <ul class="nav navbar-nav pull-right" style="display: -webkit-inline-box;padding-right: 6px;">
                    <!-- BEGIN NOTIFICATION DROPDOWN -->
                    <li *ngIf="isLoggedInFromAdminSection" style="margin-top: 17px;margin-right: 5px;">
						<button class="btn btn-primary" (click)="goBackToAdminPanel()">
							<span class="hidden-xs">Go back to admin panel</span>
							<i class="fa fa-power-off" aria-hidden="true"></i>
						</button>
					</li>

                    <li *ngIf="authenticationService.user.hasCompany && !authenticationService.isOnlyUser() && sourceType!='ALLBOUND'&& !authenticationService.vanityURLEnabled &&!authenticationService.module.isPrm && !authenticationService.module.isPrmTeamMember 
                    &&!authenticationService.module.isPrmAndPartner && !authenticationService.module.isPrmAndPartnerTeamMember && !authenticationService.partnershipEstablishedOnlyWithPrmAndLoggedInAsPartner">
                        <div class="btn-group refer-vendor-button btnVendor">
                            <button [ngStyle] = "{'background-color': cskin?.buttonColor,  'color': cskin?.buttonValueColor, 'border-color': cskin?.buttonBorderColor}" (click)="openRequestAsVendorModal()" style="border-radius: 3px 0px 0px 3px;" translate>Refer a vendor</button>
                            <button [ngStyle] = "{'background-color': cskin?.buttonColor, 'color': cskin?.iconColor, 'border-color': cskin?.buttonBorderColor}" [routerLink]="['/home/dashboard/vendor-request']" style="border-radius: 0px 3px 3px 0px;">
                            <i class="fa fa-line-chart"  data-toggle="tooltip" data-original-title="" title="" aria-hidden="true"></i></button>
                        </div>
                    </li>
                   
                    <li class="btnShare"  style="margin-top: 17px;margin-right: 5px;" *ngIf="authenticationService?.module?.hasSocialStatusRole">
                        <button class="btn btn custom"  [ngStyle] = "{'background-color': cskin?.buttonColor,  'color': cskin?.buttonValueColor, 'border-color': cskin?.buttonBorderColor}" [routerLink]="['/home/social/update-status']" style="border-radius: 3px !important;">
							<span class="hidden-xs"  translate>Update Status</span>
							<i class="fa fa-share" [ngStyle] = "{'background-color': cskin?.buttonColor, 'color': cskin?.iconColor}"  button data-toggle="tooltip" aria-hidden="true"></i>
						</button>
                    </li>
                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->

                    <li class="dropdown dropdown-extended dropdown-notification" id="header_notification_bar" *ngIf="authenticationService.user.hasCompany && !authenticationService.isOnlyUser()">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <i class="icon-bell" style="color: #0095da;" aria-hidden="true"></i>
                            <span *ngIf="userService.unreadNotificationsCount>0" class="badge badge-default" style="background-color: #ed1c24 !important;">{{userService.unreadNotificationsCount}}</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="external">
                                <h3><span class="bold">{{userService.unreadNotificationsCount}} pending</span> notifications</h3>
                            </li>
                            <li>
                                <ul class="dropdown-menu-list scroller" data-handle-color="#637283">
                                    <app-notifications [isTopNavBar]=true></app-notifications>
                                </ul>
                            </li>
                            <li class="divider"></li>
                            <li id="logoutButton" style="text-align:center;"><a routerLink="/home/dashboard/notifications"><span class="bold">View All</span></a></li>
                        </ul>
                    </li>

                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                    <li class="dropdown dropdown-extended dropdown-tasks" id="header_task_bar" style="display: none;">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <i class="icon-info"></i>
                        </a>
                        <ul class="dropdown-menu extended tasks">
                            <li class="external">
                                <h3> <span class="bold">Frequently Asked Questions</span></h3>
                                <a routerLink="/home/dashboard/extrafaq">view all</a>
                            </li>
                            <li>
                                <ul class="dropdown-menu-list scroller" style="height: 275px;" data-handle-color="#637283">
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">1. Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry ? </span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">2. Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry ?</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">3.Mobile app release</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">4. Database migration</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">5.Web server upgrade</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">6.Mobile development</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a routerLink="/home/dashboard/extrafaq">
                                            <span class="task">
										<span class="desc">7. New UI release</span>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <!-- END TODO DROPDOWN -->
                    <!-- BEGIN USER LOGIN DROPDOWN -->
                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->

                    <li class="dropdown dropdown-user top-menu-bar" id="headerdropDownLi">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <img alt="" class="img-circle" src="{{model.profilePicutrePath}}" (error)="errorHandler($event)" />
                            <span class="username username-hide-on-mobile">
								{{model.displayName | slice:0:17}}<span *ngIf="model.displayName?.length>17">..</span></span> <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <app-modal-popup-loader *ngIf="authenticationService?.module?.contentLoader || myVendorsLoader" [height]="180"></app-modal-popup-loader>
                            <ng-container *ngIf="!authenticationService?.module?.contentLoader && !myVendorsLoader">
                            <li *ngIf="(authenticationService.user.hasCompany && !authenticationService.isOnlyUser()) || authenticationService?.module?.deletedPartner">
                                <a (click)="goToRouter('/home/dashboard/myprofile')" translate>
                                     <i class="icon-user"></i> 
                                    My Profile
                                </a>
                            </li>
                            <li *ngIf="(!authenticationService.isOnlyUser() && !authenticationService.isSuperAdmin() && authenticationService.superiorRole != 'Partner') || authenticationService.module.isPartnershipEstablishedOnlyWithVendorTier">
                                <a (click)="navigateToCompanyProfile('/home/dashboard/edit-company-profile',authenticationService?.module?.companyProfileCreated)"  translate> <i class="fa fa-building-o"></i> Company Profile
                                </a>
                            </li>
                            <li *ngIf="(refService.hasAllAccess()
										|| authenticationService.module.hasSocialStatusRole
										|| authenticationService.module.isOrgAdmin
										|| authenticationService.module.isVendor
										 || authenticationService.module.isPrm
										 || authenticationService.module.isVendorTier
										|| authenticationService.module.isCompanyPartner) && authenticationService.user.hasCompany">
                                <a (click)="goToRouter('/home/social/manage/all')"  translate> <i class="fa fa-cog" aria-hidden="true"></i> Social Accounts</a>
                            </li>
                            <ng-container *ngIf="!authenticationService.module.isPartnershipEstablishedOnlyWithVendorTier && authenticationService.user.hasCompany && !authenticationService.isOnlyUser()">
                                <ng-container *ngFor="let dashboardType of dashboardTypes">
                                    <li (click)="navigateToDashboardType(dashboardType)">
                                        <a>
                                            <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                                            <ng-container *ngIf="dashboardType=='Welcome'">
                                                Help (Welcome)
                                            </ng-container>
                                            <ng-container *ngIf="dashboardType!='Welcome'">
                                                {{dashboardType}}
                                            </ng-container>
                                           
                                        </a>
                                    </li>
                                </ng-container>
                            </ng-container>
                            <li *ngIf="authenticationService.user.hasCompany && !authenticationService.module.loggedInThroughOwnVanityUrl && (authenticationService?.module?.isPartnerCompany ||  authenticationService?.module?.isOnlyPartnerCompany)">
                                <a (click)="goToRouter('/home/dashboard/vendors')" translate> <i class="fa fa-users" aria-hidden="true"></i>My Vendors ({{vendorCount}})</a>
                            </li>
                            </ng-container>
                            <li class="divider"></li>
                            <li id="logoutButton" (click)="logout()">
                                <a translate> <i class="icon-key" aria-hidden="true"></i> Log Out
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- END USER LOGIN DROPDOWN -->
                    <!-- BEGIN USER LOGIN DROPDOWN -->
                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                    <!--<li class="dropdown dropdown-extended quick-sidebar-toggler">
	                    <span class="sr-only">Toggle Quick Sidebar</span>
	                    <i class="icon-logout"></i>
	                </li>-->
                    <!-- END USER LOGIN DROPDOWN -->
                    <li class="dropdown dropdown-user top-menu-bar">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">                            
                            <span style="text-transform: uppercase;">{{authenticationService.userPreferredLanguage}}</span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <li *ngFor="let language of authenticationService.allLanguagesList">
                                <a (click)="selectedLanguage(language.id)">  {{language.name}}
                                </a>
                            </li>
                        </ul>                
                    </li>
                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END PAGE TOP -->
    </div>
    <!-- END HEADER INNER -->
</div>
<!-- END HEADER -->
<div class="clearfix"></div>

<!--Requesting vendor modal-->

<div class="modal fade right" id="requestForVendor" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="my-container">
            <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
        </div>
        <div class="modal-content">
            <div class="modal-header">
                <a class="close-circle" (click)="closeInvitationModal()" data-dismiss="modal"> <i class="fa fa-times"></i></a>
                <h4 class="modal-title left" id="myModalLabel">Ask a vendor to join xAmplify</h4>
            </div>
            <div class="modal-body">
                <div *ngIf="!isValidationMessage">
                    <div *ngIf="isError" class="alert alert-danger alert-dismissible left">
                        <a (click)="isError = false" class="close" data-dismiss="alert" aria-label="close"></a>
                        Please complete the required fields.
                    </div>

                    <div class="form-group">
                        <label for="exampleInputEmail1">To <span class="text-danger">*</span></label>
                        <!--
        <tag-input [(ngModel)]="emailIds" (onAdd)="onAddingEmailId($event)" [ngModelOptions]="{standalone: true}" [theme]="'foundation-theme'"
					(input)="validateVendoorInvitation()" [placeholder]="'Email'" [secondaryPlaceholder]="'Email'"
					[errorMessages]="errorMessages" [validators]="validators" [onTextChangeDebounce]="40"></tag-input>
        <span id="helpBlock" class="help-block"><b>Note:</b> Enter a vendor’s email address & press Enter</span>
         -->
                        <tag-input [(ngModel)]='emailIds' #tagInput name="emails" #email="ngModel" [errorMessages]="errorMessages" [validators]="validators" [separatorKeyCodes]="[32,188,186,13,9]" [placeholder]="'Add email'" [secondaryPlaceholder]="'Enter email address(es)'"
                            [clearOnBlur]="true" [addOnPaste]="true" [addOnBlur]="true" [pasteSplitPattern]="splitPattern" [onAdding]="onAddedFunc" theme='bootstrap' [onTextChangeDebounce]="40" required>
                        </tag-input>

                    </div>
                    <div class="form-group">
                        <label for="subjectLine">Email subject <span class="text-danger">*</span></label>
                        <input type="text" id="subjectLine" [(ngModel)]="vendoorInvitation.subject" (input)="validateVendoorInvitation()" [ngModelOptions]="{standalone: true}" placeholder="Subject Line" class="form-control" name="subjectLine" maxlength="200" />
                    </div>
                    <div class="form-group" *ngIf="isShowCKeditor">
                        <label for="subjectLine">Message <span class="text-danger">*</span></label>
                        <ckeditor name="body" [(ngModel)]="vendoorInvitation.message" [ngModelOptions]="{standalone: true}" (input)="validateVendoorInvitation()"></ckeditor>
                    </div>

                </div>
                <div *ngIf="isValidationMessage">
                    <div *ngIf="customResponse.responseType != null">
                        <div class="alert alert-dismissible m0" role="alert" [ngClass]="{'alert-success': customResponse.responseType == 'SUCCESS',
			'alert-danger': customResponse.responseType == 'ERROR',
			'alert-info': customResponse.responseType == 'INFO'}">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="customResponse.responseType = null; closeInvitationModal()">
			<span aria-hidden="true">&times;</span>
		</button>
                            <h4 style="padding-top: 6px;">
                                <span class="text" id='responseMessage' [innerHTML]="customResponse.responseMessage"></span>
                            </h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border: none" *ngIf="!isValidationMessage">
                <button class="btn btn-default" (click)="closeInvitationModal()" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn green" [disabled]="emailIds.length ==0" (click)="sendRequestForVendorEmail()">Send</button>
            </div>
        </div>
    </div>
</div>
</ng-container>