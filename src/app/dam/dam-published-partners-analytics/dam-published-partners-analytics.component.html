<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
<div class="page-content">
      <div class="page-bar">
         <ul class="page-breadcrumb">
            <li>
               <i class="fa fa-home" aria-hidden="true"></i>
               <a [routerLink]="referenceService.homeRouter" translate>Home</a>
               <i class="fa fa-angle-right" aria-hidden="true"></i>
            </li>
            <li *ngIf="!isFromApprovalModule">
               <a [routerLink]="referenceService?.selectModuleRouter" translate>Select Module</a>
               <i class="fa fa-angle-right" aria-hidden="true"></i>
            </li>
            <li *ngIf="!isFromApprovalModule"><a translate (click)="goBack()">{{properties?.MANAGE_ASSETS}}</a> <i
                  class="fa fa-angle-right" aria-hidden="true"></i> </li>
            <li *ngIf="isFromApprovalModule">
               <a [routerLink]="referenceService?.approvalModuleRouter" translate>Manage Approval</a>
               <i class="fa fa-angle-right" aria-hidden="true"></i>
            </li>
            <li><a translate (click)="goBackToPartnerCompanies()">{{partnerModuleCustomName}} Companies</a><i
                  class="fa fa-angle-right" aria-hidden="true"></i></li>
            <li><a class="default-cursor">{{partnerModuleCustomName}} Analytics</a>
            </li>
         </ul>
         <a class="close-circle xamp-margin-left-icon only_light" (click)="goBackToPartnerCompanies()" aria-hidden="true">
            <i class="fa fa-times" aria-hidden="true"></i>
         </a>
         <a class="close-circle xamp-margin-left-icon only_light" (click)="refreshPage()" aria-hidden="true">
            <i class="fa fa-refresh" aria-hidden="true"></i>
         </a>
      </div>
      <div class="row">
         <div class="portlet box">
            <div class="clearfix">
               <div class="col-xs-12">
                  <div class="portlet light remove_cardBgcolor light_bg_removal">
                     <div class="portlet-title remove_border" style="padding-bottom: 3px;border-bottom: none;">
                        <div class="caption" style="padding-top: 9px !important;padding-left: 4px !important;">
                           <i class="fa fa-bar-chart" style="font-size: 19px;"></i>
                           Analytics
                        </div>
                        <div class="inputs sort-published-partners d-flex">
                           <div class="" style="float: left; margin: 0 10px;">
                              <select class="form-control" [(ngModel)]="sortOption.publishedPartnerAnalyticsSortOption"
                                 (ngModelChange)="sortBy($event)" id="select-dropdown">
                                 <option *ngFor="let option of sortOption.publishedPartnerAnalyticsDropDown" [ngValue]="option">{{option.name}}</option>
                              </select>
                           </div>
                           <div class="portlet-input input-inline">
                              <div class="input-icon right">
                                 <input type="text" id="sort-text" style="height: 34px;" class="form-control"[(ngModel)]="sortOption.searchKey" [ngModelOptions]="{standalone: true}"
                                    placeholder="Search.." (keypress)="eventHandler($event.keyCode)" autocomplete="off">
                                 <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey" (click)="sortOption.searchKey='';searchPartners();"></button>
                                 <button type="submit" class="search-box-item-click" (click)="searchPartners()"><i class="fa fa-search" aria-hidden="true"></i></button>
                              </div>
                           </div>
                           <div class="inline-block pull-right ml10">
                              <button data-placement="bottom" class="btn btn-xs  hidden-xs l-g-view" data-toggle="tooltip" title="Export to Excel"
                                 (click)="downloadDamAnalytics()" [disabled]="pagination?.totalRecords === 0">
                                 <i aria-hidden="true" class="fas fa-file-export p10"></i>
                              </button>
                           </div>
                        </div>
                     </div>
                     <div class="table-responsive" style="overflow: hidden;">
                        <app-list-loader *ngIf="listLoader?.isLoading"></app-list-loader>
                        <div class="clearfix" *ngIf="!listLoader.isLoading">
                           <div class="col-xs-12" style="padding: 0px 0;margin-top: 5px;">
                              <div class="table-responsive">
                                 <table class="table tgrid" aria-describedby="published-partners-list">
                                    <thead>
                                       <tr>
                                          <th scope="col" translate>{{authenticationService?.partnerModule?.customName}}
                                             Info</th>
                                          <th scope="col" translate class="text-center">Views</th>
                                          <th scope="col" translate class="text-center">Downloads</th>
                                          <th scope="col" translate class="text-center">ACTIONS</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <ng-container *ngFor="let partner of pagination.pagedItems;let i=index">
                                          <tr>
                                             <td>
                                                <app-user-info [isPartnerEntityInfo]="true" [isPartnerInfo]="true"
                                                   [userInfo]="partner">
                                                </app-user-info>
                                             </td>
                                             <td class="text-center">
                                                <span><strong>{{partner?.viewCount}}</strong></span>
                                             </td>
                                             <td class="text-center">
                                                <span><strong>{{partner?.downloadCount}}</strong></span>
                                             </td>
                                             <td class="text-center">
                                                <div class=" actions-block no-float override-actions">
                                                   <a class="custom-icon" (click)="viewDetailedAnalytics(partner)"
                                                   data-placement="top" data-toggle="tooltip"  title="View Detailed Analytics">
                                                      <i class="fa fa-line-chart IconCustomization"
                                                         aria-hidden="true"></i>
                                                      <div class="clickicons"></div>
                                                   </a>
                                                </div>
                                             </td>
                                          </tr>
                                       </ng-container>
                                    </tbody>
                                 </table>
                                 <div *ngIf="pagination.totalRecords==0 && !listLoader.isLoading"
                                    class="alert alert-info mAlert">
                                    <strong>No Data Found.</strong>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <!----Pagination-->
                        <div *ngIf="pagination?.pagedItems?.length !== 0" [hidden]="listLoader?.isLoading">
                           <app-pagination [pagination]="pagination" (notifyParent)="setPage($event)" (notifyParentDropDown)="findAllPartnerCompanyUsers($event)"></app-pagination>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
</div>