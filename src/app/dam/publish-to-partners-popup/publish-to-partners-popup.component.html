<div class="modal fade right" id="partnerCompaniesPopup" tabindex="-1" role="dialog" aria-labelledby="partnerCompaniesPopup" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog full-width" role="document">
     <div class="modal-content">
        <div class="modal-header">
           <button type="button" class="close-circle" (click)="closePopup()">
           <i class="fa fa-times" aria-hidden="true"></i>
           </button>
           <h4 class="modal-title text-center">Partner Companies</h4>
        </div>
        <div class="modal-body">
           <div class="thank-you-pop" *ngIf="sendSuccess">
              <ng-container *ngIf="statusCode==200">
                 <i class="fa fa-check" id="font-size-success" aria-hidden="true"></i>
                 <h4 class="event-success">{{responseMessage}}</h4>
              </ng-container>
              <ng-container *ngIf="statusCode!=200">
                 <i class="fa fa-times-circle" id="font-size-error" aria-hidden="true"></i>
                 <h4 class="event-error">{{responseMessage}}</h4>
              </ng-container>
           </div>
           <ng-container *ngIf="!sendSuccess">
              <app-response-message class="pg8" [customResponse]="customResponse" *ngIf="customResponse.isVisible">
              </app-response-message>
              <div class="portlet-title" style="border-bottom: none;" *ngIf="!httpRequestLoader.isLoading">
                 <div class="row">
                    <div>
                       <div class="col-xs-12">
                          <div class="page-toolbar">
                             <div class="btn-group pull-right">
                                <div class="inputs float-right" style="display: inline-flex;">
                                   <div>
                                      <select class="form-control" [(ngModel)]="sortOption.selectedDamPartnerDropDownOption" (ngModelChange)="sortBy($event)" id="select-dropdown">
                                      <option
                                      *ngFor="let option of sortOption.partnerCompaniesDropDownOptions"
                                      [ngValue]="option">
                                      {{option.name}}</option>
                                      </select>
                                   </div>
                                   <div class="portlet-input input-inline" id="search-div">
                                      <div class="input-icon right" id="icon">
                                         <input type="text" id="sort-text" class="form-control" [(ngModel)]="sortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="search..." (keypress)="partnersSearchOnKeyEvent($event.keyCode)">
                                         <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey" (click)="sortOption.searchKey='';searchPartners();"></button>
                                         <button type="submit" class="search-box-item-click" (click)="searchPartners()">
                                         <i class="fa fa-search" aria-hidden="true"></i>
                                         </button>
                                      </div>
                                   </div>
                                </div>
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
              </div>
              <br>
              <app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>
              <ng-container *ngIf="!httpRequestLoader.isLoading">
                 <div class="table-responsive">
                    <table class='table tgrid table-hover table-sm' *ngIf="pagination.pagedItems?.length>0" id="dam-partnership-list-table" aria-describedby="damPartnersTableDescription">
                       <thead>
                          <tr>
                             <th scope="col"></th>
                             <th scope="col">Company Logo</th>
                             <th scope="col" class="text-center">Partner Company Name</th>
                             <th scope="col" class="text-center">Created Time</th>
                          </tr>
                       </thead>
                       <tbody>
                          <ng-container *ngFor="let partner of pagination.pagedItems ;let i =index">
                          <tr id="partnership-tr-{{partner.partnershipId}}">
                            <td>
                              <div class="actions-block">
                                <a  (click)="viewTeamMembers(partner)" title="View/Hide Team Members">
                                  <i class="fa" [ngClass]="{'fa-angle-right': !partner.expand, 'fa-angle-down': partner.expand}" aria-hidden="true"></i>
                                </a>
                              </div>
                            </td>
                            <td  title="{{partner?.companyName}}">
                              <div>
                                 <img class="img-c-h" alt="No Image Found" [src]="authenticationService.MEDIA_URL+partner.companyLogo">
                              </div>
                           </td>
                          <td class="text-center" title="{{partner?.companyName}}">
                             <span>{{partner?.companyName | slice:0:20}}</span>
                             <span *ngIf="partner?.companyName.length>20">...</span>
                          </td>
                          <td class="text-center">
                            <app-timestamp  [dateAndTime]="partner?.displayTime">
                            </app-timestamp>
                         </td>
                          </tr>
                          <tr *ngIf="partner?.expand">
                           <td colspan="4">
                              <div class="table-responsive">
                                 <div class="portlet-input input-inline float-right mb10p" id="search-div">
                                    <div class="input-icon right" id="icon">
                                       <input type="text" id="sort-text" class="form-control" [(ngModel)]="teamMembersPagination.searchKey" [ngModelOptions]="{standalone: true}" placeholder="search..." (keypress)="adminAndTeamMembersKeySearch($event.keyCode)">
                                       <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="teamMembersPagination?.searchKey" (click)="teamMembersPagination.searchKey='';searchAdminsAndTeamMembers();"></button>
                                       <button type="submit" class="search-box-item-click" (click)="searchAdminsAndTeamMembers()">
                                       <i class="fa fa-search" aria-hidden="true"></i>
                                       </button>
                                    </div>
                                 </div>
                                 <ng-container *ngIf="!teamMembersLoader.isLoading && adminsAndTeamMembersErrorMessage.isVisible">
                                    <div class="custom-response-padding">
                                       <app-response-message [customResponse]="adminsAndTeamMembersErrorMessage"></app-response-message>
                                   </div>
                                 </ng-container>
                              <div *ngIf="!adminsAndTeamMembersErrorMessage.isVisible">
                              <table  class="table tgrid table-condensed child-table-xamp" aria-describedby="team-members-info" id="admin-and-team-members-{{partner?.partnershipId}}">
                                 <thead>
                                    <tr>
                                      <th scope="row" style="width:10%;">
                                       <input type="checkbox"  [(ngModel)]="isHeaderCheckBoxChecked"  (change)="selectAllTeamMembersOfTheCurrentPage($event,partner.partnershipId)">
                                     </th>
                                      <th scope="row">Entity Info</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <app-auto-response-loader *ngIf="teamMembersLoader.isLoading"></app-auto-response-loader>
                                    <ng-container *ngIf="!teamMembersLoader.isLoading">
                                    <tr *ngFor="let adminAndTeamMember of teamMembersPagination.pagedItems;let i = index;" id="publishToPartners-{{adminAndTeamMember.userId}}" [class.row-selected]="selectedTeamMemberIds.indexOf(adminAndTeamMember.userId)>-1" (click)="highlightSelectedAdminOrTeamMemberRowOnRowClick(adminAndTeamMember.userId,partner.partnershipId,$event)" >
                                        <td>
                                          <input type="checkbox" id="{{adminAndTeamMember.userId}}"  [checked]="selectedTeamMemberIds.indexOf(adminAndTeamMember.userId)>-1" name="adminOrTeamMemberCheckBox[]"   value="{{adminAndTeamMember.userId}}" (click)="highlightAdminOrTeamMemberRowOnCheckBoxClick(adminAndTeamMember.userId,partner.partnershipId,$event)">
                                       </td>
                                        <td>
                                          <app-user-info [isPartnerEntityInfo]="false" [userInfo]="adminAndTeamMember">
                                          </app-user-info>
                                        </td>
                                     </tr>
                                     </ng-container>
                                  </tbody>
                              </table>
                               <!---Pagination-->
                               <div *ngIf="teamMembersPagination.totalRecords==0 && !teamMembersLoader.isLoading" class="alert alert-info">
                                 <strong>No Data Found.</strong>
                              </div>
                              <div *ngIf="teamMembersPagination.pagedItems.length !== 0" [hidden]="teamMembersLoader.isLoading">
                                 <app-pagination [pagination]="teamMembersPagination" (notifyParent)="naviagtePages($event)" (notifyParentDropDown)="getTeamMembersAndAdmins($event)">
                                 </app-pagination>
                              </div>
                           </div>
                           </div>
                           </td>
                          </tr>
                        </ng-container>
                       </tbody>
                    </table>
                 </div>
                 <!-- End of 24 -->
                 <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info">
                    <strong>No Data Found.</strong>
                 </div>
              </ng-container>
           </ng-container>
           <div *ngIf="pagination.pagedItems.length !== 0" class="pg8" [hidden]="httpRequestLoader.isLoading">
           <app-pagination [pagination]="pagination" (notifyParent)="navigateToNextPage($event)" (notifyParentDropDown)="findPartnerCompanies($event)">
           </app-pagination>
        </div>
     </div>
     <div class="modal-footer" *ngIf="!httpRequestLoader.isLoading">
        <button type="submit" class="btn green-haze" [disabled]="selectedTeamMemberIds?.length==0" *ngIf="!sendSuccess" (click)="publish()">Publish</button>
        <button type="submit" class="btn btn-default" (click)="closePopup()">Close</button>
     </div>
  </div>
</div>
</div>