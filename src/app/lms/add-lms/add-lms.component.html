<div class="page-content" [style.background-color]="referenceService.pageContnetBgColor">
    <div class="my-container">
        <ngx-loading [show]="httpRequestLoader.isLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
    </div>
    <!-- --------------Heading -->
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="fa fa-home" aria-hidden="true"></i>
                <a [routerLink]="referenceService.homeRouter">Home</a>
                <i class="fa fa-angle-right" aria-hidden="true"></i>
                <a *ngIf="isAdd">Add Learning Track</a>
                <a *ngIf="!isAdd">Edit Learning Track</a>
            </li>
        </ul>
    </div>
    <div class="folder-custom-response">
        <app-response-message [customResponse]="folderOrTagsCustomResponse" *ngIf="folderOrTagsCustomResponse.isVisible">
        </app-response-message>
    </div>
    <div class="page-bar">
        <ngx-loading [show]="ngxloading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
        <div style=" padding: 10px 6px;">
            <app-response-message class="pg8" [customResponse]="lmsResponse" *ngIf="lmsResponse.isVisible">
            </app-response-message>
            <div class="row">
                <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div style="font-size: 25px; padding: 10px 5px;">{{heading}}</div>
                        </div>
                    </div>
                    <div class=" row " style="padding-bottom: 5px;">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                            <input class="form-control" placeholder="Add title" [(ngModel)]="learningTrack.title" maxlength="100" (keypress)="omitSpecialCharacters($event)" (input)="updateSlug('title'); validateTitle();">
                            <span *ngIf="!isTitleValid" class="required">{{titleErrorMessage}}</span>
                        </div>
                    </div>
                    <div class=" row padding">
                        <label class="label">Link</label>
                        <font class="required">*</font>
                        <div class="input-group prefix">
                            <span class="input-group-addon" style="min-width: auto;">
                                <a class="inline" href="{{linkPrefix + learningTrack.slug}}" target="_blank"
                                    [ngClass]="{'isDisabled' : isAdd}">{{linkPrefix}}</a>
                            </span>
                            <input class="select-box inline form-control" [(ngModel)]="learningTrack.slug" maxlength="100" (input)="updateSlug('slug')">
                        </div>
                        <span *ngIf="!isSlugValid" class="required">{{slugErrorMessage}}</span>
                    </div>
                    <div class=" row " style=" padding: 5px 10px 5px 15px;">
                        <ul class="button-align inline">
                            <li style="margin-right: 5px;"><button class="btn btn-primary">Add Media</button></li>
                            <li style="margin-right: 5px;"><button class="btn btn-primary" (click)="getFormsList()">Add
                                    Forms</button></li>
                        </ul>
                    </div>
                    <div *ngIf="isAdd || learningTrack.description != undefined" class="row" style=" padding: 5px 10px 5px 15px;">
                        <ckeditor [(ngModel)]="learningTrack.description" #myckeditor [config]="ckeConfig" debounce="500">
                        </ckeditor>
                    </div>
                    <div class="row" style=" padding: 5px 10px 5px 15px;">
                        <div class="portlet light">
                            <div class="portlet-title tabbable-line" style="min-height: 0px;">
                                <div class="caption caption-md">
                                    <i class="icon-globe theme-font hide" aria-hidden="true"></i>
                                    <span class="caption-subject font-blue-madison bold">Settings</span>
                                </div>
                            </div>
                            <div class="panel with-nav-tabs panel-default">
                                <div class="panel-heading">
                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#contentTab" data-toggle="tab">content</a></li>
                                        <li><a href="#quizingTab" data-toggle="tab">quizing</a></li>
                                        <li><a href="#visibilityTab" data-toggle="tab">visibility</a></li>
                                    </ul>
                                </div>
                                <div class="panel-body">
                                    <div class="tab-content" style="padding: 10px 10px;">
                                        <div class="tab-pane fade in active" id="contentTab">
                                            <span *ngIf="!isAssetValid" class="required">{{assetErrorMessage}}</span>
                                            <label class="label padding">Attach Asset</label>
                                            <font class="required">*</font>
                                            <label class="form-check-label label" style="float: right;"> <input type="checkbox" class="form-check-input"
                                                    [(ngModel)]="learningTrack.followAssetSequence">Follow Sequence
                                            </label>
                                            <div id="sortable" class="panel-body tab-content" [dragula]='"form-options"' [dragulaModel]='selectedAssets'>
                                                <ng-container *ngFor="let selectedAsset of selectedAssets;let i=index">
                                                    <div class="padding" id="asset{{x}}">
                                                        <span class="fa fa-ellipsis-v"></span>
                                                        <input class="select-box inline" [value]="selectedAsset.assetName" disabled="disabled" (input)="validateAssets()">
                                                        <button class="btn btn-primary" type="button" (click)="openAssetPopup(i)">Select
                                                            Asset</button>
                                                        <button class="btn btn-primary" type="button" (click)="clearAsset(i); validateAssets()">Clear</button>
                                                        <button type="button" class="btn btn-danger btn-xs" (click)="removeAsset(i); validateAssets()">
                                                            <span class="glyphicon glyphicon-trash"></span>
                                                        </button>
                                                    </div>
                                                </ng-container>
                                            </div>
                                            <div class="padding">
                                                <button class="btn btn-primary" (click)="addAsset()">Add Asset</button>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="quizingTab">
                                            <label class="label padding ">Quiz</label>
                                            <input class="select-box inline" [value]="selectedQuizName" disabled="disabled">
                                            <button class="btn btn-primary" type="button" (click)="openQuizPopup()">Select Quiz</button>
                                            <button class="btn btn-primary" type="button" (click)="clearQuiz()">Clear</button>
                                        </div>
                                        <div class="tab-pane fade" id="visibilityTab">
                                            <span *ngIf="!isGroupOrCompanyValid" class="required">{{groupOrCompanyErrorMessage}}</span>
                                            <label class="label padding ">Group</label><br>
                                            <ng-container *ngFor="let selectedGroup of selectedGroups;let i=index ">
                                                <div class="padding ">
                                                    <select class="select-box" [(ngModel)]="selectedGroup.id" (change)="validateGroupOrCompany()">
                                                        <option *ngFor="let group of groupList " [ngValue]="group.id">
                                                            {{group.name}}
                                                        </option>
                                                    </select>
                                                    <button type="button " class="btn btn-danger btn-xs " (click)="removeGroup(i); validateGroupOrCompany() ">
                                                        <span class="glyphicon glyphicon-trash "></span>
                                                    </button>
                                                </div>
                                            </ng-container>
                                            <div class="padding ">
                                                <button class="btn btn-primary " (click)="addGroup() ">Add
                                                    Group</button><br>
                                            </div>
                                            <label class="label padding ">Company</label><br>
                                            <ng-container *ngFor="let selectedPartnerCompany of selectedPartnerCompanies;let i=index ">
                                                <div class="padding ">
                                                    <select class="select-box" [(ngModel)]="selectedPartnerCompany.id" (change)="validateGroupOrCompany()">
                                                        <option *ngFor="let partnerCompany of partnerCompanyList "
                                                            [ngValue]="partnerCompany.id">
                                                            {{partnerCompany.partnerCompanyName}}
                                                        </option>
                                                    </select>
                                                    <button type="button " class="btn btn-danger btn-xs " (click)="removePartnerCompany(i); validateGroupOrCompany() ">
                                                        <span class="glyphicon glyphicon-trash "></span>
                                                    </button>
                                                </div>
                                            </ng-container>
                                            <div class="padding ">
                                                <button class="btn btn-primary " (click)="addPartnerCompany() ">Add
                                                    Company</button><br>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 ">
                    <div class="portlet light ">
                        <div class="portlet-title tabbable-line ">
                            <div class="caption caption-md ">
                                <i class="icon-globe theme-font hide " aria-hidden="true "></i>
                                <span class="caption-subject font-blue-madison bold uppercase ">Tags</span>
                                <div class="inline">
                                    <button type="button" class="btn btn-primary add-btn" (click)="addTag()">
                                        <i class="fa fa-plus" data-toggle="tooltip" aria-hidden="true"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="scroller ">
                            <div *ngFor="let tag of tags ">
                                <label class="form-check-label ">
                                    <input type="checkbox" class="form-check-input "
                                        (click)="updateSelectedTags(tag,$event) "
                                        [checked]="learningTrack.tagIds != undefined && learningTrack.tagIds.length > 0 && learningTrack.tagIds.indexOf(tag.id)>-1">
                                    {{tag.tagName}}
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 ">
                    <div class="portlet light ">
                        <div class="portlet-title tabbable-line ">
                            <div class="caption caption-md ">
                                <i class="icon-globe theme-font hide " aria-hidden="true "></i>
                                <span class="caption-subject font-blue-madison bold uppercase ">Folder</span>
                                <font class="required">*</font>
                                <div class="inline">
                                    <button class="btn btn-primary add-btn" (click)="openCreateFolderPopup()" translate>
                                        <i class="fa fa-plus" data-toggle="tooltip" aria-hidden="true"></i></button>
                                </div>
                            </div>
                        </div>
                        <select class="form-control " [(ngModel)]="learningTrack.categoryId " (change)="checkAllRequiredFields()">
                            <option *ngFor="let category of categoryNames " [ngValue]="category.id "
                                data-toggle="tooltip " data-placement="top " title="{{category.name}} ">
                                {{category.name | slice: 0: 25}}
                            </option>
                        </select>
                    </div>
                </div>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 ">
                    <div class="portlet light ">
                        <div class="portlet-title tabbable-line ">
                            <div class="caption caption-md ">
                                <i class="icon-globe theme-font hide " aria-hidden="true "></i>
                                <span class="caption-subject font-blue-madison bold uppercase ">Featured Image</span>
                                <div class="inline" style="padding-left: 25px;">
                                    <button type="button" class="btn btn-primary" (click)="clearImage()">Clear</button>
                                </div>
                            </div>
                        </div>
                        <div class="profile-image-wrapper" style="cursor: pointer;text-align:center;color:#fff;" (click)="imageClick()">
                            <div *ngIf="!croppedImage" style="margin: 10px 0px 10px 0px;">
                                <img *ngIf="!imageChangedEvent && !featuredImagePath" src="assets/images/background-form.png" class="profile-image img-grid" alt="">
                            </div>
                            <div *ngIf="croppedImage; else showImage">
                                <img class="img-grid" [src]="croppedImage" alt="">
                            </div>
                            <ng-template #showImage>
                                <img class="img-grid" [src]="featuredImagePath" alt="">
                            </ng-template>
                        </div>
                    </div>
                </div>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 ">
                    <button class="btn btn-primary " type="submit " [disabled]="!learningTrack.isValid" (click)="addOrUpdateLearningTrack()">{{SubmitButtonValue}}</button>
                    <button class="btn btn-primary " type="submit " [disabled]="!learningTrack.isValid" *ngIf="!learningTrack.published" (click)="saveAndPublish()">{{SubmitAndPublishButtonValue}}</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- --------------Popup to add image --------------- -->
<div class="modal right fade" id="cropImage" tabindex="-1" role="dialog" aria-labelledby="cropLogoImage" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog imgCrop-modal" role="document">
        <div class="modal-content rounded-0">
            <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px'}"></ngx-loading>
            <div class="modal-header">
                <a class="close-circle" data-dismiss="modal" (click)="closeImageUploadModal()">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </a>
                <h4 class="modal-title" id="cropLogoImage">Choose the featured image
                </h4>
            </div>
            <div class="modal-body" style="overflow-y: unset !important;">
                <div style="position: relative; top: -5px; width: 118px;" class="btn green fileinput-button-css" *ngIf="!imageChangedEvent">
                    <span>Select image</span> <input style="height: 36px;" title=" " id="custom-input" type="file" (change)="filenewChangeEvent($event)">
                </div>
                <!-- <button style="position: relative; top: -5px; width: 118px;" class="btn green" (click)="chooseFileFromList()">Your images</button> -->
                <div style="position: relative; top: -5px;" *ngIf="errorUploadCropper" style="color:red">*Please Upload only images</div>
                <div style="position: relative; top: -5px;" *ngIf="fileSizeError" style="color:red">*File size should be less than 12MB</div>
                <div>
                    <ngx-loading [show]="loadingcrop" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop:true }"></ngx-loading>
                    <div [hidden]="!imageChangedEvent">
                        <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false" [onlyScaleDown]="true" [roundCropper]="false" format="jpg" outputType="base64" (imageCropped)="imageCroppedMethod($event)" (imageLoaded)="imageLoaded()" (cropperReady)="cropperReady()"
                            [resizeToWidth]="1000" (preserveSize)="true" (imageQuality)=0 (loadImageFailed)="loadImageFailed()" [style.display]="showCropper ? null : 'none'">
                        </image-cropper>
                    </div>
                    <div *ngIf="!imageChangedEvent">
                        <fieldset style="background: #cacaca; height: 227px; margin-bottom: 5px;">
                        </fieldset>
                    </div>
                </div>
                <div>
                    <button class="btn btn-primary" [disabled]="!showCropper" (click)="uploadImage()">Save
                        Changes</button>
                </div>
                <div>
                    <ul style="padding: 0 15px;">
                        <li>For optimal results, your logo should fit within the white rectangle.</li>
                        <li>If you would like to use a different logo in an email template, you can change it during the template design process.</li>
                    </ul>
                </div>

            </div>
        </div>
    </div>
    <svg id="svg-filter">
        <filter id="svg-blur">
            <feGaussianBlur in="SourceGraphic" stdDeviation="1"></feGaussianBlur>
        </filter>
    </svg>
</div>



<!-- --------------List Of Forms Popup--------------- -->
<div class="modal right" id="formsList" data-backdrop="static">
    <div class="modal-dialog modal-lg " style="width: 75%;right:0">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close-circle" data-dismiss="modal">
                    <i class="fa fa-times" aria-hidden="true "></i>
                </button>
                <h4 class="modal-title text-center">Forms</h4>
            </div>
            <div class="modal-body">
                <div class="row" *ngIf="!formsError">
                    <div class="col-xs-12 p5">
                        <div class="portlet light">
                            <div class="portlet-title ">
                                <div class="inputs" id="right">
                                    <div id="left">
                                        <select class="form-control" [(ngModel)]="formSortOption.formsSortOption" (ngModelChange)="formsSortBy($event)" style="position: relative;right: -3px;">
                                            <option *ngFor="let option of formSortOption.manageFormsSortOptions"
                                                [ngValue]="option">
                                                {{option.name}}</option>
                                        </select>
                                    </div>
                                    <div class="portlet-input input-inline input-small" id="search">
                                        <div class="input-icon right" id="search-icon">
                                            <input type="text" id="search-text" class="form-control" [(ngModel)]="formSortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="search..." (keypress)="formsEventHandler($event.keyCode)">
                                            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="formSortOption.searchKey" (click)="formSortOption.searchKey='' ;searchForms();"></button>
                                            <button type="submit" class="search-box-item-click" (click)="searchForms()"><i class="fa fa-search"></i> </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <app-list-loader *ngIf="formsLoader.isLoading"></app-list-loader>
                            <div class="table-responsive" *ngIf="!formsLoader.isLoading">
                                <table class='table tgrid table-hover table-sm' *ngIf="formPagination.pagedItems?.length>0" aria-describedby="describe">
                                    <thead>
                                        <tr>
                                            <th>Select</th>
                                            <th>Form Details</th>
                                            <th class="text-center">Preview</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let form of formPagination.pagedItems ;let i =index">
                                            <td>
                                                <input type="radio" (click)="updateDescription(form, $event)">
                                            </td>
                                            <td>
                                                <h4 class="ellipsis mt5 mb5 f-w-600" title="{{form.name}}">
                                                    {{form.name | slice:0:25}} <span *ngIf="form.name?.length>25">...</span>
                                                </h4>
                                                <h6>
                                                    Created By <strong>{{form.createdName}}</strong>
                                                </h6>
                                                <h6>
                                                    From <strong>{{form.companyName}}</strong>
                                                </h6>
                                            </td>
                                            <td id="actions-row" style="text-align: center;  vertical-align: middle;">
                                                <a data-toggle="tooltip" data-placement="top" title="Preview" (click)="previewForm(form.id)">
                                                    <i class="fa fa-eye" aria-hidden="true"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div *ngIf="formPagination.pagedItems.length !== 0" class="pg8">
                                <app-pagination [pagination]="formPagination" (notifyParent)="setFormsPage($event)" (notifyParentDropDown)="listForms($event)" [hidden]="formsLoader.isLoading">
                                </app-pagination>
                            </div>
                            <!-- End of 24 -->
                            <div *ngIf="formPagination.totalRecords==0 && !formsLoader.isLoading" class="alert alert-info">
                                <strong>No Forms Found.</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="formsError">
                    <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
                    </app-response-message>
                </div>

            </div>
            <div class="modal-footer">
                <a data-dismiss="modal" class="btn btn-default" style="float: right"><span
                        *ngIf="!authenticationService.isShowForms">Close</span><span
                        *ngIf="authenticationService.isShowForms">Submit</span></a>
            </div>
        </div>
    </div>
</div>
<!-- -----------Form Preview Popup------------ -->
<div class="modal right " id="form-preview-modal" data-backdrop="static">
    <div class="modal-dialog modal-lg" style="width: 75%;right:0">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close-circle" data-dismiss="modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
                <h4 class="modal-title text-center">Form Preview</h4>
            </div>
            <div [ngStyle]="{ 'background-image': 'url(' + formBackgroundImage + ')','background-repeat': 'no-repeat','background-size': 'cover'}" [style.backgroundColor]="pageBackgroundColor">
                <div class="modal-body">
                    <ngx-loading [show]="ngxloading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
                    <div *ngIf="form.showCompanyLogo">
                        <img id="form-company-logo" *ngIf="form.companyLogo.indexOf('images/')===0;" [src]="authenticationService.MEDIA_URL + form.companyLogo" alt="" />
                        <img id="form-company-logo" *ngIf="form.companyLogo.indexOf('images/')!==0;" [src]="form.companyLogo" alt="" />
                    </div>
                    <div class="vertical-center">
                        <div class="panel panel-info " *ngIf="!formError" [style.backgroundColor]="form.backgroundColor" [style.borderColor]="form.borderColor">
                            <div class="panel-heading" [style.backgroundColor]="form.borderColor" [style.color]="form.titleColor" [style.borderColor]="form.borderColor">
                                <div class="panel-title">{{form.name}}</div>
                            </div>
                            <div class="panel-body" *ngIf="!formError">
                                <h5>{{form.description}}</h5>
                                <ng-container *ngFor="let columnInfo of form?.formLabelDTOs;let i = index">
                                    <div class="form-group">
                                        <label class="control-label" [style.color]="form.labelColor">{{columnInfo.labelName}}
                                            <span class="required" *ngIf="columnInfo.required">*</span>
                                        </label>
                                        <ng-container *ngIf="columnInfo.labelType=='text' || columnInfo.labelType=='email' || columnInfo.labelType=='number'">
                                            <input type="{{columnInfo.labelType}}" class="form-control" placeholder="{{columnInfo.placeHolder}}" id="{{columnInfo.labelId}}" maxlength="1000" disabled="disabled">
                                        </ng-container>

                                        <ng-container *ngIf="columnInfo.labelType=='textarea'">
                                            <textarea rows="4" cols="4" class="form-control" placeholder="{{columnInfo.placeHolder}}" maxlength="1000" disabled="disabled"></textarea>
                                        </ng-container>
                                        <!-- ---------------------------Date----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType=='date'">
                                            <app-date-picker [class.disabled]='true' [isFromForm]='true'>
                                            </app-date-picker>
                                        </ng-container>
                                        <!-- ---------------------------Price----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType=='price'">
                                            <div class="input-group prefix">
                                                <span class="input-group-addon" style="pointer-events: none;">
                                                    {{columnInfo.priceSymbol}}
                                                </span>
                                                <input type="number" min="0" class="form-control" disabled="disabled" placeholder="{{columnInfo.placeHolder}}">
                                            </div>
                                        </ng-container>
                                        <!-- ---------------------------Upload----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType=='upload'">
                                            <input type="file" class="form-control" disabled="disabled">
                                        </ng-container>
                                        <!-- ---------------------------Radio Button----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType=='radio'">
                                            <ng-container *ngFor="let radioButton of columnInfo.radioButtonChoices;let i=index">
                                                <div class="form-check">
                                                    <label class="form-check-label" [style.color]="form.labelColor">
                                                        <input type="{{columnInfo.labelType}}"
                                                            name="{{columnInfo.labelId}}" class="form-check-input"
                                                            disabled="disabled">
                                                        {{radioButton.name}}
                                                    </label>
                                                </div>
                                                <br>
                                            </ng-container>
                                        </ng-container>
                                        <!-- ---------------------------Check Box----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType=='checkbox'">
                                            <ng-container *ngFor="let checkBox of columnInfo.checkBoxChoices;let i=index">
                                                <div class="form-check">
                                                    <label class="form-check-label" [style.color]="form.labelColor">
                                                        <input type="{{columnInfo.labelType}}"
                                                            name="{{columnInfo.labelId}}" class="form-check-input"
                                                            disabled="disabled">
                                                        {{checkBox.name}}
                                                    </label>
                                                </div>
                                                <br>
                                            </ng-container>
                                        </ng-container>
                                        <!-- ---------------------------DropDown Menu----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType=='select'">
                                            <select class="form-control">
                                                <option *ngFor="let dropDownValue of columnInfo.dropDownChoices">
                                                    {{dropDownValue.name}}</option>
                                            </select>
                                        </ng-container>
                                        <!-- ---------------------------Quiz Choices----------------------------- -->
                                        <ng-container *ngIf="columnInfo.labelType.split('_')[0]=='quiz'">
                                            <ng-container *ngFor="let choice of columnInfo.choices;let i=index">
                                                <div class="form-check">
                                                    <label class="form-check-label" [style.color]="form.labelColor">
                                                        <input type="{{columnInfo.labelType.split('_')[1]}}"
                                                            name="{{columnInfo.labelId}}" class="form-check-input"
                                                            disabled="disabled">
                                                        {{choice.name}}
                                                    </label>
                                                </div>
                                                <br>
                                            </ng-container>
                                        </ng-container>
                                    </div>
                                </ng-container>
                                <div *ngIf="form.showCaptcha">
                                    <re-captcha (resolved)="resolved($event)" [siteKey]="siteKey"></re-captcha>
                                </div>
                                <div *ngIf="form.buttonColor?.length>0;then show else dontShow"></div>
                                <ng-template #show>
                                    <button type="submit" disabled="disabled" class="button-padding" id="bottom-right" [style.backgroundColor]="form.buttonColor" [style.color]="form.buttonValueColor">{{form.buttonValue}}</button>
                                </ng-template>
                                <ng-template #dontShow>
                                    <button type="submit" disabled="disabled" class="btn green-haze" id="bottom-right" [style.color]="form.buttonValueColor">{{form.buttonValue}}</button>
                                </ng-template>
                            </div>
                        </div>
                        <!------Show Footer-------->
                        <footer>
                            <div style="text-align: center;" *ngIf="form.showFooter && form.footer" [innerHTML]="sanitizer.bypassSecurityTrustHtml(form.footer)"></div>
                        </footer>
                    </div>
                    <div *ngIf="formError">
                        <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
                        </app-response-message>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a data-dismiss="modal" class="btn btn-default" id="bottom-right">Close</a>
            </div>
        </div>
    </div>
</div>

<!-- --------------List Of Quiz Forms Popup--------------- -->
<div class="modal right" id="quiz-list" data-backdrop="static">
    <div class="modal-dialog modal-lg" style="width: 75%;right:0">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close-circle" data-dismiss="modal">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
                <h4 class="modal-title text-center">Forms</h4>
            </div>
            <div class="modal-body">
                <div class="row" *ngIf="!quizFormsError">
                    <div class="col-xs-12 p5">
                        <div class="portlet light">
                            <div class="portlet-title">
                                <div class="inputs" id="right">
                                    <div id="left">
                                        <select class="form-control" [(ngModel)]="quizFormSortOption.formsSortOption" (ngModelChange)="quizSortBy($event)" style="position: relative;right: -3px;">
                                            <option *ngFor="let option of quizFormSortOption.manageFormsSortOptions"
                                                [ngValue]="option">
                                                {{option.name}}</option>
                                        </select>
                                    </div>
                                    <div class="portlet-input input-inline input-small" id="search">
                                        <div class="input-icon right" id="search-icon">
                                            <input type="text" id="search-text" class="form-control" [(ngModel)]="quizFormSortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="search..." (keypress)="quizEventHandler($event.keyCode)">
                                            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="quizFormSortOption.searchKey" (click)="quizFormSortOption.searchKey='';searchQuizForms();"></button>
                                            <button type="submit" class="search-box-item-click" (click)="searchQuizForms()"><i class="fa fa-search"></i> </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <app-list-loader *ngIf="quizFormsLoader.isLoading"></app-list-loader>
                            <div class="table-responsive" *ngIf="!quizFormsLoader.isLoading">
                                <table class='table tgrid table-hover table-sm' *ngIf="quizFormPagination.pagedItems?.length>0" aria-describedby="describe">
                                    <thead>
                                        <tr>
                                            <th>Select</th>
                                            <th>Form Details</th>
                                            <th class="text-center">Preview</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let form of quizFormPagination.pagedItems ;let i =index">
                                            <td>
                                                <input type="radio" [checked]="this.learningTrack.quizId === form.id" (click)="selectedQuiz(form)">
                                            </td>
                                            <td>
                                                <h4 class="ellipsis mt5 mb5 f-w-600" title="{{form.name}}">
                                                    {{form.name | slice:0:25}} <span *ngIf="form.name?.length>25">...</span>
                                                </h4>
                                                <h6>
                                                    Created By <strong>{{form.createdName}}</strong>
                                                </h6>
                                                <h6>
                                                    From <strong>{{form.companyName}}</strong>
                                                </h6>
                                            </td>
                                            <td id="actions-row" style="text-align: center;  vertical-align: middle;">
                                                <a data-toggle="tooltip" data-placement="top" title="Preview" (click)="previewForm(form.id)">
                                                    <i class="fa fa-eye" aria-hidden="true"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div *ngIf="quizFormPagination.pagedItems.length !== 0" class="pg8">
                                <app-pagination [pagination]="quizFormPagination" (notifyParent)="setQuizPage($event)" (notifyParentDropDown)="listQuizForms($event)" [hidden]="quizFormsLoader.isLoading">
                                </app-pagination>
                            </div>
                            <!-- End of 24 -->
                            <div *ngIf="quizFormPagination.totalRecords==0 && !quizFormsLoader.isLoading" class="alert alert-info">
                                <strong>No Forms Found.</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="quizFormsLoader">
                    <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
                    </app-response-message>
                </div>

            </div>
            <div class="modal-footer">
                <a data-dismiss="modal" class="btn btn-default" style="float: right"><span
                        *ngIf="!authenticationService.isShowForms">Close</span><span
                        *ngIf="authenticationService.isShowForms">Submit</span></a>
            </div>
        </div>
    </div>
</div>

<!--Modal Popup For Images From Content------------>
<div class="modal fade" id="yourAssets" tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-lg full">
            <div class="modal-content">
                <div class="modal-header">
                    <a class="close-circle" data-dismiss="modal">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </a>
                    <h4 class="modal-title center">Assets
                    </h4>
                </div>
                <div class="modal-body">
                    <app-grid-loader *ngIf="assetLoader.isLoading"></app-grid-loader>
                    <app-list-loader *ngIf="assetLoader.isLoading"></app-list-loader>
                    <div class="row" *ngIf="!assetError">
                        <ul class="content__list" *ngFor="let file of assetPagination.pagedItems; let i =index;">
                            <li class="list__item" [ngClass]="{'list__item--selected':selectedAssets[assetIndex] != undefined && selectedAssets[assetIndex].id == file.id}">
                                <div class="flex-row pointer" (click)="setSelectedAsset(file); validateAssets()">
                                    <div class="item__select-box-wrapper">
                                        <span class="select-box-asset" (click)="setSelectedAsset(file); validateAssets()"> <label>
                                                <input type="checkbox">
                                            </label>
                                        </span> <span class="ng-scope"> <a style="cursor: default;"
                                                class="item__preview item__preview--image img-container custom"
                                                target="_BLANK">
                                                <img ng-src="https://d15k2d11r6t6rl.cloudfront.net/public/_thumbs/Integrators/6639d69f-523f-44ca-b809-a00daa26b367/bee-12092/BC-xAmplify-changes1.jpg_thumb.png?hash=1537857431976"
                                                    id="content_image_grid_{{i}}"
                                                    (error)="changeImage(i, file.filePath)" class="thumb ng-scope"
                                                    src="{{file.thumbnailPath}}" alt="">
                                            </a> <a href="javascript:;"> </a>
                                        </span>
                                    </div>
                                    <div class="item__content">
                                        <div class="flex-row">
                                            <div class="item__last-modified">
                                                <span>
                                                    <app-timestamp [isOnlyDate]="true"
                                                        [dateAndTime]="file.createdDateInUTCString"> </app-timestamp>
                                                </span>
                                            </div>
                                            <span class="item__name" data-toggle="tooltip" [title]="file.assetName">
                                                <strong>{{file.assetName | slice: 0: 8}}
                                                    <span *ngIf="file.assetName?.length>8">...</span>
                                            </strong>
                                            </span>
                                            <div class="item__size">
                                                <span *ngIf="file.published">Published</span>
                                            </div>
                                            <div class="item__type">
                                                <span>{{file.assetType}}</span>
                                            </div>
                                            <div class="item__actions">
                                                <span> <a class="fm external-link" target="_BLANK" data-toggle="tooltip"
                                                        data-placement="top" [title]="preview"
                                                        (click)="$event.stopPropagation();"
                                                        href="{{file.thumbnailPath}}" target="_blank">
                                                        <i class="fa fa-external-link" aria-hidden="true"
                                                            style="font-size: 20px; color: #5a5a5a"></i>
                                                    </a>
                                                    <!-- <a class="fm delete" data-toggle="tooltip" data-placement="top" [title]="actionsDescription.delete_item"
                                                        (click)="$event.stopPropagation();delete(file,file.id)">
                                                        <i class="fa fa-trash-o" aria-hidden="true" style="font-size: 20px; color: #5a5a5a"></i>
                                                    </a> -->
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div *ngIf="assetPagination.pagedItems.length !== 0" class="pg8">
                        <app-pagination [pagination]="assetPagination" (notifyParent)="setAssetPage($event)" (notifyParentDropDown)="listAssets($event)" [hidden]="assetLoader.isLoading">
                        </app-pagination>
                    </div>
                    <!-- End of 24 -->
                    <div *ngIf="assetPagination.totalRecords==0 && !assetLoader.isLoading" class="alert alert-info">
                        <strong>No Assets Found.</strong>
                    </div>
                </div>
            </div>
            <svg id="svg-filter">
                <filter id="svg-blur">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="1"></feGaussianBlur>
                </filter>
            </svg>
        </div>
    </div>
</div>

<div *ngIf="openAddTagPopup">
    <app-add-tags-util [pagination]="pagination" [isAddTag]="true" (notifyParent)="resetTagValues($event)">
    </app-add-tags-util>
</div>

<app-add-folder-modal-popup #addFolderModalPopupComponent (notifyChild)="resetFolderValues($event)">
</app-add-folder-modal-popup>


<!-- <div class=" row " style=" padding: 5px 10px 5px 15px;">
    <div style="border-bottom: 3px solid #eee;min-height: 30px;">
        <ul class="tab-content-align" style="display: -webkit-inline-box;">
            <li class="bold uppercase" style="padding: 10px 10px;" [ngClass]="{'active-tab': activeTabName == 'content'}"><a [ngClass]="{'active-tab-anchor-text': activeTabName == 'content'}" (click)="activateTab('content');clearCustomResponse()">content</a></li>
            <li class="bold uppercase" style="padding: 10px 10px;" [ngClass]="{'active-tab': activeTabName == 'quizing'}"><a [ngClass]="{'active-tab-anchor-text': activeTabName == 'quizing'}" (click)="activateTab('quizing');clearCustomResponse()">quizing</a></li>
            <li class="bold uppercase" style="padding: 10px 10px;" [ngClass]="{'active-tab': activeTabName == 'visibility'}"><a [ngClass]="{'active-tab-anchor-text': activeTabName == 'visibility'}" (click)="activateTab('visibility');clearCustomResponse()">visibility</a>
            </li>
        </ul>
    </div>
</div>
<div class="tab-content" style="padding: 10px 10px;">
    <div class="tab-pane" [ngClass]="{'active': activeTabName == 'content'}">
        <span *ngIf="!isAssetValid" class="required">{{assetErrorMessage}}</span>
        <label class="label padding">Attach Asset</label>
        <font class="required">*</font>
        <div class="panel-body tab-content" [dragula]='"form-options"' [dragulaModel]='selectedAssets'>
            <ng-container *ngFor="let selectedAsset of selectedAssets;let i=index">
                <div style="cursor: move;">
                    <a id="drag-div">
                        <div class="padding">
                            <input class="select-box inline" [value]="selectedAsset.assetName" disabled="disabled" (input)="validateAssets()">
                            <button class="btn btn-primary" type="button" (click)="openAssetPopup(i)">Select
                                Asset</button>
                            <button class="btn btn-primary" type="button" (click)="clearAsset(i); validateAssets()">Clear</button>
                            <button type="button" class="btn btn-danger btn-xs" (click)="removeAsset(i); validateAssets()">
                                <span class="glyphicon glyphicon-trash"></span>
                            </button>
                        </div>
                    </a>
                </div>
            </ng-container>
        </div>
        <div class="padding">
            <button class="btn btn-primary" (click)="addAsset()">Add Asset</button>
        </div>
    </div>
    <div class="tab-pane" [ngClass]="{'active': activeTabName == 'quizing'}">
        <label class="label padding ">Quiz</label>
        <input class="select-box inline" [value]="selectedQuizName" disabled="disabled">
        <button class="btn btn-primary" type="button" (click)="openQuizPopup()">Select Quiz</button>
        <button class="btn btn-primary" type="button" (click)="clearQuiz()">Clear</button>
    </div>
    <div class=" tab-pane " [ngClass]="{ 'active': activeTabName=='visibility' } ">
        <span *ngIf="!isGroupOrCompanyValid" class="required">{{groupOrCompanyErrorMessage}}</span>
        <label class="label padding ">Group</label><br>
        <ng-container *ngFor="let selectedGroup of selectedGroups;let i=index ">
            <div class="padding ">
                <select class="select-box" [(ngModel)]="selectedGroup.id" (change)="validateGroupOrCompany()">
                    <option *ngFor="let group of groupList " [ngValue]="group.id">
                        {{group.name}}
                    </option>
                </select>
                <button type="button " class="btn btn-danger btn-xs " (click)="removeGroup(i); validateGroupOrCompany() ">
                    <span class="glyphicon glyphicon-trash "></span>
                </button>
            </div>
        </ng-container>
        <div class="padding ">
            <button class="btn btn-primary " (click)="addGroup() ">Add Group</button><br>
        </div>
        <label class="label padding ">Company</label><br>
        <ng-container *ngFor="let selectedPartnerCompany of selectedPartnerCompanies;let i=index ">
            <div class="padding ">
                <select class="select-box" [(ngModel)]="selectedPartnerCompany.id" (change)="validateGroupOrCompany()">
                    <option *ngFor="let partnerCompany of partnerCompanyList " [ngValue]="partnerCompany.id">
                        {{partnerCompany.partnerCompanyName}}
                    </option>
                </select>
                <button type="button " class="btn btn-danger btn-xs " (click)="removePartnerCompany(i); validateGroupOrCompany() ">
                    <span class="glyphicon glyphicon-trash "></span>
                </button>
            </div>
        </ng-container>
        <div class="padding ">
            <button class="btn btn-primary " (click)="addPartnerCompany() ">Add
                Company</button><br>
        </div>
    </div>
</div> -->