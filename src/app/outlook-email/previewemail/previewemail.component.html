<div class="page-content">
  <div>
    <button class="action-btn star-btn" (click)="backToList()" title="Back to List">
      <i class="fa fa-arrow-left" aria-hidden="true"></i>
    </button>
  </div>
  <!-- <div class="portlet light thread-view">
    <div class="portlet-title">
      <div class="caption">{{selectedThread?.subject}}</div>
    </div>
    <div class="thread-messages">
      <div *ngFor="let msg of selectedThread?.messages" class="mail-message">
        <div class="header">
          <strong>{{msg?.from}}</strong>
          <span class="pull-right">{{msg?.timestamp}}</span>
        </div>
        <div class="body" [innerHTML]="msg?.body?.content"></div>
      </div>
    </div>
  </div> -->

    <div class="email-thread">

      <!-- TOP HEADER -->
      <div class="email-header-top">
        <div class="email-subject">{{selectedThread?.subject}}</div>
        <!-- <div class="email-actions">
          <span class="expand-all-icon" id="toggleAllBtn">
            <i class="fa fa-chevron-up"></i>
            <i class="fa fa-chevron-down"></i>
          </span>
          <i class="fa fa-print"></i>
          <i class="fa fa-external-link"></i>
        </div> -->
      </div>

      <!-- Email 1 -->
      <div class="email-item" *ngFor="let msg of selectedThread.messages">
        <div class="email-header">
          <div class="sender-block">
            <div class="avatar">M</div>
            <div class="sender-details">
              <div class="sender-name">{{msg?.from}}</div>
              <div class="to-line">to me <i class="fa fa-caret-down"></i></div>
            </div>
          </div>
          <div class="email-meta">
            {{msg?.timestamp}}
            <!-- <i class="fa fa-star-o"></i>
            <i class="fa fa-reply"></i>
            <i class="fa fa-ellipsis-v"></i> -->
          </div>
        </div>
        <div class="email-body" [innerHTML]="getBodyContent(msg?.bodyContent)">
         <!-- <div class="body" [innerHTML]="msg?.body"></div> -->
        </div>
      </div>

      <!-- Email 2 -->
      <!-- <div class="email-item">
        <div class="email-header">
          <div class="sender-block">
            <div class="avatar">M</div>
            <div class="sender-details">
              <div class="sender-name">Manikanta Karri <small>&lt;manikanta@stratapps.com&gt;</small></div>
              <div class="to-line">to Siva, Vamshi <i class="fa fa-caret-down"></i></div>
            </div>
          </div>
          <div class="email-meta">
            Aug 4, 2025, 7:13 PM (4 days ago)
            <i class="fa fa-star-o"></i>
            <i class="fa fa-reply"></i>
            <i class="fa fa-ellipsis-v"></i>
          </div>
        </div>
        <div class="email-body">
          My work status was on 04-08-2025.

          1. Addressed comments for the settings layout.
          2. Reviewed QA bug fixes.
        </div>
      </div> -->

      <!-- Email 3 -->
      <!-- <div class="email-item">
        <div class="email-header">
          <div class="sender-block">
            <div class="avatar">M</div>
            <div class="sender-details">
              <div class="sender-name">Manikanta Karri <small>&lt;manikanta@stratapps.com&gt;</small></div>
              <div class="to-line">to Siva, Vamshi <i class="fa fa-caret-down"></i></div>
            </div>
          </div>
          <div class="email-meta">
            Aug 6, 2025, 7:18 PM (2 days ago)
            <i class="fa fa-star-o"></i>
            <i class="fa fa-reply"></i>
            <i class="fa fa-ellipsis-v"></i>
          </div>
        </div> 
        <div class="email-body">
          My work status was on 06-08-2025.

          1. Coordinated with Sudheer on a few UI enhancement changes in the Ask Oliver section.
          2. XNFR-2057: Bug analysis ongoing.
        </div>
      </div> -->

    </div>

    <script>
      // Toggle single email
      $('.email-item').click(function () {
        $(this).toggleClass('open');
      });

      // Toggle all emails expand/collapse
      var allOpen = false;
      $('#toggleAllBtn').click(function (e) {
        e.stopPropagation(); // Prevent triggering individual open/close
        allOpen = !allOpen;
        if (allOpen) {
          $('.email-item').addClass('open');
        } else {
          $('.email-item').removeClass('open');
        }
      });
    </script>
</div>