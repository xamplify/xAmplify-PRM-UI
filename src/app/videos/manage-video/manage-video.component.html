<style>
 .selectedtype{
	 background:#00a6e8;
 }

</style>
<div class="page-content">
	<div>
		<div class="page-bar">
			<ul class="page-breadcrumb">
				<li><i class="fa fa-home"></i> <a (click)="gotoHome()">Home</a><i class="fa fa-angle-right"></i></li>
				<li><a (click)="backToManageVideos()">Manage Videos</a> </li>
				<li *ngIf="editVideo" style="color: #888;"><i class="fa fa-angle-right"></i>Edit Video </li>
				<li *ngIf="playVideo" style="color: #888;"><i class="fa fa-angle-right"></i>Play Videos </li>
				<li *ngIf="campaignReport" style="color: #888;"><i class="fa fa-angle-right"></i>Video Based Report </li>
			</ul>
		</div>
	</div>
	<div>
		<div class="row" *ngIf="manageVideos">
			<div class="col-xs-12" style="position: relative;top: -9px;" >
				<app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
			</div>
				<div class="col-xs-12 col-sm-12 col-md-12">
				<div class="tabbable tabbable-custom tabbable-noborder" style="background: white">
					<div class="tab-content" style="min-height: 590px;">
						<div class="tab-pane active m10">
							<div class="page-toolbar">
								<div *ngIf="!httpRequestLoader.isLoading" class="btn-group pull-right col-xs-12 col-sm-12 col-md-12" style="padding: 0;margin-bottom: 10px; ">
									<div class="inputs" align="right">
										<div style="padding:0" class="col-xs-12 col-sm-6 col-md-3">
											<select class="form-control select-option" [(ngModel)]="categoryNum" (ngModelChange)="getCategoryNumber()">
											   <option  [value]="0" >All Categories</option>
                         <option *ngFor="let category of categories" [ngValue]="category.id" [selected]="category.id==pagination.videoCategoryId">{{category.name}}</option>
                       </select>
										</div>
										<div class="col-xs-12 col-md-3">
										</div>
										<div class="col-xs-6 col-sm-3 col-md-3 p0 flex">
											<ng-container class='m10'>
												<button class="btn btn-xs" [disabled]="isListView" (click)="isListView = true" title="List View"><i class="fa fa-th-list p10" aria-hidden="true"></i></button>
												<button class="btn btn-xs" [disabled]="!isListView" (click)="isListView = false" title="Grid View"><i class="fa fa-th-large p10" aria-hidden="true"></i></button>
											</ng-container>

											<select class="form-control ml5" style="cursor: pointer" [(ngModel)]="videoSort" (ngModelChange)="selectedSortByValue($event)">
												<option *ngFor="let sort of sortVideos" [ngValue]="sort"> {{sort.name}} </option>
											</select>
										</div>
										<div class="col-xs-6 col-sm-3 col-md-3 col-md-3" style="padding-right:0">
											<div class="input-icon right" style="cursor:pointer">
												<i class="icon-magnifier" style="cursor:pointer;font-size:18px;" (click)="searchVideoTitelName()"></i>
												<input type="text" [(ngModel)]="pagination.searchKey" [ngModelOptions]="{standalone: true}" class="form-control"
												 placeholder="Search for a Video">
											</div>
										</div>
									</div>
									<div class="col-xs-12" style="margin: 1px -18px;"  *ngIf="authenticationService.isOrgAdminPartner()">
									<ul class="mix-filter" >
										<li class="filter" *ngFor="let videoType of videoTypes; let i = index;"
										 (click)="getVideoTypes(videoType)" [class.selectedtype]="videoFileService.videoType === videoType.value">{{videoType.name}}</li>
									</ul></div>
								</div>
							</div>
							<app-loader *ngIf="httpRequestLoader.isLoading"></app-loader>
							<div class="margin-top-10">
								<div *ngIf="!httpRequestLoader.isLoading">
									<div *ngIf="pagination.pagedItems.length == 0" style="position: relative; top: 16px; width: 100%;" class="col-md-9 alert alert-info alert-dismissable">
										<a class="close" data-dismiss="alert" aria-label="close">&times;</a>
										<p>No results found</p>
									</div>
								</div>
								<section [hidden]="!isListView">
								<div class="table-responsive" style="overflow-x: inherit;">
									<table class='table tgrid' *ngIf="pagination.pagedItems.length !== 0">
										<thead>
											<tr>
												<th colspan="2" style="width: 50%">Videos</th>
												<th>Type</th>
												<th>Upload Date</th>
												<th class="text-center">Actions</th>
											</tr>
										</thead>
										<tbody>
											<tr *ngFor="let videoFile of pagination.pagedItems ;let i =index">
												<td style="width: 10%;">
													<div style="margin-bottom: -18px" >
														<a (click)="showPlayVideo(videoFile)">
															<img src="{{videoFile.imagePath}}" alt="{{videoFile.title}}" style="height:100px;">
															<span class="duration f-w-600">{{videoUtilService.truncateHourZeros(videoFile.videoLength)}}</span>
														</a>
													</div>
												</td>
												<td>
													<a (click)="showPlayVideo(videoFile)">
														<h4  title={{videoFile.title}} class='mt5 mb5 f-w-600'>{{videoFile.title | slice: 0: 23}} <span *ngIf="videoFile.title?.length>23">...</span> </h4>
														<h5 *ngIf="videoFileService.videoType === 'myVideos'" class='m0'>By {{videoFile.uploadedUserName}}</h5>
														<h5 *ngIf="videoFileService.videoType === 'partnerVideos'">by {{videoFile.uploadedBy}}</h5>
														<h6 class='f-w-600'>{{videoFile.views}} views</h6>
													</a>
												</td>
												<td>
													<span class='view-by-banner'>{{videoFile.viewBy}}</span>
												</td>
												<td>{{videoFile.uploadedDate}}</td>
												<td>
													<div class="actions-block" *ngIf="videoFileService.videoType==='myVideos'">
														<a *ngIf="hasAllAccess || (hasVideoRole && loggedInUserId==videoFile.uploadedUserId) || authenticationService.module.isVendor"
															(click)="showEditVideo(videoFile)" title="Edit Video">
															<i class="fa fa-pencil-square-o"></i>
														</a>
														<a (click)="showCampaignVideoReport(videoFile)"
															title="Video Based Reports">
															<i class="fa fa-line-chart"></i>
														</a>
														<ng-container *ngIf="hasAllAccess || (hasCampaignRole && hasVideoRole && loggedInUserId==videoFile.uploadedUserId) || authenticationService.module.isVendor">
															<a *ngIf="videoFile.viewBy!='DRAFT'" (click)="campaignRouter(videoFile)" title="Create Campaign">
																<i class="fa fa-bullhorn"></i>
															</a>
															<a *ngIf="videoFile.viewBy=='DRAFT'" title="Can't create a Campaign for DRAFT" style="cursor: not-allowed !important;">
																<i class="fa fa-bullhorn" title="Can't create a Campaign for DRAFT"></i>
															</a>
														</ng-container>
														<a *ngIf="hasAllAccess || (hasVideoRole && loggedInUserId == videoFile.uploadedUserId) || authenticationService.module.isVendor" (click)="deleteVideoAlert(videoFile.alias,i ,videoFile.title)">
															<i class="fa fa-trash"></i>
														</a>
													</div>
														<div class="actions-block" *ngIf="videoFileService.videoType==='partnerVideos'"
														  style="position: relative;left: -30px;color: #00a6e8;">
															<a  (click)="campaignRouter(videoFile)" title="Create Campaign">
																<i class="fa fa-bullhorn"></i>
															</a>
													</div>
												</td>
											</tr>
										</tbody>
									</table>
									</div>
								</section>
								<section [hidden]="isListView">
								<div class="row mix-grid" style="margin-top: 10px;padding:7px" *ngIf="pagination.pagedItems && !httpRequestLoader.isLoading">
									<div *ngFor="let videoFile of pagination.pagedItems ;let i =index" >
										<div class="col-xs-12 col-sm-6 col-md-3  mix category_1 mix_all" style="display: block; opacity: 1; margin-top: -27px;">
											<div id="container">
												<h3>{{videoFile.viewBy}}<span class="arrow"></span> </h3>
											</div>
											<div class="bookmark-ribbon" *ngIf="videoFileService.videoType === 'partnerVideos'">
												<span >
											       <i aria-hidden="true" class="fa fa-handshake-o pull-right" style="right: -10px;bottom: 5px;color: #f7f7f7; position: absolute"></i>
												</span>
											</div>
											<div class="mix-inner" style="height: 173px;">
												<img class="img-responsive" src="{{videoFile.imagePath}}" alt="No Image" class="customeImagePath" style="height:173px;">
												<div class="mix-details" style="z-index: 700;padding: 11px;">
													 <h4  title={{videoFile.title}} >{{videoFile.title | slice: 0: 23}} <span *ngIf="videoFile.title?.length>23">...</span> </h4>
													<div style="top: 2%; position: relative; margin-left: 5px;" *ngIf="videoFileService.videoType==='myVideos'">
														<a class="mix-preview2" (click)="showPlayVideo(videoFile)" title="Play Video" data-rel="">
														<i class="fa fa-play"></i>
													    </a>
														<a *ngIf="hasAllAccess || (hasVideoRole && loggedInUserId==videoFile.uploadedUserId) || authenticationService.module.isVendor" class="mix-preview1" style="left: 16%;"
														 (click)="showEditVideo(videoFile)" title="Edit Video" data-rel="">
														<i class="fa fa-pencil-square-o"></i>
													    </a>
														<a class="mix-preview3 " style="margin-left:-4px; width: 44px;" (click)="showCampaignVideoReport(videoFile)" title="Video Based Reports"
														 data-rel="">
														<i class="fa fa-line-chart"></i>
													    </a>
													</div>
													<div style="top: 27%; position: relative;" *ngIf="videoFileService.videoType==='myVideos'">
													  <span *ngIf="hasAllAccess || (hasCampaignRole && hasVideoRole && loggedInUserId==videoFile.uploadedUserId) || authenticationService.module.isVendor">
														<a class="mix-preview2 " *ngIf="videoFile.viewBy!='DRAFT'" (click)="campaignRouter(videoFile)" title="Create Campaign" data-rel=""
														 style="left:29%;margin-top :18px">
														<i class="fa fa-bullhorn"></i>
													   </a>
														<a class="mix-preview2" *ngIf="videoFile.viewBy=='DRAFT'" title="Can't create a Campaign for DRAFT" data-rel="" style="left:29%;margin-top :18px; cursor: not-allowed !important;">
														<i class="fa fa-bullhorn" title="Can't create a Campaign for DRAFT"></i>
													   </a>
													 </span>
														<a *ngIf="hasAllAccess || (hasVideoRole && loggedInUserId == videoFile.uploadedUserId) || authenticationService.module.isVendor" class="mix-preview6 " (click)="deleteVideoAlert(videoFile.alias,i ,videoFile.title)"
														 onMouseOver="this.style.color='#fff'" title="Delete Video" data-rel="" lang="{{videoFile.id}}" style="left:50%; margin-top :18px">
							                             <i class="fa fa-trash" style="color: red !important"  onMouseOut="this.style.color='red'" onMouseOver="this.style.color='#fff'"></i>
						                             </a>
													</div>
													<!-- partner video started -->
													<div style="top: 2%; position: relative; margin-left: 5px;" *ngIf="videoFileService.videoType==='partnerVideos'">
														<a class="mix-preview2" (click)="showPlayVideo(videoFile)"  style="margin-top: 29px; left: 27%;"
														title="Play Video" data-rel="">
														<i class="fa fa-play"></i>
													    </a>
													</div>
													<div style="top: 27%; position: relative;" *ngIf="videoFileService.videoType==='partnerVideos'">
													  <span>
														<a class="mix-preview2 " (click)="campaignRouter(videoFile)" title="Create Campaign" data-rel=""
														 style="left: 50%;margin-top: -9px;">
														<i class="fa fa-bullhorn"></i>
													   </a>
													  </span>
													</div>
													<!--end partner videos   -->
													<span align="right" title="Video Length" style="bottom: 13px; float: right; position: absolute; right: 5px;">{{videoUtilService.truncateHourZeros(videoFile.videoLength)}}</span>
													<span align="right" title="Uploaded Date" style="bottom: -2px; float: right; position: absolute; right: 4px;">{{videoFile.uploadedDate }}</span>
													<span align="left"  title="Views" style="bottom: 12px; left: 10px; position: absolute;">#{{videoFile.views}}</span>
												    <span *ngIf="videoFileService.videoType==='myVideos'" align="left"  title="Uploaded By" style="bottom: -1px; left: 10px; position: absolute;">by {{videoFile.uploadedUserName}}</span>
											        <span *ngIf="videoFileService.videoType==='partnerVideos'" align="left"  title="Uploaded By" style="bottom: -1px; left: 10px; position: absolute;">by {{videoFile.uploadedBy | slice: 0: 21}}</span>
												</div>
											</div>
											<div>
											</div>
										</div>
									</div>
								</div>
								</section>
							</div>
						</div>
						<div *ngIf="pagination.pagedItems.length !== 0">
						<app-pagination [pagination]="pagination" [type]="'managaVideos'"
						 (notifyParent)="setPage($event)" (notifyParentDropDown)="loadVideos($event)"></app-pagination>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<app-edit-video *ngIf="editVideo" (notifyParent)="update($event)"></app-edit-video>
	<app-play-video *ngIf="playVideo" [totalRecords]="allRecords" [selectedVideo]="selectedVideo"></app-play-video>
	<app-video-based-report *ngIf="campaignReport" [selectedVideo]="selectedVideo"></app-video-based-report>
</div>
