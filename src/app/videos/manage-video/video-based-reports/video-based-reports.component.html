<style>
	.disabled{
		pointer-events: none;
	}
	</style>
<div class="row">
	<div class="col-xs-12 col-sm-6 p5">
		<div class="portlet light" style="position:relative">
				<div id="overLayImage"></div>
				<div id="overlay-logo"  class="video-js"  [ngClass]="{'logoCss':!fullScreenMode , 'logoFullscreen' :fullScreenMode}" >
					<a [href]="logoDescriptionUrl" target="_blank"  [class.disabled]="logoDescriptionUrl===null">
					  <img *ngIf="brandLogoUrl" [src]="authenticationService.MEDIA_URL + brandLogoUrl" class="img-responsive" >
					</a>
				</div>
			<div id="newPlayerVideo"></div>
			<div>
				<div>
					<h4 class="videoTitle">{{selectedVideo.title}}</h4>
					<h5 align="justify" style="word-break: break-all;">{{selectedVideo.description}}</h5>
				</div>
				<div class="row">
					<div class="col-xs-12">
						<h6> <b>Uploaded on :</b> {{selectedVideo.uploadedDate}}</h6>
						<h6> <b>Category :</b> {{selectedVideo.category.name}}</h6>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-12 col-sm-6 p5">
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption" style="position: relative;">
					<i class="icon-equalizer font-purple-plum hide"></i>
					<span class="caption-subject font-red-sunglo uppercase">Viewer Stats</span>
          <!-- <span class="caption-helper">Details regarding campaign recipients who have watched your videos</span> -->
          <span style="position: relative;cursor: pointer;color: #54a7e9;" title="Details regarding campaign recipients who have watched your videos">
            <i class="fa fa-question-circle circle-custome-css" ></i>
        </span>
				</div>
			</div>
			<div class="portlet-body">
				<div class="row">
					<div class="col-xs-12 col-md-6 text-center">
						  <table id="trellis" style="min-width: 250px; max-width: 250px; height: 200px;">
							<tr>
								<td class="first"></td>
							</tr>
						</table>
						<h5 class="title" style="margin-top: -2px;color: #3d3d3e;font-weight: 400;"> Total minutes watched by top {{minutesWatchedUsers}} recipients </h5>
					</div>
					<div class="col-xs-12 col-md-3 text-center" style="padding: 0" (click)="watchedFullyDetailReport()">
						<section class="percentage-circle" style="margin-top: 15px;cursor: pointer">
							<app-donut-chart [percentageValue]="watchedFully" [totalValue]="100"></app-donut-chart>
							<h2 class="percentage-value" style="margin: -2.7em 0 0 0;">{{watchedFully}}%</h2>
						</section>
						<h5 style="margin-top: 122px;font-weight: 400;">Watched completely</h5>
					</div>
					<div class="col-xs-12 col-md-3 text-center">
						<h1 style="margin-top: 48px;">{{videoUtilService.nFormatter(selectedVideo.views)}}</h1>
						<h5 style="margin-top: 8.8em; font-weight: 400;">Total views</h5>
					</div>
				</div>
			</div>
		</div>
		<div style="background: white;box-shadow: none;margin-top: 14px;">
			<table class="table-new" style="width: 100%;" height=120>
				<tr>
					<th class="td-new-n" rowspan="2">ANONYMOUS VIEWERS
            <!-- <span>(Views from indirect sources <br>such as social campaigns and <br>embedded videos)</span> -->
            <span style="position: relative;cursor: pointer;color: #54a7e9;" title="Views from indirect sources such as social campaigns and embedded videos">
              <i class="fa fa-question-circle circle-custome-css" ></i>
           </span>
          </th>
					<th class="td-new-n">Views</th>
					<th class="td-new-n">Minutes watched</th>
				</tr>
				<tr>
					<td class="td-new-n">{{nonApplicableUsersViews}}</td>
					<td class="td-new-n">{{nonApplicableUsersMinutes}}</td>
				</tr>
			</table>
		</div>
	</div>

</div>

<div class="row">
	<div class="col-xs-12 col-sm-6 p5">
		<!-- BEGIN PORTLET-->
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-bar-chart font-green-sharp hide"></i>
					<span class="caption-subject font-green-sharp uppercase">Minutes watched by RECIPIENT</span>
					<span class="caption-helper"></span>
				</div>
				<div class="panel-title pull-right">
					<span style="float:right; font-size: 13px;">
						<select style="cursor: pointer" [(ngModel)]="minutesSort" (ngModelChange)="selectedSortByValue($event.value)">
							<option *ngFor="let sort of sortMintuesDates" [ngValue]="sort"> {{sort.name}} </option>
						</select>
				   </span>
					<span style="float:right; font-size: 13px;" *ngIf="sortInnerDates.length>0">
						<select style="cursor: pointer" [(ngModel)]="minutesinnerSort" (ngModelChange)="selectedDropdown(minutesinnerSort)">
							<option *ngFor="let sort of sortInnerDates; let i = index" [ngValue]="sort"> {{sort}} </option>
						</select>
				   </span>
				</div>
			</div>
			<div class="portlet-body">
				<div style="max-width: 100%; min-height: 300px;">
					<table style="width:100%;">
						<thead>
							<tr>
								<th style="color: #7a8082;font-weight: 600;">Name </th>
								<th style="color: #7a8082;font-weight: 600;">Views</th>
								<th style="color: #7a8082;font-weight: 600;">Minutes watched</th>
							</tr>
						</thead>
						<tbody>
							<ng-container *ngFor="let videoViews of viewsMinutesData; let i = index">
								<tr (click)="clickedMinutesWatched(videoViews.userId)">
									<td class="td-new td-chart" width="30%" height="10">{{videoViews.firstName}} {{videoViews.lastName}}</td>
									<td class="td-new td-chart td-color" [style.opacity]="(videoViews.views/viewsMaxValues)">{{videoViews.views}}</td>
									<td class="td-new td-chart">
										<div class="minutes-color" [style.width.%]="(videoViews.minutesWatched/maxValueViews)*100" [style.opacity]="(videoViews.minutesWatched/maxValueViews)">
											{{videoViews.minutesWatched}}</div>
									</td>
								</tr>
							</ng-container>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-12 col-sm-6 p5">
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-bar-chart font-green-sharp hide"></i>
					<span class="caption-subject font-green-sharp uppercase">VIEWING TRENDS</span>
          <!-- <span class="caption-helper">Details on played and skipped portions of your video</span> -->
          <span style="position: relative;cursor: pointer;color: #54a7e9;" title="Details on played and skipped portions of your video">
            <i class="fa fa-question-circle circle-custome-css" ></i>
         </span>
				</div>
			</div>
			<div class="portlet-body">
				<div id="video-skipped" style="max-width: 100%; min-height: 300px;"></div>
				<div *ngIf="videoPlayedSkipedInfo?.length < 1" style="max-width: 100%;text-align: center;">
						<span style="position: absolute;top: 130px;left: 220px;">No data available</span>
					</div>
			</div>
		</div>
	</div>

</div>
<div class="row">
	<div class="col-xs-12 col-sm-6 p5">
		<!-- BEGIN PORTLET-->
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-bar-chart font-green-sharp hide"></i>
					<span class="caption-subject font-green-sharp uppercase">video Views</span>
				</div>
				<div class="panel-title pull-right">
					<span style="float:right; font-size: 13px;">
					<select style="cursor: pointer" [(ngModel)]="daySort" (ngModelChange)="selectedCampaignWatchedUsers($event.value)">
						<option *ngFor="let sort of videoUtilService.sortMonthDates" [ngValue]="sort"> {{sort.name}} </option>
					</select>
				</span>
				</div>
			</div>
			<div class="portlet-body" style="min-height: 308px">
				<app-bar-chart *ngIf="viewsBarData" [viewsBarData]="viewsBarData" (notifyParent)="selectedCategoryValue($event)"></app-bar-chart>

			</div>
		</div>
		<!-- END PORTLET-->
	</div>
	<div class="col-xs-12 col-sm-6 p5">
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption">
					<span class="caption-subject font-red-sunglo">VIEWERSHIP MAP</span>
				</div>
			</div>
			<div class="portlet-body text-center">
				<app-worldmap *ngIf= "worldMapdataReport" [worldMapData]='worldMapdataReport' (notifyParent)="clickWorldMapReports($event)"></app-worldmap>
			</div>
		</div>
	</div>
</div>
<!--  model popup for donut video based report page  -->
<div class="modal fade" id="usersMinutesModelPopup" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-lg" role="document" style="width: 80%; margin: 1em auto">
		<div class="modal-content">
			<div class="modal-header">
				<!-- <button type="button" class="close" data-dismiss="modal" (click)="clearPaginationValues()"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button> -->
				<a class="close-circle" data-dismiss="modal" (click)="clearPaginationValues()"><i class="fa fa-times"></i></a>
				<h4 class="modal-title" style="text-align: center">Viewer details</h4>
				<div class="btn-group pull-right" style="margin-top: 4px; cursor:pointer; color: #7d8c98">
					<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -24px;margin-right: 27px; float:right;">
					<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i><i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
				</span>
					<ul class="dropdown-menu pull-right">
						<li><a id="delete_button" (click)="downloadLogs()"> Export To Excel </a></li>
					</ul>
				</div>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="table-responsive" style="padding: 0px 7px;">
						<table class="table tgrid">
							<thead>
								<tr>
									<th class="center text-uppercase headerCss">NAME</th>
									<!-- <th class="center text-uppercase headerCss">video Title</th> -->
									<th class="center text-uppercase headerCss">data and time</th>
									<th class="center text-uppercase headerCss">minutes watched</th>
									<th class="center text-uppercase headerCss">device</th>
									<th class="center text-uppercase headerCss">location</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let item of userMinutesWatched">
									<td>
										<app-user-info  [userInfo]="item"> </app-user-info>
									</td>
									<!-- <td class="center">{{item.videoTitle}}</td> -->
									<td class="center">{{item.date |date:'MM/dd/yyyy @ h:mma' }}</td>
									<td class="center">{{item.minutesWatched }}</td>
									<td class="center">
									<app-platform [userPlatform]="item"> </app-platform>
									</td>
									<td>
									<app-location  [userLocation]="item"> </app-location>
									</td>
								</tr>
							</tbody>
						</table>
						<!--pager here  -->
						<app-pagination *ngIf="pagination.pagedItems?.length > 0" [pagination]="pagination" [type]="'userMinutesWatched'" (notifyParent)="setPage($event)"
						(notifyParentDropDown)="paginationDropdown($event)"></app-pagination>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<app-export-csv *ngIf="referenceService.isDownloadCsvFile" [downloadListDetails]="downloadDataList" [downloadListName]="logListName"> </app-export-csv>

<!-- model popup for watched fully  -->
<div class="modal fade" id="watchedFullyModelPopup" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-lg" role="document" style="width: 80%; margin: 1em auto">
		<div class="modal-content">
			<div class="modal-header">
				<!-- <button type="button" class="close" data-dismiss="modal" (click)="clearPaginationValues()"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button> -->
				<a class="close-circle" data-dismiss="modal" (click)="clearPaginationValues()"><i class="fa fa-times"></i></a>
				<h4 class="modal-title m0 center">watched completely Reports</h4>
				<div class="btn-group pull-right" style="margin-top:4px; cursor:pointer; color: #7d8c98;margin-top:4px;">
					<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -24px;margin-right: 26px; float:right;">
					<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i><i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
				</span>
					<ul class="dropdown-menu pull-right">
						<li><a id="delete_button" (click)="downloadLogs()"> Export To Excel </a></li>
					</ul>
				</div>
			</div>
			<div class="modal-body">
				<div class="row">
					<div *ngIf="watchedFullyReportData?.length < 1" class="col-md-9 alert alert-info m0" style="width: 98%;position: relative;right: -10px;">
						<strong>No Records found</strong>
					</div>
					<div class="table-responsive" style="padding: 0px 7px;">
						<table class="table tgrid" *ngIf="watchedFullyReportData?.length > 0">
							<thead>
								<tr>
									<th class="center text-uppercase headerCss">NAME</th>
									<th class="center text-uppercase headerCss">Campaign Name</th>
									<th class="center text-uppercase headerCss">date and time</th>
									<th class="center text-uppercase headerCss">device</th>
									<th class="center text-uppercase headerCss">location</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let item of watchedFullyReportData">
									<td>
										<app-user-info  [userInfo]="item"> </app-user-info>
									</td>
									<td class="center">{{item.campaignName}}
									<h4 *ngIf="item.campaignName==null">-</h4>
									</td>
									<td class="center">{{item.time |date:'MM/dd/yyyy @ h:mma' }}</td>
									<td class="center">
									<app-platform [deviceTypeOs]="false" [userPlatform]="item"> </app-platform>
									</td>
									<td class="center">
									<app-location  [userLocation]="item"> </app-location>
									</td>
								</tr>
							</tbody>
						</table>
						<!--pager here  -->
						<app-pagination *ngIf="pagination.pagedItems?.length > 0" [pagination]="pagination" [type]="'watchedFully'" (notifyParent)="setPage($event)" (notifyParentDropDown)="paginationDropdown($event)"></app-pagination>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!--total minutes watched by top 10 most users -->
<div class="modal fade" id="totalwatchedUsersModelPopup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false"
 data-backdrop="static">
	<div class="modal-dialog" role="document" style="width: 80%; margin: 1em auto">
		<div class="modal-content">
			<div class="modal-header">
				<!-- <button type="button" class="close" data-dismiss="modal"
					aria-label="Close" >
					<span aria-hidden="true">&times;</span>
				</button> -->
				<a class="close-circle" data-dismiss="modal"><i class="fa fa-times"></i></a>
				<h4 align="center" class="m0">Total Minutes Watched By Top Recipients</h4>
				<div class="btn-group pull-right" style="margin-top: 10px; cursor:pointer; color: #7d8c98; margin-right:-15px;">
					<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -24px;margin-right: 21px; float:right;">
					<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i><i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
				</span>
					<ul class="dropdown-menu pull-right">
						<li><a id="delete_button" (click)="downloadLogs()"> Export To Excel </a></li>
					</ul>
				</div>
			</div>
			<div class="modal-body clearfix">
				<div class="table-responsive">
					<table class="table tgrid">
						<thead>
							<tr>
								<th class="center text-uppercase headerCss">NAME</th>
								<th class="center text-uppercase headerCss">MINUTES watched</th>
								<th class="center text-uppercase headerCss">DATE and time</th>
								<th class="center text-uppercase headerCss">DEVICE</th>
								<th class="center text-uppercase headerCss">LOCATION</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let item of totalUsersWatched">
								<td>
									<app-user-info  [userInfo]="item"> </app-user-info>
								</td>
								<td class="center">{{item.minutesWatched }}</td>
								<td class="center">{{item.date |date:'MM/dd/yyyy @ h:mma' }}</td>
								<td class="center">
								<app-platform [userPlatform]="item"> </app-platform>
								</td>
								<td class="center">
								<app-location  [userLocation]="item"> </app-location>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!-- video skipped and played durations -->
<div class="modal fade" id="videoSkippedPlayed" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-lg" role="document" style="width: 80%; margin: 1em auto">
		<div class="modal-content">
			<div class="modal-header">
				<a class="close-circle" data-dismiss="modal" (click)="clearPaginationValues()"><i class="fa fa-times"></i></a>
				<h4 class="modal-title" style="text-align: center">Viewing Trend Details</h4>
			</div>
			<div class="modal-body clearfix">
				<div class="row">
					<div style="text-align: center;font-size: 13px;text-transform: uppercase;">video Played Duration
						<div class="btn-group pull-right" style="margin-top: 4px; cursor:pointer; color: #7d8c98">
							<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -7px;margin-right: 21px; float:right;">
					<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i><i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
				</span>
							<ul class="dropdown-menu pull-right">
								<li><a id="delete_button" (click)="downloadTypeName = 'playedDuration'; downloadLogs()"> Export To Excel </a></li>
							</ul>
						</div>
					</div>
					<div class="table-responsive" style="padding: 11px; margin: -3px;">
						<table class="table tgrid" id="sample_editable_1">
							<thead>
								<tr>
									<th class="center headerCss">NAME</th>
									<th class="text-center headerCss">DATE and TIME</th>
									<th class="center headerCss">DEVICE</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let item of videoPlayedPagination.pagedItems;let i = index">
									<td>
										<app-user-info  [userInfo]="item"> </app-user-info>
									</td>
									<!--|date:'MM/dd/yyyy @ h:mma'  -->
									<td class="center">
										<h5>{{item.date |date:'MM/dd/yyyy @ h:mma'}}</h5>
									</td>
									<td class="center">
									<app-platform [userPlatform]="item"> </app-platform>
									</td>
								</tr>
							</tbody>
						</table>
						<app-pagination *ngIf="videoPlayedPagination.pagedItems?.length > 0" [pagination]="videoPlayedPagination" [type]="'videoPlayed'" (notifyParent)="setPage($event)" (notifyParentDropDown)="paginationDropdown($event)"></app-pagination>
					</div>
				</div>
				<div class="row">
					<div style="text-align: center;font-size: 13px;text-transform: uppercase;">video skipped duration
						<div class="btn-group pull-right" style="margin-top: 4px; cursor:pointer; color: #7d8c98">
							<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -7px;margin-right: 21px; float:right;">
						     <i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i>
						     <i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
				            </span>
							<ul class="dropdown-menu pull-right">
								<li><a id="delete_button" (click)="downloadTypeName = 'skippedDuration'; downloadLogs()"> Export To Excel </a></li>
							</ul>
						</div>
					</div>
					<div class="table-responsive" style="padding: 11px; margin: -3px;">
						<table class="table tgrid" id="sample_editable_1">
							<thead>
								<tr>
									<th class="center headerCss">NAME</th>
									<th class="text-center headerCss">DATE and TIME</th>
									<th class="center headerCss">DEVICE</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let item of pagination.pagedItems;let i = index">
									<td>
										<app-user-info  [userInfo]="item"> </app-user-info>
									</td>
									<!--|date:'MM/dd/yyyy @ h:mma'  -->
									<td class="center">
										<h5>{{item.date |date:'MM/dd/yyyy @ h:mma' }}</h5>
									</td>
									<td class="center">
									<app-platform [userPlatform]="item"> </app-platform>
									</td>
								</tr>
							</tbody>
						</table>
						<app-pagination *ngIf="pagination.pagedItems?.length > 0" [pagination]="pagination" [type]="'videoSkipped'" (notifyParent)="setPage($event)" (notifyParentDropDown)="paginationDropdown($event)"></app-pagination>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!-- campagin world map users info  -->
<div class="modal fade" id="worldMapModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false"
 data-backdrop="static">
	<div class="modal-dialog" role="document" style="width: 80%; margin: 1em auto">
		<div class="modal-content">
			<div class="modal-header">
				<a class="close-circle" data-dismiss="modal" (click)="clearPaginationValues()"><i class="fa fa-times"></i></a>
				<h4 class="m0" style="text-align: center">Recipients who have watched video</h4>
				<div class="btn-group pull-right" style=" margin-top: 11px; margin-right: -15px;cursor:pointer; color: #7d8c98">
					<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -24px;margin-right: 21px; float:right;">
					<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i><i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
				</span>
					<ul class="dropdown-menu pull-right">
						<li><a id="delete_button" (click)="downloadLogs()"> Export To Excel </a></li>
					</ul>
				</div>
			</div>
			<div class="modal-body clearfix">
				<div class="table-responsive">
					<table class="table tgrid">
						<thead>
							<tr>
								<th class="headerCss">NAME</th>
								<th class="headerCss">CAMPAIGN NAME</th>
								<th class="headerCss">DATE and TIME</th>
								<th class="headerCss">DEVICE</th>
								<th class="headerCss">LOCATION</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let item of worldMapCampaignUsersInfo;let i = index">
								<td>
									<app-user-info  [userInfo]="item"> </app-user-info>
								</td>
								<td class="center">
									<h5>{{item.campaignName}}</h5>
									<h4 *ngIf="item.campaignName==null">-</h4>
								</td>
								<!-- |date:'MM/dd/yyyy @ h:mma' -->
								<td class="center">
									<h5>{{item.time |date:'MM/dd/yyyy @ h:mma' }}</h5>
								</td>
								<td class="center">
								<app-platform [deviceTypeOs]="true" [userPlatform]="item"> </app-platform>
								</td>
								<td class="center">
									<app-location  [userLocation]="item"> </app-location>
								</td>
							</tr>
						</tbody>
					</table>
					<app-pagination *ngIf="pagination.pagedItems?.length > 0" [pagination]="pagination" [type]="'coutrywiseUsers'" (notifyParent)="setPage($event)" (notifyParentDropDown)="paginationDropdown($event)"></app-pagination>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal" (click)="clearPaginationValues()">Close</button>
			</div>
		</div>
	</div>
</div>
