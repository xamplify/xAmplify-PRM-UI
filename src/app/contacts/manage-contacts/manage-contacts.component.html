<style type="text/css">
  a.disabled { pointer-events: none; cursor: not-allowed; }
.custom-error-message {
    padding: 5px;
    border: 1px solid rgba(255, 0, 0, 0.21);
    color: rgba(255, 0, 0, 0.7);
    margin: 5px 0;
    text-transform: capitalize;
}
</style>
<div class="page-content">
<!-- page-breadcrumb -->
<div class="page-bar">
	<ul class="page-breadcrumb">
		<li><i class="fa fa-home"></i> 
			<a [routerLink]="['../../dashboard']">Home</a> 
			<i class="fa fa-angle-right"></i>
		</li>
		<li>
			<a (click)="showListOfContactList= true">Manage Contacts</a> 
			<i class="fa fa-angle-right"></i>
		</li>
		<li>{{contactsByType.selectedCategory}} Contacts</li>
	</ul>
</div>

<div id="manageContacts" *ngIf="showListOfContactList">
	<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
	<div *ngIf="show" id="showMessage"
		class="alert alert-success alert-dismissable">
		<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
		<strong>Success!</strong> Contact List has been created successfully.
	</div>
	<div *ngIf="deleteUserSucessMessage" id="showDeleteUserMessage"
			class="alert alert-success alert-dismissable">
			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<strong>Success!</strong> Contact List has been Deleted successfully.
		</div>
 <div *ngIf="showAll">
	<!-- END PAGE HEADER-->
	<!-- BEGIN PAGE CONTENT-->
	<div>
		<div class="row">
			<div class="col-md-12">
				<div class="tabbable tabbable-custom tabbable-noborder">

					<div class="tab-content">
						<div class="tab-pane active">
							<!-- BEGIN FILTER -->

							<div class="page-bar">
								<ul class="page-breadcrumb">
									<li><i style="font-size: 16px;">List of Contacts</i></li>

								</ul>
								<div class="page-toolbar">
									<div class="btn-group pull-right">
										<div class="inputs" align="right" style="float: right">
											<div style="float: left; margin-right: 10px; width:50%">
												<select class="form-control" [(ngModel)]="contactsSort"
													(ngModelChange)="selectedSortByValue($event)">
													<option *ngFor="let sort of sortContacts" [ngValue]="sort">
														{{sort.name}}</option>
												</select>
											</div>
											<div class="portlet-input input-inline input-small">
												<div class="input-icon right">
													<i class="icon-magnifier"
														style="cursor: pointer; font-size: 18px;"
														(click)="searchContactTitelName()"></i> <input type="text"
														[(ngModel)]="searchKey"
														[ngModelOptions]="{standalone: true}"
														class="form-control input-circle" placeholder="search...">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- END DASHBOARD STATS -->
							<div class="clearfix"></div>

							<div class="row">
								<div class="col-lg-3 col-md-2 col-sm-3 col-xs-6">
									<a class="dashboard-stat dashboard-stat-light blue-soft" (click)="listContactsByType('all')">
										<div class="visual"><i class="fa fa-users"></i></div>
										<div class="details">
											<div class="number">{{contactsByType.allContactsCount}}</div>
											<div class="desc">All Contacts</div>
										</div>
									</a>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-3 col-xs-6">
									<a class="dashboard-stat dashboard-stat-light red-soft" (click)="listContactsByType('active')">
										<div class="visual"><i class="fa fa-eye"></i></div>
										<div class="details">
											<div class="number">{{contactsByType.activeContactsCount}}</div>
											<div class="desc">Active Contacts</div>
										</div>
									</a>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-3 col-xs-6">
									<a class="dashboard-stat dashboard-stat-light yellow-gold" (click)="listContactsByType('invalid')">
										<div class="visual"><i class="fa fa-user-times"></i></div>
										<div class="details">
											<div class="number">{{contactsByType.invalidContactsCount}}</div>
											<div class="desc">Invalid Contacts</div>
										</div>
									</a>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-3 col-xs-6">
									<a class="dashboard-stat dashboard-stat-light green-soft" (click)="listContactsByType('unsubscribe')">
										<div class="visual"><i class="fa fa-times"></i></div>
										<div class="details">
											<div class="number">{{contactsByType.unsubscribedContactsCount}}</div>
											<div class="desc">Unsubscribed Contacts</div>
										</div>
									</a>
								</div>
								<div class="col-lg-3 col-md-2 col-sm-3 col-xs-6" >
									<a class="dashboard-stat dashboard-stat-light blue-sharp" (click)="listContactsByType('non-active')">
										<div class="visual"><i class="fa fa-eye-slash"></i></div>
										<div class="details">
											<div class="number">{{contactsByType.inactiveContactsCount}}</div>
											<div class="desc">Inactive Contacts</div>
										</div>
									</a>
								</div>
							</div>
							<!-- END DASHBOARD STATS -->
							<div class="clearfix"></div>
						</div>
						<!-- END FILTER -->
					</div>
				</div>
			</div>
		</div>
		<div *ngIf="emptyContacts" class="alert alert-info">
			<strong>Info!</strong> No Contact Lists found please add the contact
			lists.
		</div>
		<div *ngIf="deleteSucessMessage" id="showDeleteMessage"
			class="alert alert-success alert-dismissable">
			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<strong>Success!</strong> Contact List has been Deleted successfully.
		</div>
		<div *ngIf="deleteErrorMessage" id="campaignError"
			class="alert alert-danger alert-dismissable">
			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<strong>Danger!</strong>{{Campaign}}
		</div>
		<div *ngIf="synchronizationSucessMessage" id="showSynchronizeMessage"
			class="alert alert-success alert-dismissable">
			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<strong>Success!</strong> Contact List has been Synchronized
			successfully.
		</div>
		<div *ngIf="zohoAuthStorageError" class="col-xs-12 alert alert-danger">
								<span>{{zohoAuthStorageError}}</span>
							</div>
		<div *ngIf="isvideoThere==true" class="col-md-6" class="col-md-9 alert alert-info" style="width:100%">
						      <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
						           <strong>No Contact lists found.. !!!</strong>
			                </div>
		<app-loader *ngIf="httpRequestLoader.isLoading"></app-loader>               
		<div class="row mix-grid" style="margin-top: 10px">
			<div *ngFor="let contactList of pagination.pagedItems">
				<div class="col-md-3 col-sm-6 mix category_1 mix_all"
					style="display: block; opacity: 1;"
					id="contactListDiv_{{contactList.id}}">
					<div class="mix-inner">
						<img class="img-responsive"
							*ngIf="contactList.socialNetwork=='ZOHO'" src="{{zohoImage}}"
							alt=""> <img class="img-responsive"
							*ngIf="contactList.socialNetwork=='GOOGLE'" src="{{googleImage}}"
							alt=""> <img class="img-responsive"
							*ngIf="contactList.socialNetwork=='SALESFORCE'"
							src="{{salesforceImage}}" alt=""> <img
							class="img-responsive"
							*ngIf="contactList.socialNetwork=='MANUAL'" src="{{normalImage}}"
							alt="">
						<div class="mix-details-fill">
							<!--  <div id="container" *ngIf="contactList.socialNetwork=='ZOHO'">
       						 <h3> ZOHO <span class="arrow"></span> </h3>
   						 </div>
   						 <div id="container" *ngIf="contactList.socialNetwork=='GOOGLE'">
       						 <h3> GOOGLE <span class="arrow"></span> </h3>
   						 </div>
   						 <div id="container" *ngIf="contactList.socialNetwork=='SALESFORCE'">
       						 <h3> SALESFORCE <span class="arrow"></span> </h3>
   						 </div>
   						 <div id="container" *ngIf="contactList.socialNetwork=='MANUAL'">
       						 <h3> MANUAL <span class="arrow"></span> </h3>
   						 </div> -->
							<!-- <div class="ribbon" *ngIf="contactList.socialNetwork=='ZOHO'"><span>ZOHO</span></div>
					<div class="ribbon" *ngIf="contactList.socialNetwork=='GOOGLE'"><span>GOOGLE</span></div>
					<div class="ribbon" *ngIf="contactList.socialNetwork=='SALESFORCE'"><span>SALESFORCE</span></div> -->
							<h4 style="top: 10%; position: relative;">{{contactList.name}}</h4>
							<div style="top: 12%; position: relative;">
								<a class="mix-preview5" (click)="downloadContactList(contactList.id)"
									title="Dowload List" data-rel="fancybox-button"> <i
									class="fa fa-cloud-download"></i>
								</a> <a class="mix-preview4"
									(click)="editContactList(contactList.id)" title="Edit List"
									data-rel="fancybox-button"> <i
									class="fa fa-pencil-square-o"></i>
								</a> <a class="mix-preview6"
									(click)="showAlert(contactList.id)" title="Delete List"
									data-rel="fancybox-button" lang="{{contactList.id}}"> <i
									class="fa fa-trash"></i>
								</a>
								<!-- <a class="mix-preview3 fancybox-button"
								title="Edit List"
								data-rel="fancybox-button"> <i class="fa fa-refresh" aria-hidden="true"></i>
							</a> -->
							</div>
							<div style="top: 38%; position: relative;"
								*ngIf="contactList.synchronisedList == true">
								<a class="mix-preview2"
									title="sychronizeContactList"
									(click)="synchronizeContactList(contactList.id,contactList.socialNetwork)"
									data-rel="fancybox-button" style="left: 38%;"> <i
									class="fa fa-refresh" aria-hidden="true"></i>
								</a>
							</div>
						<!-- 	<div style="top: 38%; position: relative;"
								*ngIf="contactList.synchronisedList == true">
								<a class="mix-preview2"
									title="sychronizeZohoContactList" (click)="zohoContactsSyncronize(contactList.id)"
									  data-rel="fancybox-button"
									style="left: 38%;"> <i class="fa fa-refresh"
									aria-hidden="true"></i>
								</a>
							</div>
							<div style="top: 38%; position: relative;"
								*ngIf="contactList.synchronisedList == true">
								<a class="mix-preview2"
									title="sychronizeSalesforceContactList"
									(click)="salesforceContactsSynchronizationAuthentication(contactList.id)"
									data-rel="fancybox-button" style="left: 38%;"> <i
									class="fa fa-refresh" aria-hidden="true"></i>
								</a>
							</div> -->

							<span align="right"
								style="bottom: 10px; float: right; position: absolute; right: 10px;">Created
								Date <br>{{contactList.createdDate}}
							</span> <span align="left"
								style="bottom: 10px; left: 10px; position: absolute;">Contacts
								<br> {{contactList.noOfContacts}}
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	<div id="pagination">
		<!--pager here  -->
		<ul *ngIf="pagination.pager.pages && pagination.pager.pages.length"
			class="pagination">
			<li [ngClass]="{disabled:pagination.pager.currentPage === 1}"><a
				(click)="setPage(1)" [class.disabled]="pagination.pager.currentPage === 1">First</a></li>
			<li [ngClass]="{disabled:pagination.pager.currentPage === 1}"><a
				(click)="setPage(pagination.pager.currentPage - 1)" [class.disabled]="pagination.pager.currentPage === 1">Previous</a></li>
			<li *ngFor="let page of pagination.pager.pages"
				[ngClass]="{active:pagination.pager.currentPage === page}"><a
				(click)="setPage(page)">{{page}}</a></li>
			<li
				[ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
				<a (click)="setPage(pagination.pager.currentPage + 1)" [class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Next</a>
			</li>
			<li
				[ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
				<a (click)="setPage(pagination.pager.totalPages)" [class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Last</a>
			</li>
		</ul>
		<!-- pager end here -->
	</div>
	<app-edit-contacts *ngIf="showEdit" [contacts]="users"(notifyParent)="update($event)"
		[selectedContactListId]="selectedContactListId"
		[contactListId]="selectedContactListId"></app-edit-contacts>
</div>


<div *ngIf="! showListOfContactList">
	<div class="page-bar">


	</div>
	<div *ngIf="invalidDeleteSucessMessage" id="showDeleteMessage"
		class="alert alert-success alert-dismissable">
		<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
		<strong>Success!</strong> Contact List has been Deleted successfully.
	</div>
	<div *ngIf="noContactsFound==true" class="col-md-6" class="col-md-9 alert alert alert-danger alert-dismissable">
						      <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
						           <strong>No Contact found.. !!!</strong>
			                </div>
	<div class="row">
		<div class="col-md-12">
			<div class="tabbable tabbable-custom tabbable-noborder">

				<div class="tab-content">
					<!-- BEGIN PAGE HEADER-->
					<div class="page-bar" style="margin-bottom: 6px">
						<ul class="page-breadcrumb">
							<li>{{contactsByType.selectedCategory}} Contacts</li>
						</ul>
						<div class="page-toolbar">
							<div class="btn-group pull-right">
								<div class="inputs" align="right" style="float: right">
									<div style="float: left; margin-right: 10px">
										<select class="form-control" [(ngModel)]="contactsUsersSort"
											(ngModelChange)="userSelectedSortByValue($event)">
											<option *ngFor="let sort of sortContactUsers"
												[ngValue]="sort">{{sort.name}}</option>
										</select>
									</div>
									<div class="portlet-input input-inline input-small">
										<div class="input-icon right">
											<i class="icon-magnifier"
												style="cursor: pointer; font-size: 18px;"
												(click)="searchContactTitelName()"></i> <input type="text"
												[(ngModel)]="searchKey"
												[ngModelOptions]="{standalone: true}"
												class="form-control input-circle" placeholder="search...">

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="tab-pane active">
					</div>
					<div class="row">
						<form #f="ngForm" class="form-inline" *ngIf="contactsByType.selectedCategory == 'all'">
							<div class="contact-list-form">
								<div class="col-xs-12 col-sm-6">
									<div class="form-group">
									    <label for="name" class="col-xs-12 col-sm-5 control-label">Contact List Name *</label>
									    <div class="col-xs-12 col-sm-7">
									     <input type="text" autocomplete="off" class="form-control" id="contactListName"
										 required [(ngModel)]="model.contactListName" name="contactListName"
										minlength="1" (input)="validateContactName(model.contactListName)"
										placeholder="Contact List Name" #contactListName="ngModel">
									    <!-- Validation Messages -->
									    <div *ngIf="isValidContactName">
									    	<p class="custom-error-message">Contact List Name Already Exists</p>
									    </div>
										<div *ngIf="contactListNameError">
									    	<p class="custom-error-message">Please Enter the ContactList Name.</p>
									  	</div>
										<div *ngIf="contactListUsersError">
									    	<p class="custom-error-message">Please Select the contacts.</p>
									  	</div>
									    </div>
									  </div>
								</div>
								<div class="col-xs-12 col-sm-6">
									<section class="pull-right" style="margin-bottom: 10px;margin-top: 3px;">
										<button id="sample_editable_1_new" class="btn green"
											(click)="saveSelectedUsers()" [disabled] = "isValidContactName||noSaveButtonDisable">
											 Save <i class="fa fa-save"></i>
										</button>
										<button id="cancel_button" class="btn green"
											(click)="cancelAllContactsCancel()">
											Cancel<i class="fa fa-cancel"></i>
										</button>
									</section>
								</div>
							</div>
						</form>
<div class="col-xs-12">
	<div *ngIf="contactsByType.contacts?.length == 0" class="alert alert-info">
		<h4>No Contacts found!</h4>
	</div>
	<div class="portlet box blue" *ngIf="contactsByType.contacts?.length > 0">
		<div class="portlet-title">
			<div class="caption">
				<i class="fa fa-edit"></i>{{contactsByType.selectedCategory}} Contacts List
			</div>
		</div>
		<div class="portlet-body">
		<div class="table-toolbar" *ngIf="contactsByType.contacts?.length > 0">
			<div class="row">
				<div class="col-xs-12">
					<div class="btn-group pull-left">
						<select class="opts form-control" id="salesforce-dropdown-1" (change)="onChangeAllContactUsers($event)">
				    			<option selected value="page">10</option>
				   	 			<option value="all"> All </option>
	       				</select>
					</div>	
					<div class="btn-group pull-right" *ngIf="contactsByType.selectedCategory == 'invalid'">
						<button class="btn dropdown-toggle" data-toggle="dropdown">
							Tools <i class="fa fa-angle-down"></i>
						</button>
						<ul class="dropdown-menu pull-right">
							<li>
								<a id="delete_button" (click)="invalidContactsShowAlert()">Delete</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		 <div class="table-responsive">
			<table class="table table-striped table-hover table-bordered">
				<thead>
					<tr>
						<th>Select</th>
						<th>EMAILID</th>
						<th>FIRSTNAME</th>
						<th>LASTNAME</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let contact of contactsByType.contacts; let i = index">
						<td><input type="checkbox"></td>
						<td>{{contact.emailId}}</td>
						<td>{{contact.firstName}}</td>
						<td>{{contact.lastName}}</td>
					</tr>
				</tbody>
			</table>
			<ul *ngIf="contactsByType.pagination.pager.pages && contactsByType.pagination.pager.pages.length" class="pagination">
				<li [ngClass]="{disabled:contactsByType.pagination.pager.currentPage === 1}">
					<a (click)="setPageForListContactsByType(1,contactsByType.selectedCategory)" [class.disabled]="contactsByType.pagination.pager.currentPage === 1">First</a>
				</li>
				<li [ngClass]="{disabled:contactsByType.pagination.pager.currentPage === 1}">
					<a
					(click)="setPageForListContactsByType(contactsByType.pagination.pager.currentPage - 1,contactsByType.selectedCategory)" [class.disabled]="contactsByType.pagination.pager.currentPage === 1">Previous</a>
				</li>
				<li *ngFor="let page of contactsByType.pagination.pager.pages"
					[ngClass]="{active:contactsByType.pagination.pager.currentPage === page}">
					<a (click)="setPageForListContactsByType(page,contactsByType.selectedCategory)">{{page}}</a>
				</li>
				<li
					[ngClass]="{disabled:contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages}">
					<a
					(click)="setPageForListContactsByType(contactsByType.pagination.pager.currentPage + 1,contactsByType.selectedCategory)" [class.disabled]="contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages">Next</a>
				</li>
				<li
					[ngClass]="{disabled:contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages}">
					<a
					(click)="setPageForListContactsByType(contactsByType.pagination.pager.totalPages,contactsByType.selectedCategory)" [class.disabled]="contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages">Last</a>
				</li>
			</ul>
		</div>
		</div>
	</div>
</div>
					</div>
					<!-- END PAGE CONTENT -->
				</div>
			</div>
		</div>
	</div>
</div>

</div>


<!-- END PAGE CONTENT-->

