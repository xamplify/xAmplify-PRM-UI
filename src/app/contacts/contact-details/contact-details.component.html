<div class="page-content row mr0" *ngIf="!viewLeads && !showLeadForm && !showDealForm && !viewDeals && !showCompanyCampaigns && !showAskOliverModalPopup">
  <div class="page-bar mb-height_auto" style="height:48px;">
    <ul class="page-breadcrumb">
      <li><i class="fa fa-home" aria-hidden="true"></i>
        <a [routerLink]="referenceService?.homeRouter" translate>Home</a>
        <i class="fa fa-angle-right" aria-hidden="true"></i>
      </li>
      <li *ngIf="!isFromCompanyModule && !isCompanyJourney && !isFromCompanyJourney && !isFromCompanyJourneyEditContacts">
        <a (click)="backToManageContacts()" translate> Manage Contacts
        </a>
      </li>
      <li *ngIf="isFromCompanyModule || isCompanyJourney || isFromCompanyJourney || isFromCompanyJourneyEditContacts">
        <a translate [routerLink]="companyRouter">Manage Companies</a>
      </li>
      <li *ngIf="isFromCompanyJourneyEditContacts">
        <a (click)="backToCompanyJourney()" translate>
          <i class="fa fa-angle-right" aria-hidden="true"></i>Company Journey
        </a>
      </li>
      <li *ngIf="(isFromEditContacts && !isFromCompanyJourney) || isFromCompanyJourneyEditContacts">
        <a (click)="backToEditContacts()" translate>
          <i class="fa fa-angle-right" aria-hidden="true"></i>Edit Contacts
        </a>
      </li>
      <li *ngIf="isFromCompanyJourney">
        <a (click)="backToCompanyJourney()" translate>
          <i class="fa fa-angle-right" aria-hidden="true"></i>Company Journey
        </a>
      </li>
      <li>
        <a translate>
          <i class="fa fa-angle-right" aria-hidden="true"></i>{{isCompanyJourney ? 'Company' : 'Contact' }} Journey
        </a>
      </li>
    </ul>
  </div>
  <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
  <div class="portlet light card1_p0 overflow_scroll">
  <div class="details_flex details_profile_b">
    <div class="profile-sidebar d-flex" [ngClass]="{ 'asidebar-closed': !isProfileSidebarOpen }">
      <ngx-loading [show]="isLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
      <ngx-loading [show]="ngxLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
      <div class="profile-leftsidebar">
        <div class="edit_contact">
          <!-- Header 1 -->
          <div class="profile_headers">
            <div [ngClass]="showImageTag ? 'avatar2_v2' : 'avatar2'">
              <span *ngIf="!showImageTag && !imgPathLoading && !isCompanyJourney" class="avatar-initial">{{highlightLetter}}</span>
              <img *ngIf="showImageTag && !imgPathLoading" class="img_wdt" src="{{imageSourcePath}}" alt="">
              <img *ngIf="imgPathLoading" class="h-50px" src="../../../assets/images/Spinner.gif" alt="">
              <img *ngIf="isCompanyJourney && !showImageTag && !imgPathLoading" class="h-50px" src="assets/admin/pages/media/works/company.png" alt="">
            </div>
            <div class="profile_info">
              <div>
                <i *ngIf="!isCompanyJourney" class="fas fa-user mr_6 icons_colors" aria-hidden="true"></i>
                <i *ngIf="isCompanyJourney" class="fas fa-building mr_6 icons_colors" aria-hidden="true"></i>
                <span *ngIf="contactName != undefined && contactName != '' && !isLoading" data-toggle="tooltip" data-placement="bottom" title="{{contactName || ''}}">
                  {{referenceService?.isHarizontalNavigationBar ? (contactName | slice:0:15) : (contactName | slice:0:9)}}<span *ngIf="contactName != undefined && (referenceService?.isHarizontalNavigationBar ? contactName?.length>15 : contactName?.length>9)">..</span>
                </span>
                <span *ngIf="contactName == undefined || contactName == ''" class="anonymous-text">Anonymous</span>
                <i class="fa fa-edit ml_6" (click)="editContactDetails(selectedContact)" aria-hidden="true"></i>
              </div>
              <span class="email-id" *ngIf="selectedContact?.emailId && !isCompanyJourney">
                <p data-toggle="tooltip" data-placement="bottom" title="{{selectedContact?.emailId}}">
                  <i class="fa fa-envelope mr_6 icons_colors"></i>{{referenceService?.isHarizontalNavigationBar ?(
                  selectedContact?.emailId | slice:0:21) : (selectedContact?.emailId | slice:0:15)}}<span
                    *ngIf="(referenceService?.isHarizontalNavigationBar ? selectedContact?.emailId?.length>21 : selectedContact?.emailId?.length>15)">..</span>
              
                  <button class="copy-btn" #textEmail value="{{selectedContact?.emailId}}" (click)="copyEmail(textEmail)">
                    <i *ngIf="isEmailCopied" class="fa fa-check ml_6" aria-hidden="true"></i><i *ngIf="!isEmailCopied"
                      class="fa fa-clone ml_6" aria-hidden="true"></i></button>
                </p>
              </span>
             <span class="email-id" *ngIf="selectedContact?.website && isCompanyJourney">
                <p data-toggle="tooltip" data-placement="bottom" title="{{selectedContact?.website}}">
                  <i class="fa fa-globe mr_6 icons_colors"></i><a href="{{selectedContact?.website}}"
                    target="_blank">{{referenceService?.isHarizontalNavigationBar ?(
                    selectedContact?.website | slice:0:21) : (selectedContact?.website | slice:0:15)}}<span
                      *ngIf="(referenceService?.isHarizontalNavigationBar ? selectedContact?.website?.length>21 : selectedContact?.website?.length>15)">..</span></a>
              
                  <button class="copy-btn" #textEmail value="{{selectedContact?.website}}" (click)="copyEmail(textEmail)">
                    <i *ngIf="isEmailCopied" class="fa fa-check ml_6" aria-hidden="true"></i><i *ngIf="!isEmailCopied"
                      class="fa fa-clone ml_6" aria-hidden="true"></i></button>
                </p>
              </span> 
              <span *ngIf="selectedContact?.mobileNumber != undefined && selectedContact?.mobileNumber != ''" class="email-id">
                <p data-toggle="tooltip" data-placement="bottom" *ngIf="!isLoading"
                  title="{{ validateMobileNumber(selectedContact?.mobileNumber) ? (selectedContact?.mobileNumber + ' - Invalid Mobile Number') : selectedContact?.mobileNumber }}">
                  <i class="fa fa-phone mr_6 icons_colors"></i>
                  <span [ngClass]="{'required': validateMobileNumber(selectedContact?.mobileNumber)}" style="font-size:12px;">{{selectedContact.mobileNumber}}</span>
                  <button class="copy-btn" #textMobile value="{{selectedContact?.mobileNumber}}"
                    (click)="copyMobileNumber(textMobile)">
                    <i *ngIf="isMobileNumberCopied" class="fa fa-check ml_6" aria-hidden="true"></i>
                    <i *ngIf="!isMobileNumberCopied" class="fa fa-clone ml_6" aria-hidden="true"></i></button>
                </p>
              </span>
            </div>
          </div>
          <!--  -->
          <!-- Start -->
          <div class="icon_group" *ngIf="isCompanyJourney">
            <!-- tiles one -->
            <a class="icon_item count_one" [ngClass]="(formattedContactsCount != undefined && formattedContactsCount != '0' && !contactsResponse.isVisible) ? '' : 'disabled'" (click)="(formattedContactsCount != undefined && formattedContactsCount != '0' && !contactsResponse.isVisible) ? viewMoreContacts() : ''">
              <i aria-hidden="true" class="fa fa-id-card dbiconscss company_icon"></i>
              <div>
                <span class="icon_btns count_1">{{formattedContactsCount}}</span>
                <div class="icon_label">Contacts</div>
              </div>
            </a>
            <!-- tiles two -->
            <a class="icon_item count_two" [ngClass]="(formattedLeadsCount != undefined && formattedLeadsCount != '0' && !leadsResponse.isVisible) ? '' : 'disabled'" (click)="(formattedLeadsCount != undefined && formattedLeadsCount != '0' && !leadsResponse.isVisible) ? viewMoreLeads() : ''">
              <i aria-hidden="true" class="fa fa-user-circle company_icon"></i>
              <div>
                <span class="icon_btns count_1">{{formattedLeadsCount}}</span>
                <div class="icon_label">Leads</div>
              </div>
            </a>
            <!-- tiltes three -->
            <a class="icon_item count-three" [ngClass]="(formattedDealsCount != undefined && formattedDealsCount != '0' && !dealsResponse.isVisible) ? '' : 'disabled'" (click)="(formattedDealsCount != undefined && formattedDealsCount != '0' && !dealsResponse.isVisible) ? viewMoreDeals() : ''">
              <i aria-hidden="true" class="fa fa-tags company_icon"></i>
              <div>
                <span *ngIf="!dealAmountLoader?.isLoading" class="icon_btns count_1">{{totalDealAmount}}</span>
                <img *ngIf="dealAmountLoader?.isLoading" class="total_deal_amount_loader" src="../../../assets/images/Spinner.gif" alt="">
                <div class="icon_label"><span class="bold">{{formattedDealsCount}}</span> Deals</div>
              </div>
            </a>
            <!-- tiles four -->
            <a class="icon_item count_four" [ngClass]="(formattedCampaignsCount != undefined && formattedCampaignsCount != '0' && !campaignsResponse.isVisible) ? '' : 'disabled'" (click)="(formattedCampaignsCount != undefined && formattedCampaignsCount != '0' && !campaignsResponse.isVisible) ? viewMoreCampaigns() : ''">
              <i aria-hidden="true" class="fa fa-bullhorn dbiconscss company_icon"></i>
              <div>
                <span class="icon_btns count_1">{{formattedCampaignsCount}}</span>
                <div class="icon_label">Campaigns</div>
              </div>
            </a>
          </div>
          <!-- End -->
          <div class="icon-group">
            <div class="icon-item" (click)="openAddNoteModalPopup()">
              <div class="icon-btns" data-toggle="tooltip" data-placement="top" title="Add a Notes">
                <i class="glyphicon glyphicon-pencil"></i>
              </div>
              <div class="icon-label">Notes</div>
            </div>
            <div class="icon-item" (click)="openEmailModalPopup()">
              <div class="icon-btns" data-toggle="tooltip" data-placement="top" title="Send an Email">
                <i class="glyphicon glyphicon-envelope"></i>
              </div>
              <div class="icon-label">Email</div>
            </div>
            <div class="icon-item" (click)="openTaskModalPopup()">
              <div class="icon-btns" data-toggle="tooltip" data-placement="top" title="Add a Task">
                <i class="glyphicon glyphicon-file"></i>
              </div>
              <div class="icon-label">Task</div>
            </div>
            <div class="icon-item" (click)="openMeetingModalPopup()">
              <div class="icon-btns" data-toggle="tooltip" data-placement="top" title="Schedule a Meeting">
                <i *ngIf="!ngxLoading" class="glyphicon glyphicon-calendar"></i>
                <img *ngIf="ngxLoading" class="h-50px" src="../../../assets/images/Spinner.gif" alt="">
              </div>
              <div class="icon-label">Meeting</div>
            </div>
            <div class="icon-item" (click)="openDialNumber()">
              <div class="icon-btns" data-toggle="tooltip" data-placement="top" title="Make a Call">
                <i class="glyphicon glyphicon-phone"></i>
              </div>
              <div class="icon-label">Call</div>
            </div>
            <div class="icon-item mt10" *ngIf="!isCompanyJourney && authenticationService?.isOliverActive && (authenticationService?.oliverContactAgentEnabled && showOliverContactAgent)" data-toggle="tooltip" data-placement="top"
              title="Ask Oliver" (click)="askOliver()">
              <div class="icon-btns">
                <img src="assets/images/oliverAiLogo.svg" alt="Oliver Icon" class="oliveImg">
              </div>
              <div class="icon-label">Ask Oliver</div>
            </div>
          </div>
          <!-- end -->
        </div>
        <!-- Header-contacts-Details start-->
        <div class="lead_details">
          <h3>{{isCompanyJourney ? 'Company' : 'Contact'}} Details:
            <a data-toggle="collapse" (click)="toggleClass('account-details-icon')" style="float: right;"
              href="javascript:;#accountDetailsDropdown">
              <i id="account-details-icon" class="fa fa-minus" aria-hidden="true"></i>
            </a>
            <ul id="accountDetailsDropdown" class="nav collapse in">
              <li *ngIf="!isCompanyJourney"><i class="fas fa-building"></i>
                <div class="user_details">
                  <span class="address_title">Company:</span>
                  <a class="add-btn underline-on-hover" (click)="viewCompanyJourney()"><span *ngIf="selectedContact?.contactCompany != undefined && selectedContact?.contactCompany != ''" class="mb0">{{selectedContact?.contactCompany}}
                  </span></a>
                  <span *ngIf="selectedContact?.contactCompany == undefined || selectedContact?.contactCompany == ''" class="mb0"> --</span>
                </div>
              </li>
              <li *ngIf="!isCompanyJourney"><i class="fas fa-briefcase"></i>
                <div class="user_details">
                  <span class="address_title">Job Title:</span>
                  <span *ngIf="selectedContact?.jobTitle != undefined && selectedContact?.jobTitle != ''" class="mb0">{{selectedContact?.jobTitle}}</span>
                  <span *ngIf="selectedContact?.jobTitle == undefined || selectedContact?.jobTitle == ''" class="mb0"> --</span>
                </div>
              </li>
              <li *ngIf="isCompanyJourney"><i class="fas fa-envelope"></i>
                <div class="user_details">
                  <span class="address_title">Email Id:</span>
                  <span *ngIf="selectedContact?.emailId != undefined && selectedContact?.emailId != ''" class="mb0">{{selectedContact?.emailId}}</span>
                  <span *ngIf="selectedContact?.emailId == undefined || selectedContact?.emailId == ''" class="mb0"> --</span>
                </div>
              </li>
              <li><i class="fas fa-map-marker-alt pd_lft2"></i>
                <div class="user_details pd_lft2">
                  <span class="address_title">Address:</span>
                  <span *ngIf="selectedContact?.address != undefined && selectedContact?.address != ''" class="mb0">{{selectedContact?.address}}</span>
                  <span *ngIf="selectedContact?.address == undefined || selectedContact?.address == ''" class="mb0"> --</span>
                </div>
              </li>
              <li><i class="fas fa-city"></i>
                <div class="user_details">
                  <span class="address_title">City:</span>
                  <span *ngIf="selectedContact?.city != undefined && selectedContact?.city != ''" class="mb0">{{selectedContact?.city}}</span>
                  <span *ngIf="selectedContact?.city == undefined || selectedContact?.city == ''" class="mb0"> --</span>
                </div>
              </li>
              <li><i class="fas fa-map"></i>
                <div class="user_details">
                  <span class="address_title">State/Province:</span>
                  <span *ngIf="selectedContact?.state != undefined && selectedContact?.state != ''" class="mb0">{{selectedContact?.state}}</span>
                  <span *ngIf="selectedContact?.state == undefined || selectedContact?.state == ''" class="mb0"> --</span>
                </div>
              </li>
              <li><i class="fas fa-mail-bulk"></i>
                <div class="user_details">
                  <span class="address_title"> Postal Code:</span>
                  <span *ngIf="selectedContact?.zipCode != undefined && selectedContact?.zipCode != ''" class="mb0">{{selectedContact?.zipCode}}</span>
                  <span *ngIf="selectedContact?.zipCode == undefined || selectedContact?.zipCode == ''" class="mb0"> --</span>
                </div>
              </li>
              <li><i class="fas fa-globe"></i>
                <div class="user_details">
                  <span class="address_title"> Country:</span>
                  <span *ngIf="selectedContact?.country != undefined && selectedContact?.country != ''" class="mb0">{{selectedContact?.country}}</span>
                  <span *ngIf="selectedContact?.country == undefined || selectedContact?.country == ''" class="mb0"> --</span>
                </div>
              </li>
              <li *ngIf="isCompanyJourney"><i class="fa fa-facebook-official"></i>
                <div class="user_details">
                  <span class="address_title"> Facebook:</span>
                  <span *ngIf="selectedContact?.facebookURL != undefined && selectedContact?.facebookURL != ''" class="mb0">{{selectedContact?.facebookURL}}</span>
                  <span *ngIf="selectedContact?.facebookURL == undefined || selectedContact?.facebookURL == ''" class="mb0"> --</span>
                </div>
              </li>
              <li *ngIf="isCompanyJourney"><i class="fa fa-linkedin-square"></i>
                <div class="user_details">
                  <span class="address_title"> LinkedIn:</span>
                  <span *ngIf="selectedContact?.linkedinURL != undefined && selectedContact?.linkedinURL != ''" class="mb0">{{selectedContact?.linkedinURL}}</span>
                  <span *ngIf="selectedContact?.linkedinURL == undefined || selectedContact?.linkedinURL == ''" class="mb0"> --</span>
                </div>
              </li>
              <li *ngIf="isCompanyJourney"><i class="fa fa-twitter"></i>
                <div class="user_details">
                  <span class="address_title"> X:</span>
                  <span *ngIf="selectedContact?.twitterURL != undefined && selectedContact?.twitterURL != ''" class="mb0">{{selectedContact?.twitterURL}}</span>
                  <span *ngIf="selectedContact?.twitterURL == undefined || selectedContact?.twitterURL == ''" class="mb0"> --</span>
                </div>
              </li>
              <li><i class="fa fa-th-list"></i>
                <div class="user_details">
                  <span class="address_title"> Contact Status:</span>
                  <span *ngIf="selectedContact?.contactStatus != undefined && selectedContact?.contactStatus != ''" class="mb0">{{selectedContact?.contactStatus}}</span>
                  <span *ngIf="selectedContact?.contactStatus == undefined || selectedContact?.contactStatus == ''" class="mb0"> --</span>
                </div>
              </li>
              <li *ngFor="let flexiField of selectedContact?.flexiFields">
                <i class="fas fa-highlighter"></i>
                <div class="user_details">
                  <span class="address_title">{{flexiField.fieldName}}:</span>
                  <span *ngIf="flexiField.fieldValue != undefined" class="mb0">{{flexiField.fieldValue}}</span>
                  <span *ngIf="flexiField.fieldValue == undefined" class="mb0"> --</span>
                </div>
              </li>
            </ul>
          </h3>
        </div>
      </div>
    </div>
    <!-- End -->
    <div class="profile-content card-shadow d-flex details_profile_b">
      <div class="row m0">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0 contact_jounrey">
          <div class="portlet light border-unset contact_bgcolor">
            <div class="portlet-title tabbable-line">
              <div class="caption caption-md col-xs-12">
                <span class="caption-subject font-blue-madison bold">{{isCompanyJourney ? companyTitle : contactTitle}}</span>
              </div>
            </div>
            <div class="portlet-body clearfix">
              <!-- tabs start -->
              <div class="scrollbar-x">
                <ul class="nav nav-tabs hideBorder" style="margin-bottom:0px;">
                  <li class="active"><a (click)="setActiveTab('activity1')" data-toggle="tab" href="#activity1">Activity</a></li>
                  <li><a data-toggle="tab" (click)="setActiveTab('note1')" href="#note1">Notes</a>
                  </li>
                  <li><a data-toggle="tab" (click)="setActiveTab('email1')" href="#email1">Email</a>
                  </li>
                  <li><a data-toggle="tab" (click)="setActiveTab('form1')" href="#form1">Task</a></li>
                  <li><a data-toggle="tab" (click)="setActiveTab('meeting')" href="#meeting">Meeting</a></li>
                  <li><a data-toggle="tab" (click)="setActiveTab('call')" href="#call">Call</a></li>
                </ul>
              </div>
              <!-- END -->
            </div>
          </div>
          <!--- icon added for transitions to open and close asidebar --->
          <button class="expand_row" [ngClass]="{ 'expand_row_open': !isSidebarOpen }" (click)="toggleSidebar()">
            <i class="fa fa-angle-double-right"></i>
          </button>
          <!--- icon added for transitions to open and close profile-sidebar --->
          <button class="expand_profile_row" [ngClass]="{ 'expand_row_open': !isProfileSidebarOpen }" (click)="toggleProfileSidebar()">
            <i class="fa fa-angle-double-left"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- END -->
    <div class="asidebar" [ngClass]="{ 'asidebar-closed': !isSidebarOpen }">
      <!--  -->
      <div class="panel-group" id="accordion">

        <div *ngIf="isCompanyJourney" class="panel-default panel-dropdown">
          <div class="panel-headings">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse4">
                Contacts({{contactsCount}})
              </a>
              <!-- <a (click)="addLead()" class="add-btn underline-on-hover"><span>+ Add</span></a> -->
            </h4>
          </div>
          <div id="collapse4" class="panel-collapse collapse in">
            <app-response-message [customResponse]="contactsResponse" *ngIf="contactsResponse.isVisible"></app-response-message>
            <app-dropdown-loader *ngIf="contactsLoader?.isLoading" [text]="'contacts'"></app-dropdown-loader>
            <div class="panel-body pt0" *ngIf="companyContacts != undefined && companyContacts.length > 0">
              <div class="deals_card mb10" *ngFor="let contact of companyContacts">
                <div>
                  <i class="fas fa-user mr5" aria-hidden="true"> </i>
                  <a *ngIf="contact.fullName != undefined && contact?.fullName != ' ' && contact.fullName != ''" class="add-btn underline-on-hover" (click)="viewContactJourney(contact.contactId)">
                    <span class="activity-title">{{contact.fullName | slice:0:20}}</span><span *ngIf="contact?.fullName != undefined && contact?.fullName?.length>20">..</span>
                  </a>
                  <a class="underline-on-hover"
                    (click)="viewContactJourney(contact.contactId)"><span *ngIf="contact?.fullName == undefined || contact?.fullName == ' ' || contact?.fullName == ''" class="activity-title" [ngClass]="(contact.fullName != undefined && contact?.fullName != ' ' && contact.fullName != '') ? 'pl20' : ''">{{contact.emailId}}</span>
                    <div *ngIf="contact.fullName != undefined && contact?.fullName != ' ' && contact.fullName != ''" class="activity-title" [ngClass]="(contact.fullName != undefined && contact?.fullName != ' ' && contact.fullName != '') ? 'pl20' : ''">{{contact.emailId}}</div></a>
                </div>
                <div *ngIf="contact?.mobileNumber!=undefined && contact?.mobileNumber?.length > 0" class="activity-body">
                  <label class="mb0 f-w-600"> Phone:</label> {{contact.mobileNumber}}
                </div>
              </div>
              <div class="activity-footer">
                <a class="add-btn underline-on-hover" (click)="viewMoreContacts()"><span class="f-w-600">View More</span></a>
              </div>
            </div>
            <div class="panel-body pt0" *ngIf="!(companyContacts != undefined && companyContacts.length > 0) && !contactsLoader?.isLoading && !contactsResponse.isVisible">
              No contacts associated with this company.
            </div>
          </div>
        </div>

        <!-- Accordion Item 1 -->
        <div class="panel-default panel-dropdown">
          <div class="panel-headings">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                Leads({{leadsCount}})
              </a>
              <a *ngIf="!isCompanyJourney && (authenticationService?.enableLeads || authenticationService?.module?.opportunitiesAccessAsPartner)" (click)="addLead()" class="add-btn underline-on-hover"><span>+ Add</span></a>
            </h4>
          </div>
          <div id="collapse1" class="panel-collapse collapse in">
            <app-response-message [customResponse]="leadsResponse" *ngIf="leadsResponse.isVisible"></app-response-message>
            <app-dropdown-loader *ngIf="leadsLoader?.isLoading" [text]="'leads'"></app-dropdown-loader>
            <div class="panel-body pt0" *ngIf="contactLeads != undefined && contactLeads.length > 0">
              <div class="deals_card mb10" *ngFor="let lead of contactLeads">
                <div>
                  <i class="fas fa-user mr5" aria-hidden="true"> </i>
                  <a class="add-btn underline-on-hover" (click)="viewLead(lead.id)">
                    <span class="activity-title">{{lead.fullName | slice:0:20}}</span><span *ngIf="lead?.fullName != undefined && lead?.fullName?.length>20">..</span>
                  </a>
                </div>
                <div class="activity-body">
                  <label class="mb0 f-w-600"> Stage:</label> {{lead.stageName}}
                </div>
                <div *ngIf="lead.campaignName!=undefined" class="activity-body">
                  <label class="mb0 f-w-600"> Campaign:</label> {{lead.campaignName}}
                </div>
              </div>
              <div class="activity-footer">
                <a class="add-btn underline-on-hover" (click)="viewMoreLeads()"><span class="f-w-600">View More</span></a>
              </div>
            </div>
            <div class="panel-body pt0" *ngIf="!(contactLeads != undefined && contactLeads.length > 0) && !leadsLoader?.isLoading && !leadsResponse.isVisible">
              No leads associated with this contact.
            </div>
          </div>
        </div>
        <!-- Accordion Item 2 -->
        <div class="panel-default panel-dropdown">
          <div class="panel-headings">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
                Deals({{dealsCount}})
              </a>
              <a *ngIf="!isCompanyJourney && isRegisterDealEnabled && (authenticationService?.enableLeads || authenticationService?.module?.opportunitiesAccessAsPartner)" (click)="addDeal()" class="add-btn underline-on-hover"><span>+ Add</span></a>
            </h4>
          </div>
          <div id="collapse2" class="panel-collapse collapse in">
            <app-response-message [customResponse]="dealsResponse" *ngIf="dealsResponse.isVisible"></app-response-message>
            <app-dropdown-loader *ngIf="dealsLoader?.isLoading" [text]="'deals'"></app-dropdown-loader>
            <div class="panel-body pt0" *ngIf="contactDeals != undefined && contactDeals.length > 0">
              <div class="deals_card mb10" *ngFor="let deal of contactDeals">
                <div>
                  <a class="add-btn underline-on-hover" (click)="viewDeal(deal.id)">
                    <span class="activity-title">{{deal.title | slice:0:20}}</span><span *ngIf="deal?.title != undefined && deal?.title?.length>20">..</span>
                  </a>
                </div>
                <div class="activity-body">
                  <i class="fa fa-usd" aria-hidden="true"></i>
                  <label class="mb0 f-w-600"> Amount: </label> ${{deal.amount}}
                </div>
                <div class="activity-body">
                  <i class="fa fa-calendar" aria-hidden="true"></i> <label class="mb0 f-w-600"> Close Date: </label> {{deal.closeDate | slice:0:10}}
                </div>
                <div class="activity-body">
                  <label class="mb0 f-w-600"> Stage: </label>  {{deal.stageName}}
                </div>
                <div *ngIf="deal.campaignName!=undefined" class="activity-body">
                  <label class="mb0 f-w-600"> Campaign: </label>  {{deal.campaignName}}
                </div>
              </div>
              <div class="activity-footer">
                <a class="add-btn underline-on-hover" (click)="viewMoreDeals()"><span class="f-w-600">View More</span></a>
              </div>
            </div>
            <div class="panel-body pt0" *ngIf="!(contactDeals != undefined && contactDeals.length > 0) && !dealsLoader.isLoading && !dealsResponse.isVisible">
              No deals associated with this contact.
            </div>
          </div>
        </div>
        <!-- Accordion Item 3 -->
        <div class="panel-default panel-dropdown">
          <div class="panel-headings">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
                Campaigns({{campaignsCount}})
              </a>
            </h4>
          </div>
          <div id="collapse3" class="panel-collapse collapse in">
            <app-response-message [customResponse]="campaignsResponse" *ngIf="campaignsResponse.isVisible"></app-response-message>
            <app-dropdown-loader *ngIf="campaignsLoader.isLoading" [text]="'campaigns'"></app-dropdown-loader>
            <div class="panel-body pt0" *ngIf="contactCampaigns != undefined && contactCampaigns.length > 0">
              <div class="deals_card mb10" *ngFor="let campaign of contactCampaigns">
                <div>
                  <i class="fas fa-bullhorn mr5" aria-hidden="true"> </i>
                  <a class="add-btn underline-on-hover" (click)="viewCampaignTimeLine(campaign)">
                    <span class="activity-title">{{campaign.campaignName | slice:0:20}}</span><span *ngIf="campaign?.campaignName != undefined && campaign?.campaignName?.length>20">..</span>
                  </a>
                </div>
                <div class="activity-body">
                  <label class="mb0 f-w-600"> Type:</label> {{campaign.campaignType}}
                </div>
                <div *ngIf="campaign.campaignName!=undefined" class="activity-body">
                  <label class="mb0 f-w-600"> Launched Time:</label> {{campaign.launchTime}}
                </div>
              </div>
              <div class="activity-footer">
                <a class="add-btn underline-on-hover" (click)="viewMoreCampaigns()"><span class="f-w-600">View More</span></a>
              </div>
            </div>
            <div class="panel-body pt0" *ngIf="!(contactCampaigns != undefined && contactCampaigns.length > 0) && !campaignsLoader?.isLoading && !campaignsResponse.isVisible">
              No Campaign associated with this contact.
            </div>
          </div>
        </div>
        <!-- Add more accordion items as needed -->
      </div>
      <!--  -->
    </div>
    <!--  -->
  </div>
  </div>
</div>

<div class="modal fade in" id="addSelectContactModalPopup" data-backdrop="static">
  <div class="modal-dialog popup-width modal-copy mt_125" role="document">
    <div class="modal-content mSweetalertWid popup-cu-widthalign">
      <div class="modal-header alert-info modal_header_br">
        <h4 class="modal-title f-w-600" id="" translate="">Select a Contact to dial</h4>
      </div>
      <div class="modal-body">
        <div class="fc-content mb5">
          <app-dropdown-loader *ngIf="userListUsersLoader?.isLoading" [text]="'contacts'"></app-dropdown-loader>
          <app-searchable-dropdown
            *ngIf="!userListUsersLoader?.isLoading && !customResponse?.isVisible"
            [searchableDropDownDto]="companyUsersSearchableDropDownDto" [id]="contactId" [disableDropDown]="false"
            (searchableDropdownEventEmitter)="getSelectedAssignedToUserId($event)">
          </app-searchable-dropdown>
        </div>
      </div>
      <div class="modal-footer p-10">
        <button class="btn Btn-Green" type="button" name="Dial" (click)="dialNumber()" [disabled]="!enableDialButton">Dial</button>
        <button class="btn Btn-Gray" type="button" name="cancel" (click)="closeSelectContactModalPopup()">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="contactService.isContactModalPopup && updateContactUser">
  <app-add-contact-modal [isTeamMemberPartnerList]="isTeamMemberPartnerList" [gdprInput]="gdprInput"
    [totalUsers]="contacts" [contactDetails]="contactAllDetails" [isUpdateUser]="isUpdateUser"
    [selectedCompanyId]="selectedCompanyContactId" [isCompanyContact]="isCompanyContact"
    [flexiFieldsRequestAndResponseDto]="flexiFields"
    (notifyParent)="updateContactListUser($event)"></app-add-contact-modal>
</div>
<app-custom-manage-leads *ngIf="viewLeads" [listView]="true" [isConvertingContactToLead]="true"
  [isFromCompanyModule]="isFromCompanyModule" [isCompanyJourney]="isCompanyJourney"
  [isFromCompanyJourney]="isFromCompanyJourney" [selectedContactListId]="selectedContactListId"
  [selectedContact]="selectedContact" [isFromEditContacts]="isFromEditContacts" [companyJourneyId]="companyJourneyId"
  [isFromCompanyJourneyEditContacts]="isFromCompanyJourneyEditContacts"
  (notifyClose)="closeViewMoreLeadsTab()"></app-custom-manage-leads>

<app-custom-add-lead *ngIf="showLeadForm" [actionType]="actionType" [leadId]="leadId"
  [isFromEditContacts]="isFromEditContacts" [selectedUserListId]="selectedContactListId"
  [selectedContact]="selectedContact" [isFromCompanyModule]="isFromCompanyModule" [isConvertingContactToLead]="true"
  [isCompanyJourney]="isCompanyJourney" [isFromCompanyJourney]="isFromCompanyJourney"
  [companyJourneyId]="companyJourneyId" (notifyClose)="closeLeadForm()"
  [isFromCompanyJourneyEditContacts]="isFromCompanyJourneyEditContacts"
  (notifySubmitSuccess)="showLeadSubmitSuccess($event)"></app-custom-add-lead>

<app-custom-manage-deals *ngIf="viewDeals" [selectedContact]="selectedContact" [isDealFromContact]="true"
  [isFromEditContacts]="isFromEditContacts" [selectedContactListId]="selectedContactListId"
  [isCompanyJourney]="isCompanyJourney" [isFromCompanyModule]="isFromCompanyModule"
  [isFromCompanyJourney]="isFromCompanyJourney" [isFromEditContacts]="isFromEditContacts"
  [companyJourneyId]="companyJourneyId" [isFromCompanyJourneyEditContacts]="isFromCompanyJourneyEditContacts"
  (notifyClose)="closeViewMoreDealsTab()"></app-custom-manage-deals>

<app-add-deal *ngIf="showDealForm" [dealId]="dealId" [actionType]="actionType" [selectedContact]="selectedContact"
  [selectedUserListId]="selectedContactListId" [isDealFromContact]="true"
  (notifySubmitSuccess)="showDealSubmitSuccess()" [isFromCompanyModule]="isFromCompanyModule"
  [isCompanyJourney]="isCompanyJourney" [isFromEditContacts]="isFromEditContacts"
  [isFromCompanyJourney]="isFromCompanyJourney" [companyJourneyId]="companyJourneyId"
  [isFromCompanyJourneyEditContacts]="isFromCompanyJourneyEditContacts" (notifyClose)="closeDealForm()"></app-add-deal>

