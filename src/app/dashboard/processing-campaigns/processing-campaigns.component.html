<div class="col-xs-12">
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }">
  </ngx-loading>
   <div class="portlet light">
     <div class="portlet-title">
       <div class="caption">Processing Campaigns</div>
        <div class="inputs">
          <a class="close-circle" (click)="refreshList()" data-toggle="tooltip" data-placement="top" title="Refresh">
            <i class="fa fa-refresh margin" aria-hidden="true"></i>
          </a>
          <div class="portlet-input input-inline" id="search-margin" [ngStyle]="{'width':referenceService.isMobileScreenSize()? '100%': 'unset'}">
          <div class="input-icon right" id="icon-right">
            <input type="text" id="search-text" class="form-control" [(ngModel)]="pagination.searchKey"
              [ngModelOptions]="{standalone: true}" placeholder="search..."
              (keypress)="eventHandler($event.keyCode)">
            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="pagination.searchKey"
              (click)="pagination.searchKey='';search()"></button>
            <button type="submit" class="search-box-item-click" (click)="search()">
              <i class="fa fa-search" aria-hidden="true"></i></button>
          </div>
        </div> 
        </div>
     </div>
    <app-response-message class="pg8" [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
    <app-list-loader  *ngIf="httpRequestLoader.isLoading"></app-list-loader>
     <div class="portlet-body clearfix"  *ngIf="!httpRequestLoader.isLoading && !apiError">
       <div>
         <div class="table-responsive">
           <table class='table tgrid' aria-describedby="">
             <thead>
               <tr>
                <th class="text-center">Id</th>
                <th class="text-center" scope="row" translate>Name</th>
                <th class="text-center" scope="row" translate>Company</th>
                <th class="text-center" scope="row" translate>Launched</th>
                <th class="text-center" scope="row" translate>Channel</th>
                <th class="text-center" scope="row" translate>Redistributed</th>
                <th class="text-center" scope="row" translate>User List Status</th>
                <th class="text-center" scope="row" translate>Channel Status</th>
                <th class="text-center" scope="row" translate>Email Notifications</th>
               </tr>
             </thead>
             <tbody>
               <ng-container *ngFor="let campaign of pagination.pagedItems;let i = index">
                 <tr>
                  <td>{{campaign?.campaignId}}</td>
                  <td class="text-center" title="{{campaign?.campaignName}}">{{campaign?.campaignName | slice: 0: 30}}
                    <span *ngIf="campaign.campaignName?.length>30">...</span>
                  </td>
                  <td>{{campaign?.companyName}}</td>
                  <td class="text-center">
                      <i  [className]="campaign?.launched ? 'fa fa-check active-status':'fa fa-times required'" aria-hidden="true"></i>
                  </td>
                  <td class="text-center">
                    <i  [className]="campaign?.channelCampaign ? 'fa fa-check active-status':'fa fa-times required'" aria-hidden="true"></i>
                  </td>
                  <td class="text-center">
                    <i  [className]="campaign?.redistributedCampaign ? 'fa fa-check active-status':'fa fa-times required'" aria-hidden="true"></i>
                  </td>
                  <td class="text-center" title="{{campaign?.campaignUserListStatus}}">
                      <i title="{{campaign?.campaignUserListStatus}}" [className]="campaign?.campaignUserListStatus=='INITIATED' ? 'fa fa-hourglass-start active-status' : campaign?.campaignUserListStatus=='COMPLETED' ? 'fa fa-check active-status' : campaign?.campaignUserListStatus=='IN_PROGRESS'?'fa fa-spinner active-status':'fa fa-times required'" aria-hidden="true"></i>
                  </td>
                  <td class="text-center" title="{{campaign?.campaignPartnerStatus}}">
                    <i  title="{{campaign?.campaignPartnerStatus}}" [className]="campaign?.campaignUserListStatus=='INITIATED' ? 'fa fa-hourglass-start active-status' : campaign?.campaignPartnerStatus=='COMPLETED' ? 'fa fa-check active-status' : campaign?.campaignPartnerStatus=='IN_PROGRESS'?'fa fa-spinner active-status':'fa fa-times required'" aria-hidden="true"></i>
                  </td>
                  <td class="text-center" title="{{campaign?.campaignEmailNotificationsStatus}}">
                    <i title="{{campaign?.campaignEmailNotificationsStatus}}"  [className]="campaign?.campaignUserListStatus=='INITIATED' ? 'fa fa-hourglass-start active-status' : campaign?.campaignEmailNotificationsStatus=='COMPLETED' ? 'fa fa-check active-status' : campaign?.campaignEmailNotificationsStatus=='IN_PROGRESS'?'fa fa-spinner active-status':'fa fa-times required'" aria-hidden="true"></i>
                  </td>
                 </tr>
               </ng-container>
             </tbody>
           </table>
         </div>
       </div>
     </div>
     <ng-container *ngIf="!apiError">
        <div *ngIf="pagination.pagedItems.length !== 0" class="pg8">
        <app-pagination [pagination]="pagination"
          (notifyParent)="setPage($event)"
          (notifyParentDropDown)="findProcessingCampaigns($event)"
          [hidden]="httpRequestLoader.isLoading">
        </app-pagination>
      </div>
        <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info text-center">
          <strong>No Data Found.</strong>
        </div>
     </ng-container>
     <div *ngIf="apiError" class="alert alert-danger">
   <strong>Oops!Something went wrong.Please try again after sometime</strong>
 </div>
   </div>
</div>

