<div class="page-content">
  <div class="page-bar">
     <ul class="page-breadcrumb">
        <li>
           <i class="fa fa-home"></i>
           <a [routerLink]="referenceService?.homeRouter">Home</a>
           <i class="fa fa-angle-right"></i>
        </li>
        <li>
           <a>Quick Links</a>
        </li>
     </ul>
  </div>

  <div class="row">
   <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <app-modal-popup-loader  *ngIf="isQuickLinksApiLoading"></app-modal-popup-loader>
      <!---List-->
      <ng-container *ngIf="!isQuickLinksApiLoading">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                <ul class="mix-filter" *ngIf="authenticationService?.module?.damAccess || authenticationService?.module?.damAccessAsPartner 
                                || authenticationService?.module?.lmsAccess || authenticationService?.module?.lmsAccessAsPartner
                                || thenticationService?.module?.playbookAccess || authenticationService?.module?.playbookAccessAsPartner">
                    <li class="filter" (click)="filterQuickLinks('All',0)" [class.emailtemplate-selected]="0 == selectedFilterIndex">All<i class="fa fa-check-circle-o check-icons" *ngIf="0 == selectedFilterIndex"></i></li>
                    <li class="filter" *ngIf="authenticationService?.module?.damAccess || authenticationService?.module?.damAccessAsPartner" (click)="filterQuickLinks('Assets',1)" [class.emailtemplate-selected]="1 == selectedFilterIndex">Assets<i class="fa fa-check-circle-o check-icons" *ngIf="1 == selectedFilterIndex"></i></li>
                    <li class="filter" *ngIf="authenticationService?.module?.lmsAccess || authenticationService?.module?.lmsAccessAsPartner" (click)="filterQuickLinks('Tracks',2)" [class.emailtemplate-selected]="2 == selectedFilterIndex">Tracks<i class="fa fa-check-circle-o check-icons" *ngIf="2 == selectedFilterIndex"></i></li>
                    <li class="filter" *ngIf="authenticationService?.module?.playbookAccess || authenticationService?.module?.playbookAccessAsPartner" (click)="filterQuickLinks('PlayBooks',3)" [class.emailtemplate-selected]="3 == selectedFilterIndex">Play Books<i class="fa fa-check-circle-o check-icons" *ngIf="3 == selectedFilterIndex"></i></li>
                </ul>
                </div>
                <div class="float-right input-icon right mb10">
                <input type="text" class="form-control" [(ngModel)]="searchKey" [ngModelOptions]="{standalone: true}" placeholder="Search..." (keypress)="searchQuickLinksOnKeyPress($event.keyCode)">
                    <button *ngIf="searchKey" class="glyphicon glyphicon-remove search-box-item-clear" (click)="searchKey='';searchQuickLinks();"></button>
                    <button type="submit" class="search-box-item-click" (click)="searchQuickLinks()"><i class="fa fa-search" aria-hidden="true"></i></button>
                </div>                        
            </div>
            <div class="portlet-body pt0">
             <app-response-message [customResponse]="customResponse" *ngIf="customResponse?.isVisible" [showCloseIcon]="false"></app-response-message>
             <ng-container *ngIf="!customResponse?.isVisible">
                <div class="inline-flex border-end" *ngFor="let quickLink of quickLinks">
                    <div class="col w430 text-overflow pointer" (click)="preview(quickLink)">
                        <h5 class="line-height m0 text-overflow">
                        <span data-toggle="tooltip" data-placement="bottom"  title="{{quickLink?.title}}">{{quickLink?.title}}</span>
                        </h5>
                    </div>
                    <div class="col">
                        <div class="instant-links-type">
                            <span *ngIf="quickLink?.type=='Asset'" class="view-banner banner-top mr5 w-80px">{{quickLink?.type}}</span>
                            <span *ngIf="quickLink?.type=='Track'" class="view-banner orange-lable-cu1 mr5 w-80px">{{quickLink?.type}}</span>
                            <span *ngIf="quickLink?.type=='Play Book'" class="view-banner published mr5 w-80px">{{quickLink?.type}}</span>
                        </div>
                    </div>
                    <!--Asset-->
                    <ng-container *ngIf="quickLink?.type=='Asset'">
                        <!--Asset / Vendor View-->
                        <ng-template *ngIf="!isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="quickLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{quickLink:quickLink,
                            access:authenticationService?.module?.damAccess && quickLink?.published,
                            title: authenticationService?.module?.damAccess && quickLink?.published
                             ?'Click here to view asset analytics': authenticationService?.module?.damAccess && !quickLink?.published ? 'Not yet published'
                             :'You do not have permission to view the analytics'}">
                        </ng-template>
                        <!--Asset / Partner View-->
                        <ng-template *ngIf="isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="quickLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{quickLink:quickLink,
                            access:authenticationService?.module?.damAccessAsPartner,
                            title: authenticationService?.module?.damAccessAsPartner ?'Click here to view the asset that has been shared by your vendor':'You do not have permission to view the asset'}">
                        </ng-template>
                    </ng-container>
    
                    <!--Track-->
                    <ng-container *ngIf="quickLink?.type=='Track'">
                        <!--Track / Vendor View-->
                        <ng-template *ngIf="!isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="quickLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{quickLink:quickLink,
                            access:authenticationService?.module?.lmsAccess && quickLink?.published,
                            title: authenticationService?.module?.lmsAccess && quickLink?.published
                             ?'Click here to view track analytics': authenticationService?.module?.lmsAccess && !quickLink?.published ? 'Not yet published':
                              'You do not have permission to view the analytics'}">
                        </ng-template>
                        <!--Track / Partner View-->
                        <ng-template *ngIf="isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="quickLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{quickLink:quickLink,
                            access:authenticationService?.module?.lmsAccessAsPartner,
                            title: authenticationService?.module?.lmsAccessAsPartner ?'Click here to view the track that has been shared by your vendor':'You do not have permission to view the track'}">
                        </ng-template>
                    </ng-container>
    
                    <!--Play Book-->
                    <ng-container *ngIf="quickLink?.type=='Play Book'">
                        <!--Play Book / Vendor View-->
                        <ng-template *ngIf="!isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="quickLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{quickLink:quickLink,
                            access:authenticationService?.module?.playbookAccess && quickLink?.published,
                            title: authenticationService?.module?.playbookAccess &&  quickLink?.published ?
                            'Click here to view play book analytics':  authenticationService?.module?.playbookAccess &&  !quickLink?.published ?'Not yet published'
                            :'You do not have permission to view the analytics'}">
                        </ng-template>
                        <!--Play Book / Partner View-->
                        <ng-template *ngIf="isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="quickLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{quickLink:quickLink,
                            access:authenticationService?.module?.playbookAccessAsPartner,
                            title: authenticationService?.module?.playbookAccessAsPartner ?'Click here to view the play book that has been shared by your vendor':'You do not have permission to view the play book'}">
                        </ng-template>
                    </ng-container>
                </div>
                <div class="alert alert-info text-center" *ngIf="quickLinks?.length==0">
                    <strong>No Data Found</strong>
                </div>
             </ng-container>   
            </div>
        </div>
        <!--Pagination-->
        <div *ngIf="quickLinksPagination?.totalRecords>0">
            <app-pagination [pagination]="quickLinksPagination" (notifyParent)="navigateBetweenPageNumbers($event)" (notifyParentDropDown)="findAllQuickLinks($event)"></app-pagination>
        </div>
    </ng-container>
   </div>
  </div>
  </div>
  
<ng-template #quickLinkNgTemplateIcon let-quickLink="quickLink" let-access="access" let-title="title">
    <div *ngIf="!isPartnerLoggedInThroughVanityUrl" [ngClass]="access ? 'col mt10':'disabled-div col mt10'" data-toggle="tooltip" data-placement="top" title="{{title}}">
        <a class="quicklinks_icons" [ngClass]="!access? 'disabled-div':''" (click)="$event.stopPropagation();access && navigateToAnalytics(quickLink)">
            <i class="fa fa-line-chart" [ngClass]="!access ?'disabled':''"></i>
        </a>
    </div>
     <div class="col mt10" title="Preview">
        <a class="quicklinks_icons" data-toggle="tooltip" data-placement="top" title="Preview" (click)="$event.stopPropagation();preview(quickLink)">
            <i class="fa fa-eye" aria-hidden="true"></i>
        </a>
    </div>
</ng-template>
