<style type="text/css">
svg{
    height: auto;
    transform: rotate(-90deg);
}
.bar {
  fill: #aaa;
  height: 21px;
  transition: fill 0.3s ease;
  cursor: pointer;
  font-family: Helvetica, sans-serif;
}
.bar text {
  fill: #555;
}
.chart:hover .bar, .chart:focus .bar {
  fill: #aaa;
}
.bar:hover, .bar:focus {
  fill: red !important;
}
.bar:hover text, .bar:focus text {
  fill: red;
}
figcaption {
  font-weight: bold;
  color: #000;
  margin-bottom: 20px;
}
body {
  font-family: 'Open Sans', sans-serif;
}

	a.disabled {
		pointer-events: none;
		cursor: not-allowed;
	}

	.portlet.light {
		border-radius: 0;
		padding: 15px;
		box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4);
	}

	.portlet.light:hover {
		box-shadow: 1px 1px 15px rgba(0, 0, 0, 0.4);
	}

	.videoTitle {
		word-break: break-all;
		color: #5a5a5a;
		font-weight: 500;
	}

	.p0 {
		padding: 0
	}

	.block-with-text {
		overflow: hidden;
		white-space: nowrap;
		text-overflow: ellipsis;
	}
</style>
<div class="page-content">
	<div class="page-bar">
		<ul class="page-breadcrumb">
			<li>
				<i class="fa fa-home"></i>
				<a [routerLink]="['../../dashboard']">Home</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li>
				<a (click)="backToReport()">Views report</a>
			</li>
			<li *ngIf="showDatailedData">
				<i class="fa fa-angle-right"></i> Total Views
			</li>

		</ul>
	</div>
	<div class="page-bar" style="padding:4px">
		<div class="col-md-12">
			<div class="col-md-4" style="width:29%;margin-left:-15px; padding:0" *ngIf="showVideoData">
				<select class="form-control" [(ngModel)]="categoryNum" (ngModelChange)="getCategoryNumber()">
					<option  [value]="0" class="form-control">All Categories</option>
					<option *ngFor="let category of categories" [ngValue]="category.id" class="form-control">{{category.name}}</option>
				</select>
			</div>
			<div class="col-md-8">
				<div class="btn-group pull-right" style="margin-right: -80px;">
					<div class="inputs" align="right" style="float: right">
						<div style="float: left; margin-right: 10px" *ngIf="showVideoData">
						  <select class="form-control" [(ngModel)]="videoSort" (ngModelChange)="selectedSortByValue($event)">
							 <option *ngFor="let sort of sortVideos" [ngValue]="sort"> {{sort.name}} </option>
						  </select>
						</div>
						<div style="float: left; margin-right: 10px" *ngIf="showDatailedData">
							<select class="form-control" [(ngModel)]="contactsUsersSort" (ngModelChange)="userSelectedSortByValue($event)">
								<option *ngFor="let sort of sortContactUsers" [ngValue]="sort">{{sort.name}}</option>
							</select>
						</div>
						<div class="portlet-input input-inline input-small">
							<div class="input-icon right">
								<i class="icon-magnifier" style="cursor:pointer;font-size:18px;" (click)="searchVideoTitelName()"></i>
								<input type="text" [(ngModel)]="searchKey" [ngModelOptions]="{standalone: true}" class="form-control input-circle" placeholder="search...">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div *ngIf="isvideoThere==true" class="col-md-12 alert alert alert-danger alert-dismissable" style="margin-top:20px">
		<a class="close" data-dismiss="alert" aria-label="close">&times;</a>
		<strong>No Videos found.. !!!</strong>
	</div>
	<!-- <app-loader *ngIf="httpRequestLoader.isLoading"></app-loader> -->
	<div class="modal" id="show_preview">
		<div class="modal-dialog">
			<div class="modal-content" style="border-radius: 0">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true" (click)="destroyPreview()">Ã—</button>
					<h4 class="modal-title" id="modal-title"></h4>
				</div>
				<div class="modal-body">
					<div id="main_video"></div>
				</div>
				<div class="modal-footer"> <a href="javascript:void(0)" (click)="destroyPreview()" data-dismiss="modal" class="btn btn-default">Close</a>
				</div>
			</div>
		</div>
	</div>
	<div *ngIf="showVideoData">
		<div *ngFor="let videoFile of pagination.pagedItems ;let i =index">
			<div class="portlet light clearfix">
				<div class="col-xs-12 col-sm-6 p0">
					<div class="col-xs-12 col-sm-6 p0">
						<a href="javascript:void(0)" (click)="showPreview(videoFile)">
							<img class="img-responsive" src="{{videoFile.gifImagePath}}" alt="" style="width:280px; height:140px">
						</a>
					</div>
					<div class="col-xs-12 col-sm-6 p0">
						<h4 class="videoTitle block-with-text">{{videoFile.title}}</h4>
						<h5 class="block-with-text">{{videoFile.description}}</h5>
					</div>
				</div>
				<div class="col-xs-12 col-sm-6">
					<div class="row">
						<div class="col-xs-4 text-center">
							<h1 style="margin-top: 48px;">{{videoUtilService.nFormatter(videoFile.views)}}</h1>
							<h5 style="text-align: center; color: #2f2f2f; margin-top: 3.4em;font-size: 17px;font-weight: 400;">Views</h5>
						</div>
						<div class="col-xs-4 text-center">
							<section class="percentage-circle">
								<svg width="120" height="120" viewBox="0 0 120 120" style="transform: rotate(-90deg)">
									<circle cx="60" cy="60" r="54" fill="none" stroke="#e6e6e6" stroke-width="12" />
									<circle cx="60" cy="60" r="54" fill="none" stroke="#00B3B3" stroke-width="12" stroke-dasharray="339.292006588" 
									[ngStyle]="{'stroke-dashoffset': 339.292 * (1 - videoFile.watchedFully/100)}" />
								</svg>
								<h2 class="percentage-value">{{videoFile.watchedFully}}%</h2>
							</section>
							<h5 style="text-align: center; color: #2f2f2f;margin-top: 71px;font-size: 17px;font-weight: 400;">Watched Fully</h5>
						</div>
						<div class="col-xs-4 text-center">

							<figure>
									<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="chart" width="auto" height="150" aria-labelledby="title" role="img">
										<g class="bar">
											<rect width="10" height="10"></rect>
											<text x="45" y="9.5" dy=".35em">4</text>
										</g>
										<g class="bar">
											<rect width="80" height="10" y="20"></rect>
											<text x="85" y="28" dy=".35em">8</text>
										</g>
										<g class="bar">
											<rect width="150" height="10" y="40"></rect>
											<text x="150" y="48" dy=".35em">15</text>
										</g>
										<g class="bar">
											<rect width="160" height="10" y="60"></rect>
											<text x="161" y="68" dy=".35em">16</text>
										</g>
										<g class="bar">
											<rect width="80" height="10" y="80"></rect>
											<text x="81" y="88" dy=".35em">23</text>
										</g>
									</svg>
								</figure>
							 <!-- <app-avarage-chart [videoFileId]=videoFile.id></app-avarage-chart>  -->
							<!-- <div class="sparkline-chart">
							<div class="number" #elem id={{videoFile.id}}>
								<canvas width="113" height="55" style="display: inline-block; width: 113px; height: 55px; vertical-align: top;"></canvas>
							</div>
							<a class="title" href="javascript:;"> Average Duration </a>
							</div> -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<ul *ngIf="pagination.pager.pages && pagination.pager.pages.length" class="pagination">
		<li [ngClass]="{disabled:pagination.pager.currentPage === 1}">
			<a (click)="setPage(1,currentPageType)" [class.disabled]="pagination.pager.currentPage === 1">First</a>
		</li>
		<li [ngClass]="{disabled:pagination.pager.currentPage === 1}">
			<a (click)="setPage(pagination.pager.currentPage - 1,currentPageType)" [class.disabled]="pagination.pager.currentPage === 1">Previous</a>
		</li>
		<li *ngFor="let page of pagination.pager.pages" [ngClass]="{active:pagination.pager.currentPage === page}">
			<a (click)="setPage(page,currentPageType)"  [class.disabled]="pagination.pager.currentPage === page">{{page}}</a>
		</li>
		<li [ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
			<a (click)="setPage(pagination.pager.currentPage + 1,currentPageType)" [class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Next</a>
		</li>
		<li [ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
			<a (click)="setPage(pagination.pager.totalPages,currentPageType)" [class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Last</a>
		</li>
	</ul>

</div>