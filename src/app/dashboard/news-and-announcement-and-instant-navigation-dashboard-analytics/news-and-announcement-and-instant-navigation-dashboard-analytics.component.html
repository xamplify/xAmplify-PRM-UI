<div class="row" *ngIf="isVanityUrlEnabled">
    <ngx-loading [show]="isNavigatingToViewAll" [config]="{ backdropBorderRadius: '14px' }"> </ngx-loading>    
   
    <!--News & Announcements-->
    <div [ngClass]="!authenticationService?.module?.isInstanceNavigationLinksOptionDisplayed ? 'col-xs-12 col-sm-12 col-md-12 col-lg-12 pr-7 pd_btm5':'col-xs-12 col-sm-6 col-md-6 col-lg-6 pr-7 pd_btm5'">
        <app-modal-popup-loader [height]="220" *ngIf="isNewsAndAnnouncementApiLoading"></app-modal-popup-loader>
        <div class="portlet light h-240" *ngIf="!isNewsAndAnnouncementApiLoading">
            <div class="portlet-title">
                <div class="caption">
                    <h4 class="caption-subject header-css">{{properties?.newsAndAnnouncements}}</h4>
                </div>
                
            </div>
            <div class="portlet-body pt0">
                <div class="inline-flex border-end" *ngFor="let item of customLinkDtos">
                    <div class="col">
                        <div class="user-profiles">
                            <i class="fa {{item?.icon}}" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="col w430 text-overflow">
                        <h5 class="line-height m0 text-overflow"><span data-toggle="tooltip" data-placement="bottom"  title="{{item?.title}}">{{item?.title}}</span></h5>
                    </div>
                    <div class="col">
                        <a *ngIf="!item?.link?.startsWith('http') && !item?.link?.startsWith('https')" href="//{{item?.link}}" target="{{item?.openLinkInNewTab ? '_blank' : '_self'}}" class="read-text pull-right">Read More</a>
                        <a *ngIf="item?.link?.startsWith('http') || item?.link?.startsWith('https')" href="{{item?.link}}" target="{{item?.openLinkInNewTab ? '_blank' : '_self'}}" class="read-text pull-right">Read More</a>
                    </div>
                </div>
                <div class="alert alert-info text-center" *ngIf="customLinkDtos?.length==0">No Data Found</div>
            </div>
        </div>
    </div>

    <!--Quick Links-->
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 pl-7 pd_btm5"  *ngIf="authenticationService?.module?.isInstanceNavigationLinksOptionDisplayed">
        <app-modal-popup-loader [height]="220" *ngIf="isInstantNavigationLinksApiLoading"></app-modal-popup-loader>
        <div class="portlet light h-240" *ngIf="!isInstantNavigationLinksApiLoading">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-link" aria-hidden="false"></i>
                    <h4 class="caption-subject header-css">{{properties?.instantNavigation}}</h4>
                </div>
                <div class="float-right link_view" (click)="viewAllQuickLinks()"><a>View All</a></div>
            </div>
            <div class="portlet-body pt0">
                <div class="inline-flex border-end " *ngFor="let instantNavigationLink of instantNavigationLinks" >
                    <div class="col w430 text-overflow pointer" (click)="preview(instantNavigationLink)">
                        <h5 class="line-height m0 text-overflow">
                         <span data-toggle="tooltip" data-placement="bottom"  title="{{instantNavigationLink?.title}}">{{instantNavigationLink?.title}}</span>
                         </h5>
                    </div>
                    <div class="col">
                        <div class="instant-links-type">
                            <span *ngIf="instantNavigationLink?.type=='Asset'" class="view-banner banner-top mr5 w-80px">{{instantNavigationLink?.type}}</span>
                            <span *ngIf="instantNavigationLink?.type=='Track'" class="view-banner orange-lable-cu1 mr5 w-80px">{{instantNavigationLink?.type}}</span>
                            <span *ngIf="instantNavigationLink?.type=='Play Book'" class="view-banner published mr5 w-80px">{{instantNavigationLink?.type}}</span>
                        </div>
                    </div>
                    <!--Asset-->
                    <ng-container *ngIf="instantNavigationLink?.type=='Asset'">
                        <!--Asset / Vendor View-->
                        <ng-template *ngIf="!isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="instantNavigationLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{instantNavigationLink:instantNavigationLink,
                            access:authenticationService?.module?.damAccess && instantNavigationLink?.published,
                            title: authenticationService?.module?.damAccess && instantNavigationLink?.published
                             ?'Click here to view asset analytics': authenticationService?.module?.damAccess && !instantNavigationLink?.published ? 'Not yet published'
                             :'You do not have permission to view the analytics'}">
                        </ng-template>
                        <!--Asset / Partner View-->
                        <ng-template *ngIf="isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="instantNavigationLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{instantNavigationLink:instantNavigationLink,
                            access:authenticationService?.module?.damAccessAsPartner,
                            title: authenticationService?.module?.damAccessAsPartner ?'Click here to view the asset that has been shared by your vendor':'You do not have permission to view the asset'}">
                        </ng-template>
                    </ng-container>

                    <!--Track-->
                    <ng-container *ngIf="instantNavigationLink?.type=='Track'">
                        <!--Track / Vendor View-->
                        <ng-template *ngIf="!isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="instantNavigationLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{instantNavigationLink:instantNavigationLink,
                            access:authenticationService?.module?.lmsAccess &&  instantNavigationLink?.published ,
                            title: authenticationService?.module?.lmsAccess && instantNavigationLink?.published
                             ?'Click here to view track analytics': authenticationService?.module?.lmsAccess && !instantNavigationLink?.published ? 'Not yet published':
                              'You do not have permission to view the analytics'}">
                        </ng-template>
                        <!--Track / Partner View-->
                        <ng-template *ngIf="isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="instantNavigationLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{instantNavigationLink:instantNavigationLink,
                            access:authenticationService?.module?.lmsAccessAsPartner,
                            title: authenticationService?.module?.lmsAccessAsPartner ?'Click here to view the track that has been shared by your vendor':'You do not have permission to view the track'}">
                        </ng-template>
                    </ng-container>

                    <!--Play Book-->
                    <ng-container *ngIf="instantNavigationLink?.type=='Play Book'">
                        <!--Play Book / Vendor View-->
                        <ng-template *ngIf="!isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="instantNavigationLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{instantNavigationLink:instantNavigationLink,
                            access:authenticationService?.module?.playbookAccess && instantNavigationLink?.published,
                            title: authenticationService?.module?.playbookAccess &&  instantNavigationLink?.published ?
                            'Click here to view play book analytics':  authenticationService?.module?.playbookAccess &&  !instantNavigationLink?.published ?'Not yet published'
                            :'You do not have permission to view the analytics'}">
                        </ng-template>
                        <!--Play Book / Partner View-->
                        <ng-template *ngIf="isPartnerLoggedInThroughVanityUrl"
                            [ngTemplateOutlet]="instantNavigationLinkNgTemplateIcon" 
                            [ngTemplateOutletContext]="{instantNavigationLink:instantNavigationLink,
                            access:authenticationService?.module?.playbookAccessAsPartner,
                            title: authenticationService?.module?.playbookAccessAsPartner ?'Click here to view the play book that has been shared by your vendor':'You do not have permission to view the play book'}">
                        </ng-template>
                    </ng-container>
                    
                </div>
                <div class="alert alert-info text-center" *ngIf="instantNavigationLinks?.length==0">No Data Found</div>
            </div>
        </div>
    </div>
</div>
<ng-template #instantNavigationLinkNgTemplateIcon let-instantNavigationLink="instantNavigationLink" let-access="access" let-title="title">
    <div *ngIf="!isPartnerLoggedInThroughVanityUrl && !authenticationService?.module?.isMarketingCompany" [ngClass]="access ? 'col mt10':'disabled-div col mt10'" data-toggle="tooltip" data-placement="top" title="{{title}}">
        <a class="quicklinks_icons" [ngClass]="!access? 'disabled-div':''" (click)="$event.stopPropagation();access && navigate(instantNavigationLink)">
            <i class="fa fa-line-chart" [ngClass]="!access ?'disabled':''"></i>
        </a>
    </div>
    
     <div class="col mt10" title="Preview">
        <a class="quicklinks_icons" data-toggle="tooltip" data-placement="top" title="Preview" (click)="$event.stopPropagation();preview(instantNavigationLink)">
            <i class="fa fa-eye" aria-hidden="true"></i>
        </a>
    </div>
</ng-template>
