<div class="wrap-collabsible">
  <input id="collapsible-vendor-invitation-reports" name="collapsibleCheckBox" class="toggle" type="checkbox" checked>
  <label for="collapsible-vendor-invitation-reports" class="lbl-toggle">Vendor Invitation Reports</label>
  <div class="collapsible-content">
    <div class="content-inner">
     <!--Vendor Invitation Reports-->
      <div>
        <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }">
        </ngx-loading>
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">Vendor Invitation Reports</div>
        <div class="inputs">
        <a class="close-circle" (click)="refreshList()" data-toggle="tooltip" data-placement="top" title="Refresh">
          <i class="fa fa-refresh margin" aria-hidden="true"></i>
        </a>
        <div  [ngClass]="{'search-css left-float': !referenceService.isMobileScreenSize(), 'mobile-css':referenceService.isMobileScreenSize() }">
        <ul class="mix-filter">
          <li class="mix-filter" [class.li-selected]="0 == selectedFilterIndex" (click)="filterInvitations(0,'invited')">Invited</li>
          <li class="mix-filter" [class.li-selected]="1 == selectedFilterIndex" (click)="filterInvitations(1,'declined')">Declined</li>
        </ul>
      </div>
        <div class="portlet-input input-inline" id="search-margin" [ngStyle]="{'width':referenceService.isMobileScreenSize()? '100%': 'unset'}">
        <div class="input-icon right" id="icon-right">
          <input type="text" id="search-text" class="form-control" [(ngModel)]="sortOption.searchKey"
            [ngModelOptions]="{standalone: true}" placeholder="search..."
            (keypress)="eventHandler($event.keyCode)">
          <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey"
            (click)="sortOption.searchKey='';search()"></button>
          <button type="submit" class="search-box-item-click" (click)="search()">
            <i class="fa fa-search" aria-hidden="true"></i></button>
        </div>
      </div> 
          </div>
          </div>
            <app-list-loader  *ngIf="httpRequestLoader.isLoading"></app-list-loader>
          <div class="portlet-body clearfix"  *ngIf="!httpRequestLoader.isLoading && !hasError">
            <div>
              <div class="table-responsive">
                <table class='table tgrid' aria-describedby="all-vendor-invitation-requests">
                  <thead>
                    <tr>
                      <th class="tpx" colspan="2" scope="col">
                        <span translate>Inviter Details</span>
                      </th>
                      <th class="tpx" colspan="2"  scope="col">
                        <span translate>Invitee Details</span>
                      </th>
                      <th class="text-center" scope="row" translate>Status</th>
                      <th class="text-center" scope="row" translate>Invitee Role</th>
                      <th class="text-center" scope="row" translate>Invited On</th>
                      <th class="text-center" scope="row" *ngIf="selectedFilterIndex==0">Upgrade</th>
                      <th class="text-center" scope="row" *ngIf="selectedFilterIndex==1">Declined On</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let report of pagination.pagedItems;let i = index">
                      <tr>
                        <td style="width: 10%;">
                          <div class="thumbnail-wrapper">
                            <img onerror="this.src='assets/images/company-profile-logo.png';" class="custom-image-css" src="{{report?.inviterCompanyLogo}}" alt="Image Not Found">
                          </div>
                        </td>
                        <td>
                          <h4 class="moreipsis mt5 mb5 f-w-600"   title="{{report?.inviterCompanyName}}">
                            <span><strong>{{report?.inviterCompanyName}}</strong></span>
                          </h4>
                          <h6 class="moreipsis" title="{{report?.inviterEmailId}}">
                            <span><strong>{{report?.inviterEmailId}}</strong></span>
                          </h6>
                        </td>
                        <td style="width: 10%;">
                          <div class="thumbnail-wrapper">
                            <img onerror="this.src='assets/images/company-profile-logo.png';" class="custom-image-css" src="{{report?.inviteeCompanyLogo}}" alt="Image Not Found">
                          </div>
                        </td>
                        <td>
                          <h4 class="moreipsis mt5 mb5 f-w-600"   title="{{report?.inviteeCompanyName}}">
                            <span><strong>{{report?.inviteeCompanyName}}</strong></span>
                          </h4>
                          <h6 class="moreipsis" title="{{report?.inviteeEmailId}}">
                            <span><strong>{{report?.inviteeEmailId}}</strong></span>
                          </h6>
                          <h6 class="moreipsis" *ngIf="report?.inviteeCompanyId==0">
                            <span class="red-banner">No Company Created</span>
                          </h6>
                        </td>
                        <td class="text-center">
                          <span [ngClass]="report.inviteStatus == 'invited' ? 'xamplify-folder-banner':'red-banner'">{{report?.inviteStatus}}</span>
                        </td>
                        <td class="text-center">
                          <h4 class="moreipsis mt5 mb5 f-w-600">
                            <span><strong>{{report?.inviteeRole}}</strong></span>
                          </h4>
                        </td>
                        <td class="text-center">
                          <app-timestamp	[dateAndTime]="report?.invitedOn"> </app-timestamp>
                        </td>
                        <td class="text-center" *ngIf="selectedFilterIndex==0">
                          <button class="btn btn-info" (click)="upgrade(report)">Upgrade</button>
                        </td>
                        <td class="text-center" *ngIf="selectedFilterIndex==1">
                          <app-timestamp	[dateAndTime]="report?.declinedOn"> </app-timestamp>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <ng-container *ngIf="!hasError">
              <div *ngIf="pagination.pagedItems.length !== 0" class="pg8">
              <app-pagination [pagination]="pagination"
                (notifyParent)="setPage($event)"
                (notifyParentDropDown)="findVendorInvitationReports($event)"
                [hidden]="httpRequestLoader.isLoading">
              </app-pagination>
            </div>
              <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info">
                <strong>No Data Found.</strong>
              </div>
          </ng-container>
          <div *ngIf="hasError" class="alert alert-danger">
        <strong>Oops!Something went wrong.Please try again after sometime</strong>
      </div>
        </div>
      </div>
    </div>
  </div>
</div>

