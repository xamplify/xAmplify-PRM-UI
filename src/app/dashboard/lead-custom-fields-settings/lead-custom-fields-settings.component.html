<div class="my-container">
  <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
  <div class="table-responsive" *ngIf="!isAddCustomFieldsModelPopUp">
    <!-- <app-list-loader *ngIf="customFieldsDtosLoader || ngxloading"></app-list-loader> -->
    <!-- <ng-container *ngIf="!customFieldsDtosLoader && !ngxloading">
      <table class='table tgrid table-hover'>
        <thead>
          <tr>
            <th>Field Name</th>
            <th>PlaceHolder</th>
            <th>Display Name</th>
          </tr>
        </thead>
        <tbody [dragula]='"leadFieldDragula"' [dragulaModel]='leadCustomFields'>
          <ng-container *ngFor="let leadField of leadCustomFields ">
            <tr style="cursor: move;">
              <td class="text-center"><input type="text" class="form-control" [(ngModel)]="leadField.labelName"
                  [ngModelOptions]="{standalone: true}" readonly="readonly" maxlength="255">
              </td>
              <td class="text-center"><input type="text" class="form-control" [(ngModel)]="leadField.placeholder"
                  [ngModelOptions]="{standalone: true}" maxlength="255">
              </td>
              <td class="text-center"><input type="text" class="form-control" [(ngModel)]="leadField.displayName"
                  [ngModelOptions]="{standalone: true}" maxlength="255">
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <button type="button" class="button_blue bgcolor-unset pr0 px-9 pull-right pt0" (click)="validateAndSubmit()"><span
          class="btn btn-primary transition txt_pd-top3">Submit</span></button>
      <button type="button" *ngIf="isOrderChanged" class="btn Btn-Gray px-9 pull-right" (click)="getLeadFields()">Revert Order</button>
      </ng-container> -->
      <ng-container>
        <div class="row m0">
          <div class="col-md-12 p0 mb10 mt10">
            <div style="margin-bottom:20px">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 p0">
                <button type="button" class="btn btn-success ml5 my-10"
                (click)="addCustomFieldsdModalOpen()">Create Custom Field</button>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 pr0 pl-left0 tabview-fields">
              <div class="d-flex justify-content-end mb-flex-wrap my-10">
              <div class="inputs mr5 width100">
                <select class="form-control SeclectBoxPaddingsAbj" [(ngModel)]="sortOption"
                  (ngModelChange)="sortFieldsByOption()">
                  <ng-container *ngFor="let sort of sortOptions">
                    <option [ngValue]="sort.value">{{sort.name}}</option>
                  </ng-container>
                </select>
              </div>
              <div class="inputs">
                <div class="portlet-input input-inline align-width">
                  <div class="input-icon right">
                    <input type="text" class="form-control" [(ngModel)]="searchKey" [ngModelOptions]="{standalone: true}"
                      placeholder="Search.." (keypress)="searchFieldsKeyPress($event.keyCode)">
                    <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="searchKey"
                      (click)="clearFieldSearch()"></button>
                    <button type="submit" class="search-box-item-click" (click)="searchFields()"><i
                        class="fa fa-search"></i></button>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-primary ml5 my-10"
                (click)="addCustomFielsdOrderModalOpen()">Order Custom Fields</button>
                </div> 
              </div> 
            </div>
          </div>
        </div>
        <form class="form-horizontal" autocomplete="off">
          <div class="table-responsive">
            <table class='table tgrid'>
              <thead>
                <tr>
                  <th class="text-center"><input type="checkbox" class="checkBox_shadow" value="sfcfSelectAll"
                      id="sfcfSelectAll" name="sfcfSelectAll" [(ngModel)]="isHeaderCheckBoxChecked"
                      (change)="checkAll($event)" class="pointer" />
                  </th>
                  <th>Field Label</th>
                  <th>Data Type</th>
                  <th class="text-center"> Actions</th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let sfCustomField of sfcfPagedItems">
                  <tr>
                    <td class="text-center"><input type="checkbox" lass="checkBox_shadow" value="{{sfCustomField.name}}"
                        (click)="selectCf(sfCustomField)" id="{{sfCustomField.name}}" name="sfcf[]"
                        [checked]="(selectedCfIds.indexOf(sfCustomField.name)>-1) || sfCustomField.required"
                        [disabled]="!sfCustomField.canUnselect" class="pointer" /></td>
                    <td>
                      <span class="FieldName" data-toggle="tooltip" data-placement="top"
                        title="{{sfCustomField.label}}">{{sfCustomField.label | slice:0:30}}
                        <span *ngIf="sfCustomField.label?.length>30">...</span>
                      </span>  
                      <ul class="textDecoration">
                        <li>{{sfCustomField.displayName}}</li>
                        <li
                          *ngIf="(sfCustomField.formDefaultFieldType != null)  && (!authenticationService?.module?.isTeamMember || authenticationService?.module?.isAdmin)">
                          Mapped As: {{ sfCustomField.formDefaultFieldType }}
                        </li>
                        <li *ngIf="sfCustomField.required"><i class="fa fa-check-circle-o GreenCheckMark"
                            aria-hidden="true"></i>
                          Required
                        </li>
                        <li *ngIf="sfCustomField.nonInteractive"><i class="fa fa-check-circle-o GreenCheckMark" aria-hidden="true"></i>
                          Non Interactive
                        </li>
                        <li *ngIf="sfCustomField.nonInteractive && sfCustomField.private"><i class="fa fa-check-circle-o GreenCheckMark"
                            aria-hidden="true"></i>
                          Private
                        </li>
                      </ul>
                    </td>
                    <td><span>{{sfCustomField.type}}</span>
                      <div *ngIf="sfCustomField.originalCRMType === 'select'">Mapped
                        As: PickList</div>
                    </td>
                    <td class="text-center">
                      <a *ngIf="sfCustomField.selected" class="custom-icon">
                        <i *ngIf="sfCustomField.selected" (click)="addCustomFielsdModalOpen(sfCustomField)"
                          class="fa fa-gear mr5 IconCustomization SingleIconCu icon_place"></i>
                        <div class="clickicons"></div>
                      </a>
                      <a *ngIf="sfCustomField.formFieldType === 'CUSTOM'" class="custom-icon">
                        <i *ngIf="sfCustomField.formFieldType === 'CUSTOM'" (click)="confirmDelete(sfCustomField)"
                          class="fa fa-trash-o trashIconCustomization SingleIconCu icon_place"></i>
                        <div class="clickicons"></div>
                      </a>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </form>
        <ul *ngIf="sfcfPager.pages && sfcfPager.pages.length" class="pagination">
          <li [ngClass]="{disabled:sfcfPager.currentPage === 1}"><a (click)="setSfCfPage(1)">First</a></li>
          <li [ngClass]="{disabled:sfcfPager.currentPage === 1}"><a
              (click)="setSfCfPage(sfcfPager.currentPage - 1)">Previous</a></li>
          <li *ngFor="let page of sfcfPager.pages" [ngClass]="{active:sfcfPager.currentPage === page}"><a
              (click)="setSfCfPage(page)" [class.disabled]="sfcfPager.currentPage === page">{{page}}</a></li>
          <li [ngClass]="{disabled:sfcfPager.currentPage === sfcfPager.totalPages}">
            <a (click)="setSfCfPage(sfcfPager.currentPage + 1)">Next</a>
          </li>
          <li [ngClass]="{disabled:sfcfPager.currentPage === sfcfPager.totalPages}">
            <a (click)="setSfCfPage(sfcfPager.totalPages)">Last</a>
          </li>
        </ul>
        <div *ngIf="sfcfPager.pages && sfcfPager.pages.length" class="p-drop-down pl10 custom-fields-items-count">
          <select class="form-control" style="cursor: pointer" [(ngModel)]="pageNumber"
            [ngModelOptions]="{standalone: true}" (ngModelChange)="selectedPageNumber($event.value)">
            <option [ngValue]="paginationComponent.numberPerPage[0]">{{paginationComponent.numberPerPage[0].name}}
            </option>
            <option *ngIf="sfcfPager.totalItems>12" [ngValue]="paginationComponent.numberPerPage[1]">
              {{paginationComponent.numberPerPage[1].name}}</option>
            <option *ngIf="sfcfPager.totalItems>24" [ngValue]="paginationComponent.numberPerPage[2]">
              {{paginationComponent.numberPerPage[2].name}}</option>
          </select>
        </div>
        <!-- <div class="text-center" *ngIf="!sfcfPager.pages || sfcfPager.pages.length == 0" style="margin-bottom: 10px;">
          <span *ngIf="integrationType =='SALESFORCE' && !isFilterApplied">Please Reconfigure {{ integrationType |
            titlecase }} as the token
            has expired</span>
          <span *ngIf="integrationType !='SALESFORCE' && !isFilterApplied">There are no custom fields in your {{
            integrationType | titlecase
            }} account.</span>
          <span *ngIf="isFilterApplied">No Custom fields found</span>
        </div> -->
        <div class="modal-footer border-none pr0 pt0 pl0">
          <span *ngIf="sfcfPager.pages && sfcfPager.pages.length" class="align-item-left">
            <strong>Total Records :{{sfcfPager.totalItems}}</strong>
          </span>
          <button type="button" class="button_blue bgcolor-unset pr0 px-9"
            *ngIf="sfcfPager.pages && sfcfPager.pages.length" (click)="saveCustomFieldsSelection()"><span
              class="btn btn-primary transition txt_pd-top3">Submit</span></button>
        </div>
      </ng-container>
      <div *ngIf="isCustomFieldsModelPopUp">
        <app-integration-settings-popup (closeEvent)="closeCustomFielsModal($event)" [customField]="customField" [customFieldsList]="customFieldsList" [opportunityType]="opportunityType"></app-integration-settings-popup>
      </div>
      <div *ngIf="isCustomFieldsOrderModelPopUp">
        <app-custom-fields-order-popup (closeEvent)="closeCustomFielsOrderModal($event)" [customFieldsList]="customFieldsList" [opportunityType]="opportunityType"></app-custom-fields-order-popup>
      </div>
  </div>
  <div *ngIf="isAddCustomFieldsModelPopUp">
    <app-add-custom-fields (closeEvent)="closeAddCustomFieldsModal($event)"></app-add-custom-fields>
  </div>
</div>