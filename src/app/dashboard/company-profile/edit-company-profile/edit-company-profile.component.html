<div class="page-content" [class.ml0]="!authenticationService.user.hasCompany || authenticationService.isSuperAdmin()">
    <ngx-loading [show]="isLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
    <div class="page-bar" *ngIf="authenticationService.isSuperAdmin()">
        <ul class="page-breadcrumb">
            <li><i class="fa fa-home"></i><a [routerLink]="['/home/dashboard/admin-report']">Admin Report</a></li>
        </ul>
    </div>
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li><i class="fa fa-home"></i> <a routerLink="/home/dashboard/default">Home</a><i class="fa fa-angle-right"></i></li>
            <li><i class="fa fa-building-o"></i>Company Profile</li>
        </ul>
    </div>


    <div class="row">
        <div class="col-md-3 col-lg-3 " style="padding-right:0px">
            <div class="portlet light gmd-1" style="padding: 0px 0px 10px 0px!important; border:1px solid #eaeaea!important;;height: 533px;">

                <div class="portlet-body" style="text-align: center;padding:25px 12px!important">
                    <div class="">
                        <div class=" clearfix text-center" style="color: #fff;">
                            <div class="profile-image-wrapper" style="cursor:pointer" (click)="imageClick()">
                                <span *ngIf="logoError" style="color: #f55d7a">{{logoErrorMessage}}</span>
                                <span *ngIf="!croppedImage"> <span *ngIf="!companyLogoImageUrlPath" style="color: #f55d7a;">* Please upload company logo</span></span>
                                <span *ngIf="(squareData | json) == '{}'">
                                            <img *ngIf="!companyLogoImageUrlPath" src="assets/images/company-profile-logo.png" class="profile-image img-grid"></span>
                                <span *ngIf="croppedImage; else showImage">
                                                <img class="img-grid" [src]="croppedImage">
                                            </span>
                                <ng-template #showImage>
                                    <img class="img-grid" *ngIf="companyLogoImageUrlPath" [src]="authenticationService.MEDIA_URL + companyLogoImageUrlPath"  (error)="errorHandler($event)"></ng-template>
                                <a class="profile-pic" (click)="fileChangeEvent()"> &nbsp;&nbsp;<i class="fa fa-camera icon" style="font-size:25px;padding-top:10px"></i></a>

                                <div class="profile-overlay">
                                    <label class="fileContainer pointer">
                                                    <i class="fa fa-camera"></i>&nbsp;<span  >Upload company logo</span><span *ngIf="companyLogoImageUrlPath">Change company logo</span>
                                                 </label>
                                </div>
                            </div>
                            <div class="col-md-12" style="text-align: center;padding-top:16px;">
                                <p style="color:#949090;    font-size: 10px;">Please upload 2:1 ratio logo for better view</p>
                            </div>

                            
                            <div class="clearfix"></div>
                             <hr class="divider" />
                            <section class="percentage-circle" style="display: grid; margin: 6px 0 6px;">
                                <svg width="120" height="100" viewBox="0 0 120 120" style="transform: rotate(-90deg)">
                                            <circle cx="60" cy="60" r="54" fill="none" stroke="##008fd5" stroke-width="10" />
                                            <circle cx="60" cy="60" r="54" fill="none" stroke-width="5" stroke="#008fd5" stroke-dasharray="339.292006588" [ngStyle]="{'stroke-dashoffset': 339.292 * (1 - profileCompleted/100)}"/>
                                        </svg>
                                <h2 class="percentage-value" style="margin: -2.7em 0 0 0;color:#008fd5!important">{{profileCompleted}}%</h2>
                            </section>
                            <h5 style="margin-top: -55px;font-weight: 400;margin-bottom: 3em;color:#008fd5">complete</h5>
                            <h4 [title]="authenticationService.user.firstName+authenticationService.user.lastName" style="color:#008fd5" class=" control-label ">{{authenticationService.user.firstName | slice:0:15}}<span *ngIf="authenticationService.user.firstName?.length>15">...</span>&nbsp;{{authenticationService.user.lastName | slice:0:10}}<span *ngIf="authenticationService.user.lastName?.length>10">..</span></h4>
                            <h5 style="color:#008fd5">{{authenticationService.user.emailId}}</h5>
                            
                            <!-- <h4 style="color: #008fd5!important;padding-top:5px"><span class="f-w-600">Plan Type:</span>&nbsp;BASIC</h4>
                            <button class="btn btn-warning" style="margin-top:15px;" [routerLink]="['/home/upgrade']">UPGRADE &nbsp;&nbsp;<i class="fa fa-caret-right"></i></button> -->
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-md-9 col-lg-9" style="padding-right: 0px;">
            <div class="col-md-12 col-lg-12" *ngIf="false">
                <div id="company-profile-div" style="margin-bottom: 10px;padding-bottom: 10px;border-bottom: 1px solid #ddd;">
                    <!-- <div class="portlet-title">
                                                    <div class="caption">Company Profile</div>
                                                </div> -->
                    <div class="alert alert-danger" id="company-profile-error-div" style="display: none;">
                        <a (click)="refService.hideDiv('company-profile-error-div')" class="close" aria-label="close">x</a>
                        <strong>Please complete the required (*) fields. </strong>
                    </div>
                    <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
                    <div class=" clearfix">
                        <div class="alert alert-success" id="edit-sucess" style="display: none;">
                            <a (click)="refService.hideDiv('edit-sucess')" class="close" aria-label="close">x</a>
                            <ng-container *ngIf="companyProfile.isAdd"> <strong>{{message}}. Please wait.</strong> </ng-container>
                            <ng-container *ngIf="!companyProfile.isAdd"> <strong>{{message}}.</strong></ng-container>
                        </div>
                        <div [hidden]="!processor.isProcessing">
                            <div class="div-loader" [style.height]="processor.divHeight">
                                <div id="process-loader"></div>
                            </div>
                        </div>
                        <div class="row smpl-step" [hidden]="processor.isProcessing">
                            <div class="col-xs-4 smpl-step-step complete">
                                <div class="progress">
                                    <div class="progress-bar"></div>
                                </div>
                                <a class="smpl-step-icon" style="cursor:default"><i class="fa fa-check"></i></a>
                                <div class="smpl-step-info text-center" style="margin-top: 3px;">Sign up</div>
                            </div>

                            <div class="col-xs-4 smpl-step-step" [ngClass]="{'complete': !companyProfile.isAdd}">
                                <div class="progress">
                                    <div class="progress-bar"></div>
                                </div>
                                <a class="smpl-step-icon" style="cursor:default"><i class="fa fa-user"></i></a>
                                <div class="smpl-step-info text-center" style="margin-top: 3px;">Complete your company profile</div>
                            </div>

                            <div class="col-xs-4 smpl-step-step" [ngClass]="{'disabled':!authenticationService.user.hasCompany}">
                                <div class="progress">
                                    <div class="progress-bar"></div>
                                </div>
                                <a class="smpl-step-icon" *ngIf="authenticationService.user.hasCompany" [routerLink]="['/home/dashboard']"><i class="fa fa-play" style="color:white"></i></a>
                                <a class="smpl-step-icon" *ngIf="!authenticationService.user.hasCompany"><i class="fa fa-play" style="color:white"></i></a>
                                <div class="smpl-step-info text-center" style="margin-top: 3px;">Start {{properties.APP_WEBSITE}}</div>
                            </div>
                        </div>
                        <!-- <ng-container *ngIf="!processor.isProcessing">
                                                        <h1 class="text-center heading-text">Let's get started on your company profile.</h1>
                                                        <img src="/assets/images/dotted-arrow.png" alt="" class="img-responsive">
                                                    </ng-container> -->

                    </div>
                </div>
            </div>

            <div class="col-md-12 col-lg-12" style="padding-left: 14px;">
                <div class="portlet light gmd-1" style="padding: 0px 0px 33px 0px!important; border:1px solid #eaeaea!important;">
                    <!-- <div class="portlet-title title">
                                    <h4 style="font-size: 19px;font-weight: 400;margin-top: 5px; text-align: center">Company Details</h4>
                                </div> -->
                    <div class="portlet-body" style="padding:25px 12px!important" [hidden]="processor.isProcessing">


                        <form role="form" id="company-profile-form">
                            <div class="row">

                                <div class="col-sm-12 col-xs-12">
                                    <div class="row">
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" [attr.class]="companyNameDivClass">
                                                <label class="control-label">Company Name <font	style="color: #f55d7a"><b>*</b></font></label>
                                                <input type="text" id="companyName" name="companyName" placeholder="Company Name" maxlength="240" class="form-control" [(ngModel)]="companyProfile.companyName" (input)="validateEmptySpace('companyName')" (blur)="validateNames(companyProfile.companyName)"
                                                />
                                                <span *ngIf="companyNameError" style="color: #f55d7a">{{companyNameErrorMessage}}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" [attr.class]="companyProfileNameDivClass">
                                                <label class="control-label">Company Profile Name <font style="color: #f55d7a"><b>*</b></font></label>
                                                <ng-container *ngIf="companyProfile.isAdd">
                                                    <input type="text" id="companyProfileName" placeholder="Company Profile Name" maxlength="240" class="form-control" name="companyProfileName" [(ngModel)]="companyProfile.companyProfileName" (input)="validateEmptySpace('companyProfileName')" (blur)="validateProfileNames(companyProfile.companyProfileName)"
                                                    />
                                                    <span *ngIf="companyProfileNameError" style="color: #f55d7a">{{companyProfileNameErrorMessage}}</span>
                                                </ng-container>
                                                <ng-container *ngIf="!companyProfile.isAdd">
                                                    <input type="text" id="companyProfileName" disabled="disabled" placeholder="Company Profile Name" class="form-control" name="companyProfileName" [(ngModel)]="companyProfile.companyProfileName" /> </ng-container>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" [attr.class]="emailIdDivClass">
                                                <label class="control-label"> Company Email</label>
                                                <input type="email" id="emailId" name="emailId" placeholder="Email Id" class="form-control" maxlength="240" [(ngModel)]="companyProfile.emailId" (input)="validatePattern('emailId')" (blur)="validatePattern('emailId')" />
                                                <span *ngIf="emailIdError" style="color: #f55d7a">{{emailIdErrorMessage}}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" [attr.class]="tagLineDivClass">
                                                <label class="control-label">Tag Line</label>
                                                <input type="text" id="tagLine" name="tagLine" placeholder="Tag Line" class="form-control" maxlength="240" [(ngModel)]="companyProfile.tagLine" />
                                                <span *ngIf="tagLineError" style="color: #f55d7a">{{tagLineErrorMessage}}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" [attr.class]="phoneDivClass">
                                                <label class="control-label">Phone Number <font style="color: #f55d7a"><b>*</b></font></label>
                                                <fieldset style="padding:0 !important;border: 1px solid #ece2e2 !important">
                                                    <int-phone-prefix [(ngModel)]="companyProfile.phone" (input)="validatePattern('phone')" (blur)="validatePattern('phone')" [ngModelOptions]="{standalone: true}"></int-phone-prefix>
                                                </fieldset>
                                                <span *ngIf="phoneError" style="color: #f55d7a">{{phoneErrorMessage}}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" [attr.class]="websiteDivClass">
                                                <label class="control-label">Company Url <font style="color: #f55d7a"><b>*</b></font></label>
                                                <input type="text" id="website" name="website" placeholder="WebSite" maxlength="240" class="form-control" [(ngModel)]="companyProfile.website" (input)="validatePattern('website')" (blur)="validatePattern('website')" />
                                                <span *ngIf="websiteError" style="color: #f55d7a">{{websiteErrorMessage}}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6">
                                            <div class="form-group" *ngIf="!companyProfile.isAdd && publicVideos?.length>0">
                                                <label class="control-label">Select Video</label>
                                                <select class="form-control" name="companyProfile.videoId" [(ngModel)]="companyProfile.videoId">
                                                      <option [ngValue]="null">---Please Select Video---</option>
                                                        <option *ngFor="let videoFile of publicVideos"	[ngValue]="videoFile.id">{{videoFile.title}}</option>
                                                    </select>
                                            </div>
                                        </div>
                                    </div>




                                   <div class="form-group" [attr.class]="aboutUsDivClass">
								    <label class="control-label">About Us <font	style="color: #f55d7a"><b>*</b></font></label>
								     <textarea class="form-control" rows="3" cols="5" maxlength="250" placeholder="About Us" name="aboutUs" id="aboutUs" style="resize: none" [(ngModel)]="companyProfile.aboutUs" (input)="validateEmptySpace('aboutUs')" (blur)="validateEmptySpace('aboutUs')"></textarea>
								    <span *ngIf="aboutUsError"  style="color: #f55d7a">{{aboutUsErrorMessage}}</span>
							     </div>
                                    <!-- <div class="form-group">
                                        <label class="control-label">About Us</label>
                                        <textarea class="form-control" rows="3" cols="5" maxlength="1000" placeholder="About Us" name="aboutUs" id="aboutUs" style="resize: none" [(ngModel)]="companyProfile.aboutUs"></textarea>
                                    </div> -->
                                    <div class="panel-group">
                                        <div class="panel panel-default">
                                            <div class="panel-heading" data-toggle="collapse" href="#collapse1" (click)="refService.scrollSmoothToBottom()">
                                                <h4 class="panel-title f-w-500">
                                                    Company Address <i class="fa fa-caret-down pull-right"></i>
                                                </h4>
                                            </div>
                                            <div id="collapse1" class="panel-collapse collapse">
                                                <div class="form-group">
                                                    <label class="control-label">Street</label>
                                                    <input type="text" id="street" [(ngModel)]="companyProfile.street" name="street" placeholder="Street" maxlength="240" class="form-control" />
                                                </div>
                                                <div class="form-group" [attr.class]="cityDivClass">
                                                    <label class="control-label">City</label>
                                                    <input type="text" id="city" name="city" placeholder="City" class="form-control" maxlength="240" [(ngModel)]="companyProfile.city" (input)="validatePattern('city')" (blur)="validatePattern('city')" />
                                                    <span *ngIf="cityError" style="color: #f55d7a">{{cityErrorMessage}}</span>
                                                </div>
                                                <div class="form-group" [attr.class]="stateDivClass">
                                                    <label class="control-label">State</label>
                                                    <input type="text" id="state" name="state" placeholder="State" class="form-control" maxlength="240" [(ngModel)]="companyProfile.state" (input)="validatePattern('state')" (blur)="validatePattern('state')" />
                                                    <span *ngIf="stateError" style="color: #f55d7a">{{stateErrorMessage}}</span>
                                                </div>
                                                <div class="form-group" [attr.class]="zipDivClass">
                                                    <label class="control-label">Zip</label>
                                                    <input type="text" id="zip" name="zip" maxlength="50" placeholder="Zip" onkeypress="return event.charCode >= 48 && event.charCode <= 57" class="form-control" [(ngModel)]="companyProfile.zip" />
                                                    <span *ngIf="zipError" style="color: #f55d7a">{{zipErrorMessage}}</span>
                                                </div>
                                                <div class="form-group" [attr.class]="countryDivClass">
                                                    <label class="control-label">Country</label>
                                                    <select class="form-control" name="companyProfile.country" [(ngModel)]="companyProfile.country" style="width: 100%">
                                                    <option *ngFor="let country of countryNames.countries"
                                                        [ngValue]="country">{{country}}</option>
                                                </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-group">
                                        <div class="panel panel-default">
                                            <div class="panel-heading" data-toggle="collapse" href="#collapse2" (click)="refService.scrollSmoothToBottom()">
                                                <h4 class="panel-title f-w-500">
                                                    Social Accounts <i class="fa fa-caret-down pull-right"></i>
                                                </h4>
                                            </div>
                                            <div id="collapse2" class="panel-collapse collapse">
                                                <div class="form-group" [attr.class]="facebookDivClass">
                                                    <label class="control-label">Facebook</label>
                                                    <input type="text" id="facebook" name="facebook" placeholder="Facebook" class="form-control" [(ngModel)]="companyProfile.facebookLink" (input)="validatePattern('facebook')" (blur)="validatePattern('facebook')" />
                                                    <span *ngIf="facebookLinkError" style="color: #f55d7a">{{facebookLinkErrorMessage}}</span>
                                                </div>
                                                <div class="form-group" [attr.class]="googlePlusDivClass">
                                                    <label class="control-label">Google</label>
                                                    <input type="text" id="googlePlusLink" name="googlePlusLink" placeholder="Google" class="form-control" [(ngModel)]="companyProfile.googlePlusLink" (input)="validatePattern('googlePlusLink')" (blur)="validatePattern('googlePlusLink')" />
                                                    <span *ngIf="googlePlusLinkError" style="color: #f55d7a">{{googlePlusLinkErrorMessage}}</span>
                                                </div>
                                                <div class="form-group" [attr.class]="linkedInDivClass">
                                                    <label class="control-label">LinkedIn</label>
                                                    <input type="text" id="linkedInLink" name="linkedInLink" placeholder="LinkedIn" class="form-control" [(ngModel)]="companyProfile.linkedInLink" (input)="validatePattern('linkedInLink')" (blur)="validatePattern('linkedInLink')" />
                                                    <span *ngIf="linkedinLinkError" style="color: #f55d7a">{{linkedinLinkErrorMessage}}</span>
                                                </div>
                                                <div class="form-group" [attr.class]="twitterDivClass">
                                                    <label class="control-label">Twitter</label>
                                                    <input type="text" id="twitter" name="twitter" placeholder="Twitter" class="form-control" [(ngModel)]="companyProfile.twitterLink" (input)="validatePattern('twitterLink')" (blur)="validatePattern('twitterLink')" />
                                                    <span *ngIf="twitterLinkError" style="color: #f55d7a">{{twitterLinkErrorMessage}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="pull-right" style="padding-bottom:10px">
                                <button type="submit" [disabled]="authenticationService.isSuperAdmin()" *ngIf="companyProfile.isAdd" id="saveOrUpdateCompanyButton" (click)="save()" class="btn green-haze" disabled="disabled">Save</button>
                                <button type="submit" [disabled]="authenticationService.isSuperAdmin()" *ngIf="!companyProfile.isAdd" id="saveOrUpdateCompanyButton" (click)="update()" class="btn green-haze">Update</button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>

    </div>
</div>


<div class="modal right fade" id="cropLogoImage" tabindex="-1" role="dialog" aria-labelledby="cropLogoImage" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog imgCrop-modal" role="document">
        <div class="modal-content rounded-0">
            <div class="modal-header">
                <a class="close-circle" data-dismiss="modal" (click)="closeModal()"><i class="fa fa-times"></i></a>
                <h4 class="modal-title" id="cropLogoImage">Choose the image to be used as your company logo</h4>
            </div>
            <div class="modal-body" style="overflow-y: unset !important;">
                <div style="position: relative;top: -5px;width: 118px;" class="btn green fileinput-button-css" *ngIf="!imageChangedEvent"><span>Select image</span>
                    <input style="height: 36px;" title=" " id="custom-input" type="file" (change)="filenewChangeEvent($event)">
                </div>
                <div style="position: relative;top: -5px;" *ngIf="errorUploadCropper" style="color:red">*Please Upload only images</div>
                <div>
                    <ngx-loading [show]="loadingcrop" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop:true }"></ngx-loading>
                    <!-- <img-cropper #cropper *ngIf="!cropRounded" [image]="squareData" [settings]="squareCropperSettings"></img-cropper> -->
                    <div [hidden]="!imageChangedEvent">
                        <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false" [onlyScaleDown]="true" [roundCropper]="false" format="jpg" outputType="base64" (imageCropped)="imageCroppedMethod($event)" (imageLoaded)="imageLoaded()" (cropperReady)="cropperReady()"
                            (imageQuality)=0 (loadImageFailed)="loadImageFailed()" [style.display]="showCropper ? null : 'none'"></image-cropper>
                    </div>
                    <div *ngIf="!imageChangedEvent">
                        <fieldset style="background: #cacaca;height: 227px;margin-bottom: 5px;">
                        </fieldset>
                    </div>
                    <!-- <div *ngIf="showCropper"> <span>Aspect Ratio:</span> <button type="button" (click)="setValue('None')">None</button><button type="button" (click)="setValue('15/8')">15:8</button><button type="button" (click)="setValue('8/4')">8:4</button><button type="button" (click)="setValue('10/5')">10:5</button></div> -->

                </div>
                <div>
                    <button class="btn btn-primary" [disabled]="!showCropper" (click)="uploadLogo()">Save Changes</button>
                </div>
                <div>
                    <ul style="padding: 0 15px;">
                        <li>For optimal results, your logo should fit within the white rectangle.</li>
                        <li>If you would like to use a different logo in an email template, you can change it during the template design process.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
