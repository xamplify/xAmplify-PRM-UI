<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
<div class="wrap-collabsible">
  <input id="collapsible-vendor-report" class="toggle" type="checkbox">
  <label for="collapsible-vendor-report" class="lbl-toggle">Vendor Report</label>
  <div class="collapsible-content">
    <div class="content-inner">
     <!--Vendor Report-->
      <div>
        <app-list-loader [rowsCount]="12" *ngIf="isListLoading"></app-list-loader>
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">Vendor Report</div>
            <div class="inputs sort-class col-xs-5" style="float: right; margin-top: 2px;">
              <div class="col-xs-6" [ngClass]="{'search-css': !referenceService.isMobileScreenSize(), 'mobile-css':referenceService.isMobileScreenSize() }">
                <select class="form-control SeclectBoxPaddingsAbj" [(ngModel)]="sortOption" (ngModelChange)="sortByOption($event)">
              <ng-container *ngFor="let sort of sortOptions; let i = index">
                <option [ngValue]="sort">{{sort.name}}</option>
              </ng-container>
            </select>
              </div>
              <div class="col-xs-6 portlet-input input-inline search-class" [ngStyle]="{'width':referenceService.isMobileScreenSize()? '100%': 'unset'}">
                <div class="input-icon right" style="width: 230px; margin-left: -22px;">
                  <input type="text" [(ngModel)]="searchKey" [ngModelOptions]="{standalone: true}" class="form-control" placeholder="Search"
                    (keypress)="eventHandler($event.keyCode)">

                  <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="searchKey" (click)="searchKey='';search()"></button>
                  <button type="submit" class="search-box-item-click" (click)="search()"><i class="fa fa-search"></i></button>
                </div>
              </div>
            </div>
          </div>
          <div class="portlet-body clearfix">
            <div *ngIf="!isListLoading">
              <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
              <div class="table-responsive" *ngIf="pagination.totalRecords">
                <table class='table tgrid'  aria-describedby="">
                  <thead>
                    <tr>
                      <th style="width: 20%;" scope="col">NAME</th>
                      <th class='text-center' scope="col">COMPANY</th>
                      <th class='text-center' scope="col">ROLE</th>
                      <th class='text-center' scope="col">STATUS</th>
                      <th class='text-center' scope="col">REGISTRATION DATE</th>
                      <th class='text-center' scope="col">LAST LOGIN</th>
                      <th class='text-center' scope="col">UPDATED TIME</th>
                      <th class="text-center" scope="col">ACTIONS</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let report of vendorsDetails;let i = index">
                      <!-- this div for ngFor -->
                      <tr (click)="navigateToDashboardStats(report)" class="highletedRow">
                        <td>
                          <app-user-info [userInfo]="report">
                          </app-user-info>
                        </td>
                        <td>{{report.companyName}}</td>
                        <td>
                          <span *ngIf="report.roleId==2">OrgAdmin</span>
                          <span *ngIf="report.roleId==13">Vendor</span>
                          <span *ngIf="report.roleId==20">PRM</span>
                          <span *ngIf="report.roleId==18">Marketing</span>
                        </td>
                        <td>{{report.userStatus}}</td>
                        <td>
                          <app-timestamp [dateAndTime]="report.dateReg"> </app-timestamp>
                        </td>
                        <td>
                          <app-timestamp [dateAndTime]="report.dateLastLogin"> </app-timestamp>
                        </td>
                        <td>
                          <app-timestamp [dateAndTime]="report.updatedTime"> </app-timestamp>
                        </td>
                        <td class="inline-custom-width" (click)="$event.stopPropagation();">
                          <a title="Company profile details" (click)="getVendorCompanyProfile(report)"> 
                            <i class="fa fa-building-o" style="font-size: 20px;" aria-hidden="true"></i>
                          </a>
                          <a  title="My profile details" (click)="getVendorMyProfile(report)"> 
                            <i class="fa fa fa-user-o" style="font-size: 20px;margin-left:5px" aria-hidden="true"></i>
                          </a>
                          <a  title="Send welcome email" (click)="$event.stopPropagation();sendWelcomeEmail(report)"> 
                            <i class="fa fa fa-envelope" style="font-size: 20px;margin-left:5px" aria-hidden="true"></i>
                          </a>
                          <a  title="Copy link" (click)="$event.stopPropagation();openLinkInPopup(report)"> 
                            <i class="fa fa fa-copy" style="font-size: 20px;margin-left:5px" aria-hidden="true"></i>
                          </a>
                          <a  title="Activate/Deactivate" (click)="$event.stopPropagation();activateOrDeactivate(report)"> 
                              <i class="fa fa-universal-access" style="font-size: 20px;margin-left:5px" aria-hidden="true"></i>
                          </a>
                          <a  title="Edit Modules" (click)="$event.stopPropagation();displayModuleAccess(report)"> 
                            <i class="fa fa-pencil-square-o" style="font-size: 20px;margin-left:5px" aria-hidden="true"></i>
                          </a>
                          <a  title="Edit Module Names" (click)="$event.stopPropagation();editModuleNames(report)"> 
                            <i class="fa fa-font" style="font-size: 20px;" aria-hidden="true"></i>
                          </a>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <app-pagination [pagination]="pagination" [type]="'admin-reports'" (notifyParent)="setPage($event)" (notifyParentDropDown)="onChangeAllContactUsers($event)"></app-pagination>
      </div>
    </div>
  </div>
</div>
<app-dynamic-email-content #dynamicEmailContentComponent></app-dynamic-email-content>