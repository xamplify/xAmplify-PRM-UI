<div class="wrap-collabsible">
  <input id="collapsible-partner-companies" name="collapsibleCheckBox" class="toggle" type="checkbox" checked>
  <label for="collapsible-partner-companies" class="lbl-toggle">Partner Companies</label>
  <div class="collapsible-content">
    <div class="content-inner">
      <!--Partner Companies-->
      <div>
        <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }">
        </ngx-loading>
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">All Partner Companies</div>
        <div class="inputs">
        <a class="close-circle" (click)="refreshList()" data-toggle="tooltip" data-placement="top" title="Refresh">
          <i class="fa fa-refresh margin" aria-hidden="true"></i>
        </a>
          <div id="left" [ngClass]="{'search-css': !referenceService.isMobileScreenSize(), 'mobile-css':referenceService.isMobileScreenSize() }">
              <select class="form-control" [(ngModel)]="sortOption.selectedPartnerCompanyDropDownOption"
                          (ngModelChange)="sortBy($event)" style="position: relative;right: -3px;">
                          <option *ngFor="let option of sortOption.partnerCompanySortDropDownOptions" [ngValue]="option">
                            {{option.name}}</option>
              </select>
          </div>
          <div class="portlet-input input-inline" id="search-margin" [ngStyle]="{'width':referenceService.isMobileScreenSize()? '100%': 'unset'}">
        <div class="input-icon right" id="icon-right">
          <input type="text" id="search-text" class="form-control" [(ngModel)]="sortOption.searchKey"
            [ngModelOptions]="{standalone: true}" placeholder="search..."
            (keypress)="eventHandler($event.keyCode)">
          <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey"
            (click)="sortOption.searchKey='';search()"></button>
          <button type="submit" class="search-box-item-click" (click)="search()">
            <i class="fa fa-search" aria-hidden="true"></i></button>
        </div>
      </div> 
          </div>
          </div>
            <app-list-loader  *ngIf="httpRequestLoader.isLoading"></app-list-loader>
          <div class="portlet-body clearfix"  *ngIf="!httpRequestLoader.isLoading && !hasError">
            <div>
              <div class="table-responsive">
                <table class='table tgrid' aria-describedby="all-Approved-users">
                  <thead>
                    <tr>
                      <th scope="col">Company Name</th>
                      <th scope="col">Company Profile Name</th>
                      <th scope="col" class="text-center">Maximum Admins</th>
                      <th id="center" scope="col">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let partnerCompany of pagination.pagedItems;let i = index">
                      <tr>
                        <td>
                          {{partnerCompany?.companyName}}
                        </td>
                        <td>
                          {{partnerCompany?.companyProfileName}}
                        </td>
                        <td class="text-center">
                          {{partnerCompany?.maxAdmins}}
                        </td>
                        <td id="center">
                          <a (click)="viewModules(partnerCompany)">
                            <i class="fa fa-pencil-square-o"  aria-hidden="true" style="font-size: 20px;margin-left:5px"></i>
                          </a>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <ng-container *ngIf="!hasError">
              <div *ngIf="pagination.pagedItems.length !== 0" class="pg8">
              <app-pagination [pagination]="pagination"
                (notifyParent)="setPage($event)"
                (notifyParentDropDown)="listAllPartners($event)"
                [hidden]="httpRequestLoader.isLoading">
              </app-pagination>
            </div>
              <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info">
                <strong>No Data Found.</strong>
              </div>
          </ng-container>
          <div *ngIf="hasError" class="alert alert-danger">
        <strong>Oops!Something went wrong.Please try again after sometime</strong>
      </div>
        </div>
      </div>
    </div>
  </div>


   <!-- ----------------------Module Access------------------- -->
   <div class="modal fade right" id="partner-module-access" data-backdrop="static">
    <div class="modal-dialog full-width">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close-circle" data-dismiss="modal">
            <i class="fa fa-times" aria-hidden="true"></i>
          </button>
          <h4 class="modal-title text-center">{{selectedPartnerCompany?.companyName}}</h4>
        </div>
        <div class="modal-body">
          <ngx-loading [show]="modalPopupLoader" [config]="{ backdropBorderRadius: '14px' }">
          </ngx-loading>
          <div class="table-responsive">
          <table class='table tgrid' aria-describedby="dns-congiruation-table">
            <thead>
              <tr>
                <th style="width: 20%;" scope="row">DNS Configuration</th>
                <th scope="row">
                  <input class="checkBox_shadow" type="checkbox" [(ngModel)]="dnsConfigured"
                  [ngModelOptions]="{standalone: true}"></th>
                  <th scope="row">
                    <button class="btn btn-primary" (click)="updateDnsConfiguration(selectedPartnerCompany.companyId)">Update</button>
                  </th>
                </tr>
            </thead>
          </table>
          </div>
          <div class="table-responsive">
            <table class='table tgrid table-hover' aria-describedby="Partner-Module-Table">
              <thead>
                <tr>
                  <th scope="row">Module Name</th>
                  <th scope="row">Access</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Login As Team Member</th>
                  <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.loginAsTeamMember"
                      [ngModelOptions]="{standalone: true}"></td>
                </tr>
                <tr>
                  <th scope="row">Exclude Users/Domains</th>
                  <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.excludeUsersOrDomains"
                      [ngModelOptions]="{standalone: true}"></td>
                </tr>
                <tr>
                  <th scope="row">Maximum Admins
                    <a *ngIf="!modalPopupLoader">
                      <span>
                        <strong>
                          <span title="Availed Admins">{{analyticsCountDto?.availed}}</span>  / <span title="Total Admins">{{analyticsCountDto?.total}}</span>
                        </strong>
                      </span>
                    </a>
                  </th>
                  <td style="width: 50%;">
                    <select class="form-control" id="maxAdmins-partners-Edit" [(ngModel)]="campaignAccess.maxAdmins" (change)="setMaxAdmins()">
                      <option value="2" [selected]="campaignAccess.maxAdmins ==2">2</option>
                      <option value="3" [selected]="campaignAccess.maxAdmins ==3">3</option>
                      <option value="4" [selected]="campaignAccess.maxAdmins ==4">4</option>
                      <option value="5" [selected]="campaignAccess.maxAdmins ==5">5</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <a class="btn btn-primary" (click)="updateModules(selectedPartnerCompany)">Update</a>
          <a data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
        </div>
      </div>
    </div>
  </div>