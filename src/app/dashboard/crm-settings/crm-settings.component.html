<div>
  <ngx-loading [show]="ngxLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
  <!-- Leads & Stage Details Start -->
  <div class="row m0">
    <fieldset class="scheduler-borders">
      <legend class="scheduler-borders campaign_boxes">Lead Form Settings</legend>
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0 mb-15">
        <!--Lead Form Layout-->
        <div  class="form-group">
          <label>Lead Form Layout<strong class="required">*</strong></label>
          <select class="form-control" [(ngModel)]="integrationDetails.leadFormColumnLayout"
            [ngModelOptions]="{standalone: true}" placeholder="leadFormColumnLayout" id="leadFormColumnLayout" [disabled]="false"
            (ngModelChange)="onChangeLeadFormType($event)">
            <option *ngFor="let formLayoutType of formLayoutTypes" [value]="formLayoutType.id">{{formLayoutType.name}}</option>
          </select>
          <img class="layout-css" src="{{leadFormLayoutPreviewImagePath}}" alt="No Image Found">
        </div>
        <div class="form-group mb0">
          <label>Lead Form Description</label>
          <textarea [(ngModel)]="leadDescription" rows="4" cols="4" class="form-control mb10" maxlength="500"></textarea>
        </div>
      </div>
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0">
        <div class="portlet light mb0" style="padding: 0px !important;">
          <div class="portlet-title leads-bgcolor mb0">
            <div class="row m0">
              <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Lead Pipeline</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow your partner to view the select pipeline option in the lead registration form"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="showLeadPipeline" (customUiSwitchEventEmitter)="onChangeLeadPipelines($event)"
                [isSwitchOptionDisabled]="!showLeadPipelineStage"></app-custom-ui-switch>
                </div>
              </div>
              <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Lead Stage</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow your partner to view the select stage option in the lead registration form"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="showLeadPipelineStage" (customUiSwitchEventEmitter)="onChangeLeadPipelineStage($event)">
                  </app-custom-ui-switch>
                </div>
              </div>
            </div>
          </div>
          <div class="row m0" *ngIf="!showLeadPipeline">
            <app-response-message [customResponse]="pipelineResponse" *ngIf="pipelineResponse.isVisible"></app-response-message>
            <!--Lead Pipeline-->
            <div class="col-xs-12 col-sm-6 col-md-6 col-xs-12  pt10" *ngIf="!pipelineResponse.isVisible">
              <div class="form-group">
                <label>Lead Pipeline<strong class="required">*</strong></label>
                <select class="form-control" [(ngModel)]="integrationDetails.leadPipelineId"
                  [ngModelOptions]="{standalone: true}" placeholder="pipelineId" id="leadPipelineId" [disabled]="false"
                  (ngModelChange)="onChangeLeadPipeline();validateField()">
                  <option [value]="0">Select Lead Pipeline</option>
                  <option *ngFor="let pipeline of leadPipelines" [value]="pipeline.id">{{pipeline.name}}</option>
                </select>
              </div>
              <div class="alert alert-info"><span>{{showLeadPipeLineCRMIntegrationMessage}}</span></div>
            </div>
            <!--Lead Pipeline Stage-->
            <div class="col-xs-12 col-sm-6 col-md-6 col-xs-12  pt10" *ngIf="!showLeadPipelineStage && !pipelineResponse.isVisible">
              <div class="form-group">
                <label>Lead Pipeline Stage<strong class="required">*</strong></label>
                <select class="form-control" [(ngModel)]="integrationDetails.leadPipelineStageId"
                  [ngModelOptions]="{standalone: true}" placeholder="leadPipelineStageId" id="leadPipelineStageId"
                  [disabled]="false" (ngModelChange)="validateField()">
                  <option [value]="0">Select Stage</option>
                  <option *ngFor="let stage of leadPipelineStages" [value]="stage.id">{{stage.stageName}}</option>
                </select>
              </div>
              <div class="alert alert-info"><span>{{showLeadPipeLineStageCRMIntegrationMessage}}</span></div>
            </div>
          </div>
        </div>
      </div>
    </fieldset>
  </div>
  <!-- END -->
  <!-- Deal & Stage Details Start -->
  <div class="row m0">
    <fieldset class="scheduler-borders">
      <legend class="scheduler-borders campaign_boxes">Deal Form Settings</legend>
      <div  class="form-group">
        <label>Deal Form Layout<strong class="required">*</strong></label>
        <select class="form-control" [(ngModel)]="integrationDetails.dealFormColumnLayout"
          [ngModelOptions]="{standalone: true}" placeholder="dealFormColumnLayout" id="dealFormColumnLayout" [disabled]="false"
          (ngModelChange)="onChangeDealFormType($event)">
          <option *ngFor="let formLayoutType of formLayoutTypes" [value]="formLayoutType.id">{{formLayoutType.name}}</option>
        </select>
        <img class="layout-css" src="{{dealFormLayoutPreviewImagePath}}" alt="No Image Found">
      </div>
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0 mb-15">
        <div class="form-group mb0">
          <label>Deal Form Description</label>
          <textarea [(ngModel)]="dealDescription" rows="4" cols="4" class="form-control mb10" maxlength="500"></textarea>
      </div>
      </div>
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0">
        <div class="portlet light mb0" style="padding: 0px !important;">
          <div class="portlet-title leads-bgcolor mb0">
            <div class="row m0">
              <!--Show Deal Pipeline-->
              <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Deal Pipeline</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow your partner to view the select pipeline option in the deal registration form"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="showDealPipeline" (customUiSwitchEventEmitter)="onChangeDealPipelines($event)"
                  [isSwitchOptionDisabled]="!showDealPipelineStage"></app-custom-ui-switch>
                </div>
              </div>
              <!--Show Deal Stage-->
              <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Deal Stage</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow your partner to view the select stage option in the deal registration form"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="showDealPipelineStage" (customUiSwitchEventEmitter)="onChangeDealPipelineStage($event)"></app-custom-ui-switch>
                </div>
              </div>
            </div>
          </div>
          <div class="row m0" *ngIf="!showDealPipeline">
            <app-response-message [customResponse]="pipelineResponse" *ngIf="pipelineResponse.isVisible"></app-response-message>
            <!--Deal PipeLine-->
            <div class="col-xs-12 col-sm-6 col-md-6 col-xs-12  pt10" *ngIf="!pipelineResponse.isVisible">
              <div class="form-group">
                <label>Deal Pipeline<strong class="required">*</strong></label>
                <select class="form-control" [(ngModel)]="integrationDetails.dealPipelineId" [ngModelOptions]="{standalone: true}" placeholder="pipelineId" id="dealPipelineId" [disabled]="false"
                  (ngModelChange)="onChangeDealPipeline();validateField()">
                  <option [value]="0">Select Deal Pipeline</option>
                  <option *ngFor="let pipeline of dealPipelines" [value]="pipeline.id">{{pipeline.name}}</option>
                </select>
              </div>
              <div class="alert alert-info">
                <span>{{showDealPipeLineCRMIntegrationMessage}}</span></div>
            </div>
            <!--Deal PipeLine Stage-->
            <div class="col-xs-12 col-sm-6 col-md-6 col-xs-12  pt10" *ngIf="!showDealPipelineStage && !pipelineResponse.isVisible">
              <div class="form-group">
                <label>Deal Pipeline Stage
                  <strong class="required">*</strong>
                </label>
                <select class="form-control" [(ngModel)]="integrationDetails.dealPipelineStageId"
                  [ngModelOptions]="{standalone: true}" placeholder="dealPipelineStageId" id="dealPipelineStageId"
                  [disabled]="false" (ngModelChange)="validateField()">
                  <option [value]="0">Select Stage</option>
                  <option *ngFor="let stage of dealPipelineStages" [value]="stage.id">{{stage.stageName}}</option>
                </select>
              </div>
              <div class="alert alert-info"><span>{{showDealPipeLineStageCRMIntegrationMessage}}</span></div>
            </div>
          </div>
        </div>
      </div>
    </fieldset>
  </div>
  <!-- END -->
  <!-- Deal Register Start -->
  <div class="row m0">
    <fieldset class="scheduler-borders">
      <legend class="scheduler-borders campaign_boxes">Deal Registration</legend>

      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0" *ngIf="authenticationService?.module?.isOrgAdmin || authenticationService?.module?.isVendor || authenticationService?.module?.isPrm">
        <div class="portlet light mb-2" style="padding: 0px !important;">
          <div class="portlet-title leads-bgcolor mb0">
            <div class="row m0">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Register Deal option for partner(s)</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow your partner to view the 'Register Deal' option"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="dealByPartner" (customUiSwitchEventEmitter)="onChangeRegisterDeal($event)"></app-custom-ui-switch>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="alert alert-info">
          <p *ngIf="dealByPartner">{{showRegisterDealToPartnerOnMessage}}</p>
          <p *ngIf="!dealByPartner">{{showRegisterDealToPartnerOffMessage}}</p>
        </div>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0" 
      *ngIf="authenticationService?.module?.isOrgAdmin || authenticationService?.module?.isVendor || authenticationService?.module?.isPrm || (authenticationService?.module?.adminOrSuperVisor && !authenticationService?.module?.isMarketingCompany)">
        <div class="portlet light mb-2" style="padding: 0px !important;">
          <div class="portlet-title leads-bgcolor mb0">
            <div class="row m0">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Register Deal option for partner submitted leads</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow you to view the 'Register Deal' option for partner submitted leads"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="dealByVendor" (customUiSwitchEventEmitter)="onChangeVendorRegisterDeal($event)"></app-custom-ui-switch>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="alert alert-info">
          <p *ngIf="dealByVendor">{{showRegisterDealForPartnerLeadsOnMessage}}</p>
          <p *ngIf="!dealByVendor">{{showRegisterDealForPartnerLeadsOffMessage}}</p>
        </div>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p0" *ngIf="authenticationService?.module?.isOrgAdmin || authenticationService?.module?.isMarketing || authenticationService?.isOrgAdminSuperVisor 
      || (authenticationService?.module?.isMarketingTeamMember && authenticationService?.module?.adminOrSuperVisor)">
        <div class="portlet light mb-2" style="padding: 0px !important;">
          <div class="portlet-title leads-bgcolor mb0">
            <div class="row m0">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-inlines">
                  <div class="form-group mb0 mr-20">
                    <span class="lead-label">Show Register Deal option for self leads</span>
                    <i class="fa fa-info-circle info_circle"  data-toggle="tooltip" data-placement="top"
                    title="Enabling this option will allow you to view the 'Register Deal' option for self leads"></i>
                  </div>
                  <app-custom-ui-switch [customSwitch]="dealBySelfLead" (customUiSwitchEventEmitter)="onChangeSelfRegisterDeal($event)"></app-custom-ui-switch>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="alert alert-info">
          <p *ngIf="dealBySelfLead">{{showRegisterDealToSelfLeadsOnMessage}}</p>
          <p *ngIf="!dealBySelfLead">{{showRegisterDealToSelfLeadsOffMessage}}</p>
        </div>
      </div>
    </fieldset>
    <button type="button" class="button_blue bgcolor-unset pr0 px-9 pull-right mt10" (click)="updateCRMSettings()"
      [disabled]="!isValid"><span class="btn btn-primary transition txt_pd-top3">Submit</span></button>
  </div>
  <!-- END -->

</div>
