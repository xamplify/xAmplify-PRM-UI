<!--Manage Custom Fields-->
<div class="portlet light" id="manage-custom-fields">
  <!--Search & Filter-->
  <div class="portlet-title">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-lg-12">
        <div class="col-xs-12 col-sm-5 col-lg-5 p0 mb_10 mt--5">
          <button class="button_blue bgcolor-unset pd_lft2" (click)="openAddModalPopUp()">
          <span class="btn btn-primary transition txt_pd-top3">Add</span></button>
      </div>
      <!--Header-->
      <div class="col-xs-12 col-sm-7 col-lg-7 p0">
        <div class="page-toolbar">
            <div class="btn-group pull-right">
                <div class="inputs float-right" style="display: inline-flex;">
                    <div class="float-left">
                        <select class="form-control" [(ngModel)]="sortOption.selectedCustomFieldsSortDropDownOption"
                          (ngModelChange)="sortBy($event)" id="select-dropdown">
                            <option *ngFor="let option of sortOption.customFieldsDropDownOptions"  [ngValue]="option">{{option.name}}</option>
                        </select>
                    </div>
                    <div>
                        <div class="ml5">
                            <input type="text" autocomplete="off" id="sort-text" class="form-control" [(ngModel)]="sortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="Search..." (keydown.enter)="search()">
                            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey" (click)="sortOption.searchKey='';search();"></button>
                            <button type="submit" class="search-box-item-click"(click)="search();"><i class="fa fa-search" aria-hidden="true"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
      </div> 
    </div>
  </div>  

  <app-list-loader *ngIf="httpRequestLoader?.isLoading"></app-list-loader>
    <div class="alert alert-info text-center" *ngIf="pagination?.totalRecords==0 && !httpRequestLoader?.isLoading">No Data Found</div>
    <ng-container *ngIf="pagination?.totalRecords>0 && !httpRequestLoader?.isLoading">
      <div  class="table-responsive">
        <table class='table tgrid table-hover table-sm' id="custom-fields">
          <thead>
            <tr>
              <th colspan="1" style="width: 30%">
                <span class="ui-column-resizer gray" (mousedown)="referenceService?.onMouseDown($event,'custom-fields',1)"> </span>
                <span class="gridHeader">Field Name</span>
              </th>
              <th class="text-center">Created On</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let customField of pagination?.pagedItems ;let i =index" id="custom-field-{{customField.id}}">
              <td>
                <h4 class="moreipsis" data-toggle="tooltip" data-placement="bottom"  title="{{customField?.fieldName}}">
                  <span>{{customField?.fieldName}}</span>
                </h4>
                <h6 class="moreipsis">
                  <span translate>Created By <strong>{{customField?.createdBy}}</strong></span>
                </h6>
              </td>
              <td class="text-center">
                <app-display-date-and-time [dateAndTimeUTCString]="customField?.createdTimeInString"></app-display-date-and-time>
              </td>
              <td>
                <div class="actions-block override-actions float-none">
                  <a class="custom-icon" data-toggle="tooltip" data-placement="top" title="Edit" (click)="findById(customField.id)">
                    <i class="fa fa-pencil-square-o IconCustomization" aria-hidden="true"></i>
                    <div class="clickicons"></div>
                  </a>
                  <a id="template-delete" class="custom-icon" (click)="confirmDeleteAlert(customField)" data-toggle="tooltip"
                    data-placement="top" title="Delete">
                    <i class="fa fa-trash-o trashIconCustomization" aria-hidden="true"></i>
                    <div class="del-icon"></div>
                  </a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="pg8">
          <app-pagination [pagination]="pagination" (notifyParent)="navigateBetweenPageNumbers($event)"
            (notifyParentDropDown)="findPaginatedCustomFields($event)"></app-pagination>
        </div> 
      </div>
    </ng-container>
</div>  

<!--Add Custom Field-->
<div class="portlet-body clearfix" id="add-custom-field" style="display: none;">
  <app-response-message class="pg8" [customResponse]="customResponse" *ngIf="customResponse?.isVisible">
  </app-response-message>
  <div class="tab-content" *ngIf="!addLoader?.isLoading"></div>
    <a class="close-circle" style="margin-top:-13px;" (click)="goToManage()">
      <i class="fa fa-close" aria-hidden="true"></i>
    </a>
    <form role="form" aria-labelledby="add-custom-field-form">
      <div class="form-group">
        <label class="control-label">Field Name</label>
        <span class="required">*</span>
        <input type="text" maxlength="255" placeholder="Field Name" [(ngModel)]="customField.fieldName"
          [ngModelOptions]="{standalone: true}" class="form-control" (input)="validateForm()" />
        <span class="required"
          *ngIf="customField?.dupliateNameErrorMessage?.length>0">{{customField?.dupliateNameErrorMessage}}</span>
      </div>
      <div id="right">
        <button type="button" [disabled]="!customField.isValidForm" class="button_blue bgcolor-unset" (click)="saveOrUpdate()">
          <span class="btn btn-primary transition txt_pd-top3">{{submitButtonText}}</span>
        </button>
        <button type="button" class="btn Btn-Gray neg_mrg_top4" (click)="goToManage()" translate>Cancel</button>
      </div>
    </form>
  </div>
