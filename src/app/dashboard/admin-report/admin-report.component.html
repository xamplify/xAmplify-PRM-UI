<ng-container *ngIf="!referenceService.loaderFromAdmin">
<div class="page-content ml0">
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
  <div class="page-bar">
    <ul class="page-breadcrumb">
      <li>
        <i class="fa fa-home" aria-hidden="true"></i>
        <a (click)="detailsTielsView = false">Admin Report</a>
      </li>
    </ul>
  </div>

 <ng-container *ngIf="!isVanityUrlEnabled">
  <div class="page-bar">
    <ul class="page-breadcrumb float-right">
      <!--Update Email Address-->
      <li class="topnav-button-css" style="display: none;">
        <button class="btn btn-primary" (click)="updateEmailAddress()"><span>Update Email Address</span></button>
      </li>
      <!--Expand/Collpase-->
      <li class="topnav-button-css">
        <button class="btn btn-primary" (click)="expandOrCollpase()"><span>Expand / Collapse</span></button>
      </li>
      <!--Upgrade Partner Account-->
      <li class="topnav-button-css">
        <button class="btn btn-primary" (click)="openUpgradeAccountModal()"><span>Upgrade Partner Account</span><i class="fa fa-level-up" aria-hidden="true"></i></button>
      </li>
      <!--Create An Account-->
      <li class="topnav-button-css">
          <button class="btn btn-primary" (click)="createNewAccount()"><span>Create An Account</span><i class="fa fa-user" aria-hidden="true"></i></button>
      </li>
    </ul>
  </div>
  <div>
    <!--List All Users-->
    <app-list-all-users></app-list-all-users> 
    <!--Processing User Lists-->
    <app-processing-user-lists></app-processing-user-lists>
    <!--Demo Requests-->
    <app-demo-request></app-demo-request>
    <!--Top 10 Recent Registered / Loggedin Users-->
	  <section>
      <div class="wrap-collabsible">
        <input id="collapsible-recent-users" name="collapsibleCheckBox" class="toggle" type="checkbox" checked>
        <label for="collapsible-recent-users" name="collapsibleCheckBox" class="lbl-toggle">Top 10 recent registered/logged in users</label>
        <div class="collapsible-content">
          <div>
             <!-- -Top 10 Recent Registered Users -->
            <app-recent-logged-in-users [type]="'registered'" (notifyAdminReportComponent)="selectedVendorDetails($event)"></app-recent-logged-in-users>
            <!-- ---Top 10 Recent LoggedIn Users -->
            <app-recent-logged-in-users [type]="'logged in'" (notifyAdminReportComponent)="selectedVendorDetails($event)"></app-recent-logged-in-users>
          </div>
        </div>
      </div>
    </section>
    <!---Vendor Report-->
    <app-vendor-report></app-vendor-report>
    <!-----------Partner Companies------->
    <app-admin-partner-companies></app-admin-partner-companies>
    <!------Vendor Invitation Reports-->
    <app-vendor-invitation-report></app-vendor-invitation-report>
    <!------Marketing Role Requests-->
    <app-marketing-role-requests></app-marketing-role-requests>
    <!------Processing Campaigns-->
    <app-processing-campaigns [scheduledCampaigns]="false"  ></app-processing-campaigns>
    <!------Scheduled Campaigns-->
    <app-processing-campaigns [scheduledCampaigns]="true" ></app-processing-campaigns>
    <!------Active Queries-->
    <app-active-queries></app-active-queries>
    <!------Active Threads Info-->
    <app-active-threads-info></app-active-threads-info>
    <!--Support Account Users---->
    <app-support-account-users></app-support-account-users>
  </div>
</ng-container>

<!--Vanity Url Login-->
  <div *ngIf="isVanityUrlEnabled">
     <!--List All Users For Logged In Vendor Vanity-->
     <app-list-all-users></app-list-all-users> 
     <!--List All Partners For Logged In Vendor Vanity-->
     <app-list-all-users [showPartners]="true"></app-list-all-users>
  </div>
      <!-- Add Background Image OF GlassMorphism Light and Dark Start-->
<section>
  <div class="wrap-collabsible">
    <input id="collapsible-upload-image" name="collapsibleCheckBox" class="toggle" type="checkbox" checked>
    <label for="collapsible-upload-image" name="collapsibleCheckBox" class="lbl-toggle">Upload Default GlassMorphism Images</label>
    <div class="collapsible-content">
      <div class="row">
       <app-background-image-upload [type]="'GLASSMORPHISMLIGHT'"></app-background-image-upload>
       <app-background-image-upload [type]="'GLASSMORPHISMDARK'"></app-background-image-upload>
      </div>
    </div>
  </div>
</section>
<!-- Add Background Image OF GlassMorphism Light and Dark end-->

  <app-scroll-top></app-scroll-top>
   <section>
    <!-- ---Access Modal Pop Up -->
    <div class="modal right " id="access-modal" data-backdrop="static">
        <div class="modal-dialog modal-lg" style="width: 75%;right:0">
          <div class="modal-content">
          <ngx-loading [show]="updateFormLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
            <div class="modal-header">
              <button type="button" class="close-circle" data-dismiss="modal">
                <i class="fa fa-times"></i>
              </button>
              <h4 class="modal-title text-center" id="email-template-title">Available Modules</h4>
            </div>
            <div class="modal-body">
              <app-response-message [customResponse]="updateFormCustomResponse" *ngIf="updateFormCustomResponse.isVisible"></app-response-message>
              <div class="portlet-body clearfix">
              <div class="table-responsive" style="overflow-x:inherit">
                <table class="table table-striped  table-hover" style="width:100%">
                  <tr>
                    <th>Email Campaign</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.emailCampaign"></td>
                  </tr>
                  <tr>
                    <th>Video Campaign</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.videoCampaign"></td>
                  </tr>
                  <tr>
                    <th>Social Campaign</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.socialCampaign"></td>
                  </tr>
                  <tr>
                    <th>Event Campaign</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.eventCampaign"></td>
                  </tr>
                  <tr>
                    <th>Leads</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.leads"></td>
                  </tr>
                  <tr>
                    <th>Form Builder</th>
                  <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.formBuilder"></td>
                  </tr>
                  <tr>
                    <th>Page</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.landingPage"></td>
                  </tr>
                  <tr>
                    <th>Page Campaign</th>
                    <td><input class="checkBox_shadow" type="checkbox" [(ngModel)]="campaignAccess.landingPageCampaign"></td>
                  </tr>
                </table>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" (click)="updateAccess()" class="btn btn-info">Update</button>
              <a data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
            </div>
          </div>
        </div>
    </div>
  </section>
</div>
<app-dynamic-email-content #dynamicEmailContentComponent></app-dynamic-email-content>

</ng-container>

<!-- ---------------------Upgrade Account------------------ -->
<div class="modal fade right" id="upgrade-account-modal" data-backdrop="static">
  <div class="modal-dialog full-width">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title text-center">Upgrade Account</h4>
        <div class="table-responsive">
          <table class='table tgrid table-bordered' aria-describedby="">
            <thead>
              <tr>
                <th style="width: 10%;" scope="row">Enter Email</th>
                <th scope="row" style="width: 50%;">
                  <input type="email" class="form-control" placeholder="Enter Email" autocomplete="off" [(ngModel)]="emailId"
                   [ngModelOptions]="{standalone: true}" (keypress)="upgradeAccountOnKeyPress($event.keyCode)">
                  <span *ngIf="!validEmailId" class="required"><strong>Please Enter Email</strong></span>
                </th>
                  <th scope="row" class="inline-flex">
                    <button [disabled]="upgradeAccountLoader" class="btn btn-primary" (click)="findCompanyInfo()">Search</button>
                    <button (click)="closeUpgradeAccountModal()" [disabled]="upgradeAccountLoader" class="btn btn-danger float-right">Close</button>
                  </th>
                </tr>
            </thead>
          </table>
        </div>
      </div>
      <div class="modal-body">
        <app-response-message [showCloseIcon]="false" [customResponse]="upgradeAccountResponse" *ngIf="upgradeAccountResponse?.isVisible"></app-response-message>
        <app-modal-popup-loader *ngIf="upgradeAccountLoader"></app-modal-popup-loader>
        <div *ngIf="!upgradeAccountLoader && (upgradeAccountStatusCode==200 || upgradeAccountStatusCode==400)">
          <!--Company Info--->
          <div class="table-responsive">
              <table class='table tgrid' aria-describedby="">
                <thead>
                  <tr>
                  <th>Company Name</th>
                  <th class="text-center">Company Profile Name</th>
                  <th class="text-center">Company Type</th>
                  <th *ngIf="upgradeAccountStatusCode==200" class="text-center">Upgrade Account</th>
                </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>{{companyInfo?.companyName}}</td>
                    <td class="text-center">{{companyInfo?.companyProfileName}}</td>
                    <td [className]="companyInfo?.companyType=='Partner' && upgradeAccountStatusCode==200 ? 'text-center success':'text-center info'">
                      <strong>{{companyInfo?.companyType}}</strong></td>
                    <td class="text-center" *ngIf="upgradeAccountStatusCode==200"> 
                      <select id="upgrade-account-type" class="form-control" *ngIf="companyInfo?.companyType=='Partner'" (change)="upgradeAccountType()">
                        <option value="0">--Please Select Option--</option>
                        <option value="20">PRM</option>
                        <option value="18">Marketing</option>
                        <option value="13">Vendor</option>
                        <option value="2">Org Admin</option>
                      </select>
                      <strong class="required" *ngIf="companyInfo?.companyType!='Partner'">Upgrade Option Available Only For Partner Accounts.</strong>
                    </td>
                  </tr>
                </tbody>
              </table>
          </div>
          
          <!----Admins And Team Members----->
          <div class="table-responsive" *ngIf="adminsAndTeamMembers?.length>0">
            <table class="table tgrid table-bordered"  aria-describedby="">
              <thead>
                <th>
                  <h4  translate>
                    <img src="../../../assets/images/user-permission.png" alt="No Image Found">
                    Admins & Team Members {{adminAndTeamMembers?.length}}
                </h4>
                </th>
                <th class="text-center">
                  <i class="fa fa-user" aria-hidden="true"></i><br>Admin
                </th>
                <th class="text-center">
                  <i class="fa fa-lock" aria-hidden="true"></i><br>Status
                </th>
              </thead>
              <tbody>
                <tr *ngFor="let adminOrTeamMember of adminsAndTeamMembers;let i=index">
                  <td>
                    <app-user-info [isPartnerEntityInfo]="true" [userInfo]="adminOrTeamMember"></app-user-info>
                    <span class="active-status" *ngIf="adminOrTeamMember?.primaryAdmin">
                      <strong>Primary Admin:<i class="fa fa-check active-status"></i></strong>
                    </span>
                  </td>
                  <!---Second Admin---->
                  <td class="text-center">
                    <div class="actions-block float-none">
                      <i  [className]="adminOrTeamMember?.secondAdmin || adminOrTeamMember?.primaryAdmin ? 'fa fa-check active-status':'fa fa-times required'" aria-hidden="true"></i >
                    </div>
                  </td>
                  <!---Enabled/Disabled---->
                  <td class="text-center" *ngIf="adminOrTeamMember?.status=='UNAPPROVED'" [title]="adminOrTeamMember?.status=='UNAPPROVED'? 'This team member account is not activated yet':'Enable/Disable team member'">
                    <div class="actions-block float-none">
                      <i class="fa fa-times required" aria-hidden="true"></i>
                    </div>
                  </td>
                  <td class="text-center" *ngIf="adminOrTeamMember?.status!='UNAPPROVED' && adminOrTeamMember?.status!='DECLINE'">
                  <div class="actions-block float-none">
                      <i class="fa fa-check active-status" aria-hidden="true"></i>
                    </div>
                  </td>
                  <td class="text-center" *ngIf="adminOrTeamMember?.status=='DECLINE'" title="This team member is inactive">
                    <div class="actions-block float-none">
                      <i class="fa fa-times required" aria-hidden="true"></i>
                    </div>
                  </td>
                  <!---Enabled/Disabled---->
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Update Password-->
<app-update-password #updatePasswordComponent></app-update-password>


