<div class="modal right fade" id="integrationSettingsForm" tabindex="-1" role="dialog"
  aria-labelledby="integrtaionModalLabel" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog modal-css" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close-circle" data-dismiss="modal" (click)="hideIntegrationSettingForm()"><i
            class="fa fa-times"></i></a>
        <h4 class="modal-title" id="templateRetrieve" translate>Custom Fields Settings</h4>
        <div>
        </div>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <div class="alert alert-danger" id="company-profile-error-div" *ngIf="!isValid">
            <a class="close" aria-label="close" (click)="isValid = true">x</a>
            <strong>{{errorMessage}}</strong>
          </div>
          <label>Name of the CustomField</label>
          <input type="text" [disabled]="customFields.label.length >= 1" [(ngModel)]="customFields.label"
            class="form-control">
          <div class="row" style="margin-top: 10px;">
            <div class="col-sm-6">
              <label *ngIf="customFields.selected" for="required">Required</label>
              <span class="fa fa-info-circle pipelinedata" data-toggle="tooltip" data-placement="right"
                title="Your partner must fill in this custom field if you toggle on this option."></span>
              <label class="toggleOnOff" [ngClass]="!customFields?.canEditRequired ? 'disabled-opacity':''"
                [attr.data-toggle]="!customFields?.canEditRequired ? 'tooltip' : null"
                [attr.data-placement]="!customFields?.canEditRequired ? 'right' : null"
                [attr.title]="!customFields?.canEditRequired ? 'Marked as required in your CRM account.' : null">
                <input class="checkBox_shadow" type="checkbox" [disabled]="!customFields.canEditRequired"
                  [(ngModel)]="customFields.required" [ngModelOptions]="{standalone: true}">
                <span class="sliderOnOff"></span>
                <span class="labels" data-on="ON" data-off="OFF"></span>
              </label>
            </div>
            <div class="col-sm-6">
              <label *ngIf="customFields.selected" for="displayName">Display Name</label>
              <input *ngIf="customFields.selected" type="text" class="form-control"
                [(ngModel)]="customFields.displayName" [ngModelOptions]="{standalone: true}" placeholder="Display Name">
            </div>
          </div>
          <div class="row" style="margin-top: 10px;">
            <div class="col-sm-6">
              <label *ngIf="customFields.selected" for="placeHolder">Placeholder</label>
              <input *ngIf="customFields.selected" type="text" class="form-control" placeholder="Placeholder"
                [(ngModel)]="customFields.placeHolder" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="col-sm-6" *ngIf="!isDefaultField && customFields.type === 'string'">
              <label *ngIf="customFields.selected" for="html" style="float: left;">Map As</label>
              <select class="form-control" [disabled]= "canDisableSelect" *ngIf="customFields.selected" [(ngModel)]="customFields.formDefaultFieldType"
                [ngModelOptions]="{standalone: true}" (change)="onFieldTypeChange(customFields)">
                <option [ngValue]="null">None</option>
                <option *ngIf="opportunityType === 'DEAL'" [ngValue]="'DEAL_ID'">Deal Id
                </option>
                <option *ngIf="opportunityType === 'LEAD'" [ngValue]="'LEAD_ID'">Lead Id
                </option>
                <option [ngValue]="'CREATED_BY_NAME'">Created By Name
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_FIRST_NAME'">Contact First Name
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_LAST_NAME'">Contact Last Name
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_TITLE'">Contact Title
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_ZIP_CODE'">Contact Zip Code
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_STATE'">Contact State
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_CITY'">Contact City
                </option>
                <option *ngIf="opportunityType === 'DEAL' && customFields.type === 'string'" [ngValue]="'CONTACT_COUNTRY'">Contact Country
                </option>
              </select>
            </div>
            <div class="col-sm-6" *ngIf="!isDefaultField && customFields.type === 'date' && opportunityType === 'LEAD'">
              <label *ngIf="customFields.selected" for="html" style="float: left;">Map As</label>
              <select class="form-control" [disabled]= "canDisableSelect" *ngIf="customFields.selected" [(ngModel)]="customFields.formDefaultFieldType"
                [ngModelOptions]="{standalone: true}" (change)="onFieldTypeChange(customFields)">
                <option [ngValue]="null">None</option>
                <option  [ngValue]="'XAMPLIFY_LEAD_REGISTERED_DATE'">xAmplify Lead Registered Date
                </option>
              </select>
            </div>
            <div class="col-sm-6" *ngIf="!isDefaultField && (customFields.type === 'date' || customFields.type === 'email' || customFields.type === 'phone' || customFields.type === 'textarea' || customFields.type === 'picklist') && opportunityType === 'DEAL'">
              <label *ngIf="customFields.selected" for="html" style="float: left;">Map As</label>
              <select class="form-control" [disabled]= "canDisableSelect" *ngIf="customFields.selected" [(ngModel)]="customFields.formDefaultFieldType"
                [ngModelOptions]="{standalone: true}" (change)="onFieldTypeChange(customFields)">
                <option [ngValue]="null">None</option>
                <option *ngIf="customFields.type === 'date'"[ngValue]="'XAMPLIFY_LEAD_CREATED_DATE'">xAmplify Lead Created Date
                </option>
                <option *ngIf="customFields.type === 'date'" [ngValue]="'XAMPLIFY_DEAL_REGISTERED_DATE'">xAmplify Deal Registered Date
                </option>
                <option *ngIf="customFields.type === 'email'" [ngValue]="'CONTACT_EMAIL'">Contact Email
                </option>
                <option *ngIf="customFields.type === 'phone'" [ngValue]="'CONTACT_PHONE_NUMBER'">Contact Phone Number
                </option>
                <option *ngIf="customFields.type === 'textarea'" [ngValue]="'CONTACT_STREET'">Contact Street
                </option>
                <option *ngIf="customFields.type === 'picklist'" [ngValue]="'CONTACT_COUNTRY'">Contact Country
                </option>
                <option *ngIf="customFields.type === 'picklist'" [ngValue]="'CONTACT_STATE'">Contact State
                </option>
              </select>
            </div>
          </div>
          <div class="row" style="margin-top: 10px;">
            <div class="col-sm-6">
              <div *ngIf="customFields.selected && (customFields.type === 'picklist' || (customFields.type === 'reference' && customFields.referenceTo[0] === 'Account'))">
                <label for="required">Non Interactive</label>
                <span class="fa fa-info-circle" data-toggle="tooltip" data-placement="right"
                  title="Enabling this option will restrict your partner from selecting the picklist value."></span>
                <label class="toggleOnOff" [ngClass]="customFields.controllerName?.length >= 1 ? 'disabled-opacity':''">
                  <input class="checkBox_shadow" type="checkbox" [disabled]="customFields.controllerName?.length >= 1"
                    [(ngModel)]="customFields.nonInteractive" [ngModelOptions]="{standalone: true}">
                  <span class="sliderOnOff"></span>
                  <span class="labels" data-on="ON" data-off="OFF"></span>
                </label>
              </div>
              <div *ngIf="customFields.selected && (customFields.type === 'picklist' || (customFields.type === 'reference' && customFields.referenceTo[0] === 'Account')) && customFields.nonInteractive">
                <label for="required" class="ml50">Private</label>
                <span class="fa fa-info-circle" data-toggle="tooltip" data-placement="right"
                  title="Enabling this option will restrict your partner from accessing this picklist."></span>
                <label class="toggleOnOff">
                  <input class="checkBox_shadow" type="checkbox" [(ngModel)]="customFields.private"
                    [ngModelOptions]="{standalone: true}">
                  <span class="sliderOnOff"></span>
                  <span class="labels" data-on="ON" data-off="OFF"></span>
                </label>
              </div>
            </div>
            <div class="col-sm-6">
              <div *ngIf="customFields.selected && customFields.type === 'picklist' && customFields.nonInteractive">
                <label class="control-label">Select Default Value<span class="required"><strong>*</strong></span></label>
                <select class="form-control" [(ngModel)]="customFields.defaultChoiceLabel" [ngModelOptions]="{standalone: true}"
                  placeholder="defaultChoiceId" id="defaultChoiceId">
                  <option *ngIf="customFields.picklistValues.length > 0" [value]="null">Select value</option>
                  <option *ngFor="let value of customFields.picklistValues" [value]="value.label">{{value.label}}
                  </option>
                </select>
              </div>
              <div *ngIf="customFields.selected && customFields.type === 'reference' && customFields.referenceTo[0] === 'Account' && customFields.nonInteractive">
                <label class="control-label">Select Default Type<span class="required"><strong>*</strong></span></label>
                <select class="form-control" [(ngModel)]="customFields.formLookUpDefaultFieldType"
                [ngModelOptions]="{standalone: true}">
                <option [ngValue]="null">Select value</option>
                <option  [ngValue]="'AUTO_SELECT_ACCOUNT_ID'">Auto Select Account ID
                </option>
              </select>
              </div>
            </div>
          </div>
          <div class="row" style="margin-top: 10px;">
            <div class="col-sm-6" *ngIf="!isDefaultField && customFields.type === 'string'">
              <label for="mapAs" style="float: left;">Data Type</label>
              <select class="form-control" [disabled]= "canDisableType" [(ngModel)]="customFields.originalCRMType" (change)="onLabelTypeChange(customFields)">
                <option [ngValue]="'text'">String</option>
                <option [ngValue]="'select'">PickList</option>
              </select>
            </div>       
          </div>
          <div *ngIf="customFields.originalCRMType === 'select'" class="bg-color-for-card" style="margin-top: 20px;">
            <div class="form-group mb0">
              <div *ngIf="customFields.options.length === 0" class="alert alert-info text-center mb0">
                <strong>Please <a (click)="addOption()">Click here</a> to add an Option</strong>
              </div>
            </div>

            <ul class="list-group mb0">
              <ng-container *ngFor="let option of customFields.options; let x = index">
                <li class="list-group-item" id="stage{{x}}">
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 d-flex">
                      <input type="text" placeholder="Enter Name" [(ngModel)]="option.label" maxlength="250"
                        class="form-control bg-color field-border-customization inputFieldWidth">
                        <button *ngIf="customFields.options.length > 1" type="button"
                          class="btn btn-danger deleteBntAligment" data-toggle="tooltip" data-placement="top"
                          title="Delete" (click)="delete(x)">
                          <span class="glyphicon glyphicon-trash"></span>
                        </button>
                    </div>
                  </div>
                </li>
              </ng-container>
            </ul>

            <a *ngIf="customFields.options.length >= 1" class="dashboard-stat pb0" style="padding: 9px 0;margin-top: 6px;"
              (click)="addOption()">
              <i class="fa fa-plus-square p0" style="margin: 0 5px;"></i> Add Option
            </a>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-bs-dismiss="modal" (click)="validateAndSubmit()"
          translate>Save</button>
      </div>
    </div>
  </div>
</div>