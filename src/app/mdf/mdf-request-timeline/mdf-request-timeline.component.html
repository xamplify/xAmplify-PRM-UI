<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
<div class="page-content">
  <div class="page-bar">
     <ul class="page-breadcrumb">
        <li><i class="fa fa-home" aria-hidden="true"></i> 
           <a translate>Home</a> <i class="fa fa-angle-right" aria-hidden="true"></i>
        </li>
        <li><a (click)="goBack()" translate>Manage MDF Requests</a>  <i class="fa fa-angle-right" aria-hidden="true"></i></li>
        <li><a translate>Timeline</a></li>
     </ul>
     <a class="close-circle xamp-margin-left-icon" (click)="goBack()" aria-hidden="true">
        <i class="fa fa-times" aria-hidden="true"></i>
    </a> 
    <a title="Refresh" class="close-circle xamp-margin-left-icon" (click)="refreshHistory()" aria-hidden="true">
        <i class="fa fa-refresh" aria-hidden="true"></i>
    </a>
  </div>
  <div class="row">
    <div class="col-md-12 col-lg-12">
       <div class="portlet light">
          <div class="portlet-title">
              <div class="caption" translate>
                 Request Details
              </div>
           </div>
          <app-dashboard-loader *ngIf="headerLoader"></app-dashboard-loader>
          <div class="row" *ngIf="!headerLoader">
             <div  class="col-md-12 col-lg-12" style="padding-left: 24px;padding-right: 30px;">
                <div class="row">
                    <div class="col-md-3 col-lg-3 text-left" style="padding-left: 60px;">
                        <label style="font-size: 15px;font-weight: 600; color: #65b6e4;">MDF Request</label><br>
                        <label style="font-size: 14px;font-weight: 600;">{{mdfRequest?.title}}</label>
                    </div>
                    <div class="col-md-3 col-lg-3 text-left">
                        <label style="font-size: 15px;font-weight: 600; color: #65b6e4;">Amount</label><br>
                        <label style="font-size: 14px;font-weight: 600;">$ {{mdfRequest?.requestAmount | number:'1.0':'en-US'}}</label>
                    </div>
                    <div class="col-md-3 col-lg-3 text-left">
                        <label style="font-size: 15px;font-weight: 600; color: #65b6e4;">Created Date</label><br>
                        <label style="font-size: 14px;font-weight: 600;">{{mdfRequest?.requestCreatedDateInString}}</label>
                    </div>
                    <div class="col-md-3 col-lg-3 text-left">
                      <label style="font-size: 15px;font-weight: 600; color: #65b6e4;">Event Date</label><br>
                      <label style="font-size: 14px;font-weight: 600;">{{mdfRequest?.eventDateInString}}</label>
                  </div>
                </div>
             </div>
          </div>
       </div>
    </div>
 </div>

 <div class="row">
    <div class="col-md-12 col-lg-12">
        <div class="portlet light" style="height:500px;">
            <app-modal-popup-loader *ngIf="timeLineLoader"></app-modal-popup-loader>
            <div class="row" *ngIf="!timeLineLoader">
                <div class="col-md-12 col-lg-12">
                    <div class="panel with-nav-tabs panel-default">
                        <div class="panel-heading">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#tab1default" data-toggle="tab">History</a></li>
                                <li><a href="#tab2default" data-toggle="tab">{{documentsTitle}}</a></li>
                            </ul>
                        </div>
                        <div class="panel-body">
                            <div class="tab-content">
                                <div class="tab-pane fade in active" id="tab1default">
                                    <div class="row">
                                        <div class="timeline">
                                            <div class="line text-muted"></div>
                                            <article *ngFor="let timeLine of mdfRequestTimeLineHistory" class="panel panel-default panel-outline">
                                                <div class="panel-heading icon">
                                                    <img class="img-circle mdf-style" src="{{timeLine?.profilePicturePath}}" alt="">
                                                </div>
                                                <div class="panel-body pt0">
                                                    <p>
                                                      <strong style="color:#65b6e4;">{{timeLine?.displayName}}</strong>
                                                      <ng-container *ngIf="timeLine?.statusInInteger!=1">
                                                        changed the status to 
                                                        <button class="btn btn-warning btn-xs cmargin">{{timeLine?.status}}</button>  
                                                      </ng-container>
                                                      <ng-container *ngIf="timeLine?.statusInInteger==1">
                                                        <button class="btn btn-warning btn-xs cmargin">Requested MDF</button>
                                                      </ng-container>
                                                      On
                                                       <strong>
                                                          <span *ngIf="!referenceService.isSafariBrowser()">{{timeLine?.displayTime |date:'mediumDate'}} {{timeLine?.displayTime |date:'shortTime'}}</span>
                                                          <span *ngIf="referenceService.isSafariBrowser()">{{timeLine?.displayTime}}</span>
                                                       </strong>
                                                       <ng-container *ngIf="timeLine?.statusInInteger==2 || timeLine?.statusInInteger==3">
                                                        <p *ngIf="timeLine?.allocationAmount!=null">Allocation Amount: <strong>$ {{timeLine?.allocationAmount | number:'1.0':'en-US'}}</strong></p>
                                                        <p *ngIf="timeLine?.allocationDateInString?.length>0">Allocation Date: <strong>{{timeLine?.allocationDateInString}}</strong></p>
                                                        <p *ngIf="timeLine?.expirationDateInString?.length>0">Expiration Date: <strong>{{timeLine?.expirationDateInString}}</strong></p>
                                                       </ng-container>
                                                       <ng-container *ngIf="timeLine?.statusInInteger==4">
                                                        <p *ngIf="timeLine?.reimburseAmount!=null">Reimbursement Amount: <strong>$ {{timeLine?.reimburseAmount | number:'1.0':'en-US'}}</strong></p>
                                                       </ng-container>
                                                      <p *ngIf="timeLine?.description?.length>0">Description: <strong>{{timeLine?.description}}</strong></p>
                                                </div>
                                            </article>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="tab2default">Default 2</div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
 </div>
  </div>