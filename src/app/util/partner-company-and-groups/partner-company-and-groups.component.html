<span [hidden]="authenticationService?.module?.isMarketingCompany">
  <label>Select {{authenticationService?.partnerModule?.customName}} / Group Of
    {{authenticationService?.partnerModule?.customName}} For Publishing </label>
  <!--Success Message-->  
	<div class="thank-you-pop" *ngIf="sendSuccess">
    <ng-container *ngIf="statusCode==200">
       <i class="fa fa-check" id="font-size-success" aria-hidden="true"></i>
       <h4 class="event-success">{{responseMessage}}</h4>
    </ng-container>
    <ng-container *ngIf="statusCode!=200">
       <i class="fa fa-info-circle" id="font-size-info" aria-hidden="true"></i>
       <h4 class="event-info">{{responseMessage}}</h4>
    </ng-container>
  </div>
  <!--Tabs-->
  <div class="panel with-nav-tabs panel-default" [hidden]="sendSuccess">
    <div class="panel-heading" id="company-and-group-tabs">
      <ul class="nav nav-tabs hideBorder">
        <!--Partner Companies-->
        <li id="partner-companies-li" [ngClass]="{'active': isPartnerCompaniesTabSelected}">
          <a class="partnerCompaniesC" id="width-205px"
            (click)="!isPartnerCompaniesTabSelected && activatePartnerCompaniesTab()" data-toggle="tab"
            href="javascript:void(0)">{{authenticationService?.partnerModule?.customName}}
            <i *ngIf="isPartnerCompaniesTabSelected" id="tick-mark" class="fa fa-check-circle-o success"></i>
          </a>
        </li>
        <!--Partner Groups-->
        <li id="partnerGroups-li" [ngClass]="{'active': isPartnerGroupsTabSelected}">
          <a class="partnerGroupsC" id="width-205px" (click)="!isPartnerGroupsTabSelected && activatePartnerGroupsTab()"
            data-toggle="tab" href="javascript:void(0)">Group Of {{authenticationService?.partnerModule?.customName}}
            <i *ngIf="isPartnerGroupsTabSelected" id="tick-mark" class="fa fa-check-circle-o success"></i>
          </a>
        </li>
      </ul>
    </div>
    <div class="panel-body">
      <div class="tab-content">
        <ng-template *ngIf="isPartnerCompaniesTabSelected" [ngTemplateOutlet]="partnerCompaniesTemplate"></ng-template>
        <ng-template *ngIf="isPartnerGroupsTabSelected" [ngTemplateOutlet]="partnerGroupsTemplate"></ng-template>
      </div>
    </div>
  </div>
</span>

<!--Partner Companies-->
<ng-template #partnerCompaniesTemplate>
  <div class="portlet-title" >
    <div class="row">
      <div>
        <div class="col-xs-12">
          <!--Team Member Filter-->
          <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 p0" [ngClass]="httpRequestLoader?.isLoading ? 'zero-opacity':''">
            <app-team-member-filter-option *ngIf="showFilter && !authenticationService?.module?.isMarketingCompany"
              (teamMemberFilterOptionEventEmitter)="getSelectedIndex($event)"></app-team-member-filter-option>
          </div>
          <!--Search Bar-->
          <div class="page-toolbar col-xs-12 col-sm-7 col-lg-7 col-md-7 pr0 d-flex justify-end" *ngIf="!httpRequestLoader.isLoading">
            <div class="left-float clear-all-prop"> 
               <button class="btn btn-danger" type="button" *ngIf="(selectedTeamMemberIds?.length>0 || selectedPartnershipIds?.length>0)"
                 (click)="$event.stopPropagation();clearAll()">Clear All</button>
            </div>
            <div class="btn-group pull-right">
              <div class="inputs float-right" style="display: inline-flex;">
                <div class="portlet-input input-inline" id="search-div">
                  <div class="input-icon right" id="icon">
                    <input type="text" id="sort-text" class="form-control" [(ngModel)]="sortOption.searchKey"
                      [ngModelOptions]="{standalone: true}" placeholder="Search..." (keydown.enter)="searchPartners()" autocomplete="off">
                    <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey"
                      (click)="sortOption.searchKey='';searchPartners();"></button>
                    <button type="submit" class="search-box-item-click" (click)="searchPartners()">
                      <i class="fa fa-search" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
  <!--Banner Message-->
  <div  class="alert alert-success" *ngIf="selectedPartnershipIds?.length>0 && !httpRequestLoader.isLoading">
    <strong>
      Selected Companies : {{selectedPartnershipIds?.length}}
    </strong>
    <ng-template [ngTemplateOutlet]="clearAllSelectedRowsTemplate"></ng-template>
  </div>
  <app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>

  <!---List-->
  <ng-container *ngIf="!httpRequestLoader.isLoading">
    <div class="table-responsive table_bottom">
      <table class='table tgrid table-hover table-sm' *ngIf="pagination.pagedItems?.length>0"
        aria-describedby="">
        <thead>
          <tr>
            <th scope="col"></th>
            <th scope="col">Company Logo</th>
            <th scope="col" class="text-center">Company Name</th>
            <th scope="col">Created Time</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let partner of pagination.pagedItems ;let i =index">
            <tr [class.row-selected]="selectedPartnershipIds?.indexOf(partner.partnershipId)>-1">
              <td class="cw">
                <div class="actions-block left-float">
                  <a (click)="viewTeamMembers(partner)" title="View/Hide Team Members">
                    <i class="fa IconCustomization" [ngClass]="{'fa-angle-right': !partner.expand, 'fa-angle-down': partner.expand}" aria-hidden="true"></i>
                  </a>
                </div>
              </td>
              <td style="width: 10%; ">
                <div class="thumbnail-wrapper img image_effect" data-toggle="tooltip" data-placement="right"
                  title="{{partner?.companyName}}">
                  <img alt="No image found" onerror="this.src='assets/images/company-profile-logo.png';"
                    [src]="authenticationService.MEDIA_URL+partner.companyLogo">
                </div>
              </td>
              <td class="text-center">
                <span>{{partner?.companyName | slice:0:20}}</span>
                <span *ngIf="partner?.companyName.length>20">...</span>
                <h5>
                  <strong>
                     Company Name By Vendor :
                     <span title="{{partner?.companyNameAddedByVendor}}">{{partner?.companyNameAddedByVendor
                        | slice:0:50}}</span>
                     <span *ngIf="partner?.companyNameAddedByVendor.length>50">...</span>
                  </strong>
               </h5>
              </td>
              <td>
                <app-timestamp [dateAndTime]="partner?.displayTime">
                </app-timestamp>
              </td>
              <td>
                <i *ngIf="selectedPartnershipIds?.indexOf(partner.partnershipId)>-1" class="fa fa-check-circle-o success i-20px"></i>
              </td>
            </tr>
            <tr *ngIf="partner?.expand">
              <td colspan="5">
                <div class="table-responsive x-hidden">
                  <div class="portlet-input input-inline float-right mb10p" id="search-div">
                    <div class="input-icon right" id="icon">
                      <input type="text" id="sort-text" class="form-control"
                        [(ngModel)]="teamMembersPagination.searchKey" [ngModelOptions]="{standalone: true}"
                        placeholder="Search..." (keydown.enter)="searchAdminsAndTeamMembers()"
                        autocomplete="off">
                      <button class="glyphicon glyphicon-remove search-box-item-clear"
                        *ngIf="teamMembersPagination?.searchKey"
                        (click)="teamMembersPagination.searchKey='';searchAdminsAndTeamMembers();"></button>
                      <button type="submit" class="search-box-item-click"
                        (click)="searchAdminsAndTeamMembers()">
                        <i class="fa fa-search" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                  <ng-container
                    *ngIf="!teamMembersLoader.isLoading && adminsAndTeamMembersErrorMessage.isVisible">
                    <div class="custom-response-padding">
                      <app-response-message [customResponse]="adminsAndTeamMembersErrorMessage">
                      </app-response-message>
                    </div>
                  </ng-container>
                  <div *ngIf="!adminsAndTeamMembersErrorMessage.isVisible">
                    <app-auto-response-loader *ngIf="teamMembersLoader.isLoading">
                    </app-auto-response-loader>
                    <ng-container *ngIf="!teamMembersLoader.isLoading">
                      <table  class="table tgrid table-condensed table-bordered child-table-xamp" aria-describedby="team-members-info"
                        id="admin-and-team-members-{{partner?.partnershipId}}">
                        <thead *ngIf="teamMembersPagination?.totalRecords>0">
                          <tr>
                            <th scope="row" class="text-center">
                              <input class="pointer checkBox_shadow" type="checkbox" [(ngModel)]="isHeaderCheckBoxChecked" (change)="selectAllTeamMembersOfTheCurrentPage($event,partner.partnershipId,partner.partnerCompanyId)">
                            </th>
                            <th scope="row">Entity Info</th>
                            <th scope="row" *ngIf="vendorJourney">Status</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="pointer"
                            *ngFor="let adminAndTeamMember of teamMembersPagination.pagedItems;let i = index;" id="publishToPartners-{{adminAndTeamMember.userId}}"
                            [class.row-selected]="selectedTeamMemberIds?.indexOf(adminAndTeamMember.userId)>-1"
                            (click)="highlightSelectedAdminOrTeamMemberRowOnRowClick(adminAndTeamMember.userId,partner.partnershipId,partner.partnerCompanyId,$event)">
                            <td class="text-center">
                              <input class="pointer checkBox_shadow" type="checkbox" id="{{adminAndTeamMember.userId}}" [checked]="selectedTeamMemberIds?.indexOf(adminAndTeamMember.userId)>-1"
                                name="adminOrTeamMemberCheckBox[]" value="{{adminAndTeamMember.userId}}"
                                (click)="highlightAdminOrTeamMemberRowOnCheckBoxClick(adminAndTeamMember.userId,partner.partnershipId,partner.partnerCompanyId,$event)">
                            </td>
                            <td>
                              <app-user-info [isPartnerEntityInfo]="false" [userInfo]="adminAndTeamMember">
                              </app-user-info>
                            </td>
                            <td  *ngIf = "vendorJourney">
                              <span>{{getUserStatus(adminAndTeamMember.userId)}}</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </ng-container>
                    <!---Pagination-->
                    <div *ngIf="teamMembersPagination.totalRecords==0 && !teamMembersLoader.isLoading"
                      class="alert alert-info">
                      <strong>No Data Found.</strong>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <!-- End of 24 -->
    <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info">
      <strong>No Data Found.</strong>
    </div>
  </ng-container>
  <!--Pagination-->
  <div *ngIf="pagination.pagedItems.length !== 0 && !httpRequestLoader.isLoading" class="pg8">
    <app-pagination [pagination]="pagination" (notifyParent)="navigateToNextPage($event)" 
    (notifyParentDropDown)="findPartnerCompanies($event)" [customDropDown]="customDropDown"></app-pagination>
  </div>
  
</ng-template>

<!--Partner Groups-->
<ng-template #partnerGroupsTemplate>
  <div class="portlet-title" style="border-bottom: none;" *ngIf="!httpRequestLoader.isLoading">
    <div class="row">
      <div>
        <div class="col-xs-12">
          <div class="page-toolbar">
            <!--Clear All-->
            <div class="left-float clear-all-prop">
             <button class="btn btn-danger" *ngIf="selectedPartnerGroupIds.length>0" type="button" (click)="$event.stopPropagation();clearAll()">Clear All</button>
            </div>
            <div class="btn-group pull-right">
              <div class="inputs float-right" style="display: inline-flex;">
                <div class="portlet-input input-inline mSearchAlign" id="search-div">
                  <div class="input-icon right" id="icon">
                    <input type="text" id="sort-text" class="form-control"
                      [(ngModel)]="partnerGroupsSortOption.searchKey" [ngModelOptions]="{standalone: true}"
                      placeholder="Search..." (keydown.enter)="searchPartnerGroups()"
                      autocomplete="off">
                    <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="partnerGroupsSortOption.searchKey"
                      (click)="partnerGroupsSortOption.searchKey='';searchPartnerGroups();"></button>
                    <button type="submit" class="search-box-item-click" (click)="searchPartnerGroups()">
                      <i class="fa fa-search" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
  <div  class="alert alert-success" *ngIf="selectedPartnerGroupIds?.length>0 && !httpRequestLoader.isLoading">
    <strong>
      Selected Groups : {{selectedPartnerGroupIds?.length}}
    </strong>
    <ng-template [ngTemplateOutlet]="clearAllSelectedRowsTemplate"></ng-template>
  </div>
  <app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>
  <ng-container *ngIf="!httpRequestLoader.isLoading">
    <div class="table-responsive">
      <table class='table tgrid table-condensed table-bordered'
        *ngIf="partnerGroupsPagination.pagedItems?.length>0" id="parnter-groups-table"
        aria-describedby="partnerGroupsDescription">
        <thead>
          <tr>
            <th scope="col" class="text-center">
              <input class="pointer checkBox_shadow" type="checkbox"
                [(ngModel)]="isParnterGroupHeaderCheckBoxChecked" id="parnterGroupsHeaderCheckBox"
                (change)="selectOrUnselectAllPartnerGroupsOfTheCurrentPage($event)">
            </th>
            <th *ngIf="showExpandButton"></th>
            <th scope="col" class="text-center">Group Name</th>
            <th scope="col" class="text-center">Count</th>
            <th scope="col" class="text-center">Created Time</th>
            <th scope="col" class="text-center">Preview</th>
          </tr>
        </thead>
        <tbody>
          {{selectedPartnerGroupIds}}
          <ng-container *ngFor="let partnerGroup of partnerGroupsPagination.pagedItems;let i = index;">
            <tr class="pointer" id="partnerGroups-tr-{{partnerGroup.id}}"
              [class.row-selected]="selectedPartnerGroupIds?.indexOf(partnerGroup.id)>-1"
              (click)="highlightSelectedPartnerGroupOnRowClick(partnerGroup.id,$event)">
              <td class="text-center">
                <input class="pointer checkBox_shadow" type="checkbox" id="{{partnerGroup.id}}"
                  [checked]="selectedPartnerGroupIds?.indexOf(partnerGroup.id)>-1"
                  name="partnerGroupsCheckBox[]" value="{{partnerGroup.id}}"
                  (click)="$event.stopPropagation();highlightPartnerGroupRowOnCheckBoxClick(partnerGroup.id,$event);">
              </td>
              <td class="cw" *ngIf="showExpandButton">
                <div class="actions-block left-float">
                  <a (click)="$event.stopPropagation();viewMatchedContacts(partnerGroup)"
                    title="Matched Results">
                    <i class="fa"
                      [ngClass]="{'fa-angle-right': !partnerGroup.expand, 'fa-angle-down': partnerGroup.expand}"
                      aria-hidden="true"></i>
                  </a>
                </div>
              </td>
              <td title="{{partnerGroup?.groupName}}" class="text-center">
                <span data-toggle="tooltip" data-placement="bottom"
                  title="{{partnerGroup?.groupName}}">{{partnerGroup?.groupName | slice:0:40}}</span>
                <span *ngIf="partnerGroup?.groupName.length>40">...</span>
              </td>
              <td class="text-center">
                {{partnerGroup.numberOfPartners}}
              </td>
              <td class="text-center">
                <app-timestamp [dateAndTime]="partnerGroup?.displayTime">
                </app-timestamp>
              </td>
              <td class="text-center">
                <div class="actions-block none-float"
                  (click)="$event.stopPropagation();previewUserListUsers(partnerGroup)">
                  <a class="custom-icon" data-toggle="tooltip" data-placement="bottom" title="Preview">
                    <i class="fa fa-eye IconCustomization" aria-hidden="true"></i>
                    <div class="clickicons"></div>
                  </a>
                </div>
              </td>
            </tr>
            <tr role="row" *ngIf="partnerGroup?.expand">
              <td colspan="12">
                <app-userlist-users [searchKey]="partnerGroupsPagination.searchKey"
                  [userListId]="partnerGroup.id"></app-userlist-users>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <!-- End of 24 -->
    <div *ngIf="partnerGroupsPagination.totalRecords==0 && !httpRequestLoader.isLoading"
      class="alert alert-info">
      <strong>No Data Found.</strong>
    </div>
  </ng-container>
  <div *ngIf="partnerGroupsPagination.pagedItems.length !== 0" class="pg8 mt10" [hidden]="httpRequestLoader.isLoading">
    <app-pagination [pagination]="partnerGroupsPagination" (notifyParent)="navigatePartnerGroups($event)"
      (notifyParentDropDown)="findPartnerGroups($event)" [customDropDown]="customDropDown">
    </app-pagination>
  </div>
</ng-template>


<ng-container *ngIf="showUsersPreview">
  <app-preview-user-list [userListName]="selectedPartnerGroupName" [userListId]="selectedPartnerGroupId"
    [moduleName]="moduleName" [inputId]="inputId" (notifyParentComponent)="resetValues()"
    [vendorJourney]="vendorJourney" [selectedPartnerGroupPartnerIdAndPartnerStatus]="selectedPartnerGroupPartnerIdAndPartnerStatus"></app-preview-user-list>
</ng-container>

<ng-template #clearAllSelectedRowsTemplate>
   <button data-toggle="tooltip" data-placement="bottom" title="Clear" type="button" (click)="$event.stopPropagation();clearAll()"
    class="btn btn-danger btn-xs margin-left-one-per float-right">
    <i class="fa fa-times-circle-o"></i>
  </button>

  <span *ngIf="isEmailNotSentNotificationDisplayed && !vendorJourney" class="required float-right">No emails will be sent.</span>

</ng-template>
