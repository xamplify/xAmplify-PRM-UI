<div class="inputs display row" align="right">
  <div class="col-xs-12 col-sm-12 col-lg-12 mb10">
    <div class="page-toolbar">
      <a class="close-circle ref-mar ml5" data-placement="bottom" data-toggle="tooltip" title="Refresh"
        data-original-title="Refresh" (click)="showAllTaskActivities()">
        <i aria-hidden="true" class="fa fa-refresh"></i>
      </a>
      <a class="close-circle ref-mar ml5" data-placement="bottom" data-toggle="tooltip" title="Add Task"
        data-original-title="Refresh" (click)="openAddTaskModalPopup()">
        <i aria-hidden="true" class="fa fa-plus"></i>
      </a>
      <div class="btn-group pull-right">
        <div class="inputs float-right" style="display: inline-flex;">
          <div class="float-left">
            <select class="form-control" [(ngModel)]="sortOption.taskActivityDropDownOption"
              (ngModelChange)="sortBy($event)" id="select-dropdown">
              <option *ngFor="let option of sortOption.taskActivityDropDownOptions" [ngValue]="option">
                {{option.name}}
              </option>
            </select>
          </div>
          <div>
            <div class="ml5">
              <input type="text" autocomplete="off" id="sort-text" class="form-control"
                [(ngModel)]="taskSortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="Search..."
                (keypress)="taskActivityEventHandler($event.keyCode)">
              <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="taskSortOption.searchKey"
                (click)="taskSortOption.searchKey='';clearSearch();"></button>
              <button type="submit" class="search-box-item-click" (click)="searchTaskActivities();"><i
                  class="fa fa-search" aria-hidden="true"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-list-loader *ngIf="httpRequestLoader?.isLoading"></app-list-loader>
<div *ngIf="taskActivityPagination?.pagedItems?.length>0 && !httpRequestLoader?.isLoading">
  <ngx-loading [show]="ngxLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
  <app-response-message class="pg8" [customResponse]="customResponse" *ngIf="customResponse?.isVisible"></app-response-message>
  <div class="activity_card mb10" *ngFor="let taskActivity of taskActivityPagination?.pagedItems">
    <div class="activity-header">
      <span><label class="mr5 activity-title">Title:</label><a class="underline-on-hover" (click)="viewTask(taskActivity.id)" data-toggle="tooltip" data-placement="top" title="{{taskActivity.name}}"><span>{{taskActivity.name | slice:0:35}}</span><span *ngIf="taskActivity.name.length > 35">...</span></a></span>
      <span class="activity-date"><i class="fa fa-clock"></i><app-display-date-and-time [dateAndTimeUTCString]="taskActivity.createdTime"></app-display-date-and-time></span>
    </div>
    <div class="activity-body mt0">
      <span class="activity-title">Status: <span class="view-banner activity-updated-status-btn" >{{taskActivity.statusName}}</span></span>
      <span><i *ngIf="taskActivity?.priority == 'Medium'" class="fas fa-equals icon medium_priority"></i><i *ngIf="taskActivity?.priority == 'Low'" class="fas fa-angle-down icon low_priority"></i><i *ngIf="taskActivity?.priority == 'High'" class="fas fa-angle-up icon danger high_priority"></i><label class="activity-title">{{taskActivity.priority}}</label></span>
      <span><label class="mr3 activity-title">Type:</label><span class="view-banner activity-updated-status-btn-v2" >
        <i *ngIf="taskActivity.taskType == 'Note'" class="fa fa-pencil-square-o fs-10px"></i><i *ngIf="taskActivity.taskType == 'Email'" class="fa fa-envelope-o fs-10px"></i><i *ngIf="taskActivity.taskType == 'Todo'" class="fa fa-list-alt fs-10px"></i>
        {{taskActivity.taskType == 'Todo' ? 'To Do':taskActivity.taskType}}</span></span>
    </div>
    <div class="activity-footer">
      <span class="activity-title">Due Date: <span class="activity-date"><i
            class="fa fa-calendar"></i><app-display-date-and-time
            [dateAndTimeUTCString]="taskActivity.dueDate"></app-display-date-and-time></span></span>
      <span><a *ngIf="taskActivity.editEnabled" class="mr5" (click)="editTask(taskActivity.id)" data-toggle="tooltip" data-placement="bottom" title="Edit task"><i class="fas fa-pencil-alt task_edit"
            aria-hidden="true"></i></a>
        <a *ngIf="taskActivity.deleteEnabled" (click)="showDeleteConformationAlert(taskActivity.id)" data-toggle="tooltip" data-placement="bottom" title="Delete task"><i class="fas fa-trash task_delete"
            aria-hidden="true"></i></a>
      </span>
    </div>
  </div>
  <!-- --------------------Pagination0-------------------- -->
  <div *ngIf="!httpRequestLoader.isLoading" class="pg2 mrgn_top0">
    <app-pagination [pagination]="taskActivityPagination" (notifyParent)="setTaskActivityPage($event)"
      (notifyParentDropDown)="fetchAllTaskActivities($event)"></app-pagination>
  </div>
</div>
<div *ngIf="!httpRequestLoader.isLoading && taskActivityPagination?.pagedItems?.length==0" class="alert alert-info">
  <strong translate>No Data Found.</strong>
</div>

<app-add-task-modal-popup *ngIf="showTaskModalPopup" [userId]="contactId" [taskActivityId]="taskActivityId"
  [actionType]="actionType" (notifyClose)="closeTaskModalPopup()"
  (notifyUpdateSuccess)="showUpdateSuccessStatus($event)" [isReloadTaskActivityTab]="reloadTab"
  (notifySubmitSuccess)="showTaskSubmitSuccessStatus($event)"></app-add-task-modal-popup>

<app-preview-task-activity *ngIf="showPreviewTaskModalPopup" [taskActivityId]="taskActivityId"
  (notifyClose)="closePreviewTaskModalPopup()"></app-preview-task-activity>