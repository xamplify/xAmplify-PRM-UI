<div class="my-container">
  <ngx-loading [show]="httpRequestLoader.isLoading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
</div>
<div class="folder-custom-response">
  <app-response-message [customResponse]="folderOrTagsCustomResponse" *ngIf="folderOrTagsCustomResponse.isVisible">
  </app-response-message>
  <app-response-message class="pg8" [customResponse]="lmsResponse" *ngIf="lmsResponse.isVisible">
  </app-response-message>
</div>
<div>
  <div class="portlet light steps-view">
    <div id="step-1" [attr.class]="stepOneTabClass" (click)="changeActiveTab('step-1')">
      <div class="cenetered-block">
          <img  alt="" class="newicons" src="assets/images/campaignnew-icon/Add_Tracks/Details1.svg">
        <h5 class="hidden-xs" translate>Details</h5>
      </div>
    </div>
    <div id="step-2" [attr.class]="stepTwoTabClass" (click)="changeActiveTab('step-2')">
      <div class="cenetered-block">
        <img  alt="" class="newicons" src="assets/images/campaignnew-icon/Add_Tracks/Description2.svg">
        <h5 class="hidden-xs" translate>Description</h5>
      </div>
    </div>
    <div id="step-3" [attr.class]="stepThreeTabClass" (click)="changeActiveTab('step-3')">
      <div class="cenetered-block">
        <img  alt="" class="newicons" src="assets/images/campaignnew-icon/Add_Tracks/Assets3.svg">
        <h5 class="hidden-xs" translate>Assets</h5>
      </div>
    </div>
    <div id="step-4" [attr.class]="stepFourTabClass" (click)="changeActiveTab('step-4')">
      <div class="cenetered-block">
        <img  alt="" class="newicons" src="assets/images/campaignnew-icon/Add_Tracks/share4.svg">
        <h5 class="hidden-xs" translate>Share</h5>
      </div>
    </div>
  </div>

  <div class="tracks-bg-color container"
    style="width: 100%;padding-bottom: 10px;padding-left: 2px;border-radius: 5px;
    padding-right: 2px;">



    <!-- step 1 -->
    <div *ngIf="activeTabName == 'step-1'" class="setup-content step activeStepInfo">
      <div style="margin-top: 10px;">
        <div class="portlet box mPortlet" style="border-radius:5px;">
          <div class=" form mPortlet-body">
            <div class="row">
              <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 form-body">
                <div class="row form-group">
                  <label class="control-label col-sm-4" style="text-align: right;" translate>Title
                    <font style="color: red">*</font><br>
                  </label>
                  <div class="col-sm-8" style="padding-bottom: 10px;">
                    <input class="form-control" placeholder="Add title" [(ngModel)]="tracksPlayBook.title"
                      maxlength="100" (keypress)="omitSpecialCharacters($event)"
                      (input)="updateSlug('title'); validateTitle(); validateAllSteps()">
                    <span *ngIf="!isTitleValid" class="required pull-left"
                      style="position: absolute;">{{titleErrorMessage}}</span>
                  </div>
                </div>
                <div class="row form-group">
                  <label class="control-label col-sm-4" style="text-align: right;" translate>Link
                    <font style="color: red">*</font>
                  </label>
                  <div class="col-sm-8" style="padding-bottom: 10px;">
                    <div *ngIf="isEditSlug">
                      <div class="prefix inline-box">
                        <span class="input-group-addon" style="min-width: auto;">
                          {{linkPrefix}}
                        </span>
                        <div class="inline-box link" action="action_page.php">
                          <input class="select-box inline-box form-control" [(ngModel)]="tracksPlayBook.slug"
                            maxlength="100" (input)="updateSlug('slug'); validateAllSteps()">
                          <button type="button" (click)="editedSlug()" class="main-btn" style="width: auto;border-radius: 2px;"><i
                              class="fa fa-angle-right" style="font-size: 19px;"></i></button>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="!isEditSlug">
                      <div class="inline-box link" action="action_page.php" style="width: 100%;">
                        <input class="form-control" id="copy-link" type="text" readonly="readonly"
                          [ngModel]="completeLink" #link>
                        <button type="button" class="right-border main-btn" (click)="editSlug()"
                        data-toggle="tooltip" data-placement="top" title="Edit"
                          style="border-radius:0px !important;"><i
                            class="fa fa-edit"></i></button>
                        <button type="button" (click)="copyInputMessage(link)" class="main-btn"
                        data-toggle="tooltip" data-placement="top" title="Copy"
                          style="border-radius:0px !important;"><i                      
                            class="fa fa-copy"></i></button>
                      </div>
                    </div>
                    <span *ngIf="!isSlugValid" class="required pull-left"
                      style="position: absolute;">{{slugErrorMessage}}</span>
                  </div>
                </div>
                <div class="row form-group" style="padding-bottom: 10px;">
                  <label class="control-label col-sm-4" style="text-align: right;" translate>Folder
                    <font style="color: red">*</font>
                  </label>
                  <div class="inline col-sm-8 col-xs-12">
                    <div class="dropdown">
                      <input type="text" class="form-control" [(ngModel)]="folderName"
                        (click)="showDropDown();filterFolders(folderSearchValue)" readonly
                        style="cursor: auto; display: inline-block;">
                      <i class="fa fa-angle-down dropdown-icon" aria-hidden="true"></i>
                      <div *ngIf="showFolderDropDown" id="folderDropDown" class="dropdown-content dropdown-scroller video">
                        <input type="text" placeholder="Search.." id="myInput"
                          (input)="filterFolders(folderSearchValue)" #folderSearchValue>
                        <div class="dropdown-option" [ngClass]="{'dropdown-content-odd': 0 === i % 2}"
                          *ngFor="let category of filteredCategoryNames;let i=index"
                          (click)="updateFolderValue(category);validateAllSteps()">
                          <div>{{category.name | slice: 0: 50}}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row form-group mTags" style="padding-bottom: 10px;">
                  <label class="control-label col-sm-4 col-xs-6 mTextAlign" style="text-align: right;" translate>Tags
                  </label>
                  <div class="inline col-sm-8 col-xs-8">
                    <div class="portlet light" style="width: 100%;padding: 5px !important;">
                      <div class="portlet-title tabbable-line " style="margin-bottom: 0px !important;">
                        <div class="inline" style="float: right;">
                          <div class="input-icon left" style="padding-bottom: 5px;">
                            <input type="text" [(ngModel)]="tagSearchKey" [ngModelOptions]="{standalone: true}"
                              placeholder="Search..." class="form-control" (keypress)="tagEventHandler($event.keyCode)"
                              style="padding: 6px 12px;">
                            <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="tagSearchKey"
                              (click)="tagSearchKey='';searchTags()"></button>
                            <button type="submit" class="search-box-item-click email-search" (click)="searchTags()">
                              <i class="fa fa-search cesf-xamp"></i></button>
                          </div>
                          <div style="padding-left: 10px;">
                            <button type="button" class="btn main-btn add-btn" (click)="addTag()"
                            data-toggle="tooltip" data-placement="top" title="Add a Tag">
                              <i class="fa fa-plus" aria-hidden="true"></i></button>
                          </div>
                        </div>
                      </div>
                      <div class="scroller mScrollHeight">
                        <table class="table table-bordered no-footer tags-table" id="tags_list">
                          <tbody>
                            <tr role="row" *ngFor="let tag of tagsListFirstColumn;let i = index"
                              style="vertical-align: middle;padding: 0px;">
                              <td style="padding: 5px;vertical-align: middle;"
                                (click)="updateSelectedTags(tag,$event.target.checked)">
                                <div class="col-sm-2 col-sm-offset-2">
                                  <label class="form-check-label inline">
                                    <input type="checkbox" class="form-check-input "
                                      [checked]="tracksPlayBook.tagIds != undefined && tracksPlayBook.tagIds.length > 0 && tracksPlayBook.tagIds.indexOf(tag.id)>-1">
                                  </label>
                                </div>
                                <div class="col-sm-5" style="padding-left: 0px !important;" 
                                data-toggle="tooltip" data-placement="bottom"  title="{{tag?.tagName}}">
                                <div  class="btn btn-primary-dark btn-primary-light" style="padding: 4px 10px;border-radius: 5px !important;">
                                    {{tag.tagName | slice:0:15}} <span *ngIf="tag.tagName?.length>15">..</span></div>
                              </div>
                              </td>
                              <td style="padding: 5px;vertical-align: middle;"
                                (click)="updateSelectedTags(tagsListSecondColumn[i],$event.target.checked)">
                                <div class="col-sm-2 col-sm-offset-2">
                                  <label class="form-check-label inline">
                                    <input *ngIf="tagsListSecondColumn?.length > 0 && tagsListSecondColumn[i]"
                                      type="checkbox" class="form-check-input "
                                      [checked]="tracksPlayBook.tagIds != undefined && tracksPlayBook.tagIds.length > 0 && tracksPlayBook.tagIds.indexOf(tagsListSecondColumn[i].id)>-1">
                                  </label>
                                </div>
                                <div class="col-sm-5" style="padding-left: 5px !important;" 
                                  *ngIf="tagsListSecondColumn?.length > 0 && tagsListSecondColumn[i]"
                                  data-toggle="tooltip" data-placement="bottom" title="{{tagsListSecondColumn[i]?.tagName}}">
                                  <div   class="btn btn-primary-dark btn-primary-light" style="padding: 4px 10px;border-radius: 5px !important;">
                                    {{tagsListSecondColumn[i].tagName | slice:0:15}} <span *ngIf="tagsListSecondColumn[i].tagName?.length>15">..</span></div>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <div *ngIf="(tagsListFirstColumn == undefined || 1 > tagsListFirstColumn.length) && (tagsListSecondColumn == undefined || 1 > tagsListSecondColumn.length)" class="alert alert-info">
                          <strong>No Tags Found.</strong>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 row" style="padding-top: 10px;">
                <div class="portlet light mImageWid feature-img">
                  <div class="portlet-title tabbable-line ">
                    <div class="caption caption-md ">
                      <i class="icon-globe theme-font hide " aria-hidden="true "></i>
                      <span class="caption-subject font-blue-madison bold uppercase ">Featured Image</span>
                    </div>
                    <div class="inline" style="float: right; padding-bottom: 5px;">
                      <button type="button" class="btn main-btn" (click)="clearImage()">Clear</button>
                    </div>
                  </div>
                  <div class="feature-img-bg" style="cursor: pointer;text-align:center;color:#fff;"
                    (click)="imageClick()">
                    <div *ngIf="!croppedImage">
                      <img *ngIf="!imageChangedEvent && !featuredImagePath" src="assets/images/background-form.png"
                        class="profile-image img-grid" alt="">
                    </div>
                    <div *ngIf="croppedImage; else showImage">
                      <img class="img-grids" [src]="croppedImage" alt="">
                    </div>
                    <ng-template #showImage>
                      <img class="img-grids" [src]="featuredImagePath" alt="">
                    </ng-template>
                    <a class="btn btn-primary1 profile-pic" data-toggle="tooltip" data-placement="bottom"  title="upload 2:1 ratio logo">
                      &nbsp;&nbsp;<i class="fa fa-camera icon" aria-hidden="true"
                        style="font-size:25px;padding-top:4px;margin-right: -5px;"></i></a>
                  </div>
                </div>
              </div>
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 row">
                <div class="message-content mTextWid">
                  <ul class="t-b-spacings">
                    <li translate>Maximum file size is 10 MB.</li>
                    <li translate>Please Upload <strong>.jpg, .jpeg, .png </strong>files only.</li>
                  </ul>
                </div>
              </div>
              <div class="col-sm-12 col-xs-12 row mNextPad" style="padding-right: 20px; padding-bottom: 10px;">
                <button type="submit" class=" btn green pull-right" (click)="changeActiveTab('step-2');"
                  [disabled]="!isStepOneValid" translate>Next</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- step 2 -->
    <div *ngIf="activeTabName == 'step-2'" class="setup-content step activeStepInfo">
      <ngx-loading [show]="!isCkeditorLoaded" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
      <div class="portlet bg-card-header" style="padding-bottom: 25px;border-radius: 5px;background-color:#fff;">
        <div class="portlet-title" style="padding-bottom: 5px;
        margin-right: 12px;
        margin-left: 12px;">
          <div class="col-xs-4 p0">

            <h4 claass="text-primary pull-left" style="padding-left: 0px;
            padding-top: 2px;">Description  <font style="color: red">*</font><br></h4>

          </div>
        <div class="input-icon right pull-right cebp" style="margin-right: -2px;
        padding-top: 5px;">
          <ul class="button-align inline">
            <li style="margin-right: 5px;"><button class="btn main-btn" (click)="getAssetsList()">Add Media</button></li>
            <li style="margin-right: 5px;"><button class="btn main-btn" (click)="getFormsList()">Add Forms</button></li>
          </ul>
        </div>
       </div>
        <div *ngIf="!isDescriptionValid" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center"
          style="margin-bottom: 5px;">
          <span class="required">{{descriptionErrorMessage}}</span>
        </div>
        <div class="portlet-body" style="padding-left: 12px;
        padding-right: 12px;">
          <div *ngIf="isAdd || tracksPlayBook.description != undefined">
            <ckeditor [(ngModel)]="tracksPlayBook.description" #ckeditor [ngModelOptions]="{standalone: true}" [config]="ckeConfig"
              (ready)="onReady($event)" debounce="500" maxlength="5000"
              (change)="validateDescription();validateAllSteps()" (input)="setDescription();validateDescription();validateAllSteps()">
            </ckeditor>
          </div>
          <div class="row" style="margin: 10px 0px -18px;">
            <button type="button" class="btn GraY-Btn pull-left" (click)="changeActiveTab('step-1')"
              translate>Previous</button>
            <button type="submit" class=" btn green pull-right" (click)="changeActiveTab('step-3');"
              [disabled]="!isStepTwoValid" translate>Next</button>
          </div>
        </div>
      </div>
    </div>

    <!-- step 3 -->
    <div [ngClass]="{'blur-content' : showFilePreview}">
      <div *ngIf="activeTabName == 'step-3'" class="setup-content step activeStepInfo">
        <div class="portlet bg-card-header" style="background-color:#fff;
        padding-bottom: 25px;
        border-radius: 5px;">
          <div class="col-lg-12">
            <div class="page-toolbar">

              <div class="inline mToolBarPad" style="margin-left: -3px;padding-top: 12px;">
                <button *ngIf="type == undefined || type == 'TRACK'" class="btn main-btn" (click)="openQuizPopup()">Select
                  Quiz</button>
                <button class="btn main-btn" (click)="openOrderAssetsPopup()"><span
                    *ngIf="type == undefined || type == 'TRACK'">Order Assets And Quiz</span><span *ngIf="type !== 'TRACK'">Order
                    Assets</span></button>

              </div>
              <div class="btn-group pull-right">
                <div class="inputs float-right" style="display: inline-flex;padding-top: 12px;">
                  <div id="left" style="padding-left: 5px;">
                    <select class="form-control" [(ngModel)]="assetSortOption.damSortOption"
                      (ngModelChange)="assetSortBy($event)">
                      <option *ngFor="let option of assetSortOption.damSortDropDownOptions" [ngValue]="option">
                        {{option.name}}</option>
                    </select>
                  </div>

                  <div id="left" *ngIf="fileTypesForFilter?.length>0">
                    <select class="form-control mDamSort"	[(ngModel)]="selectedFileType"	(ngModelChange)="filterAssetsByFileType($event)" 
                        style="position: relative; right: -3px;">
                      <option value="">Select Asset Type</option>
                      <option	*ngFor="let fileType of fileTypesForFilter" [ngValue]="fileType">{{fileType}}</option>
                    </select> 
                  </div>
                  
                  <div class="portlet-input input-inline" id="search-div">
                    <div class="input-icon right" id="icon" style="padding-left: 5px;">
                      <input type="text" [(ngModel)]="assetSortOption.searchKey" [ngModelOptions]="{standalone: true}"
                        class="form-control" placeholder="Search..." (keypress)="assetEventHandler($event.keyCode)">
                      <button class="glyphicon glyphicon-remove search-box-item-clear"    *ngIf="assetSortOption.searchKey"
                        (click)="assetSortOption.searchKey='';searchAssets()"></button>
                      <button type="submit" class="search-box-item-click email-search" (click)="searchAssets()">
                        <i class="fa fa-search cesf-xamp"></i></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="portlet-body pt5" style="padding-left: 12px;
          padding-right: 12px;">
            <app-grid-loader *ngIf="assetLoader.isLoading"></app-grid-loader>
            <div class="row" *ngIf="!assetError">
              <ul class="content__list mContentWid" *ngFor="let file of assetPagination.pagedItems; let i =index;" (click)="setSelectedAsset(file); validateAssets(); validateAllSteps()">
                <li class="list__item" [ngClass]="{'list__item--selected': isAssetSelected(file)}">
                  <div class="flex-row pointer mContentHeight custom-height">
                    <div class="item__select-box-wrapper">
                      <span class="select-box-asset"> <label>
                          <input type="checkbox" (click)="$event.stopPropagation();">
                        </label>
                      </span> <span class="ng-scope"> <a style="cursor: default;border-radius:5px;"
                          class="item__preview item__preview--image img-container custom" target="_BLANK">
                          <div class="image">
                          <img
                            ng-src="https://d15k2d11r6t6rl.cloudfront.net/public/_thumbs/Integrators/6639d69f-523f-44ca-b809-a00daa26b367/bee-12092/BC-xAmplify-changes1.jpg_thumb.png?hash=1537857431976"
                            id="content_image_grid_{{i}}" (error)="changeImage(i, file.filePath)" class="thumb ng-scope img-format"
                            src="{{file.thumbnailPath}}" alt="">
                          </div>
                        </a> <a href="javascript:;"> </a>
                      </span>
                    </div>
                    <div class="item__content" style="padding-top: 10px;">
                      <div class="flex-row">
                        <div class="item__last-modified">
                          <span>
                            <app-timestamp [isOnlyDate]="true" [dateAndTime]="file.createdDateInUTCString">
                            </app-timestamp>
                          </span>
                        </div>
                        <div class="wrap-asset-name" style="-webkit-box-orient: vertical;">
                          <span data-toggle="tooltip" data-placement="bottom"  [title]="file.assetName">
                            <strong>{{file.assetName}}</strong>
                          </span>
                        </div>
                        <div class="item__size">
                          <span *ngIf="file.published">Published</span>
                        </div>
                        <div class="item__type">
                          <span>{{file.assetType}}</span>
                        </div>
                        <div style="padding-top: 10px;">
                          <ng-container *ngIf="file.tagNames?.length > 0">
                            <div class="tag" data-toggle="tooltip" data-placement="bottom"  title="{{file.tagNames[0]}}">
                              <ng-container *ngIf="file.tagNames?.length == 1">{{file.tagNames[0] | slice:0:10}} <span
                                *ngIf="file.tagNames[0]?.length>10">..</span>
                              </ng-container>
                              <ng-container *ngIf="file.tagNames?.length > 1">{{file.tagNames[0] | slice:0:5}} <span
                                  *ngIf="file.tagNames[0]?.length>5">..</span>
                              </ng-container>
                            </div>
                            <ng-container *ngIf="file.tagNames.length > 1">
                              <div class="tag" data-toggle="tooltip" data-placement="bottom"  title="{{file.tagNames[1]}}">
                                {{file.tagNames[1] | slice:0:5}} <span *ngIf="file.tagNames[1]?.length>5">..</span>
                              </div>
                            </ng-container>
                            <span *ngIf="file.tagNames?.length>2" class="tag-dots" data-toggle="tooltip" data-placement="bottm"
                              title="{{file.toolTipTagNames}}">...</span>
                          </ng-container>
                        </div>
                        <div class="item__actions">
                          <span> <a class="fm external-link" data-toggle="tooltip" data-placement="top" title="preview"
                              (click)="$event.stopPropagation();assetPreview(file, false)" style="left: 10px;">
                              <i class="fa fa-external-link preview-edit-color" aria-hidden="true"
                                style="font-size: 18px;"></i>
                            </a>
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="clearfix"></div>
                  </div>
                </li>
              </ul>
            </div>
            <div *ngIf="assetPagination.pagedItems.length !== 0" class="pg8" style="margin-top: 20px;">
              <app-pagination [pagination]="assetPagination" (notifyParent)="setAssetPage($event)"
                (notifyParentDropDown)="listAssets($event)" [hidden]="assetLoader.isLoading">
              </app-pagination>
            </div>
            <!-- End of 24 -->
            <div *ngIf="assetPagination.totalRecords==0 && !assetLoader.isLoading" class="alert alert-info">
              <strong>No Assets Found.</strong>
            </div>
            <div style="padding: 0px 0px 15px 0px;">
              <button type="button" class="btn GraY-Btn pull-left" (click)="changeActiveTab('step-2')"
                translate>Previous</button>
              <button type="submit" class=" btn green pull-right" (click)="changeActiveTab('step-4');"
                [disabled]="!isStepThreeValid" translate>Next</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- step 4 -->
    <div *ngIf="activeTabName == 'step-4'" class="setup-content step hiddenStepInfo" style="margin: 10px;">
      <div *ngIf="!isGroupOrCompanyValid" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center" style="margin: 5px;">
        <span class="required">{{groupOrCompanyErrorMessage}}</span>
      </div>
      <app-tracks-play-book-partner-company-and-lists [inputId]="tracksPlayBook.id" [companyId]="loggedInUserCompanyId"
        [moduleName]="'lms'" [selectedPartnerGroupIds]="tracksPlayBook.groupIds"
        [selectedTeamMemberIds]="tracksPlayBook.userIds" [selectedPartnershipIds]="tracksPlayBook.partnershipIds"
        (notifyParentComponent)="changePartnerCompanyAndList($event)">
      </app-tracks-play-book-partner-company-and-lists>
      <button type="button" class="btn GraY-Btn pull-left" (click)="changeActiveTab('step-3')"
        translate>Previous</button>
      <div class="pull-right">
        <button class="btn btn-primary green" type="submit" [disabled]="!tracksPlayBook.isValid"
          (click)="save()">{{SubmitButtonValue}}</button>
        <button class="btn btn-primary green" type="submit" [disabled]="!tracksPlayBook.isValid"
          *ngIf="!tracksPlayBook.published" (click)="saveAndPublish()">{{SubmitAndPublishButtonValue}}</button>
      </div>
    </div>

  </div>
</div>

<!-- --------------Popup to add image --------------- -->
<div class="modal right fade" id="cropImage" tabindex="-1" role="dialog" aria-labelledby="cropLogoImage"
  data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog imgCrop-modal" role="document">
    <div class="modal-content rounded-0">
      <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px'}"></ngx-loading>
      <div class="modal-header">
        <a class="close-circle" data-dismiss="modal" (click)="closeImageUploadModal()">
          <i class="fa fa-times" aria-hidden="true"></i>
        </a>
        <h4 class="modal-title" id="cropLogoImage">Choose the featured image
        </h4>
      </div>
      <div class="modal-body" style="overflow-y: unset !important;">
        <div style="position: relative; top: -5px; width: 118px;" class="btn green fileinput-button-css"
          *ngIf="!imageChangedEvent">
          <span>Select image</span> <input style="height: 36px;" title=" " id="custom-input" type="file"
            (change)="filenewChangeEvent($event)">
        </div>
        <!-- <button style="position: relative; top: -5px; width: 118px;" class="btn green" (click)="chooseFileFromList()">Your images</button> -->
        <div style="position: relative; top: -5px;" *ngIf="errorUploadCropper" style="color:red">*Please Upload only
          images
        </div>
        <div style="position: relative; top: -5px;" *ngIf="fileSizeError" style="color:red">*File size should be less
          than 10MB</div>
        <div>
          <ngx-loading [show]="loadingcrop" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop:true }">
          </ngx-loading>
          <div [hidden]="!imageChangedEvent">
            <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false" [onlyScaleDown]="true"
              [roundCropper]="false" format="jpg" outputType="base64" (imageCropped)="imageCroppedMethod($event)"
              (imageLoaded)="imageLoaded()" (cropperReady)="cropperReady()" [resizeToWidth]="1000" (preserveSize)="true"
              (imageQuality)=0 (loadImageFailed)="loadImageFailed()" [style.display]="showCropper ? null : 'none'">
            </image-cropper>
          </div>
          <div *ngIf="!imageChangedEvent">
            <fieldset style="background: #cacaca; height: 227px; margin-bottom: 5px;">
            </fieldset>
          </div>
        </div>
        <div>
          <button class="btn btn-primary" [disabled]="!showCropper" (click)="uploadImage()">Save
            Changes</button>
        </div>
        <div>
          <ul style="padding: 0 15px;">
            <li>For optimal results, your logo should fit within the white rectangle.</li>
            <li>If you would like to use a different logo in an email template, you can change it during the template
              design process.</li>
          </ul>
        </div>

      </div>
    </div>
  </div>
  <svg id="svg-filter">
    <filter id="svg-blur">
      <feGaussianBlur in="SourceGraphic" stdDeviation="1"></feGaussianBlur>
    </filter>
  </svg>
</div>

<!-- --------------List Of Forms Popup--------------- -->
<div class="modal right" id="formsList" data-backdrop="static">
  <div class="modal-dialog modal-lg " style="width: 75%;right:0">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" data-dismiss="modal">
          <i class="fa fa-times" aria-hidden="true "></i>
        </button>
        <h4 class="modal-title text-center">Forms</h4>
      </div>
      <div class="modal-body">
        <div class="row" *ngIf="!formsError">
          <div class="col-xs-12 p5">
            <div class="portlet light">
              <div class="portlet-title ">
                <div class="inputs" id="right">
                  <div id="left" class="mSortAlign">
                    <select class="form-control" [(ngModel)]="formSortOption.formsSortOption"
                      (ngModelChange)="formsSortBy($event)" style="position: relative;right: -3px;">
                      <option *ngFor="let option of formSortOption.manageFormsSortOptions" [ngValue]="option">
                        {{option.name}}</option>
                    </select>
                  </div>
                  <div class="portlet-input input-inline input-small mSearchAlign" id="search">
                    <div class="input-icon right" id="search-icon">
                      <input type="text" id="search-text" class="form-control" [(ngModel)]="formSortOption.searchKey"
                        [ngModelOptions]="{standalone: true}" placeholder="search..."
                        (keypress)="formsEventHandler($event.keyCode)">
                      <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="formSortOption.searchKey"
                        (click)="formSortOption.searchKey='' ;searchForms();"></button>
                      <button type="submit" class="search-box-item-click" (click)="searchForms()"><i
                          class="fa fa-search"></i> </button>
                    </div>
                  </div>
                </div>
              </div>
              <app-list-loader *ngIf="formsLoader.isLoading"></app-list-loader>
              <div class="table-responsive" *ngIf="!formsLoader.isLoading">
                <table class='table tgrid table-hover table-sm' *ngIf="formPagination.pagedItems?.length>0"
                  aria-describedby="describe">
                  <thead>
                    <tr>
                      <th class="" colspan="2" style="width: 35%" id="border-bottom">
                        <span class="gridHeader" translate>Form Details</span>
                      </th>
                      <th class="hidden-xs text-center" translate scope="col">Created On</th>
                      <th class="text-center">Preview</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let form of formPagination.pagedItems ;let i =index" (click)="updateDescription(form)">
                      <td>
                        <input type="radio">
                      </td>
                      <td>
                        <h4 class="ellipsis mt5 mb5 f-w-600 mFormName" data-toggle="tooltip" data-placement="bottom"  title="{{form.name}}">
                          {{form.name | slice:0:25}} <span *ngIf="form.name?.length>25">...</span>
                        </h4>
                        <h6>
                          Created By <strong>{{form.createdName}}</strong>
                        </h6>
                        <h6>
                          From <strong>{{form.companyName}}</strong>
                        </h6>
                      </td>
                      <td class="hidden-xs text-center">
                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="form.createdDateString">
                        </app-timestamp>
                      </td>
                      <td id="actions-row" style="text-align: center;">
                        <div class="actions-block override-actions custom-width-icon" style="float: none;">
                          <a data-toggle="tooltip" data-placement="top" title="Preview"
                            (click)="$event.stopPropagation();previewForm(form.id)">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                          </a>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div *ngIf="formPagination.pagedItems.length !== 0" class="pg8">
                <app-pagination [pagination]="formPagination" (notifyParent)="setFormsPage($event)"
                  (notifyParentDropDown)="listForms($event)" [hidden]="formsLoader.isLoading">
                </app-pagination>
              </div>
              <!-- End of 24 -->
              <div *ngIf="formPagination.totalRecords==0 && !formsLoader.isLoading" class="alert alert-info">
                <strong>No Forms Found.</strong>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="formsError">
          <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
          </app-response-message>
        </div>

      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" class="btn GraY-Btn" style="float: right"><span
            *ngIf="!authenticationService.isShowForms">Close</span><span
            *ngIf="authenticationService.isShowForms">Submit</span></a>
      </div>
    </div>
  </div>
</div>

<!-- --------------Order assets Popup--------------- -->
<div class="modal right" id="order-assets" data-backdrop="static">
  <div class="modal-dialog modal-lg " style="width: 75%;right:0">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" data-dismiss="modal">
          <i class="fa fa-times" aria-hidden="true "></i>
        </button>
        <h4 class="modal-title text-center">Selected Assets</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-xs-12">
            <div class="pg8 inline" style="float: right;">
              <ng-container *ngIf="type == undefined || type == 'TRACK'">
                <label style="margin-right: 10px; margin-top: 4px;">Follow Sequence </label>
                <div class="switch">
                  <input id="cmn-toggle-1" class="cmn-toggle cmn-toggle-round-flat"
                    [(ngModel)]="tracksPlayBook.followAssetSequence" type="checkbox">
                  <label for="cmn-toggle-1"></label>
                </div>
              </ng-container>
            </div>
          </div>
          <div class="col-xs-12 p5">
            <div class="table-responsive">
              <table class='table tgrid table-hover table-sm' *ngIf="selectedAssets?.length>0"
                aria-describedby="describe">
                <thead>
                  <tr>
                    <th class="" colspan="2" style="width: 35%" id="border-bottom">
                      <span class="gridHeader" translate>Details</span>
                    </th>
                    <th class="text-center" translate scope="col">Type</th>
                    <th class="text-center" translate scope="col">Created On</th>
                    <th class="text-center">Preview</th>
                  </tr>
                </thead>
                <tbody [dragula]='"assetsDragula"' [dragulaModel]='selectedAssets'>
                  <tr *ngFor="let asset of selectedAssets; let i = index" style="cursor: move;">
                    <ng-container *ngIf="asset.typeQuizId">
                      <td class="text-cente" style="width: 10%;">
                        <div class="thumbnail-wrapper-form" style="overflow: hidden;">
                          <img class="fit-form-image" onerror="this.src='assets/images/form.png';" alt="Image not found" [src]="asset.quiz.thumbnailImage">
                        </div>
                      </td>
                      <td>
                        <h4 class="moreipsis mt5 mb5 f-w-600" data-toggle="tooltip" data-placement="bottom"  title="{{asset.quiz.name}}" translate>
                          <span><strong>{{asset.quiz.name}}</strong></span>
                        </h4>
                        <h6 class="moreipsis" data-toggle="tooltip" data-placement="bottom"  title="{{asset.displayName}}">
                          <span translate> Created By
                            <strong>{{asset.quiz.createdName}}</strong></span>
                        </h6>
                      </td>
                      <td class="text-center">
                        Quiz
                      </td>
                      <td class="text-center">
                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="asset.quiz.createdDateString">
                        </app-timestamp>
                      </td>
                      <td id="actions-row " class="mActionsAlign" style="text-align: center;">
                        <div class="actions-block override-actions custom-width-icon" style="float: none;">
                          <a data-toggle="tooltip" data-placement="top" title="Preview" (click)="previewForm(asset.quiz.id)">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                          </a>
                          <a data-toggle="tooltip" data-placement="top" title="Remove" (click)="selectedQuiz(asset.quiz); validateAssets(); validateAllSteps()">
                            <i class="fa fa-times remove-button" aria-hidden="true "></i>
                          </a>
                        </div>
                      </td>
                    </ng-container>
                    <ng-container *ngIf="!asset.typeQuizId">
                      <td class="text-cente" style="width: 10%;">
                        <div class="thumbnail-wrapper">
                          <img class="img-asset-list" alt="Image not found" [src]="asset.dam.thumbnailPath">
                        </div>
                      </td>
                      <td>
                        <h4 class="moreipsis mt5 mb5 f-w-600" data-toggle="tooltip" data-placement="bottom"  title="{{asset.dam.assetName}}" translate>
                          <span><strong>{{asset.dam.assetName}}</strong></span>
                        </h4>
                        <h6 class="moreipsis" data-toggle="tooltip" data-placement="bottom"  title="{{asset.dam.displayName}}">
                          <span translate> Created By
                            <strong>{{asset.dam.displayName}}</strong></span>
                        </h6>
                      </td>
                      <td class="text-center">
                        {{asset.dam.assetType}}
                      </td>
                      <td class="text-center">
                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="asset.dam.displayTime">
                        </app-timestamp>
                      </td>
                      <td id="actions-row " class="mActionsAlign" style="text-align: center;">
                        <div class="actions-block override-actions custom-width-icon" style="float: none;">
                          <a data-toggle="tooltip" data-placement="top" title="Preview" (click)="assetPreview(asset.dam, true)">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                          </a>
                          <a data-toggle="tooltip" data-placement="top" title="Remove" (click)="setSelectedAsset(asset.dam); validateAssets(); validateAllSteps()">
                            <i class="fa fa-times remove-button" aria-hidden="true "></i>
                          </a>
                        </div>
                      </td>
                    </ng-container>
                  </tr>
                </tbody>
              </table>
            </div>
            <div *ngIf="selectedAssets?.length ==0" class="alert alert-info">
              <strong>No Assets Selected.</strong>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" class="btn GraY-Btn" style="float: right"><span>Close</span></a>
      </div>
    </div>
  </div>
</div>

<!-- --------------List Of Quiz Forms Popup--------------- -->
<div class="modal right" id="quiz-list" data-backdrop="static">
  <div class="modal-dialog modal-lg" style="width: 75%;right:0">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" data-dismiss="modal">
          <i class="fa fa-times" aria-hidden="true"></i>
        </button>
        <h4 class="modal-title text-center">Forms</h4>
      </div>
      <div class="modal-body">
        <div class="row" *ngIf="!quizFormsError">
          <div class="col-xs-12 p5">
            <div class="portlet light">
              <div class="portlet-title">
                <div class="inputs" id="right">
                  <div id="left"class="mSortAlign" >
                    <select class="form-control" [(ngModel)]="quizFormSortOption.formsSortOption"
                      (ngModelChange)="quizSortBy($event)" style="position: relative;right: -3px;">
                      <option *ngFor="let option of quizFormSortOption.manageFormsSortOptions" [ngValue]="option">
                        {{option.name}}</option>
                    </select>
                  </div>
                  <div class="portlet-input input-inline input-small mSearchAlign" id="search">
                    <div class="input-icon right " id="search-icon">
                      <input type="text" id="search-text" class="form-control"
                        [(ngModel)]="quizFormSortOption.searchKey" [ngModelOptions]="{standalone: true}"
                        placeholder="search..." (keypress)="quizEventHandler($event.keyCode)">
                      <button class="glyphicon glyphicon-remove search-box-item-clear"
                        *ngIf="quizFormSortOption.searchKey"
                        (click)="quizFormSortOption.searchKey='';searchQuizForms();"></button>
                      <button type="submit" class="search-box-item-click" (click)="searchQuizForms()"><i
                          class="fa fa-search"></i> </button>
                    </div>
                  </div>
                </div>
              </div>
              <app-list-loader *ngIf="quizFormsLoader.isLoading"></app-list-loader>
              <div class="table-responsive" *ngIf="!quizFormsLoader.isLoading">
                <table class='table tgrid table-hover table-sm' *ngIf="quizFormPagination.pagedItems?.length>0"
                  aria-describedby="describe">
                  <thead>
                    <tr>
                      <th class="" colspan="2" style="width: 35%" id="border-bottom">
                        <span class="gridHeader" translate>Form Details</span>
                      </th>
                      <th class="hidden-xs text-center" translate scope="col">Created On</th>
                      <th class="text-center">Preview</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let form of quizFormPagination.pagedItems ;let i =index" (click)="selectedQuiz(form); validateAssets(); validateAllSteps()">
                      <td>
                        <input type="checkbox" [checked]="form.selected">
                      </td>
                      <td>
                        <h4 class="ellipsis mt5 mb5 f-w-600 mFormName" data-toggle="tooltip" data-placement="bottom"  title="{{form.name}}">
                          {{form.name | slice:0:25}} <span *ngIf="form.name?.length>25">...</span>
                        </h4>
                        <h6>
                          Created By <strong>{{form.createdName}}</strong>
                        </h6>
                        <h6>
                          From <strong>{{form.companyName}}</strong>
                        </h6>
                      </td>
                      <td class="hidden-xs text-center">
                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="form.createdDateString">
                        </app-timestamp>
                      </td>
                      <td id="actions-row" style="text-align: center;">
                        <div class="actions-block override-actions custom-width-icon" style="float: none;">
                          <a data-toggle="tooltip" data-placement="top" title="Preview"
                            (click)="$event.stopPropagation();previewForm(form.id)">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                          </a>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div *ngIf="quizFormPagination.pagedItems.length !== 0" class="pg8">
                <app-pagination [pagination]="quizFormPagination" (notifyParent)="setQuizPage($event)"
                  (notifyParentDropDown)="listQuizForms($event)" [hidden]="quizFormsLoader.isLoading">
                </app-pagination>
              </div>
              <!-- End of 24 -->
              <div *ngIf="quizFormPagination.totalRecords==0 && !quizFormsLoader.isLoading" class="alert alert-info">
                <strong>No Forms Found.</strong>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="quizFormsLoader">
          <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
          </app-response-message>
        </div>

      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" class="btn GraY-Btn" style="float: right"><span
            *ngIf="!authenticationService.isShowForms">Close</span><span
            *ngIf="authenticationService.isShowForms">Submit</span></a>
      </div>
    </div>
  </div>
</div>

<!-- -----------Form Preview Popup------------ -->
<div class="modal right " id="form-preview-modal" data-backdrop="static">
  <div class="modal-dialog modal-lg" style="width: 75%;right:0">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" data-dismiss="modal">
          <i class="fa fa-times" aria-hidden="true"></i>
        </button>
        <h4 class="modal-title text-center">Form Preview</h4>
      </div>
      <div
        [ngStyle]="{ 'background-image': 'url(' + formBackgroundImage + ')','background-repeat': 'no-repeat','background-size': 'cover'}"
        [style.backgroundColor]="pageBackgroundColor">
        <div class="modal-body">
          <ngx-loading [show]="ngxloading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
          <div *ngIf="form.showCompanyLogo">
            <img id="form-company-logo" *ngIf="form.companyLogo.indexOf('images/')===0;"
              [src]="authenticationService.MEDIA_URL + form.companyLogo" alt="" />
            <img id="form-company-logo" *ngIf="form.companyLogo.indexOf('images/')!==0;" [src]="form.companyLogo"
              alt="" />
          </div>
          <div class="vertical-center">
            <div class="panel panel-info mFormWidth " *ngIf="!formError" [style.backgroundColor]="form.backgroundColor"
              [style.borderColor]="form.borderColor">
              <div *ngIf="form.showTitleHeader" class="panel-heading" [style.backgroundColor]="form.borderColor" [style.color]="form.titleColor"
                [style.borderColor]="form.borderColor">
                <div class="panel-title form-name-wrap" data-toggle="tooltip" data-placement="bottom"  title="{{form.name}}">{{form.name}}</div>
              </div>
              <div class="panel-body" *ngIf="!formError">
                <div class="form-name-wrap form-description" data-toggle="tooltip" data-placement="bottom" title="{{form.description}}" [style.color]="form.descriptionColor">{{form.description}}</div>
                <ng-container *ngFor="let columnInfo of form?.formLabelDTOs;let i = index">
                  <div class="form-group">
                    <label class="control-label">
                      <span [style.color]="form.labelColor">{{columnInfo.labelName}}</span>
                      <span class="required" *ngIf="columnInfo.required">*</span>
                    </label>
                    <ng-container
                      *ngIf="columnInfo.labelType=='text' || columnInfo.labelType=='email' || columnInfo.labelType=='number'">
                      <input type="{{columnInfo.labelType}}" class="form-control"
                        placeholder="{{columnInfo.placeHolder}}" id="{{columnInfo.labelId}}" maxlength="1000"
                        disabled="disabled">
                    </ng-container>
 
                    <ng-container *ngIf="columnInfo.labelType=='textarea'">
                      <textarea rows="4" cols="4" class="form-control" placeholder="{{columnInfo.placeHolder}}"
                        maxlength="1000" disabled="disabled"></textarea>
                    </ng-container>
                    <!-- ---------------------------Date----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType=='date'">
                      <app-date-picker [class.disabled]='true' [isFromForm]='true'>
                      </app-date-picker>
                    </ng-container>
                    <!-- ---------------------------Price----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType=='price'">
                      <div class="input-group prefix">
                        <span class="input-group-addon" style="pointer-events: none;">
                          {{columnInfo.priceSymbol}}
                        </span>
                        <input type="number" min="0" class="form-control" disabled="disabled"
                          placeholder="{{columnInfo.placeHolder}}">
                      </div>
                    </ng-container>
                    <!-- ---------------------------Upload----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType=='upload'">
                      <input type="file" class="form-control" disabled="disabled">
                    </ng-container>
                    <!-- ---------------------------Radio Button----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType=='radio'">
                      <ng-container *ngFor="let radioButton of columnInfo.radioButtonChoices;let i=index">
                        <div class="form-check">
                          <label class="form-check-label" style="border:0px !important;">
                            <input type="{{columnInfo.labelType}}" name="{{columnInfo.labelId}}"
                              class="form-check-input" disabled="disabled">
                              <span [style.color]="form.labelColor">{{radioButton.name}}</span>
                          </label>
                        </div>
        
                      </ng-container>
                    </ng-container>
                    <!-- ---------------------------Check Box----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType=='checkbox'">
                      <ng-container *ngFor="let checkBox of columnInfo.checkBoxChoices;let i=index">
                        <div class="form-check">
                          <label class="form-check-label" style="border:0px !important;">
                            <input type="{{columnInfo.labelType}}" name="{{columnInfo.labelId}}"
                              class="form-check-input" disabled="disabled">
                              <span [style.color]="form.labelColor">{{checkBox.name}}</span>
                          </label>
                        </div>
                        <!-- <br> -->
                      </ng-container>
                    </ng-container>
                    <!-- ---------------------------DropDown Menu----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType=='select'">
                      <select class="form-control">
                        <option *ngFor="let dropDownValue of columnInfo.dropDownChoices">
                          {{dropDownValue.name}}</option>
                      </select>
                    </ng-container>
                    <!-- ---------------------------Quiz Choices----------------------------- -->
                    <ng-container *ngIf="columnInfo.labelType.split('_')[0]=='quiz'">
                      <ng-container *ngFor="let choice of columnInfo.choices;let i=index">
                        <div class="form-check">

                          <label class="form-check-label" style="border:0px !important;">
                            <input type="{{columnInfo.labelType.split('_')[1]}}" name="{{columnInfo.labelId}}"
                              class="form-check-input" disabled="disabled">
                              <span [style.color]="form.labelColor" class="quiz_optionname">{{choice.name}} </span>

                          </label>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </ng-container>
                <div *ngIf="form.showCaptcha">
                  <re-captcha (resolved)="resolved($event)" [siteKey]="siteKey"></re-captcha>
                </div>
                <div *ngIf="form.buttonColor?.length>0;then show else dontShow"></div>
                <ng-template #show>
                  <button type="submit" disabled="disabled" class="button-padding btn-border-radius" id="bottom-right"
                    [style.backgroundColor]="form.buttonColor"
                    [style.color]="form.buttonValueColor"
                    >{{form.buttonValue}}</button>
                </ng-template>
                <ng-template #dontShow>
                  <button type="submit" disabled="disabled" class="btn green-haze btn-border-radius" id="bottom-right"
                    [style.color]="form.buttonValueColor"
                    >{{form.buttonValue}}</button>
                </ng-template>
              </div>
            </div>
            <!------Show Footer-------->
            <footer>
              <div style="text-align: center;" *ngIf="form.showFooter && form.footer"
                [innerHTML]="sanitizer.bypassSecurityTrustHtml(form.footer)"></div>
            </footer>
          </div>
          <div *ngIf="formError">
            <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
            </app-response-message>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" class="btn GraY-Btn" id="bottom-right">Close</a>
      </div>
    </div>
  </div>
</div>

<!-- --------------List Of Assets Popup--------------- -->
<div class="modal right" id="media-asset-list" data-backdrop="static">
  <div class="modal-dialog modal-lg" style="width: 75%;right:0">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" data-dismiss="modal" (click)="closeAssetModal()">
          <i class="fa fa-times" aria-hidden="true"></i>
        </button>
        <h4 class="modal-title text-center">Assets</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-xs-12 p5">
            <div class="portlet light">
              <div class="portlet-title">
                <div class="inputs" id="right">
                  <div id="left" class="mSortAlign">
                    <select class="form-control" [(ngModel)]="assetSortOption.damSortOption"
                      (ngModelChange)="assetSortBy($event)" style="position: relative;right: -3px;">
                      <option *ngFor="let option of assetSortOption.damSortDropDownOptions" [ngValue]="option">
                        {{option.name}}</option>
                    </select>
                  </div>
                  <!--Filter Types---->
                  <div id="left" class="mSortAlign ml10" *ngIf="fileTypesForFilter?.length>0">
                    <select class="form-control mDamSort"	[(ngModel)]="selectedFileType"	(ngModelChange)="filterAssetsByFileType($event)"style="position: relative; right: -3px;">
                      <option value="">Select Asset Type</option>
                      <option	*ngFor="let fileType of fileTypesForFilter" [ngValue]="fileType">{{fileType}}</option>
                    </select> 
                  </div>

                  <div class="portlet-input input-inline input-small mSearchAlign" id="search">
                    <div class="input-icon right" id="search-icon">
                      <input type="text" id="search-text" class="form-control" [(ngModel)]="assetSortOption.searchKey"
                        [ngModelOptions]="{standalone: true}" placeholder="search..."
                        (keypress)="assetEventHandler($event.keyCode)">
                      <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="assetSortOption.searchKey"
                        (click)="assetSortOption.searchKey='';searchAssets();"></button>
                      <button type="submit" class="search-box-item-click" (click)="searchAssets()"><i
                          class="fa fa-search"></i> </button>
                    </div>
                  </div>
                </div>
              </div>
              <app-list-loader *ngIf="assetLoader.isLoading"></app-list-loader>
              <div class="table-responsive" *ngIf="!assetLoader.isLoading">
                <table class='table tgrid table-hover table-sm' *ngIf="assetPagination.pagedItems?.length>0"
                  aria-describedby="describe">
                  <thead>
                    <tr>
                      <th class="" colspan="3" style="width: 35%" id="border-bottom">
                        <span class="gridHeader" translate>Asset Details</span>
                      </th>
                      <th class="text-center" translate scope="col">Type</th>
                      <th class="text-center" translate scope="col">Created On</th>
                      <th class="text-center">Preview</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let asset of assetPagination.pagedItems ;let i =index"
                      (click)="addMediaToDescription(asset)">
                      <td>
                        <input type="radio"
                          [checked]="selectedAssetForMedia != undefined && selectedAssetForMedia != null && asset.id == selectedAssetForMedia.id">
                      </td>
                      <td class="text-cente" style="width: 10%;">
                        <div class="thumbnail-wrapper">
                          <img class="img-asset-list" alt="Image not found" [src]="asset.thumbnailPath">
                        </div>
                      </td>
                      <td>
                        <h4 class="moreipsis mt5 mb5 f-w-600" data-toggle="tooltip" data-placement="bottom"  title="{{asset.assetName}}" translate>
                          <span><strong>{{asset.assetName}}</strong></span>
                        </h4>
                        <h6 class="moreipsis" data-toggle="tooltip" data-placement="bottom"  title="{{asset.displayName}}">
                          <span translate> Created By
                            <strong>{{asset.displayName}}</strong></span>
                        </h6>
                      </td>
                      <td class=" text-center">
                        {{asset.assetType}}
                      </td>
                      <td class=" text-center">
                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="asset.displayTime">
                        </app-timestamp>
                      </td>
                      <td id="actions-row" style="text-align: center;">
                        <div class="actions-block override-actions custom-width-icon" style="float: none;">
                          <a data-toggle="tooltip" data-placement="top" title="Preview"
                            (click)="$event.stopPropagation();assetPreview(asset, true)">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                          </a>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div *ngIf="assetPagination.pagedItems.length !== 0" class="pg8">
                <app-pagination [pagination]="assetPagination" (notifyParent)="setAssetPage($event)"
                  (notifyParentDropDown)="listAssets($event)" [hidden]="assetLoader.isLoading">
                </app-pagination>
              </div>
              <!-- End of 24 -->
              <div *ngIf="assetPagination.totalRecords==0 && !assetLoader.isLoading" class="alert alert-info">
                <strong>No Assets Found.</strong>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="assetLoader">
          <app-response-message [customResponse]="customResponse" *ngIf="customResponse.isVisible">
          </app-response-message>
        </div>

      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" class="btn GraY-Btn" style="float: right" (click)="closeAssetModal()"><span>Close</span></a>
      </div>
    </div>
  </div>
</div>

<!-- Preview Bee Template Modal Popup-->
<div class="modal fade right" id="asset-preview-modal" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" data-dismiss="modal" aria-hidden="true">
          <i class="fa fa-times" aria-hidden="true"></i>
        </button>
        <h4 class="modal-title" id="assetTitle"></h4>
      </div>
      <div class="modal-body" id="preview-bee-template">
        <app-modal-popup-loader *ngIf="modalPopupLoader"></app-modal-popup-loader>
        <div id="asset-preview-content">
        </div>
      </div>
      <div class="modal-footer">
        <a data-dismiss="modal" class="btn GraY-Btn" style="float: right">Close</a>
      </div>
    </div>
  </div>
</div>

<!-- Preview Assets -->
<ng-container *ngIf="showFilePreview">
  <div class="overlay page-content mFileLeft">
    <button type="button" class="close-circle" style="position: relative;top: 30px;  right: 26px;
" data-dismiss="modal" (click)="closeAssetPreview()">
      <i class="fa fa-times" aria-hidden="true"></i>
    </button>
    <div class="overlay-content">
      <ng-container *ngIf="isImage">
        <img class="fit-preview-asset" [src]="filePath" alt="No Image Found"><br>
      </ng-container>
      <ng-container *ngIf="isVideo">
        <video class="fit-preview-asset" controls>
          <source [src]="filePath" [type]="fileType">
          Your browser does not support the video tag.
        </video>
      </ng-container>
      <ng-container *ngIf="isAudio">
        <audio controls>
          <source [src]="filePath" [type]="fileType">
          Your browser does not support the audio tag.
        </audio>
      </ng-container>
      <div *ngIf="isFile && filePath?.length > 0">
        <iframe [src]="url" style="width:100%; height:75vh;" frameborder="0"></iframe>
      </div>
    </div>
  </div>
</ng-container>

<!-- --------------Media link title popup--------------- -->
<div class="modal" id="media-link-title" data-backdrop="static" style="top: 25%;">
  <div class="modal-dialog modal-lg" style="width: 40% !important;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close-circle" (click)="closeLinkTitlePopup()">
          <i class="fa fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-xs-12 p5">
            <label class="control-label col-sm-4" style="text-align: right;" translate>Display Text
            </label>
            <div class="col-sm-8">
              <input class="form-control" [(ngModel)]="mediaLinkDisplayText"
                (keypress)="mediaDisplayTextEventHandler($event.keyCode)">
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="pull-right">
          <a class="btn main-btn" (click)="updateDescriptionWithAssetUrl()"><span>Confirm</span></a>
          <a class="btn GraY-Btn" style="padding-left: 5px;" (click)="closeLinkTitlePopup()"><span>Close</span></a>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="openAddTagPopup">
  <app-add-tags-util [pagination]="pagination" [isAddTag]="true" (notifyParent)="resetTagValues($event)">
  </app-add-tags-util>
</div>

<app-add-folder-modal-popup #addFolderModalPopupComponent (notifyChild)="resetFolderValues($event)">
</app-add-folder-modal-popup>