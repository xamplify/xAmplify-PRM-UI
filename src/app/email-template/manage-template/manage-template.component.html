<div class="page-content">
  <div *ngIf="isEmailTemplateDeleted" id="emailTemplateDeleteId" class="alert alert-success alert-dismissable fade in">
	 	 <strong>{{selectedEmailTemplateName}}</strong> Deleted Successfully
	 </div>
	  <div *ngIf="isCampaignEmailTemplate" id="campaignEmailTemplateId" class="alert alert-danger alert-dismissable fade in">
	 	<strong>Please Delete Associated Campaign(s)</strong>
	 </div>
	  <div *ngIf="message?.length>0" id="templateCreationSuccessDiv" class="alert alert-success alert-dismissable fade in">
	 	<strong>{{message}}</strong>
	 </div>
	 
<div class="page-bar">
		<ul class="page-breadcrumb">
			<li><i class="fa fa-home"></i> <a [routerLink]="['/']">Home</a> <i
				class="fa fa-angle-right"></i></li>
			<li>Manage Templates
			</li>
		</ul>
		<a class="btn btn-info" id="emailtemplate-help" [routerLink]="['/home/emailtemplates/help']">Custom Template Delivers</a>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="portlet light">
				<div class="portlet-title"><!--  -->
					<div class="caption">
						<div class="row">
						<div class="colxs-12 col-sm-9">
						<div>
							<ul class="mix-filter">
								<li class="filter" (click)="filterTemplates('NONE',false,0)" [class.emailtemplate-selected]="0 == selectedTemplateTypeIndex">All Email Template's</li>
								<li class="filter" (click)="filterTemplates('BASIC',false,1)" [class.emailtemplate-selected]="1 == selectedTemplateTypeIndex">Basic Template's</li>
								<li class="filter" (click)="filterTemplates('RICH',false,2)" [class.emailtemplate-selected]="2 == selectedTemplateTypeIndex">Rich Template's</li>
								<li class="filter" (click)="filterTemplates('BASIC',true,3)" [class.emailtemplate-selected]="3 == selectedTemplateTypeIndex">Basic Video Template's</li>
								<li class="filter" (click)="filterTemplates('RICH',true,4)" [class.emailtemplate-selected]="4 == selectedTemplateTypeIndex">Rich Video Template's</li>
								<li class="filter" (click)="filterTemplates('UPLOADED',false,5)"[class.emailtemplate-selected]="5 == selectedTemplateTypeIndex">Upload Template</li>
								<li class="filter" (click)="filterTemplates('PARTNER',false,6)"[class.emailtemplate-selected]="6 == selectedTemplateTypeIndex">Partner Template</li>
								<li class="filter" style="display: none;">Own Template</li>
							</ul>
						</div>
						</div>
						<div class="colxs-12 col-sm-3">
						<div class="inputs regular_emails" align="right" style="float: right">
							<ng-container class='m10'>
								<button class="btn btn-xs" [disabled]="isListView" (click)="isListView = true" title="List View"><i class="fa fa-th-list p10" aria-hidden="true"></i></button>
								<button class="btn btn-xs" [disabled]="!isListView" (click)="isListView = false" title="Grid View"><i class="fa fa-th-large p10" aria-hidden="true"></i></button>
							</ng-container>
							<div class="portlet-input input-inline input-small">
								<div class="input-icon right">
									<i class="icon-magnifier"  (click)="searchTemplates()" style="cursor: pointer;"></i>
									<input type="search" 
									 class="form-control input-circle"  [(ngModel)]="searchKey" [ngModelOptions]="{standalone: true}"  placeholder="search...">
								</div>
							</div>
						</div>
						</div>
						</div>
					</div>
				</div>
					
					
					<section [hidden]="!isListView">
						<table class='table tgrid'>
							<thead>
								<tr>
									<th colspan="2" style="width: 50%">Email Template List</th>
									<th>Created Date</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let emailTemplate of pagination.pagedItems ;let i =index">
									<td style="width: 10%;">
										<img class="img-responsive center-block" src="{{emailTemplate.subject}}" alt="{{emailTemplate.name}}">
									</td>
									<td>
										<h4 class="ellipsis mt5 mb5 f-w-600" title="{{emailTemplate.name}}">{{emailTemplate.name}}</h4>
										<h5 class='m0'>By <span class='f-w-600'>{{emailTemplate.createdBy}}</span></h5>
									</td>
									<td>{{emailTemplate.createdDate}}</td>
									<td>
									    <a (click)="edit(emailTemplate.id)" title="Edit" *ngIf="hasAllAccess||(hasEmailTemplateRole && emailTemplate.userId==loggedInUserId)">
											<i class="fa fa-pencil-square-o mr5" style="font-size: 21px;color:#1982dc"></i>
									    </a>
									    <a (click)="showPreview(emailTemplate)" title="Preview" > 
											<i class="fa fa-eye mr5" style="font-size: 22px;color:black"></i>
										</a>
									    <a id="template-delete" (click)="confirmDeleteEmailTemplate(emailTemplate.id,emailTemplate.name)" title="Delete" 
						    				*ngIf="hasAllAccess||(hasEmailTemplateRole && emailTemplate.userId==loggedInUserId)">
											<i class="fa fa-trash" style="font-size: 22px;color:red"></i>
										</a>
									</td>
								</tr>
							</tbody>
						</table>
					</section>
								
					<div class="margin-top-10"  [hidden]="isListView">
							<div class="row mix-grid" style="margin-top: -15px;padding: 7px;">
							<app-loader *ngIf="httpRequestLoader.isLoading"></app-loader>
							<app-error-pages *ngIf="httpRequestLoader.isServerError"></app-error-pages>
							<ng-container *ngIf="!httpRequestLoader.isLoading &&!httpRequestLoader.isServerError ">
								<div *ngFor="let emailTemplate of pagination.pagedItems ;let i =index" id="emailTemplateListDiv_{{emailTemplate.id}}">
									<div class="col-md-3 col-sm-4 mix category_1 mix_all"  style="display: block; opacity: 1; margin-top: -11px;">
									   <div id="container">
											<h3 *ngIf="emailTemplate.type=='PARTNER'" style="width: 21%">
												{{emailTemplate.type}}<span class="arrow"></span>
											</h3>
										</div>
									<div class="mix-inner" id="mix-inner">
										<img class="img-responsive center-block" src="{{emailTemplate.subject}}" alt="{{emailTemplate.name}}" id="emailtemplate-image">										
										<div class="mix-details" id="mix-details">
											<h4 class="ellipsis" title="{{emailTemplate.name}}">{{emailTemplate.name}}</h4>
											<div style="top: 2%; position: relative; margin-left: 5px;">
											</div>
											<div id="template-action-div">
											<a class="mix-preview2" (click)="showPreview(emailTemplate)" title="Preview" data-rel="">
												<i class="fa fa-eye"></i>
										    </a>
										    <a  class="mix-preview1" (click)="edit(emailTemplate.id)" title="Edit" data-rel=""
										    		 *ngIf="hasAllAccess||(hasEmailTemplateRole && emailTemplate.userId==loggedInUserId)">
												<i class="fa fa-pencil-square-o"></i>
										    </a>
										    <a class="mix-preview3" id="template-delete"  (click)="confirmDeleteEmailTemplate(emailTemplate.id,emailTemplate.name)" title="Delete" data-rel="" 
										    			*ngIf="hasAllAccess||(hasEmailTemplateRole && emailTemplate.userId==loggedInUserId)">
												<i class="fa fa-trash" style="color:#f43636"></i>
											</a>
											</div>
											<span align="right" class="template-created-on-label">
												<b>Created On</b>
											</span>
											<span align="right" title="upladed date" class="template-created-on-value" >
												<b>{{emailTemplate.createdDate}}</b>
									 		</span>
									 		<span align="left" class="template-created-by-label" title="{{emailTemplate.createdBy}}">
									 			<b  *ngIf="emailTemplate.createdBy?.length>20">{{emailTemplate.createdBy|slice:0:20}}....</b>
												<b  *ngIf="emailTemplate.createdBy?.length<=20">{{emailTemplate.createdBy}}</b>
									 		</span>
									 		<span align="left" class="template-created-by-value"><b>Created By</b></span>
										</div>
									</div>
								</div>
							</div>
							</ng-container>	
							</div>
						</div>
						<!-- End of 24 -->
				<div *ngIf="pagination.totalRecords>0">
					  <ul *ngIf="pagination.pager.pages && pagination.pager.pages.length" class="pagination">
                          <li [ngClass]="{disabled:pagination.pager.currentPage === 1}">
                             <a (click)="setPage(1)" [class.disabled]="pagination.pager.currentPage === 1">First</a>
                          </li>
                          <li [ngClass]="{disabled:pagination.pager.currentPage === 1}">
                              <a (click)="setPage(pagination.pager.currentPage - 1)" [class.disabled]="pagination.pager.currentPage === 1">Previous</a>
                           </li>
                           <li *ngFor="let page of pagination.pager.pages" [ngClass]="{active:pagination.pager.currentPage === page}">
                              <a (click)="setPage(page)" [class.disabled]="pagination.pager.currentPage === page">{{page}}</a>
                           </li>
                           <li [ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
                               <a (click)="setPage(pagination.pager.currentPage + 1)" [class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Next</a>
                           </li>
                            <li [ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
                               <a (click)="setPage(pagination.pager.totalPages)" [class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Last</a>
                           </li>
                      </ul>
				</div>
				<div *ngIf="pagination.totalRecords==0" class="alert alert-info"><strong>No Email Templates Found</strong></div>	
			</div>
			<!-- END PAGE CONTENT-->
		</div>
	</div>
	
	
			<div class="modal" id="show_email_template_preivew">
					<div class="modal-dialog modal-lg" style="width: 75%;">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
								<h4 class="modal-title" id="email-template-title"	style="text-align: center;"></h4>
							</div>
							<div class="modal-body">
								<div id="htmlContent"></div>
							</div>
							<div class="modal-footer">
								<a href="javascript:void(0)" data-dismiss="modal"
									class="btn btn-default" style="float: right">Close</a>
							</div>
						</div>
					</div>
				</div>
						
</div>
				<!-- END PAGE CONTENT-->
		<!-- END CONTENT -->