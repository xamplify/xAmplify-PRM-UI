<div class="text-center p10">
    <button class="btn btn-primary mb10" (click)="send()">Spam Check</button>
</div>
<div>
    <ngx-loading [show]="loading"></ngx-loading>
<div class="wrapper center-block" *ngIf="results">
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        <ng-container *ngFor="let result of results">
            <div *ngIf="!result.jsonResponse" class="p10">
                <div class='text-input__loading--line thick w100'></div>
                <div class='text-input__loading--line thin w75'></div>
            </div>
            <div class="panel panel-default" *ngIf="result.jsonResponse?.status === false && result.jsonResponse?.body === null">
                <h5 class="p10">{{result.jsonResponse.title}} <a (click)="test(result)" class="btn btn-success btn-xs">Try again</a></h5>                
            </div>
            <div class="panel panel-default" *ngIf="result.jsonResponse?.status">                
                <div class="panel-heading" role="tab" id="headingOne" aria-controls="collapseOne">
                    <h4 class="panel-title">
                        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{result.id}}" aria-expanded="false">
                             <span class="more-less headerRowPlusImage plusSymbol"></span>
                            <b style="font-size: 19px;color: #008fd5;">{{result.jsonResponse.displayedMark}}</b> {{result.jsonResponse.title}}
                        </a>
                        <span style="float: right;font-size: 12px;color: #056898;">{{result.jsonResponse.messageInfo.dateReceivedDisplayed}}</span>
                    </h4>                    
                </div>
                <div id="collapse{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body">
                        <div class="test-results">
                            
                            
                            
                            
<div class="panel-group" id="accordion-test-results" role="tablist" aria-multiselectable="true">
    
    

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="links">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-test-results" href="#collapseLinks-{{result.id}}" aria-expanded="false" aria-controls="collapseLinks">
                    <span class="more-less childRowPlusImage plusSymbol"></span>
                    {{result.jsonResponse.links.title}}
                    <span class="pull-right status {{result.jsonResponse.links.statusClass}}">{{result.jsonResponse.links.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseLinks-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="links">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.links.description}}</h5>
                <ng-container *ngFor="let url of result.jsonResponse.links.urls">
                    <h6 style="white-space: nowrap;" *ngIf="url.statusCode !== '200'">
                        <span [ngClass]="{'status-success': url.statusCode === '200', 'status-failure': url.statusCode !== '200'}">[ {{url.statusCode}} - {{url.httpStatus}} ]</span>
                        <span>{{url.baseUrl}}</span>
                    </h6>
                </ng-container>
            </div>
        </div>
    </div>
    
    
       <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="links">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-test-results" href="#collapseimprove-{{result.id}}" aria-expanded="false" aria-controls="collapseimprove">
                   <span class="more-less childRowPlusImage plusSymbol"></span>
                    {{result.jsonResponse.spamAssassin.title}}
                    <span class="pull-right status {{result.jsonResponse.spamAssassin.statusClass}}">{{result.jsonResponse.spamAssassin.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseimprove-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="links">
            <div class="panel-body">
                <h5 class="mt0 f-w-600" [innerHTML]="result.jsonResponse.spamAssassin.description"></h5>
                <ng-container>
                  <table class="table tgrid">
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.DKIM_SIGNED.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.DKIM_SIGNED.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.DKIM_SIGNED.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.DKIM_SIGNED.solution}}
						</td>
					</tr>
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.DKIM_VALID.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.DKIM_VALID.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.DKIM_VALID.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.DKIM_VALID.solution}}
						</td>
					</tr>
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.HTML_MESSAGE.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.HTML_MESSAGE.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.HTML_MESSAGE.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.HTML_MESSAGE.solution}}
						</td>
					</tr>
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.MIME_HTML_ONLY.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.MIME_HTML_ONLY.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.MIME_HTML_ONLY.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.MIME_HTML_ONLY.solution}}
						</td>
					</tr>
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.T_KAM_HTML_FONT_INVALID.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.T_KAM_HTML_FONT_INVALID.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.T_KAM_HTML_FONT_INVALID.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.T_KAM_HTML_FONT_INVALID.solution}}
						</td>
					</tr>
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.T_SPF_HELO_TEMPERROR.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.T_SPF_HELO_TEMPERROR.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.T_SPF_HELO_TEMPERROR.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.T_SPF_HELO_TEMPERROR.solution}}
						</td>
					</tr>
					<tr>
						<td>{{result.jsonResponse.spamAssassin.rules.URIBL_BLOCKED.score}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.URIBL_BLOCKED.code}}</td>
						<td>{{result.jsonResponse.spamAssassin.rules.URIBL_BLOCKED.description}}<br>
						{{result.jsonResponse.spamAssassin.rules.URIBL_BLOCKED.solution}}
						</td>
					</tr>
					</table>
                </ng-container>
            </div>
        </div>
    </div>
    
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="listNotAuthenticated">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapselistNotAuthenticated-{{result.id}}" aria-expanded="false" aria-controls="collapselistNotAuthenticated">
                    <span class="more-less childRowPlusImage plusSymbol"></span>
                    {{result.jsonResponse.signature.title}}
                    <span class="pull-right status {{result.jsonResponse.signature.statusClass}}">
                    
                    {{result.jsonResponse.signature.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapselistNotAuthenticated-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="listNotAuthenticated">
            <div class="panel-body">
                <h5 class="mt0 f-w-600" [innerHTML]="result.jsonResponse.signature.description"></h5>
                
   <div class="panel-group" id="listNotAuthenticated-SubTest" role="tablist" aria-multiselectable="true">                
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="spfAttributes">
            <h4 class="panel-title">
                <a role="button" title="{{result.jsonResponse.signature.subtests.spf.title}}" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapsespfAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapsespfAttributes">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.signature.subtests.spf.title | slice:0:82}}
                    <span *ngIf="result.jsonResponse.signature.subtests.spf.title?.length>82">...</span>
                    <span class="pull-right status {{result.jsonResponse.signature.subtests.spf.statusClass}}">{{result.jsonResponse.signature.subtests.spf.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapsespfAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="spfAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.signature.subtests.spf.description}}</h5>
                <h5 class="mt0 f-w-600"[innerHTML]="result.jsonResponse.signature.subtests.spf.messages"></h5>

            </div>
        </div>
    </div>
    
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="dkimAttributes">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapsedkimAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapsedkimAttributes">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.signature.subtests.dkim.title}}
                    <span class="pull-right status {{result.jsonResponse.signature.subtests.dkim.statusClass}}">{{result.jsonResponse.signature.subtests.dkim.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapsedkimAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="dkimAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.signature.subtests.dkim.description}}</h5>
                <h5 class="mt0 f-w-600"[innerHTML]="result.jsonResponse.signature.subtests.dkim.messages"></h5>

            </div>
        </div>
    </div>
    
     <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="dmarcAttributes">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapsedmarcAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapsedmarcAttributes">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.signature.subtests.dmarc.title}}
                    <span class="pull-right status {{result.jsonResponse.signature.subtests.dmarc.statusClass}}">{{result.jsonResponse.signature.subtests.dmarc.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapsedmarcAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="dmarcAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.signature.subtests.dmarc.description}}</h5>
                <h5 class="mt0 f-w-600"[innerHTML]="result.jsonResponse.signature.subtests.dmarc.messages"></h5>

            </div>
        </div>
    </div>
    
    
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="rDnsAttributes">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapserDnsAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapserDnsAttributes">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.signature.subtests.rDns.title}}
                    <span class="pull-right status {{result.jsonResponse.signature.subtests.rDns.statusClass}}">{{result.jsonResponse.signature.subtests.rDns.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapserDnsAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="rDnsAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.signature.subtests.rDns.description}}</h5>
                <h5 class="mt0 f-w-600"[innerHTML]="result.jsonResponse.signature.subtests.rDns.tested"></h5>

            </div>
        </div>
    </div>
    
    
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="mxRecordAttributes">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapsemxRecordAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapsemxRecordAttributes">
                   <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    <span [innerHTML]="result.jsonResponse.signature.subtests.mxRecord.title"></span>
                    <span class="pull-right status {{result.jsonResponse.signature.subtests.mxRecord.statusClass}}">{{result.jsonResponse.signature.subtests.mxRecord.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapsemxRecordAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="mxRecordAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.signature.subtests.mxRecord.description}}</h5>
                <h5 class="mt0 f-w-600"[innerHTML]="result.jsonResponse.signature.subtests.mxRecord.tested"></h5>

            </div>
        </div>
    </div>
    
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="aRecordAttributes">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#listNotAuthenticated-SubTest" href="#collapseaRecordAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapseaRecordAttributes">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    <span [innerHTML]="result.jsonResponse.signature.subtests.aRecord.title"></span>
                    <span class="pull-right status {{result.jsonResponse.signature.subtests.aRecord.statusClass}}">{{result.jsonResponse.signature.subtests.aRecord.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseaRecordAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="aRecordAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.signature.subtests.aRecord.description}}</h5>
                <h5 class="mt0 f-w-600"[innerHTML]="result.jsonResponse.signature.subtests.aRecord.tested"></h5>

            </div>
        </div>
      </div>
    
    </div>
                
   </div>
  </div>
 </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="blacklists">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-test-results" href="#collapseBlacklists-{{result.id}}" aria-expanded="false" aria-controls="collapseBlacklists">
                    <span class="more-less childRowPlusImage plusSymbol"></span>
                    {{result.jsonResponse.blacklists.title}}
                    <span class="pull-right status {{result.jsonResponse.blacklists.statusClass}}">{{result.jsonResponse.blacklists.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseBlacklists-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="links">
            <div class="panel-body">
                <h5 class="mt0 f-w-600" [innerHTML]="result.jsonResponse.blacklists.description"></h5>
                <h6 [innerHTML]="result.jsonResponse.blacklists.messages"></h6>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="SubTest">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-test-results" href="#collapseSubTest-{{result.id}}" aria-expanded="false" aria-controls="collapseSubTest">
                    <span class="more-less childRowPlusImage plusSymbol"></span>
                    {{result.jsonResponse.body.title}}
                    <span class="pull-right status {{result.jsonResponse.body.statusClass}}">{{result.jsonResponse.body.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseSubTest-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="SubTest">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.body.description}}</h5>
                <div [innerHTML]="result.jsonResponse.body.messages"></div>

<div class="panel-group" id="accordion-SubTest" role="tablist" aria-multiselectable="true">                
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="altAttributes">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-SubTest" href="#collapsealtAttributes-{{result.id}}" aria-expanded="false" aria-controls="collapsealtAttributes">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.body.subtests.altAttributes.title}}
                    <span class="pull-right status {{result.jsonResponse.body.subtests.altAttributes.statusClass}}">{{result.jsonResponse.body.subtests.altAttributes.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapsealtAttributes-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="altAttributes">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.body.subtests.altAttributes.description}}</h5>
                <ul>
                    <ng-container *ngFor="let item of result.jsonResponse.body.subtests.altAttributes.imagesWithoutAlt">
                        <li [innerHTML]="item"></li>
                    </ng-container>
                </ul>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="forbiddenTags">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-SubTest" href="#collapseforbiddenTags-{{result.id}}" aria-expanded="false" aria-controls="collapseforbiddenTags">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.body.subtests.forbiddenTags.title}}
                    <span class="pull-right status {{result.jsonResponse.body.subtests.forbiddenTags.statusClass}}">{{result.jsonResponse.body.subtests.forbiddenTags.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseforbiddenTags-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="forbiddenTags">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.body.subtests.forbiddenTags.description}}</h5>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="shorturl">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-SubTest" href="#collapseshorturl-{{result.id}}" aria-expanded="false" aria-controls="collapseshorturl">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.body.subtests.shorturl.title}}
                    <span class="pull-right status {{result.jsonResponse.body.subtests.shorturl.statusClass}}">{{result.jsonResponse.body.subtests.shorturl.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapseshorturl-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="shorturl">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.body.subtests.shorturl.description}}</h5>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="listUnsubscribe">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-SubTest" href="#collapselistUnsubscribe-{{result.id}}" aria-expanded="false" aria-controls="collapselistUnsubscribe">
                    <span class="more-less childRowPlusImage childPlusSymbol"></span>
                    {{result.jsonResponse.body.subtests.listUnsubscribe.title}}
                    <span class="pull-right status {{result.jsonResponse.body.subtests.listUnsubscribe.statusClass}}">{{result.jsonResponse.body.subtests.listUnsubscribe.displayedMark}}</span>
                </a>
            </h4>
        </div>
        <div id="collapselistUnsubscribe-{{result.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="listUnsubscribe">
            <div class="panel-body">
                <h5 class="mt0 f-w-600">{{result.jsonResponse.body.subtests.listUnsubscribe.description}}</h5>
                <h5>{{result.jsonResponse.body.subtests.listUnsubscribe.messages}}</h5>
            </div>
        </div>
    </div>
    
</div>

            </div>
        </div>
    </div>
<span class="pull-right" style="color: #056898; font-weight: 600;">{{result.jsonResponse.commentedMark}}</span>
</div>
                        </div>
                        
                    </div>
                </div>
                
            </div>
        </ng-container>
    </div>
</div>
</div>
















<!--<div class="panel panel-default">
        <div class="panel-heading" role="tab" id="body">
            <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion-test-results" href="#collapsebody" aria-expanded="true" aria-controls="collapsebody">
                    {{result.jsonResponse.body.content.title}}
                    <span class="pull-right {{result.jsonResponse.body.content.statusClass}}"></span>
                </a>
            </h4>
        </div>
        <div id="collapsebody" class="panel-collapse collapse" role="tabpanel" aria-labelledby="body">
            <div class="panel-body">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item active"><a class="nav-link active" id="html-version-tab" data-toggle="tab" href="#html-version" role="tab" aria-controls="html-version" aria-selected="true">{{result.jsonResponse.body.html.title}}</a></li>
                    <li class="nav-item"><a class="nav-link" id="text-version-tab" data-toggle="tab" href="#text-version" role="tab" aria-controls="text-version" aria-selected="false">{{result.jsonResponse.body.text.title}}</a></li>
                    <li class="nav-item"><a class="nav-link" id="source-tab" data-toggle="tab" href="#source" role="tab" aria-controls="source" aria-selected="false">{{result.jsonResponse.body.raw.title}}</a></li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade active in" id="html-version" role="tabpanel" aria-labelledby="html-version-tab">
                        <div [innerHTML]="result.jsonResponse.body.html.content"></div>
                    </div>
                    <div class="tab-pane fade" id="text-version" role="tabpanel" aria-labelledby="text-version-tab">
                        <div [innerHTML]="result.jsonResponse.body.text.content"></div>
                    </div>
                    <div class="tab-pane fade" id="source" role="tabpanel" aria-labelledby="source-tab">
                        <pre [innerHTML]="result.jsonResponse.body.raw.content"></pre>
                    </div>
                </div>
            </div>
        </div>
</div>-->