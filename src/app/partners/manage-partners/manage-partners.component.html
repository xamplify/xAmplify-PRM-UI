<style type="text/css">
a.disabled {
	pointer-events: none;
	cursor: not-allowed;
}

.custom-error-message {
	padding: 5px;
	border: 1px solid rgba(255, 0, 0, 0.21);
	color: rgba(255, 0, 0, 0.7);
	margin: 5px 0;
	text-transform: capitalize;
}

.flex {
	display: flex;
}

.alert-info {
	background-color: #00a6e8;
	border-color: #00a6e8;
	border-radius: 0;
}

.capitalize {
	text-transform: capitalize;
}

.dashboard-stat {
	margin: 8px;
}

.alert h4 {
	margin: 5px;
	color: inherit;
	color: #ffffff;
	font-size: 15px;
}
.alert{
padding: 10px;
}
.loader {
	border: 2px solid #f3f3f3;
	border-radius: 50%;
	border-top: 3px solid #00a6e8;
	width: 20px;
	height: 20px;
	-webkit-animation: spin 2s linear infinite;
	animation: spin 2s linear infinite;
}
.alert-dismissible .close {
top: 5px;
right: 0;
}

.alert-success, .alert-danger, .alert-warning, .alert-info {
color: #ffffff;
border-radius: 0;
margin: 0;
}

.alert-success {
background-color: #77bf81;
}

.alert-danger {
background-color: #ec6262;
}

.alert-warning {
background-color: #f1d43b;
}

.alert-success, .alert-danger, .alert-warning> h5 {
font-size: 16px;
}

@
-webkit-keyframes spin { 0% {
	-webkit-transform: rotate(0deg);
}

100%
{
-webkit-transform
:
 
rotate
(360deg);
 
}
}
@
keyframes spin { 0% {
	transform: rotate(0deg);
}
100%
{
transform
:
 
rotate
(360deg);
 
}
}
</style>
<div class="page-content">
	<!-- page-breadcrumb -->
	<div class="page-bar" *ngIf="!showEdit">
		<ul class="page-breadcrumb">
			<li><i class="fa fa-home"></i> <a
				[routerLink]="['/']">Home</a> <i
				class="fa fa-angle-right"></i></li>
			<li><a (click)="navigateToManageContacts()">Manage Partners</a>
				<i class="fa fa-angle-right" *ngIf="! showListOfContactList"></i></li>
			<li *ngIf="! showListOfContactList"><span class="capitalize">{{contactsByType.selectedCategory}}
					Partners</span></li>
		</ul>
	</div>

	<div id="manageContacts" *ngIf="showListOfContactList">
		<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
		
		<div *ngIf="showAll">
			<!-- END PAGE HEADER-->
			<!-- BEGIN PAGE CONTENT-->
			<div>
				<div class="row">
					<div class="col-md-12">
						<div class="tabbable tabbable-custom tabbable-noborder">

							<div class="tab-content">
								<div class="tab-pane active">
									<!-- BEGIN FILTER -->

									<div class="page-bar">
										<ul class="page-breadcrumb">
											<li style="font-size: 16px;color:#888888">List of Partners</li>

										</ul>
										<div class="page-toolbar">
											<div class="btn-group pull-right">
												<div class="inputs" align="right" style="float: right">
													<div style="float: left; margin-right: 10px; width: 50%">
														<select class="form-control" [(ngModel)]="sortOption"
															(ngModelChange)="sortByOption($event, 'contactList')">
															<ng-container
																*ngFor="let sort of sortOptions; let i = index">
															<option *ngIf="i == 0" [ngValue]="sort">{{sort.name}}</option>
															<option *ngIf="sort.for == 'contactList'"
																[ngValue]="sort">{{sort.name}}</option>
															</ng-container>
														</select>
													</div>
													<div class="portlet-input input-inline input-small">
														<div class="input-icon right">
															<i class="icon-magnifier"
																style="cursor: pointer; font-size: 18px;"
																(click)="search('contactList')"></i> 
																<input type="text"
																[(ngModel)]="searchKey"
																[ngModelOptions]="{standalone: true}" (input)="searchKeyValue('contactList')"
																class="form-control input-circle"
																placeholder="search...">
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- END DASHBOARD STATS -->
									<div class="clearfix"></div>

									<div class="row">
										<div class="col-lg-3 col-md-2 col-sm-3 col-xs-6">
											<button class="btn-block dashboard-stat blue-soft"
												(click)="listContactsByType('all')"
												[disabled]="contactsByType.allContactsCount == 0">
												<div class="visual">
													<i class="fa fa-users"></i>
												</div>
												<div class="details">
													<div class="number">{{contactsByType.allContactsCount}}</div>
													<div class="desc">All Partners</div>
												</div>
											</button>
										</div>
										<div class="col-lg-2 col-md-2 col-sm-3 col-xs-6">
											<button class="btn-block dashboard-stat red-soft"
												(click)="listContactsByType('active')"
												[disabled]="contactsByType.activeContactsCount == 0">
												<div class="visual">
													<i class="fa fa-eye"></i>
												</div>
												<div class="details">
													<div class="number">{{contactsByType.activeContactsCount}}</div>
													<div class="desc">Active Partners</div>
												</div>
											</button>
										</div>
										<div class="col-lg-2 col-md-2 col-sm-3 col-xs-6">
											<button class="btn-block dashboard-stat blue-sharp"
												(click)="listContactsByType('non-active')"
												[disabled]="contactsByType.inactiveContactsCount == 0">
												<div class="visual">
													<i class="fa fa-eye-slash"></i>
												</div>
												<div class="details">
													<div class="number">{{contactsByType.inactiveContactsCount}}</div>
													<div class="desc">Inactive Partners</div>
												</div>
											</button>
										</div>
										<div class="col-lg-2 col-md-2 col-sm-3 col-xs-6">
											<button class="btn-block dashboard-stat yellow-gold"
												(click)="listContactsByType('invalid')"
												[disabled]="contactsByType.invalidContactsCount == 0">
												<div class="visual">
													<i class="fa fa-user-times"></i>
												</div>
												<div class="details">
													<div class="number">{{contactsByType.invalidContactsCount}}</div>
													<div class="desc">Invalid Partners</div>
												</div>
											</button>
										</div>
										<div class="col-lg-3 col-md-2 col-sm-3 col-xs-6">
											<button class="btn-block dashboard-stat green-soft"
												(click)="listContactsByType('unsubscribe')"
												[disabled]="contactsByType.unsubscribedContactsCount == 0">
												<div class="visual">
													<i class="fa fa-times"></i>
												</div>
												<div class="details">
													<div class="number">{{contactsByType.unsubscribedContactsCount}}</div>
													<div class="desc">Unsubscribed Partners</div>
												</div>
											</button>
										</div>
									</div>
									<!-- END DASHBOARD STATS -->
									<div class="clearfix"></div>
								</div>
								<!-- END FILTER -->
							</div>
						</div>
					</div>
				</div>
				<div *ngIf="response.responseType != null">
					<div class="alert alert-dismissible" role="alert"
						[ngClass]="{'alert-success': response.responseType == 'SUCCESS',
  									'alert-danger': response.responseType == 'ERROR',
  									'alert-info': response.responseType == 'INFO'}">
						<button type="button" class="close" data-dismiss="alert"
							aria-label="Close" (click)="response.responseType = null">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="flex">
							<i class="fa"
								[ngClass]="{'fa-check': response.responseType == 'SUCCESS',
 								 'fa-exclamation': response.responseType == 'ERROR'}"
								aria-hidden="true" style="padding-right: 7px;"></i> <span [innerHTML]="response.responseMessage"></span>
						</h4>
					</div>
				</div>
				<app-loader *ngIf="httpRequestLoader.isLoading"></app-loader>
				<div class="row mix-grid" style="margin-top: 10px">
					<div *ngFor="let contactList of pagination.pagedItems">
						<div class="col-md-3 col-sm-6 mix category_1 mix_all"
							style="display: block; opacity: 1;"
							id="contactListDiv_{{contactList.id}}">
							<div class="mix-inner">
								<img class="img-responsive"
									*ngIf="contactList.socialNetwork=='ZOHO'" src="{{zohoImage}}"
									alt=""> <img class="img-responsive"
									*ngIf="contactList.socialNetwork=='GOOGLE'"
									src="{{googleImage}}" alt=""> <img class="img-responsive"
									*ngIf="contactList.socialNetwork=='SALESFORCE'"
									src="{{salesforceImage}}" alt=""> <img
									class="img-responsive"
									*ngIf="contactList.socialNetwork=='MANUAL'"
									src="{{normalImage}}" alt="">
								<div class="mix-details-fill">
									<h4 style="top: 10%; position: relative;" title={{contactList.name}}>{{contactListNameLength(contactList.name)}}</h4>
									<div style="top: 12%; position: relative;">
										<a class="mix-preview5"
											(click)="downloadContactList(contactList.id)"
											title="Dowload List" data-rel="fancybox-button"> <i
											class="fa fa-cloud-download"></i>
										</a> 
										<a class="mix-preview4" *ngIf = "hasAllAccess || (hasContactRole && loggedInUserId == contactList.uploadedUserId)"
											(click)="editContactList(contactList.id,contactList.name,contactList.uploadedUserId)" title="Edit List"
											data-rel="fancybox-button"> 
											<i class="fa fa-pencil-square-o"></i>
										</a>
										<a class="mix-preview4" *ngIf = "!hasAllAccess && loggedInUserId != contactList.uploadedUserId"
											(click)="editContactList(contactList.id,contactList.name,contactList.uploadedUserId)" title="ContactList Info"
											data-rel="fancybox-button"> <i
											class="glyphicon glyphicon-info-sign"></i>
										</a>
										 <a class="mix-preview6"   *ngIf="hasAllAccess || (hasContactRole && loggedInUserId==contactList.uploadedUserId)" (click)="showAlert(contactList.id)"
											title="Delete List" data-rel="fancybox-button"
											lang="{{contactList.id}}"> <i class="fa fa-trash"></i>
										</a>
									</div>
									<div style="top: 38%; position: relative;"
										*ngIf="contactList.synchronisedList == true">
										<a class="mix-preview2" title="sychronizeContactList"  *ngIf="hasAllAccess || (hasContactRole && loggedInUserId==contactList.uploadedUserId)"
											(click)="synchronizeContactList(contactList.id,contactList.socialNetwork)"
											data-rel="fancybox-button" style="left: 38%;"> <i
											class="fa fa-refresh" aria-hidden="true"></i>
										</a>
									</div>
									<span align="right"
										style="bottom: 10px; float: right; position: absolute; right: 10px;">Created
										Date <br>{{contactList.createdDate}}
									</span> <span align="left"
										style="bottom: 10px; left: 10px; position: absolute;">Partners
										<br> {{contactList.noOfContacts}}
									</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="pagination">
			<!--pager here  -->
			<ul *ngIf="pagination.pager.pages && pagination.pager.pages.length"
				class="pagination">
				<li [ngClass]="{disabled:pagination.pager.currentPage === 1}"><a
					(click)="setPage(1)"
					[class.disabled]="pagination.pager.currentPage === 1">First</a></li>
				<li [ngClass]="{disabled:pagination.pager.currentPage === 1}"><a
					(click)="setPage(pagination.pager.currentPage - 1)"
					[class.disabled]="pagination.pager.currentPage === 1">Previous</a></li>
				<li *ngFor="let page of pagination.pager.pages"
					[ngClass]="{active:pagination.pager.currentPage === page}"><a
					(click)="setPage(page)">{{page}}</a></li>
				<li
					[ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
					<a (click)="setPage(pagination.pager.currentPage + 1)"
					[class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Next</a>
				</li>
				<li
					[ngClass]="{disabled:pagination.pager.currentPage === pagination.pager.totalPages}">
					<a (click)="setPage(pagination.pager.totalPages)"
					[class.disabled]="pagination.pager.currentPage === pagination.pager.totalPages">Last</a>
				</li>
			</ul>
			<!-- pager end here -->
		</div>
		<app-edit-partners *ngIf="showEdit" [contacts]="users"
			(notifyParent)="update($event)"
			[selectedContactListId]="selectedContactListId"
			[uploadedUserId]="uploadedUserId"
			[contactListId]="selectedContactListId" [contactListName]="selectedContactListName"></app-edit-partners>
	</div>


	<div *ngIf="! showListOfContactList">
		
		<div *ngIf="response.responseType != null">
					<div class="alert alert-dismissible" role="alert"
						[ngClass]="{'alert-success': response.responseType == 'SUCCESS',
  									'alert-danger': response.responseType == 'ERROR'}">
						<button type="button" class="close" data-dismiss="alert"
							aria-label="Close" (click)="response.responseType = null">
							<span aria-hidden="true">&times;</span>
						</button>
						<h5 class="flex">
							<i class="fa"
								[ngClass]="{'fa-check': response.responseType == 'SUCCESS',
 								 'fa-exclamation': response.responseType == 'ERROR'}"
								aria-hidden="true" style="padding-right: 7px;"></i> <span>{{response.responseMessage}}</span>
						</h5>
					</div>
				</div>
		<div *ngIf="invalidDeleteSucessMessage" id="showDeleteMessage"
			class="alert alert-success alert-dismissable">
			<strong>Success!</strong> Partner List has been Deleted successfully.
		</div>
		<div class="alert alert-danger" style="padding: 12px 10px 12px;" *ngIf="invalidDeleteErrorMessage">
  				<span [innerHTML]="response.responseMessage"></span>
			</div>
		<div *ngIf="noContactsFound==true" class="col-md-6"
			class="col-md-9 alert alert alert-danger alert-dismissable">
			<a class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<h4>No Partner found.. !!!</h4>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div class="tabbable tabbable-custom tabbable-noborder">

					<div class="tab-content">
						<!-- BEGIN PAGE HEADER-->
						<div class="page-bar" style="margin-bottom: 6px">
							<h4 class="btn-group pull-left">
								<span class="capitalize" style="color:#888888">{{contactsByType.selectedCategory}}
									Partners</span>
							</h4>
							<div class="page-toolbar">
								<div class="btn-group pull-right">
									<div class="inputs" align="right" style="float: right">
										<div style="float: left; margin-right: 10px">
											<select class="form-control" [(ngModel)]="sortOption"
												(ngModelChange)="sortByOption($event, 'contacts')">
												<ng-container
													*ngFor="let sort of sortOptions; let i = index">
												<option *ngIf="i == 0" [ngValue]="sort">{{sort.name}}</option>
												<option *ngIf="sort.for == 'contacts'" [ngValue]="sort">{{sort.name}}</option>
												</ng-container>
											</select>
										</div>
										<div class="portlet-input input-inline input-small">
											<div class="input-icon right">
												<i class="icon-magnifier"
													style="cursor: pointer; font-size: 18px;"
													(click)="search('contacts')"></i> 
													<input type="text" [(ngModel)]="searchKey"
													[ngModelOptions]="{standalone: true}" (input)="searchKeyValue('contacts')"
													class="form-control input-circle" placeholder="search...">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane active"></div>
						<div class="row">
							<form #f="ngForm" class="form-inline"
								*ngIf="contactsByType.selectedCategory == 'all' && (hasAllAccess || hasContactRole)">
								<div class="contact-list-form">
									<div class="col-xs-12 col-sm-6">
										<div class="form-group">
											<label for="name" class="col-xs-12 col-sm-5 control-label">Partner
												List Name *</label>
											<div class="col-xs-12 col-sm-7">
												<input type="text" autocomplete="off" class="form-control"
													id="contactListName" required
													[(ngModel)]="model.contactListName" name="contactListName"
													minlength="1" maxlength="250"
													(input)="validateContactName(model.contactListName)"
													placeholder="Partner List Name" #contactListName="ngModel">
												<!-- Validation Messages -->
												<div *ngIf="isValidContactName">
													<p class="custom-error-message">Partners List Name
														Already Exists</p>
												</div>
												<div *ngIf="contactsNotSelectedError">
													<p class="custom-error-message">Please Select the
														Partners.</p>
												</div>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-6">
										<section class="pull-right"
											style="margin-bottom: 10px; margin-top: 3px;">
											<button id="sample_editable_1_new" class="btn green"
												(click)="saveSelectedUsers()"
												[disabled]="isValidContactName||noSaveButtonDisable">
												Save <i class="fa fa-save"></i>
											</button>
											<button id="cancel_button" class="btn green"
												(click)="cancelAllContactsCancel()">
												Cancel<i class="fa fa-cancel"></i>
											</button>
										</section>
									</div>
								</div>
							</form>
							<div class="col-xs-12">
								<div *ngIf="contactsByType.isLoading"
									class="alert alert-info flex">
									<div class="loader"></div>
									<h4>please wait while we process your request..!</h4>
								</div>
								<div
									*ngIf="!contactsByType.isLoading && contactsByType.contacts?.length == 0"
									class="alert alert-info">
									<h4>No Partners found..!</h4>
								</div>
								<div class="portlet box blue"
									*ngIf="contactsByType.contacts?.length > 0">
									<div class="portlet-title">
										<div class="caption">
											<i class="fa fa-edit"></i><span class="capitalize">{{contactsByType.selectedCategory}}
												Partners List</span>
										</div>
									</div>
									<div class="portlet-body">
										<div class="table-toolbar"
											*ngIf="contactsByType.contacts?.length > 0">
											<div class="row">
												<div class="col-xs-12">
													<div class="btn-group pull-left">
														<select class="form-control"
															[(ngModel)]="sortOptionForPagination"
															(ngModelChange)="onChangeAllContactUsers($event)">
															<ng-container
																*ngFor="let sort of sortOptionsForPagination; let i = index">
															<option [ngValue]="sort">{{sort.value}}</option>
															</ng-container>
														</select>
													</div>
													<div class="btn-group pull-right"
														*ngIf="contactsByType.selectedCategory == 'invalid' && (hasAllAccess || hasContactRole)">
														<button class="btn dropdown-toggle" data-toggle="dropdown">
															Tools <i class="fa fa-angle-down"></i>
														</button>
														<ul class="dropdown-menu pull-right">
															<li><a id="delete_button"
																(click)="invalidContactsShowAlert()">Delete</a></li>
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="table-responsive">
										<app-loader [model]="httpRequestLoader.isHorizontalCss" *ngIf="httpRequestLoader.isLoading"></app-loader>
											<table class="table table-striped table-hover table-bordered" *ngIf="!httpRequestLoader.isLoading">
												<thead>
													<tr>
														<td align="center"
															*ngIf="contactsByType.selectedCategory == 'all'"><input
															type="checkbox" name="all"
															[(ngModel)]="isHeaderCheckBoxChecked"
															(change)="checkAll($event)" class=""
															id="checkAllExistingContacts" /></td>
														<td align="center"
															*ngIf="contactsByType.selectedCategory == 'invalid'">
															<input type="checkbox" name="all"
															[(ngModel)]="isInvalidHeaderCheckBoxChecked"
															(change)="checkAllInvalidContacts($event)" class=""
															id="checkAllExistingInvalidContacts" />
														</td>
														<th>EMAILID</th>
														<th>FIRSTNAME</th>
														<th>LASTNAME</th>
													</tr>
												</thead>
												<tbody>
													<tr
														*ngFor="let contact of contactsByType.contacts; let i = index">
														<td align="center"
															*ngIf="contactsByType.selectedCategory == 'all'"><input
															type="checkbox"
															[checked]="selectedContactListIds.indexOf(contact.id)>-1"
															class="chk"
															[class.contact-list-selected]="selectedContactListIds.indexOf(contact.id)>-1"
															lang="{{contact.name}}" name="campaignContact[]"
															value="{{contact.id}}" id="{{contact.id}}"
															(click)="highlightRow(contact.id,contact.emailId,contact.firstName,contact.lastName,$event)" />
														</td>
														<td align="center"
															*ngIf="contactsByType.selectedCategory == 'invalid'">
															<input type="checkbox"
															[checked]="selectedInvalidContactIds.indexOf(contact.id)>-1"
															class="chk"
															[class.contact-list-selected]="selectedInvalidContactIds.indexOf(contact.id)>-1"
															lang="{{contact.name}}" name="invalidContact[]"
															value="{{contact.id}}" id="{{contact.id}}"
															(click)="invalidContactsSelectedUserIds(contact.id,contact.emailId,contact.firstName,contact.lastName,$event)" />
														</td>
														<td>{{contact.emailId}}</td>
														<td>{{contact.firstName}}</td>
														<td>{{contact.lastName}}</td>
													</tr>
												</tbody>
											</table>
											<ul
												*ngIf="contactsByType.pagination.pager.pages && contactsByType.pagination.pager.pages.length"
												class="pagination">
												<li
													[ngClass]="{disabled:contactsByType.pagination.pager.currentPage === 1}">
													<a
													(click)="setPageForListContactsByType(1,contactsByType.selectedCategory)"
													[class.disabled]="contactsByType.pagination.pager.currentPage === 1">First</a>
												</li>
												<li
													[ngClass]="{disabled:contactsByType.pagination.pager.currentPage === 1}">
													<a
													(click)="setPageForListContactsByType(contactsByType.pagination.pager.currentPage - 1,contactsByType.selectedCategory)"
													[class.disabled]="contactsByType.pagination.pager.currentPage === 1">Previous</a>
												</li>
												<li
													*ngFor="let page of contactsByType.pagination.pager.pages"
													[ngClass]="{active:contactsByType.pagination.pager.currentPage === page}">
													<a
													(click)="setPageForListContactsByType(page,contactsByType.selectedCategory)">{{page}}</a>
												</li>
												<li
													[ngClass]="{disabled:contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages}">
													<a
													(click)="setPageForListContactsByType(contactsByType.pagination.pager.currentPage + 1,contactsByType.selectedCategory)"
													[class.disabled]="contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages">Next</a>
												</li>
												<li
													[ngClass]="{disabled:contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages}">
													<a
													(click)="setPageForListContactsByType(contactsByType.pagination.pager.totalPages,contactsByType.selectedCategory)"
													[class.disabled]="contactsByType.pagination.pager.currentPage === contactsByType.pagination.pager.totalPages">Last</a>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- END PAGE CONTENT -->
					</div>
				</div>
			</div>
		</div>
	</div>

</div>


<!-- END PAGE CONTENT-->

