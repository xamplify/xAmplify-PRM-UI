<div class="col-sm-12 col-md-12 col-lg-12 ml15m">
  <div class="panel panel-info panel-bgMain panel-card br-10">
    <div class="panel-heading panel-heading-custom panel-bg search_download_align" id="pj-team-member-details-div">
      <h3 class="panel-title mt7">Team Member Details</h3>
      <div style="display:flex;">
        <button class=" btn btn-primary mr10" [disabled]="!isSendReminderEnabled" (click)="sendReminder()">Send Reminder</button>
        <div class="float-left">
          <select class="form-control SeclectBoxPaddingsAbj" class="form-control" [(ngModel)]="sortOption.teamMember"
            (ngModelChange)="sortPartnerTeamMembers($event)" id="select-dropdown">
            <option *ngFor="let option of sortOption.teamMemberDropDowns" [ngValue]="option">{{option.name}}</option>
          </select>
        </div>
        <button data-placement="bottom" class="btn btn-xs  hidden-xs l-g-view" style="margin: -1px 3px 0px 3px;"
          *ngIf="authenticationService.isOrgAdmin() || authenticationService.isOrgAdminPartner() || authenticationService.isOrgAdminAndPartnerTeamMember || authenticationService.isOrgAdminTeamMember ||
            authenticationService.isVendor() || authenticationService.isVendorPartner() || authenticationService.isVendorTeamMember || authenticationService.isVendorAndPartnerTeamMember|| authenticationService. module.isPrm || authenticationService.module.isPrmTeamMember ||
            authenticationService.module.isPrmAndPartner || authenticationService.module.isPrmAndPartnerTeamMember || authenticationService?.module?.isAnyAdminOrSupervisor" (click)="downloadTeamMemberListCsv()"
          [disabled]="pagination.totalRecords==0">
          <i aria-hidden="true" class="fas fa-file-export p10" data-toggle="tooltip"
            title="Export Team Members List to Excel"></i>
        </button>
        <div class="input-icon right" style="position: relative;width: 178px;top: -1px;">
          <input type="text" style="height:34px;" class="form-control" [(ngModel)]="searchKey"
            [ngModelOptions]="{standalone: true}" placeholder="Search" (keypress)="searchKeyPress($event.keyCode)">
          <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="searchKey"
            (click)="searchKey='';search()"></button>
          <button type="submit" class="search-box-item-click" (click)="search()">
            <i class="fa fa-search" aria-hidden="true"></i></button>
        </div>
      </div>
    </div>
    <div *ngIf="customResponse.isVisible" class="m10">
      <div style="padding: 7px 10px;"
        [ngClass]="customResponse?.responseType=='SUCCESS'? 'alert alert-success m0':'alert alert-danger m0'">
        <button (click)="customResponse.isVisible=false" type="button" class="close of-this-component" aria-label="Close">
          <span aria-hidden="true">x</span>
        </button>
        <strong [innerHTML]="customResponse.responseMessage"></strong>
      </div>
    </div>
    <app-list-loader *ngIf="httpRequestLoader.isLoading && !httpRequestLoader.isServerError" [rowsCount]="4"></app-list-loader> 
    <div class="panel-body">    
      <div class="scroll table-responsive {{scrollClass}}" *ngIf="!httpRequestLoader.isLoading">
        <table class="table">
          <thead>
            <tr>    
              <th class='text-center' scope="col"><input type="checkbox" class="checkBox_shadow" name="all"
                [(ngModel)]="isHeaderCheckBoxChecked" (change)="toggleSelectAll($event)" />
              </th>          
              <th scope="col">Company Name</th>
              <th scope="col">Status</th>
              <th scope="col">Recent Login</th>
              <th scope="col" class="text-center">Group</th>
              <th scope="col">Actions</th>  
            </tr>
          </thead>
          <tbody>          
            <tr *ngFor="let item of pagination.pagedItems;let i  = index">
              <td class='text-center' scope="col"><input type="checkbox" class="checkBox_shadow" name="all"
                [(ngModel)]="item.isSelected" (change)="updateSelectionCheckBox(item)">
            </td>
              <td><a class="detailstext" data-rel="fancybox-button" (click)="viewAnalytics(item.companyId)"><app-user-info [isPartnerAnalyticsCompany]="false" [isPartnerEntityTeamInfo]="true" [userInfo]="item"></app-user-info></a></td>
              <!-- <td> <span>{{item.emailId}}</span></td> -->
              <!-- <td> <span>{{item.firstName}}</span> <span>{{item.lastName}}</span></td> -->
              <td> <span>{{item.status}}</span></td>
              <!-- <td><app-timestamp [isOnlyDate]="false" [dateAndTime]="item?.logInTime"></app-timestamp></td> -->
              <td><app-display-date-and-time  [dateAndTimeUTCString]="item?.logInTime"></app-display-date-and-time></td>
              <td class="text-center">
                <div class="btn-group btnGroupFlex" *ngIf="item.teamMemberGroupId!=null &&!item?.primaryAdmin">
                  <button class="group-name-cclass btn-primary default-btn-cursor">
                    <span data-toggle="tooltip" data-placement="bottom" title="{{item?.teamMemberGroupName}}">
                      {{item?.teamMemberGroupName | slice:0:15}}</span>
                    <span *ngIf="item?.teamMemberGroupName?.length>15">...</span>
                  </button>
                  <button class="tm-group-preview-css btn-primary mobileBtnLeftnone"
                    (click)="previewModules(item.teamMemberGroupId)">
                    <i data-toggle="tooltip" data-placement="bottom" title="Preview" class="fa fa-eye"
                      aria-hidden="true"></i>
                  </button>
                </div>
                <div class="alert alert-danger" *ngIf="item.teamMemberGroupId==null && !item?.primaryAdmin">
                  <span><strong>No Group Selected</strong></span>
                </div>
                <div class="alert alert-info NaNAData" *ngIf="item?.primaryAdmin">
                  <span><strong>N/A</strong></span>
                </div>
              </td>
              <td>
                <div class="alert alert-info NaNAData" *ngIf="item?.primaryAdmin">
                  <span><strong>N/A</strong></span>
                </div>
                <ng-container *ngIf="!authenticationService?.module?.deletedPartner">
                  <div class="actions-block override-actions custom-width-icon">
                  <a *ngIf="item.status=='UNAPPROVED'" data-toggle="tooltip" data-placement="bottom"
                    title="Resend the invitation email"
                    [className]="isLoggedInAsTeamMember? 'pointer-events-none custom-icon':'custom-icon'"
                    (click)="resendEmailInvitation(item.emailId)">
                    <i class="fa fa-envelope IconCustomization" aria-hidden="true"></i>
                    <div class="clickicons"></div>
                  </a>
                  <a *ngIf="item.status!='UNAPPROVED'" data-toggle="tooltip" data-placement="bottom"
                    title="Invitation cannot be sent as the account is created successfully"
                    class="inactive custom-icon">
                    <i class="fa fa-envelope gray IconCustomization" aria-hidden="true"></i>
                    <div class="clickicons"></div>
                  </a>
                </div>
                </ng-container>
              </td>  
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info">
        <strong>No Data Found.</strong>
      </div>
      <!--Pagination-->
      <div *ngIf="pagination.pagedItems.length !== 0" class="pg8 scroll-top-margin" [hidden]="httpRequestLoader.isLoading">
        <app-pagination [pagination]="pagination" (notifyParent)="setPage($event)"
          (notifyParentDropDown)="getPartnerJourneyTeamInfo($event)">
        </app-pagination>
      </div>
    </div>
  </div>
</div>

<!-- Group Preview Popup -->
<app-team-member-group-preview-popup *ngIf="showModulesPopup" [teamMemberGroupId]="teamMemberGroupId" (previewGroupPopupEventEmitter)="hideModulesPreviewPopUp()"></app-team-member-group-preview-popup>
<!-- End of  Group Preview Popup -->
 
<app-send-test-email *ngIf="sendTestEmailIconClicked" [teamMemberReminder]="teamMemberPreview" (sendmailTeamMemberNotify)= "emittedMethodTemMember($event.item)"  [selectedItemTeamMember]="selectedItemTeamMember" [id]="selectedEmailTemplateId" [toEmailId]="selectedEmailId" (sendTestEmailComponentTeamMemberEventEmitter)="sendTestEmailModalPopupTeamMemberEventReceiver()"></app-send-test-email>
