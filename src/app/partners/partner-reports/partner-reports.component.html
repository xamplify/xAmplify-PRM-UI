<style>
  .hideDiv {
    display: none;
  }
</style>
<div class="page-content" [class.ml0]="authenticationService.isSuperAdmin()">
  <div class="page-bar">
    <ul class="page-breadcrumb">
      <li *ngIf="!authenticationService.isSuperAdmin()">
        <i class="fa fa-home"></i>
        <a [routerLink]="referenseService.homeRouter">Home</a>
        <i class="fa fa-angle-right"></i>
      </li>
      <li *ngIf="authenticationService.isSuperAdmin()"><i class="fa fa-home"></i><a [routerLink]="['/home/dashboard/admin-report']">Admin
          Report</a><i class="fa fa-angle-right"></i></li>
      <li>
        <a>Partner Analytics</a>
      </li>
    </ul>
  </div>

  <div class="row">
    <div class="col-xs-12 p5">
      <div>
        <div>
          <div class="row">
            <div class="col-xs-6 col-sm-2 col-lg-2 col-sm-5ths">
              <a class="dashboard-stat dashboard-stat-lighter purple-soft" [class.greay]="2!=selectedTabIndex" (click)="goToReDistributedPartnersDiv()">
                <div class="visual">
                  <!-- <i class="glyphicon glyphicon-bullhorn"></i> -->
                  <i *ngIf="selectedTabIndex == 2" class="fa fa-check-circle" style="margin-left: 0px;font-size: 40px;line-height: 46px;opacity: 1" 
                   [ngStyle]="{'color': 2===selectedTabIndex ? '#white' : '#ccc' }">
                 </i>
                </div>
                <div class="details">
                  <div class="number"><span *ngIf="campaignsCount">{{campaignsCount}}</span><span *ngIf="!campaignsCount">0</span></div>
                  <div class="desc">Redistributed Campaigns</div>
                </div>
                <span id="permhref" class="morePadding">
                  <a class="more" (click)="goToReDistributedPartnersDiv()"> Detailed view <i class="m-icon-swapright m-icon-white"></i></a>
                </span>
              </a>
            </div>
            <div class="col-xs-6 col-sm-2 col-lg-2 col-sm-5ths" >
              <a class="dashboard-stat dashboard-stat-lighter green-soft" [class.greay]="3!=selectedTabIndex" (click)="goToThroughPartnersDiv()">
                <div class="visual">
                  <!-- <i class="glyphicon glyphicon-bullhorn"></i> -->
                  <i class="fa fa-check-circle" style="margin-left: 0px;font-size: 40px;line-height: 46px;opacity: 1"  [ngStyle]="{'color': 3===selectedTabIndex ? '#white' : '#ccc' }"
                *ngIf="selectedTabIndex == 3" ></i>
                </div>
                <div class="details">
                  <div class="number">{{throughPartnerCampaignsCount}}</div>
                  <div class="desc" style="font-size:13px">Through Partner Campaigns</div>
                </div>
                <span id="permhref" class="morePadding">
                  <a class="more" (click)="goToThroughPartnersDiv()"> Detailed view <i class="m-icon-swapright m-icon-white"></i></a>
                </span>
              </a>
            </div>
            <div class="col-xs-6 col-sm-2 col-lg-2 col-sm-5ths" (click)="goToActivePartnersDiv()" >
              <a class="dashboard-stat dashboard-stat-lighter yellow-gold" [class.greay]="0!=selectedTabIndex">
                <div class="visual">
                  <!-- <i class="fa fa-handshake-o"></i> -->
                  <i class="fa fa-check-circle" style="margin-left: 0px;font-size: 40px;line-height: 46px;opacity: 1"  [ngStyle]="{'color': 0===selectedTabIndex ? '#white' : '#ccc' }"
                *ngIf="selectedTabIndex == 0" ></i>
                </div>
                <div class="details">
                  <div class="number">{{activePartnersCount}}</div>
                  <div class="desc">Active Partners</div>
                </div>
                <span id="permhref" class="morePadding">
                  <a class="more" (click)="goToActivePartnersDiv()"> Detailed view <i class="m-icon-swapright m-icon-white"></i></a>
                </span>
              </a>
            </div>
            <div class="col-xs-6 col-sm-2 col-lg-2 col-sm-5ths" (click)="goToInActivePartnersDiv()">
              <a class="dashboard-stat dashboard-stat-lighter blue-soft" [class.greay]="1!=selectedTabIndex">
                <div class="visual">
                  <!-- <i class="fa fa-handshake-o"></i> -->
                  <i class="fa fa-check-circle" style="margin-left: 0px;font-size: 40px;line-height: 46px;opacity: 1"  [ngStyle]="{'color': 1===selectedTabIndex ? '#white' : '#ccc' }"
                *ngIf="selectedTabIndex == 1" ></i>
                </div>
                <div class="details">
                  <div class="number">{{inActivePartnersCount}}</div>
                  <div class="desc">Inactive Partners</div>
                </div>
                <span id="permhref" class="morePadding">
                  <a class="more" (click)="goToInActivePartnersDiv()"> Detailed view <i class="m-icon-swapright m-icon-white"></i></a>
                </span>
              </a>
            </div>
            
            <div class="col-xs-6 col-sm-2 col-lg-2 col-sm-5ths" (click)="goToApprovePartnersDiv()">
              <a class="dashboard-stat dashboard-stat-lighter red-soft" [class.greay]="5!=selectedTabIndex">
                <div class="visual">
                  <!-- <i class="fa fa-handshake-o"></i> -->
                  <i class="fa fa-check-circle" style="margin-left: 0px;font-size: 40px;line-height: 46px;opacity: 1"  [ngStyle]="{'color': 5===selectedTabIndex ? '#white' : '#ccc' }"
                *ngIf="selectedTabIndex == 5" ></i>
                </div>
                <div class="details">
                  <div class="number">{{approvePartnersCount}}</div>
                  <div class="desc">Approve Partners</div>
                </div>
                <span id="permhref" class="morePadding">
                  <a class="more" (click)="goToApprovePartnersDiv()"> Detailed view <i class="m-icon-swapright m-icon-white"></i></a>
                </span>
              </a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="active-partner-div">
    <div class="row">
      <div class="col-xs-12 col-sm-6 p5">
        <!-- BEGIN PORTLET-->
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">
              <i class="icon-bar-chart font-green-sharp hide"></i>
              <span class="caption-subject font-green-sharp uppercase">Partners by Country</span>
            </div>
            <div class="panel-title pull-right">
            </div>
          </div>
          <div class="portlet-body text-center">
            <app-worldmap *ngIf="worldMapdataReport" [worldMapData]='worldMapdataReport' (notifyParent)="clickWorldMapReports($event)"></app-worldmap>
          </div>
        </div>
        <div class="portlet light">
          <div class="portlet-body" style="padding-top: 0;">
            <div id="campaign-type-chart" class="campaign-type"></div>
          </div>
        </div>
        <!-- END PORTLET-->
      </div>
      <div class="col-xs-12 col-sm-6 p5">
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">
              <span class="caption-subject font-red-sunglo uppercase"> campaigns launched by partners</span>
            </div>
            <div class="inputs" align="right" style="float: right">
              <div class="portlet-input input-inline input-medium">
                <div class="input-icon right" style="position: relative; margin: -12px 0 0 0;">
                  <input type="text" style="height: 34px;" class="form-control" [(ngModel)]="activePartnersSearchKey" [ngModelOptions]="{standalone: true}"
                    placeholder="Search for a Partner" (keypress)="activePartnerSearch($event.keyCode)">
                  <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="activePartnersSearchKey" (click)="activePartnersSearchKey=''"></button>
                  <button type="submit" class="search-box-item-click" (click)="searchActivePartnerAnalytics()"><i class="fa fa-search"></i></button>
                </div>
              </div>
            </div>
          </div>
          <div class="portlet-body clearfix table-responsive" style="min-height: 410px;">
            <app-list-loader *ngIf="activeParnterHttpRequestLoader.isLoading" [rowsCount]="listLoaderValue.ACTIVEPARTNERS"></app-list-loader>
            <table class="table tgrid" *ngIf="!activeParnterHttpRequestLoader.isLoading">
              <thead>
                <th>Partner</th>
                <th>Campaigns</th>
                <th> </th>
              </thead>
              <tbody>
                <tr *ngFor="let item of activePartnersPagination.pagedItems">
                  <td>
                    <app-user-info [userInfo]="item" [isPartnerEntityInfo]="true" [isPartnerInfo]="true"></app-user-info>
                  </td>
                  <td class="text-center">{{item.count}}</td>
                  <td>
                    <app-pie-chart [customerId]="item.partnerId"></app-pie-chart>
                  </td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="activePartnersPagination.totalRecords==0" class="alert alert-info">
              <strong>No campaigns found</strong>
            </div>
            <div style="position: absolute;bottom: 10px;" *ngIf="activePartnersPagination.totalRecords>0 && !activeParnterHttpRequestLoader.isLoading &&!activeParnterHttpRequestLoader.isServerError">

              <app-pagination [pagination]="activePartnersPagination" [type]="'ActivePartnerPagination'" [isDropdown]="true" (notifyParent)="setPage($event)"></app-pagination>

            </div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- End Of active-partners-div -->


  <!-- --------------------Inactive Partners Count-------- -->
  <div id="inactive-partners-div" style="display: none;">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-lg-12 p5">
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">
              <span class="caption-subject font-red-sunglo uppercase">Inactive partners</span>
            </div>
            <div class="inputs" align="right" style="float: right">
              <div class="portlet-input input-inline">
                <div class="input-icon right" style="position: relative; margin: -12px 0 0 0;">
                  <input type="text" style="height: 34px;" class="form-control" [(ngModel)]="inActivePartnersSearchKey" [ngModelOptions]="{standalone: true}"
                    placeholder="Search for a Partner" (keypress)="inActivePartnersSearch($event.keyCode)">
                  <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="inActivePartnersSearchKey" (click)="inActivePartnersSearchKey=''"></button>
                  <button type="submit" class="search-box-item-click" (click)="searchInActivePartnerAnalytics()"><i class="fa fa-search"></i></button>
                </div>
              </div>
            </div>
          </div>
          <app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>
          <app-response-message style="position: relative; bottom: 9px;" [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
          <div class="portlet-body" *ngIf="!httpRequestLoader.isLoading">
            <table class="table tgrid" *ngIf="inActivePartnersPagination.pagedItems.length != 0">
              <thead>
                <th class="center-aligned" style="width:50%">partners</th>
                <th class="hidden-xs" style="text-align: left;">LAST REMINDER SENT</th>
                <th style="text-align: left">Actions</th>
              </thead>
              <tbody>
                <tr *ngFor="let item of inActivePartnersPagination.pagedItems" style="cursor: pointer;">
                  <td>
                    <app-user-info [userInfo]="item" [isPartnerEntityInfo]="true" [isPartnerInfo]="true"></app-user-info>
                  </td>
                  <td class="hidden-xs">
                    <app-timestamp [isOnlyDate]="false" [dateAndTime]="item.time"> </app-timestamp>
                    <h4 *ngIf="!item.time"><b>-</b></h4>
                   </td>
                  <td (click)="sendPartnerReminder(item)">
                    <div class="actions-block float-none" >
                      <a data-toggle="tooltip" data-placement="left" title="Send reminder email">
                        <i class="fa fa-envelope"></i>
                      </a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <app-pagination class="pg8" [pagination]="inActivePartnersPagination" [type]="'userInteraction'" (notifyParentDropDown)="inActivePartnerDropDownList($event)"
            (notifyParent)="setInActivePartnesPage($event)"></app-pagination>
        </div>
      </div>
    </div>
  </div>
  
    <!-- --------------------Approve Partners Count-------- -->
  <div id="approve-partners-div">
    <div class="row">
      <div class="col-xs-12 p5">
        <div class="portlet light">
          <div class="portlet-title">
            <div class="caption">
              <span class="caption-subject font-red-sunglo uppercase">Approve partners</span>
            </div>
            <!-- <div class="inputs" align="right" style="float: right">
              <div class="portlet-input input-inline input-medium">
                <div class="input-icon right" style="position: relative; margin: -12px 0 0 0;">
                  <input type="text" style="height: 34px;" class="form-control" [(ngModel)]="inActivePartnersSearchKey" [ngModelOptions]="{standalone: true}"
                    placeholder="Search for a Partner" (keypress)="inActivePartnersSearch($event.keyCode)">
                  <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="inActivePartnersSearchKey" (click)="inActivePartnersSearchKey=''"></button>
                  <button type="submit" class="search-box-item-click" (click)="searchInActivePartnerAnalytics()"><i class="fa fa-search"></i></button>
                </div>
              </div>
            </div> -->
          </div>
          <app-list-loader *ngIf="httpRequestLoader.isLoading"></app-list-loader>
          <app-response-message style="position: relative; bottom: 9px;" [customResponse]="customResponse" *ngIf="customResponse.isVisible"></app-response-message>
          <div class="portlet-body" *ngIf="!httpRequestLoader.isLoading">
            <div class="table-responsive">
            <table class="table tgrid" *ngIf="approvePartnersPagination.pagedItems.length != 0">
              <thead>
                <th class="center-aligned">partners</th>
                <th style="text-align: center;">status</th>
                <th style="text-align: center;">Actions</th>
              </thead>
              <tbody> 
                <tr *ngFor="let item of approvePartnersPagination.pagedItems" style="cursor: pointer;">
                  <td>
                    <app-user-info [userInfo]="item" [isPartnerEntityInfo]="true" [isPartnerInfo]="true"></app-user-info>
                  </td>
                  <td style="text-align: center;text-transform: capitalize;">
                   {{item.invitationStatus}}
                  </td>
                  <td style="text-align: center;">
                  <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" [disabled]="item.invitationStatus === 'approved'" style="text-transform: capitalize"  type="button" data-toggle="dropdown">{{item.invitationStatus}}
    				<span class="caret"></span></button>
    				<ul class="dropdown-menu" style="left: 68px;"*ngIf="item.invitationStatus != 'approved'" >
      					<li *ngIf="item.invitationStatus != 'approved'"><a (click)="requestText='Approve';approveAndDeclineRequest(item.partnerId, item.firstName)">Approve</a></li>
     					 <li *ngIf="item.invitationStatus != 'declined'"><a (click)="requestText='Decline';approveAndDeclineRequest(item.partnerId, item.firstName)">Decline</a></li>
    				</ul>
 				 </div>
                  <!--  <button type="submit" [disabled]="item.invitationStatus == 'approved'" class="btn green"
					(click)="showApprovePartnerSweetAlert(item.partnerId)">Approve</button>
					<button [disabled]="item.invitationStatus == 'approved' || item.invitationStatus == 'declined'" type="submit" class="btn green"
					(click)="showDeclinePartnerSweetAlert(item.partnerId)">Decline</button> -->
                  </td> 
                </tr>
              </tbody>
            </table>
            </div>
          </div>
          <app-pagination class="pg8" [pagination]="approvePartnersPagination" [type]="'userInteraction'" (notifyParentDropDown)="approvePartnerDropDownList($event)"
            (notifyParent)="setApprovePartnesPage($event)"></app-pagination>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ------****************Through Partner Div************************** -->
  <div id="redistribute-partners-div" style="display: none;">
    <div class="row">

      <div class="col-xs-12 p5">
        <div class="portlet light">
          <div class="portlet-title" style="font-size: 16px; padding-bottom: 8px;">
            <div class="col-xs-12 col-sm-6 col-lg-6 col-sm-6 p0">
            <div class="caption">
              <span class="caption-subject font-red-sunglo uppercase">Redistributed Campaigns</span>
            </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-6 col-sm-6 p0">
            <div class="inputs" align="right" style="float: right">
              <div class="col-xs-6 col-sm-6 col-lg-6 col-sm-6">
              <div style="float: left;">
                <select class="form-control" [(ngModel)]="sortOption.defaultSortOption" (ngModelChange)="getSortedResultForPartnerCampaigns($event,'partner-campaign-details')"
                  style="position: relative;right: -3px;">
                  <option *ngFor="let option of sortOption.partnerCampaignDetailsSortDropDown" [ngValue]="option">{{option.name}}</option>
                </select>
              </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-lg-6 col-sm-6 p0">
              <div class="portlet-input input-inline" style="margin-right: 12px; width:170px">
                <div class="input-icon right" style="position: relative;right: -11px;">
                  <input type="text" style="height:34px;" class="form-control" [(ngModel)]="sortOption.searchKey" [ngModelOptions]="{standalone: true}"
                    placeholder="Search" (keypress)="searchPartnerCampaignKeyPress($event.keyCode,'partner-campaign-details')">
                  <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey" (click)="sortOption.searchKey=''"></button>
                  <button type="submit" class="search-box-item-click" (click)="searchPartnerCampaigns('partner-campaign-details')">
                    <i class="fa fa-search" aria-hidden="true"></i></button>
                </div>
              </div>
              <a *ngIf="sortOption.totalRecords>0 && !campaignUserInteractionHttpRequestLoader.isLoading" class="close-circle" (click)="downloadCsv()">
                  <i  class="fa fa-download" aria-hidden="true"></i>
              </a>
              </div>
            </div>
            </div>
          </div>
          <app-list-loader *ngIf="campaignUserInteractionHttpRequestLoader.isLoading"></app-list-loader>
          <div class="portlet-body table-responsive" style="overflow: hidden;" *ngIf="!campaignUserInteractionHttpRequestLoader.isLoading">
           <div class="table-responsive">
            <table class="table tgrid">
              <thead>
                <tr>
                  <!-- <th>partner Company Name</th> -->
                  <th class="center-aligned">Campaign Name</th>
                  <th class="center-aligned">Launched By (Vendor)</th>
                   <th class="center">Total Recipients <i class="fa fa-envelope sky-blue"></i></th>
                   <th class="center">Active Recipients <i class="fa fa-envelope-open sky-blue"></i></th>
                   <th class="center">Clicked URL <i class="fa fa-globe sky-blue"></i></th>
                   <th class="center">Views <i class="fa fa-eye sky-blue"></i></th>
                  <th class="center">#Redistributed</th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let item of pagination.pagedItems;let i=index">
                  <tr>
                    <td class="re-distributed-count" title="{{item.campaignName}}">{{item.campaignName | slice:0:20}}
                     	<span *ngIf="item.campaignName?.length>20">...</span>
                    </td>
                    <td>
                      <h5 class='ellipsis' title="{{item.firstName}} {{item.lastName}}" style="margin: 7px 0 2px 0;font-weight: 400;">{{item.firstName
                        | slice:0:20}}
                        <span *ngIf="item.firstName?.length>20">...</span>
                        &nbsp;{{item.lastName | slice:0:15}}
                        <span *ngIf="item.lastName?.length>15">...</span>
                      </h5>
                      <h6 class='m0' style="font-weight: 400; display: table;">
                        <span title="">{{item.emailId | slice:0:38}}</span>
                        <span *ngIf="item.emailId?.length>38">...</span>
                      </h6>
                      	<h5 style="font-weight: 600; color: #676767;">
                      	<app-timestamp [isOnlyDate]="false" [dateAndTime]="item.redistributedOn"> </app-timestamp></h5>
                    </td>
                    <td class="center">
                    	<div>
                      <button class="btn btn-default btn-xs re-distributed-high-level">
                        <div class="portlet-body text-center">
                          <h4>
                            <b class="sky-blue">{{item.totalRecipients}}</b>
                          </h4>
                        </div>
                      </button>
                    </div>
                     </td>
                      <td class="center">
                     	<div>
                        <button class="btn btn-default btn-xs re-distributed-high-level">
                          <div class="portlet-body text-center">
                            <h4>
                              <b class="sky-blue">{{item.activeRecipients}}</b>
                            </h4>
                          </div>
                        </button>
                      </div>
                     </td>
                     <td class="center">
                    	<div>
                      <button class="btn btn-default btn-xs re-distributed-high-level">
                        <div class="portlet-body text-center">
                          <h4>
                            <b class="sky-blue">{{item.clickedUrls}}</b>
                          </h4>
                        </div>
                      </button>
                    </div>
                    </td>
                     <td class="center">
                      	<div>
                        <button class="btn btn-default btn-xs re-distributed-high-level">
                          <div class="portlet-body text-center">
                            <h4>
                              <b class="sky-blue">{{item.views}}</b>
                            </h4>
                          </div>
                        </button>
					        	</div>
                   	</td>
                    <td style="text-align: right;">
                      <div class="actions-block">
                        <font class="circled-number">{{item.redistributedCampaignsCount}}</font>
                        <a  (click)="showRedistributedCampaings(item)" data-toggle="tooltip" data-placement="top" title="View Redistributed Campaigns"   *ngIf="item.redistributedCampaignsCount> 0">
                          <i class="fa" [ngClass]="{'fa-plus': !item.expand, 'fa-minus': item.expand}"></i>
                        </a>
                      </div>
                    </td>
                  </tr>
                  <tr [ngClass]="{'hidden': !item.expand}">
                    <td colspan="8">
                      <table class="table tgrid table-condensed" style="background-color: #463c2c24">
                        <thead>
                          <tr>
                              <!-- style="float: left;margin-left: 70px;" -->
                            <th  class="center-aligned" style="width: 24%">Partners</th>
                            <th class="center-aligned">Campaign Name</th>
                            <th class="center">Total Recipients</th>
                            <th class="center">Active Recipients</th>
                            <th class="center">Clicked URL</th>
                            <th class="center">Views</th>
                            <th class="center">Analytics</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let redistributedCampaign of item.redistributedCampaigns" style="cursor: pointer;" (click)="referenseService.goToCampaignAnalytics(redistributedCampaign)">
                            <td>
                              <app-user-info [userInfo]="redistributedCampaign" [isPartnerEntityInfo]="true" [isPartnerInfo]="true"></app-user-info>
                            </td>
                            <td>
                            <div class="flex">
                              <span>
                                <h5 class='ellipsis' title="{{redistributedCampaign.campaignName}}" style="font-weight: 400;">{{redistributedCampaign.campaignName | slice:0:20}}
                                  <span *ngIf="redistributedCampaign.campaignName?.length>20">...</span>
                                </h5>
                                <h5 style="font-weight: 600; color: #676767;">
                                <app-timestamp [isOnlyDate]="false" [dateAndTime]="redistributedCampaign.displayTime"> </app-timestamp></h5>
                              </span>
                            </div>
                            </td>
                            <td class="center">
		                    	<div class="actions-block float-none ">
		                    		<a data-toggle="tooltip" data-placement="top">
                            <span class="circled-number"><b>{{redistributedCampaign.totalRecipients}}</b></span>
                          </a>
                        </div>
                     		</td>
		                      <td class="center">
		                     	<div class="actions-block float-none">
		                    		<a data-toggle="tooltip" data-placement="top">
                            <span class="circled-number"><b>{{redistributedCampaign.activeRecipients}}</b></span>
                          </a>
                        </div>
		                     </td>
		                     <td class="center">
		                    	<div class="actions-block float-none">
		                    		<a data-toggle="tooltip" data-placement="top">
                            <span class="circled-number"><b>{{redistributedCampaign.clickedUrls}}</b></span>
                          </a>
                        </div>
		                    </td>
		                     <td class="center">
		                      	<div class="actions-block float-none">
		                    		<a data-toggle="tooltip" data-placement="top">
                            <span class="circled-number"><b>{{redistributedCampaign.views}}</b></span>
                          </a>
                        </div>
		                   	</td>
                            <td class="text-center">
                              <a *ngIf="!redistributedCampaign.dataShare" data-rel="fancybox-button" (click)="referenseService.goToCampaignAnalytics(redistributedCampaign)" data-toggle="tooltip"
                                data-placement="top" title="Campaign Based Reports" class='circled-number'>
                                <i class="fa fa-line-chart"></i>
                              </a>
                              <a *ngIf="redistributedCampaign.dataShare" data-rel="fancybox-button" (click)="referenseService.goToCampaignAnalytics(redistributedCampaign)" data-toggle="tooltip"
                                data-placement="top" title="Campaign Based Reports" class='circled-number' style="margin-left: -47px;">
                                <i class="fa fa-line-chart"></i>
                              </a>
                              <!-- <ng-container *ngIf="redistributedCampaign.formsCount>0">
                              	 <a data-rel="fancybox-button" routerLink="/home/forms/cf/{{redistributedCampaign.campaignId}}" data-toggle="tooltip" 
                                data-placement="top" title="Form Analytics" class='circled-number'>
                                <i class="fa fa-wpforms"></i>
                             	 </a>
                               <span class="badge" id="notification">{{redistributedCampaign.formsCount}}</span>
                              </ng-container> -->
                             <!--  <a id="disabled-icon" class="blur" data-toggle="tooltip" data-placement="top" title="Data Sharing Disabled" *ngIf="!redistributedCampaign.dataShare">
                                <img src="../assets/images/disabled-icon.png">
                              </a> -->
                              
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
           </div>
            <div *ngIf="sortOption.totalRecords==0" class="alert alert-info">
              <strong>No campaigns found</strong>
            </div>
          </div>
          <div *ngIf="sortOption.totalRecords > 0 && !campaignUserInteractionHttpRequestLoader.isLoading && !campaignUserInteractionHttpRequestLoader.isServerError"
            style="background:white">
            <div *ngIf="pagination.pagedItems.length !== 0">
              <app-pagination [pagination]="pagination" [type]="'userInteraction'" [isDropdown]="true" (notifyParent)="setPartnerCampaignsPageByType($event,'partner-campaign-details')"
                (notifyParentDropDown)="listRedistributedThroughPartnerCampaigns($event)">
              </app-pagination>
              <select class="form-control" style="float: right; width: auto;" [(ngModel)]="sortOption.itemsSize" (ngModelChange)="getNumberOfItemsPerPageByType($event,'partner-campaign-details')">
                <option *ngFor="let itemPerPage of sortOption.numberOfItemsPerPage" [ngValue]="itemPerPage">{{itemPerPage.name}}</option>
              </select>
            </div>
          </div>

          <!--  <app-pagination [pagination]="pagination" [type]="'userInteraction'" (notifyParentDropDown)="paginationDropdown($event)"
                (notifyParent)="setPage($event)"></app-pagination> -->
        </div>
      </div>
    </div>
  </div>
  <div id="through-partner-div" style="display: none;">
    <div class="row">
      <div class="col-md-12">
        <div class="tabbable tabbable-custom tabbable-noborder" id="header">
          <div class="tab-content">
            <div class="page-bar m10">
              <ul class="mix-filter col-xs-12 col-md-5 p0 m0" style="display: inline-flex;">
                <!-- <li class="hidden-xs" style="background: white; color: #616161;cursor: default;font-size: 14px;">Campaign Type:</li> -->
                <li class="filter" (click)="filterCampaigns('NONE',0)" [class.campaign-type-selected]="0 == sortOption.selectedCampaignTypeIndex">All</li>
                <li class="filter" (click)="filterCampaigns('REGULAR',1)" [class.campaign-type-selected]="1 == sortOption.selectedCampaignTypeIndex">Email</li>
                <li class="filter" (click)="filterCampaigns('VIDEO',2)" [class.campaign-type-selected]="2 == sortOption.selectedCampaignTypeIndex">Video</li>
                <li class="filter" (click)="filterCampaigns('SOCIAL',3)" [class.campaign-type-selected]="3 == sortOption.selectedCampaignTypeIndex">Social</li>
                <li class="filter" *ngIf="referenseService.eventCampaign || referenseService.eventCampaignTabAccess" (click)="filterCampaigns('EVENT',4)" [class.campaign-type-selected]="4 == sortOption.selectedCampaignTypeIndex">Event</li>
             	<li class="filter" (click)="filterCampaigns('LANDINGPAGE',5)" [class.campaign-type-selected]="5 == sortOption.selectedCampaignTypeIndex" *ngIf="landingPage">Page</li>
                <li class="filter" style="display: none;">Own Template</li>

              </ul>
              <div class="page-toolbar col-xs-12 col-sm-12 col-md-7">
                <div class="btn-group pull-right">
                  <ng-container class='m10 hidden-xs'>
                    <span class="btn btn-xs hidden-xs l-g-view" data-toggle="tooltip" data-placement="bottom" title="List View" [class.disabled]="isListView" (click)="isListView = true"><i class="fa fa-th-list p10" aria-hidden="true"></i></span>
                     <span class="btn btn-xs hidden-xs l-g-view"  data-toggle="tooltip" data-placement="bottom" title="Grid View" [class.disabled]="!isListView" (click)="isListView = false"><i class="fa fa-th-large p10" aria-hidden="true"></i></span>
                  </ng-container>
                  <div class="inputs" align="right" style="float: right;display: inline-flex;">
                    <div style="float: left;">
                      <select class="form-control" [(ngModel)]="sortOption.selectedSortedOption" (ngModelChange)="getSortedResultForPartnerCampaigns($event,'through-partner')"
                        style="position: relative;right: -3px;">
                        <option *ngFor="let option of sortOption.sortByDropDown" [ngValue]="option">{{option.name}}</option>
                      </select>
                    </div>
                    <div class="portlet-input input-inline input-medium">
                      <div class="input-icon right" style="position: relative;right: -11px;">
                        <input type="text" class="form-control" [(ngModel)]="sortOption.searchKey" [ngModelOptions]="{standalone: true}" placeholder="Search for a Campaign"
                          (keypress)="searchPartnerCampaignKeyPress($event.keyCode,'through-partner')">
                        <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey" (click)="sortOption.searchKey=''"></button>
                        <button type="submit" class="search-box-item-click" (click)="searchPartnerCampaigns('through-partner')"><i
                            class="fa fa-search"></i></button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <app-grid-loader *ngIf="httpRequestLoader.isLoading && !isListView"></app-grid-loader>
            <app-list-loader *ngIf="httpRequestLoader.isLoading && isListView"></app-list-loader>
            <section class='m10' *ngIf="sortOption.totalRecords > 0 && !httpRequestLoader.isLoading && !httpRequestLoader.isServerError">
              <div class="table-responsive">
                <table class='table tgrid table-hover table-sm' *ngIf="isListView">
                  <thead>
                    <tr>
                      <th class="hidden-xs" colspan="2" style="width: 50%">Campaign</th>
                      <th class="visible-xs" colspan="1" style="width: 50%">Campaign</th>
                      <th class="hidden-xs">Status</th>
                      <th class="hidden-xs">Created On</th>
                      <th style="text-align:left">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor='let campaign of throughPartnerCampaignPagination.pagedItems; let i=index'>
                      <td style="width: 10%;" class="hidden-xs">
                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('VIDEO') > -1 && campaign.launched " src="assets/images/video-email.png" style="height: 50px;"
                          alt="{{campaign.campaignType}} Campaign">
                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('VIDEO') > -1 && !campaign.launched " src="assets/images/video-email.png" style="height: 50px;-webkit-filter: grayscale(100%);filter: grayscale(100%);"
                          alt="{{campaign.campaignType}} Campaign">

                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('REGULAR') > -1 && campaign.launched" src="assets/images/regular-email.png" style="height: 50px;"
                          alt="{{campaign.campaignType}} Campaign">
                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('REGULAR') > -1 && !campaign.launched" src="assets/images/regular-email.png" style="height: 50px;-webkit-filter: grayscale(100%);filter: grayscale(100%);"
                          alt="{{campaign.campaignType}} Campaign">

                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('SOCIAL') > -1 && campaign.launched" src="assets/images/social-campaign.png" style="height: 50px;"
                          alt="{{campaign.campaignType}} Campaign">
                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('SOCIAL') > -1 && !campaign.launched" src="assets/images/social-campaign.png" style="height: 50px;-webkit-filter: grayscale(100%);filter: grayscale(100%);"
                          alt="{{campaign.campaignType}} Campaign">

                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('EVENT') > -1 && campaign.launched" src="assets/images/event-campaign.png" style="height: 50px;"
                          alt="{{campaign.campaignType}} Campaign">
                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('EVENT') > -1 && !campaign.launched" src="assets/images/event-campaign.png" style="height: 50px;-webkit-filter: grayscale(100%);filter: grayscale(100%);"
                          alt="{{campaign.campaignType}} Campaign">
                          
                          <img class="imageClass" *ngIf="campaign.campaignType.indexOf('LANDINGPAGE') > -1 && campaign.launched" src="assets/images/landing-page.png" style="height: 50px;"
                          alt="{{campaign.campaignType}} Campaign">
                        <img class="imageClass" *ngIf="campaign.campaignType.indexOf('LANDINGPAGE') > -1 && !campaign.launched" src="assets/images/landing-page.png" style="height: 50px;-webkit-filter: grayscale(100%);filter: grayscale(100%);"
                          alt="{{campaign.campaignType}} Campaign">

                      </td>
                      <td>
                        <h4 class="ellipsis mt5 mb5 f-w-600" style="font-size: 14px;" title="{{campaign.campaignName}}">{{campaign.campaignName
                          | slice:0:25}}
                          <span *ngIf="campaign.campaignName?.length>25">...</span>
                        </h4>
                        <h5 class='m0' style="float:left">{{campaign.companyName | slice:0:15}}
                          <span class='f-w-300'>{{campaign.createdBy | slice:0:25}}<span *ngIf="campaign.createdBy?.length>25">...</span></span>
                        </h5>
                      </td>
                      <td class="center hidden-xs" style="text-align: center">
                        <span align="right">
                          <b *ngIf="campaign.launched">Launched On</b>
                          <b *ngIf="!campaign.launched && campaign.launchedOn?.length > 0">Scheduled For</b>
                          <b *ngIf="!campaign.launched && campaign.launchedOn?.length==0">Saved On</b>
                        </span>
                        <span align="right" title="Upload Date" >
                          <!-- <b *ngIf="campaign.launched || !campaign.launched && campaign.launchedOn?.length > 0">{{campaign.launchedOn}}</b> -->
                          <b *ngIf="campaign.scheduleType=='NOW' || campaign.scheduleType=='SCHEDULE'">
                            <!-- {{campaign.launchedOn}} -->
                            <app-timestamp [isOnlyDate]="false" [dateAndTime]="campaign.displayTime"> </app-timestamp>
                          </b>
                          <b *ngIf="campaign.scheduleType=='SAVE'">
                            <app-timestamp [isOnlyDate]="false" [dateAndTime]="campaign.displayTime"> </app-timestamp>
                          </b>
                        </span>
                      </td>
                      <td class="text-center hidden-xs">
                        <app-timestamp [isOnlyDate]="true" [dateAndTime]="campaign.createdDate"> </app-timestamp>
                      </td>
                      <td class="text-center">
                        <a data-rel="fancybox-button" (click)="referenseService.goToCampaignAnalytics(campaign)" data-toggle="tooltip" data-placement="top" title="Campaign Based Reports"
                          class='circled-number'>
                          <i class="fa fa-line-chart"></i>
                        </a>
                        <!-- <a id="disabled-icon" class="blur" data-toggle="tooltip" data-placement="top" title="Data Sharing Disabled" *ngIf="!campaign.dataShare && selectedTabIndex==2">
                          <img src="../assets/images/disabled-icon.png">
                        </a> -->
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </section>
            <div *ngIf="sortOption.totalRecords <= 0 && isListView" class="alert alert-info">
              <strong>No campaigns found</strong>
            </div>
            <div class="tab-pane active" *ngIf="!isListView">
              <div class="margin-top-10">
                <div class="row mix-grid p10">
                  <ng-container *ngIf="sortOption.totalRecords > 0 && !httpRequestLoader.isLoading && !httpRequestLoader.isServerError">
                    <div *ngFor="let campaign of throughPartnerCampaignPagination.pagedItems; let i= index" class="col-xs-12 col-sm-4 col-lg-3">
                      <div class="grid-box">
                        <img src="https://cdn2.iconfinder.com/data/icons/facebook-ads-1/204/1-48.png">
                        <h4 class="ellipsis" title="{{campaign.campaignName}}">{{campaign.campaignName | slice:0:25}}
                          <span *ngIf="campaign.campaignName?.length>25">...</span>
                        </h4>
                        <h6 class="mt10 mb0" [title]="campaign.createdBy">By {{campaign.createdBy | slice:0:15}}<span *ngIf="campaign.createdBy?.length>15">...</span></h6>
                        <h6 class="mt0"><b>{{campaign.companyName | slice:0:15}}<span *ngIf="campaign.companyName?.length>15">...</span></b></h6>
                        <h6>
                          <span>
                            <span *ngIf="campaign.launched">Launched On</span>
                            <span *ngIf="!campaign.launched && campaign.launchedOn?.length > 0">Scheduled For</span>
                            <span *ngIf="!campaign.launched && campaign.launchedOn?.length==0">Saved On</span>
                          </span>
                          <span title="Upload date">
                            <span *ngIf="campaign.scheduleType=='NOW' || campaign.scheduleType=='SCHEDULE'">
                              <!-- {{campaign.launchedOn}} -->
                              <app-timestamp [isOnlyDate]="false" [dateAndTime]="campaign.displayTime"> </app-timestamp>
                            </span>
                            <span *ngIf="campaign.scheduleType=='SAVE'">
                              <app-timestamp [isOnlyDate]="false" [dateAndTime]="campaign.displayTime"> </app-timestamp>
                            </span>
                          </span>
                        </h6>
                        <div class="bookmark-ribbon">
                          <span style="margin: 0px -7px; font-size: 17px; color: white;">
                            <i *ngIf="campaign.campaignType.indexOf('VIDEO') > -1" class="fa fa-video-camera" aria-hidden="true"></i>
                            <i *ngIf="campaign.campaignType.indexOf('REGULAR') > -1" class="fa fa-envelope" aria-hidden="true"></i>
                            <i *ngIf="campaign.campaignType.indexOf('SOCIAL') > -1" class="fa fa-globe" aria-hidden="true"></i>
                            <i *ngIf="campaign.campaignType.indexOf('EVENT') > -1" class="fa fa-calendar" aria-hidden="true"></i>
                          </span>
                        </div>
                        <div class="ribbon" [class.active]="!campaign.launched && campaign.launchedOn?.length==0">
                          <span *ngIf="campaign.launched">Launched</span>
                          <span *ngIf="!campaign.launched && campaign.launchedOn?.length > 0">Scheduled</span>
                          <span *ngIf="!campaign.launched && campaign.launchedOn?.length==0">Saved</span>
                        </div>
                        <div class="bar">
                          <a (click)="referenseService.goToCampaignAnalytics(campaign)" data-toggle="tooltip" data-placement="top" title="Campaign Based Reports">
                            <i class="fa fa-line-chart"></i>
                          </a>
                         <!--  <a id="disabled-icon" class="blur" data-toggle="tooltip" data-placement="top" title="Data Sharing Disabled" *ngIf="!campaign.dataShare && selectedTabIndex==2">
                            <img src="../assets/images/disabled-icon.png" style="margin-top: 9px;margin-left: 2px;">
                          </a> -->
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
              </div>
              <!-- End of 24 -->
              <div *ngIf="sortOption.totalRecords <= 0 && !isListView" class="alert alert-info">
                <strong>No campaigns found</strong>
              </div>
            </div>
            <div *ngIf="sortOption.totalRecords > 0 && !httpRequestLoader.isLoading && !httpRequestLoader.isServerError" style="background:white">
              <div *ngIf="throughPartnerCampaignPagination.pagedItems.length !== 0" style="padding: 0 13px;">
                <app-pagination [pagination]="throughPartnerCampaignPagination" [type]="'campaign'" [isDropdown]="true" (notifyParent)="setPartnerCampaignsPageByType($event,'through-partner')"
                  (notifyParentDropDown)="listThroughPartnerCampaigns($event)"></app-pagination>
                <select class="form-control" style="float: right; width: auto;" [(ngModel)]="sortOption.itemsSize" (ngModelChange)="getNumberOfItemsPerPageByType($event,'through-partner')">
                  <option *ngFor="let itemPerPage of sortOption.numberOfItemsPerPage" [ngValue]="itemPerPage">{{itemPerPage.name}}</option>
                </select>
              </div>
            </div>
          </div>
          <!-- End Of tab Content -->
        </div>
      </div>
    </div>
  </div>
  <app-scroll-top></app-scroll-top>
</div>

<div class="modal fade" id="campaignInteractionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false"
  data-backdrop="static">
  <div class="modal-dialog" role="document" style="width: 80%; margin: 1em auto">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close-circle" data-dismiss="modal" (click)="closeModalPopUp()">
          <i class="fa fa-times"></i>
        </a>
        <h4 class="m0">partner campaign interactions</h4>
        <!-- <div class="btn-group pull-right" style="margin-top: 8px; cursor:pointer; color: #7d8c98; margin-right: -15px;">
					<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -22px;margin-right: 21px; float:right;">
						<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i>
						<i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
					</span>
					<ul class="dropdown-menu pull-right">
						<li>
							<a id="delete_button" (click)="downloadEmailLogs()"> Export To Excel </a>
						</li>
					</ul>
				</div> -->
      </div>
      <div class="modal-body clearfix">
        <div *ngIf="campaignInteractionPagination.pagedItems?.length == 0" class="col-md-6" class="col-md-9 alert alert-info m0"
          style="width: 100%">
          <strong>No Results found</strong>
        </div>
        <div class="table-responsive" [class.hideDiv]="campaignInteractionPagination.pagedItems?.length == 0">
          <table class="table tgrid" id="sample_editable_1">
            <thead>
              <tr>
                <th>NAME</th>
                <th>CAMPAIGN NAME</th>
                <th>DATE & TIME</th>
                <th>LOCATION</th>
                <th>PLATFORM</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let emailClicked of campaignInteractionPagination.pagedItems;let i = index">
                <td>
                  <app-user-info [userInfo]="emailClicked"> </app-user-info>
                </td>
                <td class="center">
                  <h5>{{emailClicked.campaignName}}</h5>
                  <h4 *ngIf="emailClicked.campaignName==null">-</h4>
                </td>
                <td class="center">
                  <h5>{{emailClicked.time |date:'MM/dd/yyyy @ h:mma'}}</h5>
                </td>
                <td class="center">
                  <app-location [userLocation]="emailClicked"> </app-location>
                </td>
                <td class="center" *ngIf="emailClicked.deviceType">{{emailClicked.deviceType}}</td>
                <td class="center" *ngIf="!emailClicked.deviceType">-</td>
              </tr>
            </tbody>
          </table>
        </div>
        <app-pagination *ngIf="campaignInteractionPagination.pagedItems?.length>0" [pagination]="campaignInteractionPagination" [type]="'parnter-interaction'"
          (notifyParentDropDown)="paginationDropdown($event)" (notifyParent)="setPage($event)"></app-pagination>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-defaullistOfEmailOpenLogs listOfEmailOpenLogst" data-dismiss="modal" (click)="closeModalPopUp()">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- ..........Approve and Decline Partner request modal........... -->

<div class="modal fade right" id="approve-decline-modal" tabindex="-1"
	role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
	data-keyboard="false">
	<div class="modal-dialog" role="document">
	<div class="my-container">
		<!-- <ngx-loading [show]="loading"
			[config]="{ backdropBorderRadius: '14px' }"></ngx-loading> -->
	</div>
		<div class="modal-content">
			<div class="modal-header">
				<a class="close-circle" (click)="closeRequestModal()" data-dismiss="modal"> <i class="fa fa-times"></i></a>
				<h4 class="modal-title left" id="myModalLabel" *ngIf="requestText == 'Approve'">Approve vendor request and send an email.</h4>
				<h4 class="modal-title left" id="myModalLabel" *ngIf="requestText == 'Decline'">Decline vendor request and send an email.</h4>
			</div>
			<div class="modal-body">
			<div>
			   <div *ngIf="isError" class="alert alert-danger alert-dismissible left">
			   <a (click)="isError = false" class="close" data-dismiss="alert" aria-label="close"></a>
			   Please complete the required fields.
			  </div>

			
				<div class="form-group">
				<label for="subjectLine">Email subject <span class="text-danger">*</span></label>
				<input type="text" id="subjectLine"
					[(ngModel)]="vendoorInvitation.subject" (input)="validateRequest()" [ngModelOptions]="{standalone: true}"
					placeholder="Subject Line" class="form-control" name="subjectLine" maxlength="200" />
				</div>
				<div class="form-group" *ngIf="isShowCKeditor">
					<label for="subjectLine">Message <span class="text-danger">*</span></label>
					<ckeditor name="body" [(ngModel)]="vendoorInvitation.message" [ngModelOptions]="{standalone: true}" (input)="validateRequest()"></ckeditor>
				</div>

			 </div>
			 
  </div>
    <div class="modal-footer" style="border: none">
      <button class="btn btn-default" (click)="closeRequestModal()" data-dismiss="modal">Cancel</button>
      <button *ngIf="requestText=='Approve'" type="submit" class="btn green" (click)="approvePartnerRequest()">Send & Approve</button>
      <button *ngIf="requestText=='Decline'" type="submit" class="btn green" (click)="declinePartnerRequest()">Send & Decline</button>
    </div>
		</div>
	</div>
</div>
