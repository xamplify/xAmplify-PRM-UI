<style>
  .hideDiv {
    display: none;
  }
</style>
<div class="page-content">
  <div class="page-bar">
    <ul class="page-breadcrumb">
      <li>
        <i class="fa fa-home"></i>
        <a [routerLink]="['/']">Home</a>
        <i class="fa fa-angle-right"></i>
      </li>
      <li (click)="gotoMange()">
        <a>Manage Partners</a>
        <i class="fa fa-angle-right"></i>
      </li>
      <li>
        <a>Analytics</a>
      </li>
    </ul>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-6 p5">
      <div>
        <div>
          <div class="row">
            <div class="col-xs-4" [routerLink]="['../add']">
              <a class="dashboard-stat dashboard-stat-lighter blue-soft">
                <div class="visual">
                  <i class="fa fa-handshake-o"></i>
                </div>
                <div class="details">
                  <div class="number">{{noOfCampaignsLaunchedByPartner.length}}</div>
                  <div class="desc">Active Partners</div>
                </div>
              </a>
            </div>
            <div class="col-xs-4" [routerLink]="['../manage']">
              <a class="dashboard-stat dashboard-stat-lighter blue-soft">
                <div class="visual">
                  <i class="fa fa-handshake-o"></i>
                </div>
                <div class="details">
                  <div class="number">{{referenseService.partnerCount - noOfCampaignsLaunchedByPartner.length}}</div>
                  <div class="desc">Inactive Partners</div>
                </div>
              </a>
            </div>
            <div class="col-xs-4">
              <a class="dashboard-stat dashboard-stat-lighter green-soft" [routerLink]="['../../campaigns/manage']">
                <div class="visual">
                  <i class="fa fa-user-secret"></i>
                </div>
                <div class="details">
                  <div class="number">{{campaignsCount}}</div>
                  <div class="desc">Total Campaigns</div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 p5">
      <div class="portlet light">
        <div class="portlet-body" style="padding-top: 0;">
          <div id="campaign-type-chart" class="campaign-type"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 col-sm-6 p5">
      <!-- BEGIN PORTLET-->
      <div class="portlet light">
        <div class="portlet-title">
          <div class="caption">
            <i class="icon-bar-chart font-green-sharp hide"></i>
            <span class="caption-subject font-green-sharp uppercase">Partners by Country</span>
          </div>
          <div class="panel-title pull-right">
          </div>
        </div>
        <div class="portlet-body text-center">
          <app-worldmap *ngIf="worldMapdataReport" [worldMapData]='worldMapdataReport' (notifyParent)="clickWorldMapReports($event)"></app-worldmap>
        </div>
      </div>
      <!-- END PORTLET-->
    </div>
    <div class="col-xs-12 col-sm-6 p5">
      <div class="portlet light">
        <div class="portlet-title">
          <div class="caption">
            <span class="caption-subject font-red-sunglo uppercase"> campaigns launched by partners</span>
          </div>
        </div>
        <div class="portlet-body clearfix" style="min-height: 300px;">
          <table class="table tgrid">
            <thead>
              <th>Partner</th>
              <th>Campaigns</th>
            </thead>
            <tbody>
              <tr *ngFor="let item of noOfCampaignsLaunchedByPartner">
                <td><app-user-info [userInfo]="item" [isPartnerEntityInfo]=true></app-user-info></td>
                <td class="text-center">{{item.count}}</td>
                <td><app-pie-chart [customerId]="item.partnerId"></app-pie-chart></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 p5">
      <div class="portlet light">
        <div class="portlet-title">
          <div class="caption">
            <span class="caption-subject font-red-sunglo uppercase"> partners campaigns user interactions</span>
          </div>
        </div>
        <div class="portlet-body">
          <table class="table tgrid">
            <thead>
              <!-- <th>partner Company Name</th> -->
              <th>Email Id</th>
              <th>Campaign Name</th>
              <th>analytics</th>
            </thead>
            <tbody>
              <tr *ngFor="let item of partnerUserInteraction" style="cursor: pointer;" (click)="partnerCampaignInteraction(item.campaignId)">
                <!-- <td *ngIf="item.partnerCompanyName">{{item.partnerCompanyName}} </td>
                <td *ngIf="!item.partnerCompanyName">-</td> -->
                <td><app-user-info [userInfo]="item" [isPartnerEntityInfo]=true></app-user-info></td>
                <td>{{item.campaignName}}</td>
                <td>
					        <div class="actions-block">
                      <a [routerLink]="['/home/campaigns/', item.campaignId, 'details']"  title="analytics"> 
                          <i class="fa fa-eye"></i>
                        </a>
                      </div>                
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <app-pagination [pagination]="pagination" [type]="'userInteraction'" (notifyParentDropDown)="paginationDropdown($event)"
          (notifyParent)="setPage($event)"></app-pagination>

      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="campaignInteractionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false"
  data-backdrop="static">
  <div class="modal-dialog" role="document" style="width: 80%; margin: 1em auto">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close-circle" data-dismiss="modal" (click)="closeModalPopUp()">
          <i class="fa fa-times"></i>
        </a>
        <h4 class="m0">partner campaign interactions</h4>
        <!-- <div class="btn-group pull-right" style="margin-top: 8px; cursor:pointer; color: #7d8c98; margin-right: -15px;">
					<span class="dropdown-toggle" data-toggle="dropdown" style="box-shadow:none; margin-top: -22px;margin-right: 21px; float:right;">
						<i class="fa fa-cog" style="font-size:20px; margin-right:5px"></i>
						<i class="fa fa-angle-down" style="font-size:14px; float:right"></i>
					</span>
					<ul class="dropdown-menu pull-right">
						<li>
							<a id="delete_button" (click)="downloadEmailLogs()"> Export To Excel </a>
						</li>
					</ul>
				</div> -->
      </div>
      <div class="modal-body clearfix">
        <div *ngIf="campaignInteractionPagination.pagedItems?.length == 0" class="col-md-6" class="col-md-9 alert alert-info m0"
          style="width: 100%">
          <strong>No Results found</strong>
        </div>
        <div class="table-responsive" [class.hideDiv]="campaignInteractionPagination.pagedItems?.length == 0">
          <table class="table tgrid" id="sample_editable_1">
            <thead>
              <tr>
                <th>NAME</th>
                <th>CAMPAIGN NAME</th>
                <th>DATE & TIME</th>
                <th>LOCATION</th>
                <th>PLATFORM</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let emailClicked of campaignInteractionPagination.pagedItems;let i = index">
                <td>
                  <app-user-info [userInfo]="emailClicked"> </app-user-info>
                </td>
                <td class="center">
                  <h5>{{emailClicked.campaignName}}</h5>
                  <h4 *ngIf="emailClicked.campaignName==null">-</h4>
                </td>
                <td class="center">
                  <h5>{{emailClicked.time |date:'MM/dd/yyyy @ h:mma'}}</h5>
                </td>
                <td class="center">
                  <app-location [userLocation]="emailClicked"> </app-location>
                </td>
                <td class="center" *ngIf="emailClicked.deviceType">{{emailClicked.deviceType}}</td>
                <td class="center" *ngIf="!emailClicked.deviceType">-</td>
              </tr>
            </tbody>
          </table>
        </div>
        <app-pagination *ngIf="campaignInteractionPagination.pagedItems?.length>0" [pagination]="campaignInteractionPagination" [type]="'parnter-interaction'" (notifyParentDropDown)="paginationDropdown($event)"
          (notifyParent)="setPage($event)"></app-pagination>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-defaullistOfEmailOpenLogs listOfEmailOpenLogst" data-dismiss="modal" (click)="closeModalPopUp()">Close</button>
      </div>
    </div>
  </div>
</div>