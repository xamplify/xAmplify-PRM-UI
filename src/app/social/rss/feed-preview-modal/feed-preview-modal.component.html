<div class="modal fade right" id="feedPreviewModal" tabindex="-1" role="dialog" aria-labelledby="feedPreviewModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content full_popup">
      <div class="modal-header popup_header">
        <button type="button" class="close-circle" data-dismiss="modal" aria-label="Close">
          <i class="fa fa-times"></i></button>
        <h4 class="modal-title" id="feedPreviewModalLabel">Social Feed Preview</h4>
      </div>
      <div class="modal-body">
        <div style="margin-top:10px;margin-bottom:10px;">
          <span title="{{feed.statusMessage}}"><strong>
              <div [innerHTML]="formattedText"></div>
            </strong></span>
        </div>
        <!-- Media related content -->
        <div class="social-media-container" *ngIf="layoutReady && layout">
          <div class="media-layout" [ngClass]="'layout-' + layout.type">
            <div class="media-row" *ngFor="let row of layout.rows; let rowIndex = index" [style.height]="row.height"
              [ngClass]="'row-' + rowIndex">

              <div class="media-item" *ngFor="let item of row.items" [ngClass]="item.colClass"
                [style.height]="item.height">

                <div class="media-content" *ngIf="!item.media.isStacked" [style.height]="item.height">
                  <img *ngIf="!isVideo(item.media)" [src]="getMediaSource(item.media)" class="media-element media-image"
                    [style.height]="item.height" />
                  <video *ngIf="isVideo(item.media)" class="media-element media-video" [style.height]="item.height"
                    controls preload="metadata">
                    <source [src]="getMediaSource(item.media)" type="video/mp4">
                    Your browser does not support the video tag.
                  </video>
                </div>
                <div class="stacked-media" *ngIf="item.media.isStacked" [style.height]="item.height">
                  <div class="stacked-item" *ngFor="let stackedMedia of item.media.stackedMedia; let i = index"
                    [style.height]="getStackedHeight(item.media.stackedMedia.length)">

                    <img *ngIf="!isVideo(stackedMedia)" [src]="getMediaSource(stackedMedia)"
                      class="media-element media-image stacked-image"
                      [style.height]="getStackedHeight(item.media.stackedMedia.length)" />
                    <video *ngIf="isVideo(stackedMedia)" class="media-element media-video stacked-video"
                      [style.height]="getStackedHeight(item.media.stackedMedia.length)" controls preload="metadata">
                      <source [src]="getMediaSource(stackedMedia)" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Check if feed has media content -->
      </div>
    </div>
  </div>
</div>