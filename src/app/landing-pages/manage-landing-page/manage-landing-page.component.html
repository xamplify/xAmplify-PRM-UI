<ngx-loading [show]="ngxloading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
<div class="page-content">
<div class="page-bar">
		<ul class="page-breadcrumb">
			<li><i class="fa fa-home"></i>  
				<a [routerLink]="referenceService.homeRouter">Home</a> 
				<i class="fa fa-angle-right"></i>
				<ng-container *ngIf="!isPartnerLandingPage">
				<a  [routerLink]="['../../design/add']">Create Design</a>
				 <i class="fa fa-angle-right"></i>
				 </ng-container>
			</li>
			<li><a>Manage Pages</a></li>
		</ul>
	</div>
	<div id="custom-response-div">
    <app-response-message *ngIf="customResponse.isVisible" [customResponse]="customResponse"></app-response-message>
  </div>
		<div class="row" *ngIf="statusCode==200">
		<div class="col-md-12">
			<div class="portlet light clearfix">
				<div class="portlet-title">
					    <div class="row">
					    <div class="colxs-12 col-sm-4">
						<div *ngIf="!isPartnerLandingPage"> 
							<ul class="mix-filter">
								<li class="filter"  (click)="showAllLandingPages('All',0)" [class.landing-page-selected]="0 == selectedLandingPageTypeIndex">All</li>
								<li class="filter"  (click)="showAllLandingPages('Regular',1)" [class.landing-page-selected]="1 == selectedLandingPageTypeIndex">Regular</li>
								<li class="filter"   (click)="showAllLandingPages('Co-Branded',2)" [class.landing-page-selected]="2 == selectedLandingPageTypeIndex">Co-Branded</li>
								<li class="filter"   (click)="showAllLandingPages('PUBLIC',3)" [class.landing-page-selected]="3 == selectedLandingPageTypeIndex">Public</li>
								<li class="filter"   (click)="showAllLandingPages('PRIVATE',4)" [class.landing-page-selected]="4 == selectedLandingPageTypeIndex">Private</li>
							</ul>
						</div>
						</div>
			            <div class="page-toolbar">
			              <div class="btn-group pull-right" id="right-margin">
			                <div class="inputs" align="right" id="right">
			                  <div id="left" *ngIf="!isPartnerLandingPage">
			                    <select class="form-control" [(ngModel)]="sortOption.formsSortOption"
			                      (ngModelChange)="sortBy($event)" id="select-dropdown">
			                      <option *ngFor="let option of sortOption.manageFormsSortOptions" [ngValue]="option">
			                        {{option.name}}</option>
			                    </select>
			                  </div>
			                  
			                  <div id="left" *ngIf="isPartnerLandingPage">
			                    <select class="form-control" [(ngModel)]="sortOption.partnerLandingPageSortOption"
			                      (ngModelChange)="sortBy($event)" id="select-dropdown">
			                      <option *ngFor="let option of sortOption.partnerLandingPageSortOptions" [ngValue]="option">
			                        {{option.name}}</option>
			                    </select>
			                  </div>
			                  
			                  
			                  <div class="portlet-input input-inline input-small" id="search-div">
			                    <div class="input-icon right" id="icon">
			                      <input type="text" id="sort-text" class="form-control" [(ngModel)]="sortOption.searchKey"
			                        [ngModelOptions]="{standalone: true}" placeholder="search..."
			                        (keypress)="eventHandler($event.keyCode)">
			                      <button class="glyphicon glyphicon-remove search-box-item-clear" *ngIf="sortOption.searchKey"
			                        (click)="sortOption.searchKey='';searchLandingPages();"></button>
			                      <button type="submit" class="search-box-item-click" (click)="searchLandingPages()">
			                      	<i class="fa fa-search"></i>
			                      </button>
			                    </div>
			                  </div>
			                </div>
			              </div>
			            </div>
			          </div>
				</div>
				<div class="portlet-body">
					<div class="row">
						<app-grid-loader *ngIf="httpRequestLoader.isLoading"></app-grid-loader>
						<ng-container *ngIf="!httpRequestLoader.isLoading">
							<div class="col-md-3 col-sm-4 col-xs-12" *ngFor="let landingPage of pagination.pagedItems ;let i =index">
							<div  class="grid-box" id="landingPageListDiv_{{landingPage.id}}">
							   <span class="ribbon1" *ngIf="landingPage.coBranded"><span>Co-Branded</span></span>
							   <span class="ribbon1" *ngIf="!landingPage.coBranded"><span>Regular</span></span>
								<img class="img-responsive center-block" src="assets/images/Landing-Pages/{{landingPage.imageName}}" alt="Not Found">
								<div class="box" style="padding:0px!important">
									<h4 style=" margin-bottom: 5px; margin-top: 5px;" title="{{landingPage.name}}">{{landingPage.name|slice:0:23}} <span *ngIf="landingPage.name?.length>23">....</span></h4>
									<hr>
									<h6 *ngIf="!isPartnerLandingPage">Created On <b> <app-timestamp [isOnlyDate]="true"[dateAndTime]="landingPage.displayTime"> </app-timestamp></b></h6>
									<h6 *ngIf="isPartnerLandingPage">Shared On <b> <app-timestamp [isOnlyDate]="true"[dateAndTime]="landingPage.displayTime"> </app-timestamp></b></h6>
									<h6 title="{{landingPage.createdUser}}">By <b>{{landingPage.createdUser | slice:0:25}}</b>
										<span *ngIf="landingPage.createdUser?.length>25">..</span>
									</h6>
									<h6 title="{{landingPage.companyName}}">
										From <b>{{landingPage.companyName | slice:0:25}}</b>
										<span *ngIf="landingPage.companyName?.length>25">..</span>
									</h6>
									</div>
								<!-- below code for showing draft ribbon -->
								<!-- <div class="ribbon draft" *ngIf="landingPage.isDraft">
                                    <span>DRAFT</span>
                                </div> -->
								<div class="bar">
									<a *ngIf="!isPartnerLandingPage" data-toggle="tooltip" data-placement="top" title="Edit" (click)="editLandingPage(landingPage.id)">
										<i class="fa fa-pencil-square-o"></i>
									</a>
									<a data-toggle="tooltip" data-placement="top" title="Preview" (click)="showPreview(landingPage)">
										<i class="fa fa-eye"></i>
									</a>
									<a data-toggle="tooltip" data-placement="top" title="Copy Link" (click)="showLandingPageLink(landingPage)">
										<i class="fa fa-clipboard"></i>
									</a>
									<ng-container *ngIf="landingPage.formsCount>0">
										<a *ngIf="!isPartnerLandingPage" data-rel="fancybox-button" (click)="goToFormAnalytics(landingPage.id)" data-toggle="tooltip" data-placement="top" title="Form Count"><i class="fa fa-wpforms"></i></a>
										<a *ngIf="isPartnerLandingPage" data-rel="fancybox-button" (click)="goToPartnerLandingPageFormAnalytics(landingPage.alias)" data-toggle="tooltip" data-placement="top" title="Form Count"><i class="fa fa-wpforms"></i></a>
									<span class="badge" id="notification-list">{{landingPage.formsCount}}</span>
									</ng-container>
									<a *ngIf="landingPage.analyticsCount<=0" data-rel="fancybox-button" id="cursor-not-allowed" data-toggle="tooltip" data-placement="top" title="Analytics">
											<i class="fa fa-line-chart"></i>
									</a>
									<a *ngIf="landingPage.analyticsCount>0 && !isPartnerLandingPage" data-rel="fancybox-button" (click)="goToLandingPageAnalytics(landingPage.id)" data-toggle="tooltip" data-placement="top" title="Analytics">
										<i class="fa fa-line-chart"></i>
									</a>
									<a *ngIf="landingPage.analyticsCount>0 && isPartnerLandingPage" data-rel="fancybox-button" (click)="goToPartnerLandingPageAnalytics(landingPage.alias)" data-toggle="tooltip" data-placement="top" title="Analytics">
										<i class="fa fa-line-chart"></i>
									</a>
									<span class="badge" id="notification-list">{{landingPage.analyticsCount}}</span>
									<a *ngIf="!isPartnerLandingPage" data-toggle="tooltip" class="delete" data-placement="top" title="Delete" (click)="confirmDelete(landingPage)" >
										<i class="fa fa-trash-o"></i>
									</a>
								</div>
							</div>
						</div>
						</ng-container>
					</div>
				</div>
				  <div *ngIf="pagination.pagedItems.length !== 0">
					<app-pagination [pagination]="pagination" (notifyParent)="setPage($event)"
						(notifyParentDropDown)="listLandingPages($event)" [hidden]="httpRequestLoader.isLoading"></app-pagination>
				</div>
		        <div *ngIf="pagination.totalRecords==0 && !httpRequestLoader.isLoading" class="alert alert-info">
		          <strong>No Pages Found.</strong>
		        </div>
				
			</div>
			<!-- END PAGE CONTENT-->
		</div>
	</div>
	  <!-- ----------------------Copy Link Modal------------------- -->
  <div class="modal right " id="landing-page-url-modal" data-backdrop="static">
    <div class="modal-dialog modal-lg" style="width: 75%;right:0">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close-circle" data-dismiss="modal">
            <i class="fa fa-times"></i>
          </button>
          <h4 class="modal-title text-center">DIRECT LINK FOR YOUR PAGE</h4>
        </div>
        <div class="modal-body">
          <app-response-message [customResponse]="copiedLinkCustomResponse" *ngIf="copiedLinkCustomResponse.isVisible">
          </app-response-message>
           <input  type="text" class="form-control" readonly="readonly" [ngModel]="landingPageAliasUrl" #userinput>
        </div>
        <div class="modal-footer">
          <!-- <a class="btn btn-info" href="{{authenticationService.APP_URL}}f/{{form.alias}}" target="blank">Open in new tab</a> -->
          <a class="btn btn-primary" (click)="copyInputMessage(userinput)">Copy Link</a>
          <a data-dismiss="modal" class="btn btn-default" style="float: right">Close</a>
        </div>
      </div>
    </div>
  </div>
  <app-preview-landing-page #previewLandingPageComponent></app-preview-landing-page>
	<app-scroll-top></app-scroll-top>
</div>